{
	"name": "mainMenu",
	"events": [
		{
			"eventType": "include",
			"includeSheet": "global"
		},
		{
			"eventType": "variable",
			"name": "updateAvailable",
			"type": "boolean",
			"initialValue": "false",
			"comment": "Whether or not an update is available.",
			"isStatic": false,
			"isConstant": false,
			"sid": 348595350968897
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-object-clicked",
					"objectClass": "mouse",
					"sid": 628849515389079,
					"parameters": {
						"mouse-button": "left",
						"click-type": "clicked",
						"object-clicked": "play"
					}
				}
			],
			"actions": [
				{
					"id": "set-visible",
					"objectClass": "loadingScreen",
					"sid": 311439937347461,
					"parameters": {
						"visibility": "visible"
					}
				}
			],
			"sid": 387251329612208
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "is-visible",
					"objectClass": "loadingScreen",
					"sid": 307633937543268
				},
				{
					"id": "compare-two-values",
					"objectClass": "System",
					"sid": 670423744826685,
					"parameters": {
						"first-value": "LayoutName",
						"comparison": 0,
						"second-value": "\"mainMenu\""
					}
				},
				{
					"id": "trigger-once-while-true",
					"objectClass": "System",
					"sid": 132052492717525
				}
			],
			"actions": [
				{
					"type": "comment",
					"text": "Having this as a trigger and not as a sub-event under the play button click prevents a massive stutter, presumably caused by: The loading of the next layout commencing before the loadingScreen can be made visible."
				},
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 235547920437981,
					"parameters": {
						"variable": "previousLayout",
						"value": "LayoutName"
					}
				},
				{
					"id": "go-to-layout-by-name",
					"objectClass": "System",
					"sid": 425813163535950,
					"parameters": {
						"layout": "\"farm\""
					}
				}
			],
			"sid": 252869525891124
		},
		{
			"eventType": "comment",
			"text": "There's no way to do an \"On update not found\" trigger: https://www.construct.net/en/forum/construct-3/how-do-i-8/start-game-browser-not-update-175590"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-update-found-sw",
					"objectClass": "browser",
					"sid": 230525362101227
				}
			],
			"actions": [
				{
					"id": "set-boolean-eventvar",
					"objectClass": "System",
					"sid": 788244121458818,
					"parameters": {
						"variable": "updateAvailable",
						"value": "true"
					}
				},
				{
					"id": "set-text",
					"objectClass": "launcherMessage",
					"sid": 564874823409654,
					"parameters": {
						"text": "\"Update available. Downloading\""
					}
				}
			],
			"sid": 282848727504620
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-update-ready-sw",
					"objectClass": "browser",
					"sid": 800806806584944
				}
			],
			"actions": [
				{
					"id": "reload",
					"objectClass": "browser",
					"sid": 187265594295630
				}
			],
			"sid": 519782063417592
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "compare-boolean-eventvar",
					"objectClass": "System",
					"sid": 458324776673466,
					"parameters": {
						"variable": "updateAvailable"
					}
				},
				{
					"id": "every-x-seconds",
					"objectClass": "System",
					"sid": 725473517626348,
					"parameters": {
						"interval-seconds": "1.0"
					}
				}
			],
			"actions": [
				{
					"id": "set-text",
					"objectClass": "launcherMessage",
					"sid": 284985166909909,
					"parameters": {
						"text": "Self.Text = \"Update available. Downloading...\" ? \"Update available. Downloading\" : Self.Text & \".\""
					}
				}
			],
			"sid": 123077271397200
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-any-click",
					"objectClass": "mouse",
					"sid": 534646384122371
				},
				{
					"id": "on-any-key-pressed",
					"objectClass": "keyboard",
					"sid": 346196279412257
				}
			],
			"actions": [
				{
					"id": "log",
					"objectClass": "browser",
					"sid": 619530873243850,
					"parameters": {
						"type": "log",
						"message": "\"Current URL: \" & Self.URL"
					}
				}
			],
			"sid": 403514843034258,
			"children": [
				{
					"eventType": "variable",
					"name": "REQUIRED_PROTOCOL",
					"type": "string",
					"initialValue": "https:",
					"comment": "The required protocol.",
					"isStatic": false,
					"isConstant": true,
					"sid": 700212028262996
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "layer-is-visible",
							"objectClass": "System",
							"sid": 843857722539970,
							"parameters": {
								"layer": "\"launcher\""
							}
						},
						{
							"id": "compare-text",
							"objectClass": "launcherMessage",
							"sid": 706263120045641,
							"parameters": {
								"text-to-compare": "\"Press any key to start\"",
								"case-sensitivity": "ignore-case"
							}
						},
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 373770140686063,
							"parameters": {
								"first-value": "browser.Protocol",
								"comparison": 0,
								"second-value": "REQUIRED_PROTOCOL"
							}
						},
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 217642840212063,
							"parameters": {
								"value": "browser.Domain = \"preview.construct.net\" | browser.Domain = \"daggerquest.netlify.app\" | browser.Domain = \"daggerquesttest.netlify.app\""
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Verify we are on an approved URL at which we can play DaggerQuest"
						},
						{
							"id": "set-layer-visible",
							"objectClass": "System",
							"sid": 631789550966149,
							"parameters": {
								"layer": "\"launcher\"",
								"visibility": "invisible"
							}
						},
						{
							"id": "set-text",
							"objectClass": "versionText",
							"sid": 700194361988956,
							"parameters": {
								"text": "projectversion"
							}
						},
						{
							"id": "set-looping",
							"objectClass": "video",
							"sid": 396807237423762,
							"parameters": {
								"mode": "looping"
							}
						},
						{
							"id": "play",
							"objectClass": "video",
							"sid": 477631205210615
						},
						{
							"id": "play",
							"objectClass": "Audio",
							"sid": 564988041242043,
							"parameters": {
								"audio-file": "mainTheme",
								"loop": "looping",
								"volume": "-100",
								"stereo-pan": "0",
								"tag-optional": "\"main\""
							}
						},
						{
							"id": "fade-volume",
							"objectClass": "Audio",
							"sid": 504039863049416,
							"parameters": {
								"tag": "\"main\"",
								"db": "0",
								"duration": "5",
								"ending": "keep-playing"
							}
						}
					],
					"sid": 548421181255801,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-in-preview",
									"objectClass": "System",
									"sid": 389419661755640,
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "request-fullscreen",
									"objectClass": "browser",
									"sid": 224313851080210,
									"parameters": {
										"mode": "stretch-letterbox-scale",
										"navigation-ui": "auto"
									}
								}
							],
							"sid": 142253453144409
						}
					]
				}
			],
			"isOrBlock": true
		}
	],
	"sid": 722961205554376
}