{
	"name": "eventSheet",
	"events": [
		{
			"eventType": "variable",
			"name": "nextAvailableIdentifier",
			"type": "number",
			"initialValue": "1",
			"comment": "Stores the next available identifier, to be assigned to equipment",
			"isStatic": false,
			"isConstant": false,
			"sid": 782649170393674
		},
		{
			"eventType": "variable",
			"name": "dataLoaded",
			"type": "boolean",
			"initialValue": "false",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 244467423019426
		},
		{
			"eventType": "variable",
			"name": "characterLoaded",
			"type": "boolean",
			"initialValue": "false",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 699653838409836
		},
		{
			"eventType": "variable",
			"name": "npcsLoaded",
			"type": "boolean",
			"initialValue": "false",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 359113346407799
		},
		{
			"eventType": "variable",
			"name": "enemiesLoaded",
			"type": "boolean",
			"initialValue": "false",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 554154862214930
		},
		{
			"eventType": "variable",
			"name": "abilitiesLoaded",
			"type": "boolean",
			"initialValue": "false",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 791104036641885
		},
		{
			"eventType": "variable",
			"name": "fpsOfAnimations",
			"type": "number",
			"initialValue": "30",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 975162776320766
		},
		{
			"eventType": "variable",
			"name": "interactCooldown",
			"type": "number",
			"initialValue": "0.3",
			"comment": "how frequently to let the player interact with things",
			"isStatic": false,
			"isConstant": true,
			"sid": 759733211743524
		},
		{
			"eventType": "variable",
			"name": "isOnInteractCooldown",
			"type": "boolean",
			"initialValue": "false",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 900247445259502
		},
		{
			"eventType": "variable",
			"name": "uidOfClicked",
			"type": "number",
			"initialValue": "0",
			"comment": "the UID of the out-of-range object that was clicked",
			"isStatic": false,
			"isConstant": false,
			"sid": 329086069473022
		},
		{
			"eventType": "variable",
			"name": "ticksPerSecond",
			"type": "number",
			"initialValue": "60",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 884640693658179
		},
		{
			"eventType": "variable",
			"name": "animationDivisor",
			"type": "number",
			"initialValue": "7",
			"comment": "number by which to divide the movement speed to obtain the animation speed",
			"isStatic": false,
			"isConstant": true,
			"sid": 916597361761975
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "npc",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "variable",
					"name": "dialogOpen",
					"type": "boolean",
					"initialValue": "false",
					"comment": "Whether or not the player is talking to an NPC",
					"isStatic": true,
					"isConstant": false,
					"sid": 716778298221880
				},
				{
					"eventType": "variable",
					"name": "portraitPosition",
					"type": "number",
					"initialValue": "1280",
					"comment": "The position on the X axis of where the portrait should spawn",
					"isStatic": false,
					"isConstant": true,
					"sid": 795195881715473
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-signal",
							"objectClass": "System",
							"sid": 993880984395056,
							"parameters": {
								"tag": "\"startLoading\""
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "TODO: Make sure this works with multiple NPCs",
							"background-color": [
								1,
								1,
								0,
								1
							]
						}
					],
					"sid": 295343820530030,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 140298723926199,
									"parameters": {
										"object": "npc"
									}
								}
							],
							"actions": [
								{
									"id": "create-object-by-name",
									"objectClass": "System",
									"sid": 822601046469838,
									"parameters": {
										"object-name": "npc.simpleName",
										"layer": "\"main\"",
										"x": "npc.X",
										"y": "npc.Y",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								}
							],
							"sid": 613276139234650
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-last-created",
									"objectClass": "System",
									"sid": 465897373035454,
									"parameters": {
										"object": "npcBody"
									}
								}
							],
							"actions": [
								{
									"id": "add-child",
									"objectClass": "npc",
									"sid": 101586874540849,
									"parameters": {
										"child": "npcBody",
										"transform-x": true,
										"transform-y": true,
										"transform-w": false,
										"transform-h": false,
										"transform-a": false,
										"transform-o": false,
										"transform-z-elevation": false,
										"transform-visibility": false,
										"destroy-with-parent": false
									}
								}
							],
							"sid": 508832258388582
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 549925325490944,
									"parameters": {
										"variable": "npcsLoaded",
										"value": "true"
									}
								}
							],
							"sid": 138806220413212
						}
					]
				},
				{
					"functionName": "beginDialog",
					"functionDescription": "Begin dialog with an NPC",
					"functionCategory": "general",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "npc",
							"sid": 983311193438610,
							"parameters": {
								"instance-variable": "degrees",
								"value": "round(angle(Self.X, Self.Y, player.X, player.Y) / 22.5) * 22.5"
							}
						},
						{
							"id": "set-text",
							"objectClass": "dialogNpcName",
							"sid": 799448355983987,
							"parameters": {
								"text": "lowercase(npc.fullName)"
							}
						},
						{
							"id": "set-text",
							"objectClass": "dialogText",
							"sid": 385882831899065,
							"parameters": {
								"text": "Functions.arrayLookup(npcDialogArray.ObjectTypeName, \"npc\", npc.simpleName, \"message\")"
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 868837751437743,
							"parameters": {
								"seconds": "0"
							}
						},
						{
							"callFunction": "openLayer",
							"sid": 831983067626887,
							"parameters": [
								"\"dialog\""
							]
						}
					],
					"sid": 447936217417067,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "npc",
									"sid": 931230382108786,
									"parameters": {
										"instance-variable": "degrees",
										"comparison": 0,
										"value": "-180"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "npc",
									"sid": 270750691270698,
									"parameters": {
										"instance-variable": "degrees",
										"value": "180"
									}
								}
							],
							"sid": 269735696328506
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "npcBody",
									"sid": 911458837719317,
									"parameters": {
										"animation": "\"idle_\" & npc.degrees",
										"from": "current-frame"
									}
								},
								{
									"callFunction": "updateFacing",
									"sid": 448911465043330,
									"parameters": [
										"npc.X",
										"npc.Y"
									]
								},
								{
									"callFunction": "updateAnimations",
									"sid": 192789731455103,
									"parameters": [
										"\"idle\"",
										"10",
										"\"playFromCurrentFrame\""
									]
								}
							],
							"sid": 456764690419840
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 844928225366240,
									"parameters": {
										"object": "portrait",
										"expression": "portrait.ObjectTypeName",
										"comparison": 0,
										"value": "npc.simpleName & \"_portrait\""
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "...if a portrait for it already exists, do nothing"
								}
							],
							"sid": 946182224464701
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 212489894903979
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "â€¦otherwise, destroy all portraits, and spawn a portrait for this NPC"
								},
								{
									"id": "destroy",
									"objectClass": "portrait",
									"sid": 184313260669034
								},
								{
									"id": "unload-object-images",
									"objectClass": "System",
									"sid": 617397566731158,
									"parameters": {
										"object": "portrait"
									}
								},
								{
									"id": "create-object-by-name",
									"objectClass": "System",
									"sid": 386217379259261,
									"parameters": {
										"object-name": "npc.simpleName & \"_portrait\"",
										"layer": "\"portraits\"",
										"x": "portraitPosition",
										"y": "ViewportBottom(\"portraits\")",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								}
							],
							"sid": 418343579746860,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-last-created",
											"objectClass": "System",
											"sid": 480662242760595,
											"parameters": {
												"object": "portrait"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "parent it to the mana cover so it resizes correctly. We would use anchor, but we can't set its parameters during the runtime"
										},
										{
											"id": "add-child",
											"objectClass": "manaCover",
											"sid": 488886012167441,
											"parameters": {
												"child": "portrait",
												"transform-x": true,
												"transform-y": true,
												"transform-w": false,
												"transform-h": false,
												"transform-a": false,
												"transform-o": false,
												"transform-z-elevation": false,
												"transform-visibility": false,
												"destroy-with-parent": false
											}
										},
										{
											"type": "comment",
											"text": "override the global timescale so we can still fade out on pause"
										},
										{
											"id": "set-object-time-scale",
											"objectClass": "System",
											"sid": 726994785143505,
											"parameters": {
												"object": "portrait",
												"time-scale": "1.0"
											}
										},
										{
											"id": "set-opacity",
											"objectClass": "portrait",
											"sid": 765346176114475,
											"parameters": {
												"opacity": "0"
											}
										},
										{
											"id": "tween-one-property",
											"objectClass": "portrait",
											"sid": 571623297068430,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"\"",
												"property": "offsetOpacity",
												"end-value": "100",
												"time": ".2",
												"ease": "noease",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 166629566598268
								}
							]
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "npc",
							"sid": 886572544963710,
							"parameters": {
								"object": "player"
							}
						}
					],
					"actions": [
						{
							"id": "push-out-solid",
							"objectClass": "player",
							"sid": 947588256996462,
							"behaviorType": "Custom",
							"parameters": {
								"direction": "nearest"
							}
						}
					],
					"sid": 102494875690120
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "mouse-button-is-down",
							"objectClass": "mouse",
							"sid": 919419578550358,
							"parameters": {
								"mouse-button": "left"
							}
						},
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 253670829164996,
							"parameters": {
								"first-value": "portrait.Count",
								"comparison": 1,
								"second-value": "0"
							}
						},
						{
							"id": "cursor-is-over-object",
							"objectClass": "mouse",
							"sid": 136561268503382,
							"parameters": {
								"object": "npcBody"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "if we click anywhere that's not an NPC, and there's a portrait up, destroy all portraits"
						},
						{
							"callFunction": "closeDialog",
							"sid": 997024975471915
						}
					],
					"sid": 607267948456563
				},
				{
					"functionName": "closeDialog",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "tween-one-property",
							"objectClass": "portrait",
							"sid": 722549384981587,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"\"",
								"property": "offsetOpacity",
								"end-value": "0",
								"time": ".2",
								"ease": "noease",
								"destroy-on-complete": "yes",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 342685698941577
						},
						{
							"callFunction": "closeLayer",
							"sid": 452768771181338,
							"parameters": [
								"\"dialog\""
							]
						},
						{
							"id": "unload-object-images",
							"objectClass": "System",
							"sid": 659778460881200,
							"parameters": {
								"object": "portrait"
							}
						}
					],
					"sid": 396375011211115
				}
			],
			"sid": 217312584951758
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "equipment",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "variable",
					"name": "swapID",
					"type": "number",
					"initialValue": "0",
					"comment": "the identifier of the equipped item, so we can swap it",
					"isStatic": true,
					"isConstant": false,
					"sid": 841899330934363
				},
				{
					"eventType": "variable",
					"name": "swapSlotUID",
					"type": "number",
					"initialValue": "0",
					"comment": "the UID of the original slot in a swap",
					"isStatic": true,
					"isConstant": false,
					"sid": 592861658035522
				},
				{
					"eventType": "variable",
					"name": "draggedOriginSlotUID",
					"type": "number",
					"initialValue": "0",
					"comment": "the UID of the slot the drag originated from",
					"isStatic": true,
					"isConstant": false,
					"sid": 201307089918324
				},
				{
					"eventType": "variable",
					"name": "dragCacheItemUID",
					"type": "number",
					"initialValue": "0",
					"comment": "the UID of the item we're dragging",
					"isStatic": true,
					"isConstant": false,
					"sid": 298078267734463
				},
				{
					"eventType": "variable",
					"name": "dragCacheSlotUID",
					"type": "number",
					"initialValue": "0",
					"comment": "the UID of the slot we dropped on",
					"isStatic": true,
					"isConstant": false,
					"sid": 422173916162530
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "loot",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "keyboard",
									"sid": 704807057576814,
									"parameters": {
										"key": 83
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Development: so we can spawn loot quickly",
									"text-color": [
										1,
										1,
										1,
										1
									],
									"background-color": [
										0,
										0,
										1,
										1
									]
								},
								{
									"callFunction": "spawnLoot",
									"sid": 642323707189951,
									"parameters": [
										"player.X",
										"player.Y"
									]
								}
							],
							"sid": 349355571470231
						},
						{
							"functionName": "pickUpLoot",
							"functionDescription": "Picking up loot and turning it into an item",
							"functionCategory": "equipment",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 369764335379107,
									"parameters": {
										"variable": "isOnInteractCooldown",
										"value": "true"
									}
								}
							],
							"sid": 653257849123262,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-checked",
											"objectClass": "autoEquip",
											"sid": 699016538599260
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 132160082475010,
											"parameters": {
												"value": "find(loot.classRestrictions, player.class) <> -1 | findCase(loot.classRestrictions, \"All Classes\") <> - 1"
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "player",
											"sid": 730282754581605,
											"parameters": {
												"instance-variable": "level",
												"comparison": 5,
												"value": "loot.level"
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 664728702172861,
											"parameters": {
												"object": "slot",
												"expression": "slot.type",
												"comparison": 0,
												"value": "loot.type"
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 492799500541261,
											"parameters": {
												"object": "slot",
												"expression": "slot.identifier",
												"comparison": 0,
												"value": "0"
											}
										},
										{
											"id": "pick-nth-instance",
											"objectClass": "System",
											"sid": 452173619109154,
											"parameters": {
												"object": "slot",
												"instance": "0"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if auto equip is enabled, and the player's class matches the loot's restrictions, pick the first empty slot matching the loot's type, and spawn the item there"
										},
										{
											"id": "create-object-by-name",
											"objectClass": "System",
											"sid": 330878443862984,
											"parameters": {
												"object-name": "loot.simpleName & \"_item\"",
												"layer": "\"characterMenu\"",
												"x": "slot.X",
												"y": "slot.Y",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										}
									],
									"sid": 417026782949109,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-last-created",
													"objectClass": "System",
													"sid": 958412799812861,
													"parameters": {
														"object": "item"
													}
												}
											],
											"actions": [
												{
													"callFunction": "setItemVariables",
													"sid": 578892715081229
												},
												{
													"callFunction": "queueGearManagement",
													"sid": 389861615475309
												},
												{
													"callFunction": "manageMods",
													"sid": 975152866924711,
													"parameters": [
														true
													]
												}
											],
											"sid": 323602104316470
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 341369713051807
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 740204793762600,
											"parameters": {
												"object": "slot",
												"expression": "slot.type",
												"comparison": 0,
												"value": "\"none\""
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 772858798512530,
											"parameters": {
												"object": "slot",
												"expression": "slot.identifier",
												"comparison": 0,
												"value": "0"
											}
										},
										{
											"id": "pick-nth-instance",
											"objectClass": "System",
											"sid": 196356171794867,
											"parameters": {
												"object": "slot",
												"instance": "0"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if auto equip is disabled, or there's no empty slots matching the item's type, spawn the item in the first empty inventory slot."
										},
										{
											"id": "create-object-by-name",
											"objectClass": "System",
											"sid": 885272990136247,
											"parameters": {
												"object-name": "loot.simpleName & \"_item\"",
												"layer": "\"inventoryMenu\"",
												"x": "slot.X",
												"y": "slot.Y",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										}
									],
									"sid": 658192619640202,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-last-created",
													"objectClass": "System",
													"sid": 483526905581318,
													"parameters": {
														"object": "item"
													}
												}
											],
											"actions": [
												{
													"callFunction": "setItemVariables",
													"sid": 356730110629027
												}
											],
											"sid": 319164556849852
										}
									]
								}
							]
						},
						{
							"functionName": "setItemVariables",
							"functionDescription": "set the variables on an item, from its loot",
							"functionCategory": "equipment",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 695618123166718,
									"parameters": {
										"instance-variable": "identifier",
										"value": "loot.identifier"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 894947352405585,
									"parameters": {
										"instance-variable": "simpleName",
										"value": "loot.simpleName"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 682567391690132,
									"parameters": {
										"instance-variable": "fullName",
										"value": "loot.fullName"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 112068630443208,
									"parameters": {
										"instance-variable": "type",
										"value": "loot.type"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 728841582247601,
									"parameters": {
										"instance-variable": "lore",
										"value": "loot.lore"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 358574228575891,
									"parameters": {
										"instance-variable": "level",
										"value": "loot.level"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 904449258452233,
									"parameters": {
										"instance-variable": "mods",
										"value": "loot.mods"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 968287328115240,
									"parameters": {
										"instance-variable": "classRestrictions",
										"value": "loot.classRestrictions"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 701634170777121,
									"parameters": {
										"instance-variable": "modTable",
										"value": "loot.modTable"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "slot",
									"sid": 818920739961129,
									"parameters": {
										"instance-variable": "identifier",
										"value": "item.identifier"
									}
								},
								{
									"id": "add-child",
									"objectClass": "slot",
									"sid": 418593601200365,
									"parameters": {
										"child": "item",
										"transform-x": true,
										"transform-y": true,
										"transform-w": false,
										"transform-h": false,
										"transform-a": false,
										"transform-o": false,
										"transform-z-elevation": false,
										"transform-visibility": false,
										"destroy-with-parent": true
									}
								},
								{
									"id": "destroy",
									"objectClass": "loot",
									"sid": 354827222227349
								}
							],
							"sid": 441193875115599,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-overlapping-point",
											"objectClass": "System",
											"sid": 666223508174307,
											"parameters": {
												"object": "placeholder",
												"x": "item.X",
												"y": "item.Y"
											}
										}
									],
									"actions": [
										{
											"id": "set-visible",
											"objectClass": "placeholder",
											"sid": 168572126852132,
											"parameters": {
												"visibility": "invisible"
											}
										}
									],
									"sid": 581771949495265
								}
							]
						},
						{
							"functionName": "spawnLoot",
							"functionDescription": "spawn loot at the specified location",
							"functionCategory": "equipment",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "x",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"sid": 839401055522675
								},
								{
									"name": "y",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"sid": 508129132310762
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "create-object-by-name",
									"objectClass": "System",
									"sid": 210734168625939,
									"parameters": {
										"object-name": "advancedRandom.WeightedByName(\"equipment\") & \"_loot\"",
										"layer": "\"background\"",
										"x": "x",
										"y": "y",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								}
							],
							"sid": 144578606465063,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-last-created",
											"objectClass": "System",
											"sid": 608751264424369,
											"parameters": {
												"object": "loot"
											}
										}
									],
									"actions": [
										{
											"id": "set-animation",
											"objectClass": "loot",
											"sid": 673314269713725,
											"parameters": {
												"animation": "\"static_\" & (floor(random(1, 17)) * 22.5) - 180",
												"from": "beginning"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 500570871920815,
											"parameters": {
												"instance-variable": "identifier",
												"value": "nextAvailableIdentifier"
											}
										},
										{
											"id": "add-to-eventvar",
											"objectClass": "System",
											"sid": 292727294235481,
											"parameters": {
												"variable": "nextAvailableIdentifier",
												"value": "1"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 937896836624100,
											"parameters": {
												"instance-variable": "simpleName",
												"value": "tokenat(loot.ObjectTypeName, 0, \"_\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 387156835177166,
											"parameters": {
												"instance-variable": "fullName",
												"value": "Functions.arrayLookup(equipmentArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"fullName\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 740584911958729,
											"parameters": {
												"instance-variable": "type",
												"value": "Functions.arrayLookup(equipmentArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"type\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 360927318720871,
											"parameters": {
												"instance-variable": "lore",
												"value": "Functions.arrayLookup(equipmentArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"lore\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 992658870893090,
											"parameters": {
												"instance-variable": "level",
												"value": "Functions.arrayLookup(equipmentArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"level\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 431466943186454,
											"parameters": {
												"instance-variable": "classRestrictions",
												"value": "Functions.arrayLookup(equipmentArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"classRestrictions\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 181518222104383,
											"parameters": {
												"instance-variable": "modTable",
												"value": "Functions.arrayLookup(equipmentArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"modTable\")"
											}
										}
									],
									"sid": 365625576088734,
									"children": [
										{
											"eventType": "variable",
											"name": "mod",
											"type": "string",
											"initialValue": "",
											"comment": "",
											"isStatic": true,
											"isConstant": false,
											"sid": 246965271765553
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "repeat",
													"objectClass": "System",
													"sid": 448899714769576,
													"parameters": {
														"count": "round(random(1,4))"
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 446693176521729,
													"parameters": {
														"variable": "mod",
														"value": "advancedRandom.WeightedByName(loot.modTable)"
													}
												},
												{
													"id": "add-to-instvar",
													"objectClass": "loot",
													"sid": 696283491550463,
													"parameters": {
														"instance-variable": "mods",
														"value": "mod &  \":\" & Functions.arrayLookup(modsArray.ObjectTypeName, \"simpleName\", mod, \"description\") & \";\""
													}
												}
											],
											"sid": 375380483704702
										},
										{
											"eventType": "variable",
											"name": "modValueRegex",
											"type": "string",
											"initialValue": "\\[.*?\\]",
											"comment": "the regex that will return the first mod value",
											"isStatic": true,
											"isConstant": true,
											"sid": 168471026558236
										},
										{
											"eventType": "variable",
											"name": "modValue",
											"type": "string",
											"initialValue": "",
											"comment": "The text inside the brackets of a given mod",
											"isStatic": true,
											"isConstant": false,
											"sid": 675449617154846
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "for",
													"objectClass": "System",
													"sid": 114331841409558,
													"parameters": {
														"name": "\"\"",
														"start-index": "1",
														"end-index": "RegexMatchCount(loot.mods, modValueRegex, \"g\")"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "for each set of square brackets in this loot's mods"
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 809453843635835,
													"parameters": {
														"variable": "modValue",
														"value": "RegexReplace(RegexMatchAt(loot.mods, modValueRegex, \"\", 0), \"\\[|]\", \"g\", \"\")"
													}
												}
											],
											"sid": 668230999384246,
											"children": [
												{
													"eventType": "variable",
													"name": "lowerLimit",
													"type": "number",
													"initialValue": "0",
													"comment": "the lowest number that this mod can roll",
													"isStatic": true,
													"isConstant": false,
													"sid": 694917693599524
												},
												{
													"eventType": "variable",
													"name": "upperLimit",
													"type": "number",
													"initialValue": "0",
													"comment": "the highest number that this mod can roll",
													"isStatic": true,
													"isConstant": false,
													"sid": 136852260606726
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 221351255110008,
															"parameters": {
																"first-value": "find(modValue, \"-\")",
																"comparison": 1,
																"second-value": "-1"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "if this particular value contains a dash, it's a numeric value"
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 461581557850035,
															"parameters": {
																"variable": "lowerLimit",
																"value": "int(tokenat(modValue, 0, \"-\")) * loot.level"
															}
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 841670533825303,
															"parameters": {
																"variable": "upperLimit",
																"value": "int(tokenat(modValue, 1, \"-\")) * loot.level"
															}
														},
														{
															"id": "setProbabilityTable",
															"objectClass": "advancedRandom",
															"sid": 264346351548282,
															"parameters": {
																"name": "\"modValues\""
															}
														}
													],
													"sid": 878549987436267,
													"children": [
														{
															"eventType": "comment",
															"text": "Set a numeric mod's value to a random number between the lower and upper limit. Higher numbers are rarer. The rarity of higher numbers diminishingly scales with the loot level."
														},
														{
															"eventType": "comment",
															"text": "TODO: Negative values - should lower numbers be better? or worse?",
															"background-color": [
																0.984313725490196,
																1,
																0,
																1
															]
														},
														{
															"eventType": "variable",
															"name": "total",
															"type": "number",
															"initialValue": "0",
															"comment": "the total weight of all possible mod values, unconverted",
															"isStatic": true,
															"isConstant": false,
															"sid": 275844986849541
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "for",
																	"objectClass": "System",
																	"sid": 219774906891118,
																	"parameters": {
																		"name": "\"\"",
																		"start-index": "lowerLimit",
																		"end-index": "upperLimit"
																	}
																}
															],
															"actions": [
																{
																	"id": "add-to-eventvar",
																	"objectClass": "System",
																	"sid": 213474108009376,
																	"parameters": {
																		"variable": "total",
																		"value": "Functions.standardizeModValue(lowerLimit, upperLimit, loopindex)"
																	}
																}
															],
															"sid": 231459355083010
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "for",
																	"objectClass": "System",
																	"sid": 584623522244621,
																	"parameters": {
																		"name": "\"\"",
																		"start-index": "lowerLimit",
																		"end-index": "upperLimit"
																	}
																}
															],
															"actions": [
																{
																	"id": "addProbabilityEntry",
																	"objectClass": "advancedRandom",
																	"sid": 526391445067413,
																	"parameters": {
																		"value": "loopindex * (.1 ^ RegexMatchCount(modValue, \"x\", \"g\"))",
																		"weight": "Functions.standardizeModValue(lowerLimit, upperLimit, loopindex) / total"
																	}
																},
																{
																	"type": "comment",
																	"text": "the number of Xs in the mod value is the number of decimal places to shift the result. We have to do it this way because of floating point math problems"
																}
															],
															"sid": 455988557394103
														},
														{
															"eventType": "block",
															"conditions": [],
															"actions": [
																{
																	"id": "set-instvar-value",
																	"objectClass": "loot",
																	"sid": 461098221041892,
																	"parameters": {
																		"instance-variable": "mods",
																		"value": "RegexReplace(Self.mods, modValueRegex, \"\", \"{\" & advancedRandom.Weighted & \"}\")"
																	}
																},
																{
																	"id": "set-eventvar-value",
																	"objectClass": "System",
																	"sid": 161370364305718,
																	"parameters": {
																		"variable": "total",
																		"value": "0"
																	}
																}
															],
															"sid": 424302104263233
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "for",
																	"objectClass": "System",
																	"sid": 887803499960340,
																	"parameters": {
																		"name": "\"\"",
																		"start-index": "lowerLimit",
																		"end-index": "upperLimit"
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "We can remove an entire mod table, so remove the entries the same way we added them"
																},
																{
																	"id": "removeProbabilityEntry",
																	"objectClass": "advancedRandom",
																	"sid": 235462776396470,
																	"parameters": {
																		"value": "loopindex * (.1 ^ RegexMatchCount(modValue, \"x\", \"g\"))",
																		"weight": "0"
																	}
																}
															],
															"sid": 533866735890312
														}
													]
												},
												{
													"eventType": "comment",
													"text": "For text mod values, select a choice at random"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 834396030101558
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "if it doesn't, it should contain a dollar sign, which means it's a text value"
														},
														{
															"id": "set-instvar-value",
															"objectClass": "loot",
															"sid": 835948514084487,
															"parameters": {
																"instance-variable": "mods",
																"value": "RegexReplace(Self.mods, modValueRegex, \"\", \"{\" & tokenat(modValue, floor(random(tokencount(modValue, \"$\"))), \"$\") & \"}\")"
															}
														}
													],
													"sid": 734276999010657
												}
											]
										}
									]
								}
							]
						},
						{
							"functionName": "standardizeModValue",
							"functionDescription": "Standardize the possible value of a mod to a uniform range",
							"functionCategory": "mods",
							"functionReturnType": "number",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "lowerLimit",
									"type": "number",
									"initialValue": "0",
									"comment": "the lowest number that this mod can roll",
									"sid": 165700446124118
								},
								{
									"name": "upperLimit",
									"type": "number",
									"initialValue": "0",
									"comment": "the highest number that this mod can roll",
									"sid": 140901520535839
								},
								{
									"name": "currentLoopindex",
									"type": "number",
									"initialValue": "0",
									"comment": "the loopindex of the current loop over possible mod values",
									"sid": 762366194120232
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-function-return-value",
									"objectClass": "Functions",
									"sid": 237729906977959,
									"parameters": {
										"value": "lerp(loot.level, 1, unlerp(lowerLimit, upperLimit, currentLoopindex))"
									}
								}
							],
							"sid": 949225567251958
						}
					],
					"sid": 258106155275995
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "items",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-object-clicked",
									"objectClass": "mouse",
									"sid": 935398605095828,
									"parameters": {
										"mouse-button": "right",
										"click-type": "clicked",
										"object-clicked": "item"
									}
								},
								{
									"id": "layer-is-interactive",
									"objectClass": "System",
									"sid": 588715691115645,
									"parameters": {
										"layer": "\"characterMenu\""
									}
								},
								{
									"id": "layer-is-interactive",
									"objectClass": "System",
									"sid": 771285086035772,
									"parameters": {
										"layer": "\"inventoryMenu\""
									}
								},
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 560608246182680,
									"parameters": {
										"object": "slot",
										"expression": "slot.identifier",
										"comparison": 0,
										"value": "item.identifier"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "if an item is right clicked, and both the inventory and character menus are open, pick the slot the item is in"
								},
								{
									"callFunction": "updateAnimations",
									"sid": 694946160892797,
									"parameters": [
										"\"idle\"",
										"fpsOfAnimations",
										"\"playFromBeginning\""
									]
								}
							],
							"sid": 437401110381303,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "slot",
											"sid": 610832630764773,
											"parameters": {
												"instance-variable": "type",
												"comparison": 0,
												"value": "item.type"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if the item is in the character menu"
										}
									],
									"sid": 550305845027586,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-all",
													"objectClass": "System",
													"sid": 484307946857076,
													"parameters": {
														"object": "slot"
													}
												},
												{
													"id": "pick-by-evaluate",
													"objectClass": "System",
													"sid": 604194622057872,
													"parameters": {
														"object": "slot",
														"expression": "slot.type = \"none\" & slot.identifier = 0"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "check to see if there's any empty inventory slots the item can go into"
												}
											],
											"sid": 220568365792590,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-all",
															"objectClass": "System",
															"sid": 469443065346884,
															"parameters": {
																"object": "slot"
															}
														},
														{
															"id": "pick-by-comparison",
															"objectClass": "System",
															"sid": 352754287175001,
															"parameters": {
																"object": "slot",
																"expression": "slot.identifier",
																"comparison": 0,
																"value": "item.identifier"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "if there are, detach the item from its current slot"
														},
														{
															"callFunction": "detachItem",
															"sid": 835207460693215
														},
														{
															"callFunction": "queueGearManagement",
															"sid": 609886070905927
														},
														{
															"callFunction": "manageMods",
															"sid": 136639627650351,
															"parameters": [
																false
															]
														}
													],
													"sid": 152222844229358,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "pick-all",
																	"objectClass": "System",
																	"sid": 828249338222470,
																	"parameters": {
																		"object": "slot"
																	}
																},
																{
																	"id": "pick-by-evaluate",
																	"objectClass": "System",
																	"sid": 248233827646714,
																	"parameters": {
																		"object": "slot",
																		"expression": "slot.type = \"none\" & slot.identifier = 0"
																	}
																},
																{
																	"id": "pick-nth-instance",
																	"objectClass": "System",
																	"sid": 480399471336736,
																	"parameters": {
																		"object": "slot",
																		"instance": "0"
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "then attach it to the first empty inventory slot"
																},
																{
																	"callFunction": "attachItem",
																	"sid": 113775732412119
																}
															],
															"sid": 800622303427423
														}
													]
												}
											]
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 441782255501353
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 341490887870542,
											"parameters": {
												"value": "find(item.classRestrictions, player.class) <> -1 | findCase(item.classRestrictions, \"All Classes\") <> - 1"
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "player",
											"sid": 610017096337653,
											"parameters": {
												"instance-variable": "level",
												"comparison": 5,
												"value": "item.level"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if the item is in the inventory menu, and can be equipped"
										}
									],
									"sid": 469557265898529,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-all",
													"objectClass": "System",
													"sid": 561748002048200,
													"parameters": {
														"object": "slot"
													}
												},
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 821642348770305,
													"parameters": {
														"object": "slot",
														"expression": "slot.type",
														"comparison": 0,
														"value": "item.type"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "pick the slots that match the item's type"
												}
											],
											"sid": 373573424048934,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-by-comparison",
															"objectClass": "System",
															"sid": 980800715661354,
															"parameters": {
																"object": "slot",
																"expression": "slot.identifier",
																"comparison": 0,
																"value": "0"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "of those slots, check if any are empty"
														}
													],
													"sid": 141790148535618,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "pick-all",
																	"objectClass": "System",
																	"sid": 127707970504769,
																	"parameters": {
																		"object": "slot"
																	}
																},
																{
																	"id": "pick-by-comparison",
																	"objectClass": "System",
																	"sid": 916325906161856,
																	"parameters": {
																		"object": "slot",
																		"expression": "slot.identifier",
																		"comparison": 0,
																		"value": "item.identifier"
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "now that we know there's an empty character slot for this item, go back to the slot holding our item, and detach"
																},
																{
																	"callFunction": "detachItem",
																	"sid": 214449577715308
																}
															],
															"sid": 887468038183702,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "pick-all",
																			"objectClass": "System",
																			"sid": 354047122038983,
																			"parameters": {
																				"object": "slot"
																			}
																		},
																		{
																			"id": "pick-by-evaluate",
																			"objectClass": "System",
																			"sid": 301471495040907,
																			"parameters": {
																				"object": "slot",
																				"expression": "slot.type = item.type & slot.identifier = 0"
																			}
																		},
																		{
																			"id": "pick-nth-instance",
																			"objectClass": "System",
																			"sid": 318274835792837,
																			"parameters": {
																				"object": "slot",
																				"instance": "0"
																			}
																		}
																	],
																	"actions": [
																		{
																			"type": "comment",
																			"text": "re-pick the first empty character slot that matches the item's type, and attach to it"
																		},
																		{
																			"callFunction": "attachItem",
																			"sid": 383335703408057
																		},
																		{
																			"callFunction": "queueGearManagement",
																			"sid": 530233516824490
																		},
																		{
																			"callFunction": "manageMods",
																			"sid": 759946137376178,
																			"parameters": [
																				true
																			]
																		}
																	],
																	"sid": 919076443516843
																}
															]
														}
													]
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 796533398948327
														},
														{
															"id": "pick-nth-instance",
															"objectClass": "System",
															"sid": 577614967156832,
															"parameters": {
																"object": "slot",
																"instance": "0"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "if no slots are empty, start the *swap*: pick the first slot and store its identifier, which is also the identifier of the item in it"
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 526168207309239,
															"parameters": {
																"variable": "swapID",
																"value": "slot.identifier"
															}
														}
													],
													"sid": 499823969870056,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "pick-all",
																	"objectClass": "System",
																	"sid": 263997570996260,
																	"parameters": {
																		"object": "slot"
																	}
																},
																{
																	"id": "pick-by-comparison",
																	"objectClass": "System",
																	"sid": 725741161718299,
																	"parameters": {
																		"object": "slot",
																		"expression": "slot.identifier",
																		"comparison": 0,
																		"value": "item.identifier"
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "go back to the slot holding our item, and detach. save this slots UID so we know where to put the other item"
																},
																{
																	"id": "set-eventvar-value",
																	"objectClass": "System",
																	"sid": 834702856921462,
																	"parameters": {
																		"variable": "swapSlotUID",
																		"value": "slot.UID"
																	}
																},
																{
																	"type": "comment",
																	"text": "for some reason this isn't a function and I'm too scared to change it to one"
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "slot",
																	"sid": 718669814539874,
																	"parameters": {
																		"instance-variable": "identifier",
																		"value": "0"
																	}
																},
																{
																	"id": "remove-from-parent",
																	"objectClass": "item",
																	"sid": 295226669901879
																}
															],
															"sid": 240232231168794,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "pick-all",
																			"objectClass": "System",
																			"sid": 836733709612203,
																			"parameters": {
																				"object": "slot"
																			}
																		},
																		{
																			"id": "pick-by-comparison",
																			"objectClass": "System",
																			"sid": 330368232721342,
																			"parameters": {
																				"object": "slot",
																				"expression": "slot.type",
																				"comparison": 0,
																				"value": "item.type"
																			}
																		},
																		{
																			"id": "pick-nth-instance",
																			"objectClass": "System",
																			"sid": 555943012192629,
																			"parameters": {
																				"object": "slot",
																				"instance": "0"
																			}
																		}
																	],
																	"actions": [
																		{
																			"type": "comment",
																			"text": "re-pick the first character slot that matches the item's type, and attach to it, even though it has an different item in it"
																		},
																		{
																			"callFunction": "attachItem",
																			"sid": 937442492661944
																		},
																		{
																			"callFunction": "queueGearManagement",
																			"sid": 950011551312166
																		},
																		{
																			"callFunction": "manageMods",
																			"sid": 274669631608298,
																			"parameters": [
																				true
																			]
																		}
																	],
																	"sid": 933613637577582,
																	"children": [
																		{
																			"eventType": "block",
																			"conditions": [
																				{
																					"id": "pick-all",
																					"objectClass": "System",
																					"sid": 231628781161458,
																					"parameters": {
																						"object": "item"
																					}
																				},
																				{
																					"id": "pick-by-comparison",
																					"objectClass": "System",
																					"sid": 193745971658093,
																					"parameters": {
																						"object": "item",
																						"expression": "item.identifier",
																						"comparison": 0,
																						"value": "swapID"
																					}
																				},
																				{
																					"id": "pick-all",
																					"objectClass": "System",
																					"sid": 408955921587844,
																					"parameters": {
																						"object": "slot"
																					}
																				},
																				{
																					"id": "pick-by-comparison",
																					"objectClass": "System",
																					"sid": 408279037831258,
																					"parameters": {
																						"object": "slot",
																						"expression": "slot.UID",
																						"comparison": 0,
																						"value": "swapSlotUID"
																					}
																				}
																			],
																			"actions": [
																				{
																					"type": "comment",
																					"text": "now we have both items in the same slot. we'll detach the item that shouldn't be there, picking it with swapID. We don't need to clear the identifier value because it was already set correctly in the previous event"
																				},
																				{
																					"id": "remove-from-parent",
																					"objectClass": "item",
																					"sid": 507288274410844
																				},
																				{
																					"callFunction": "manageMods",
																					"sid": 573056621137338,
																					"parameters": [
																						false
																					]
																				},
																				{
																					"type": "comment",
																					"text": "it'll go where the other item left, which we have saved in previousLocationUID"
																				},
																				{
																					"callFunction": "attachItem",
																					"sid": 672428174704793
																				}
																			],
																			"sid": 404133702259918
																		}
																	]
																}
															]
														}
													]
												}
											]
										}
									]
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-drag-start",
									"objectClass": "item",
									"sid": 171542721559928,
									"behaviorType": "DragDrop"
								},
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 102305348394096,
									"parameters": {
										"object": "slot",
										"expression": "slot.identifier",
										"comparison": 0,
										"value": "item.identifier"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "when an item starts being dragged, record where it came from, set dragging to true, and detach it"
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 886968429260276,
									"parameters": {
										"variable": "draggedOriginSlotUID",
										"value": "slot.UID"
									}
								},
								{
									"callFunction": "detachItem",
									"sid": 266807440365284
								},
								{
									"type": "comment",
									"text": "This ensures whatever is being dragged is always on top"
								},
								{
									"id": "move-to-layer",
									"objectClass": "item",
									"sid": 988977807503661,
									"parameters": {
										"layer": "\"overlay\""
									}
								}
							],
							"sid": 827535395163321,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "slot",
											"sid": 379527898253552,
											"parameters": {
												"instance-variable": "type",
												"comparison": 1,
												"value": "\"none\""
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if it came from a character slot, manage the gear appropriately"
										},
										{
											"callFunction": "queueGearManagement",
											"sid": 927556251758834
										},
										{
											"callFunction": "manageMods",
											"sid": 735611209322461,
											"parameters": [
												false
											]
										}
									],
									"sid": 653685186723326
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-drop",
									"objectClass": "item",
									"sid": 940330704376401,
									"behaviorType": "DragDrop"
								}
							],
							"actions": [],
							"sid": 399701785813219,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "cursor-is-over-object",
											"objectClass": "mouse",
											"sid": 695387306087932,
											"parameters": {
												"object": "slot"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if the cursor was over a slot"
										}
									],
									"sid": 741566376291973,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 670569213014739,
													"parameters": {
														"value": "slot.type <> item.type & slot.type <> \"none\" "
													}
												},
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 685936448807156,
													"parameters": {
														"value": "findCase(item.classRestrictions, \"All Classes\") = - 1 & find(item.classRestrictions, body.ObjectTypeName) = -1 & slot.type <> \"none\""
													}
												},
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 247968772606905,
													"parameters": {
														"value": "item.level > player.level & slot.type <> \"none\""
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "and the item can't go into that slot, because of one of the following reasons:"
												},
												{
													"type": "comment",
													"text": "that slot's type doesn't match the item's type, and that slot's type is also not \"none\""
												},
												{
													"type": "comment",
													"text": "that item's class doesn't match the player's class, and the item's class is not \"All Classes\", and that slot's type is not \"none\""
												},
												{
													"type": "comment",
													"text": "that item's level is higher than the player's level, and that slot's type is not \"none\""
												},
												{
													"type": "comment",
													"text": "extracting \"slot.type <> \"none\"\" to a parent event doesn't allow the 'else' event to properly fire, if none of these conditions are met",
													"text-color": [
														0,
														0,
														0,
														1
													],
													"background-color": [
														1,
														1,
														0,
														1
													]
												}
											],
											"sid": 354664591457687,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-all",
															"objectClass": "System",
															"sid": 588064325410315,
															"parameters": {
																"object": "slot"
															}
														},
														{
															"id": "pick-by-comparison",
															"objectClass": "System",
															"sid": 920546490074711,
															"parameters": {
																"object": "slot",
																"expression": "slot.UID",
																"comparison": 0,
																"value": "draggedOriginSlotUID"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "send the item back to the slot it came from"
														},
														{
															"callFunction": "attachItem",
															"sid": 695133067571701
														}
													],
													"sid": 947341262946449,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-two-values",
																	"objectClass": "System",
																	"sid": 645834984413462,
																	"parameters": {
																		"first-value": "slot.type",
																		"comparison": 1,
																		"second-value": "\"none\""
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "if it came from a character slot, manage the gear and mods appropriately"
																},
																{
																	"callFunction": "queueGearManagement",
																	"sid": 335358865412951
																},
																{
																	"callFunction": "manageMods",
																	"sid": 448788296221639,
																	"parameters": [
																		true
																	]
																}
															],
															"sid": 223805058340345
														}
													]
												}
											],
											"isOrBlock": true
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 608914029557085
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "and that slot was a character slot that matches the item's type, or is \"none\""
												}
											],
											"sid": 562006739050960,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 597140209712336,
															"parameters": {
																"first-value": "slot.identifier",
																"comparison": 0,
																"second-value": "0"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "and that slot is empty, attach the item to it"
														},
														{
															"callFunction": "attachItem",
															"sid": 596960974351479
														}
													],
													"sid": 870440945063066,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-two-values",
																	"objectClass": "System",
																	"sid": 484854148540705,
																	"parameters": {
																		"first-value": "slot.type",
																		"comparison": 1,
																		"second-value": "\"none\""
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "if it came from a character slot, manage the gear and mods appropriately"
																},
																{
																	"callFunction": "queueGearManagement",
																	"sid": 249194179735476
																},
																{
																	"callFunction": "manageMods",
																	"sid": 102792447386736,
																	"parameters": [
																		true
																	]
																}
															],
															"sid": 194707231346571
														}
													]
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 187631772142266
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "and that slot is not empty, save its identifier (which is also its item's identifier) so we can overwrite it"
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 771700832397227,
															"parameters": {
																"variable": "swapID",
																"value": "slot.identifier"
															}
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 546789526977430,
															"parameters": {
																"variable": "dragCacheItemUID",
																"value": "item.UID"
															}
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 307351783282285,
															"parameters": {
																"variable": "dragCacheSlotUID",
																"value": "slot.UID"
															}
														}
													],
													"sid": 925008931677699,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "pick-all",
																	"objectClass": "System",
																	"sid": 553011608764114,
																	"parameters": {
																		"object": "item"
																	}
																},
																{
																	"id": "pick-by-comparison",
																	"objectClass": "System",
																	"sid": 844624818434821,
																	"parameters": {
																		"object": "item",
																		"expression": "item.identifier",
																		"comparison": 0,
																		"value": "swapID"
																	}
																},
																{
																	"id": "pick-all",
																	"objectClass": "System",
																	"sid": 293651261702794,
																	"parameters": {
																		"object": "slot"
																	}
																},
																{
																	"id": "pick-by-comparison",
																	"objectClass": "System",
																	"sid": 885275044218798,
																	"parameters": {
																		"object": "slot",
																		"expression": "slot.UID",
																		"comparison": 0,
																		"value": "draggedOriginSlotUID"
																	}
																},
																{
																	"id": "evaluate-expression",
																	"objectClass": "System",
																	"sid": 480143029988135,
																	"parameters": {
																		"value": "slot.type = item.type | slot.type = \"none\""
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "check if the item can go back to the origin slot"
																}
															],
															"sid": 464026553237280,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "pick-all",
																			"objectClass": "System",
																			"sid": 689549450637590,
																			"parameters": {
																				"object": "item"
																			}
																		},
																		{
																			"id": "pick-by-comparison",
																			"objectClass": "System",
																			"sid": 337029179692317,
																			"parameters": {
																				"object": "item",
																				"expression": "item.UID",
																				"comparison": 0,
																				"value": "dragCacheItemUID"
																			}
																		},
																		{
																			"id": "pick-all",
																			"objectClass": "System",
																			"sid": 637546061687633,
																			"parameters": {
																				"object": "slot"
																			}
																		},
																		{
																			"id": "pick-by-comparison",
																			"objectClass": "System",
																			"sid": 155336612958381,
																			"parameters": {
																				"object": "slot",
																				"expression": "slot.UID",
																				"comparison": 0,
																				"value": "dragCacheSlotUID"
																			}
																		}
																	],
																	"actions": [
																		{
																			"type": "comment",
																			"text": "if it can, re-pick the item being dragged, and the slot we dropped it on, and attach them"
																		},
																		{
																			"callFunction": "attachItem",
																			"sid": 678899096500546
																		}
																	],
																	"sid": 212308422475292,
																	"children": [
																		{
																			"eventType": "block",
																			"conditions": [
																				{
																					"id": "compare-two-values",
																					"objectClass": "System",
																					"sid": 838789578714350,
																					"parameters": {
																						"first-value": "slot.type",
																						"comparison": 1,
																						"second-value": "\"none\""
																					}
																				}
																			],
																			"actions": [
																				{
																					"type": "comment",
																					"text": "if it came from a character slot, manage the gear and mods appropriately"
																				},
																				{
																					"callFunction": "queueGearManagement",
																					"sid": 421687173483183
																				},
																				{
																					"callFunction": "manageMods",
																					"sid": 922397242824812,
																					"parameters": [
																						true
																					]
																				}
																			],
																			"sid": 676092927805364
																		},
																		{
																			"eventType": "block",
																			"conditions": [
																				{
																					"id": "pick-all",
																					"objectClass": "System",
																					"sid": 312271844596524,
																					"parameters": {
																						"object": "item"
																					}
																				},
																				{
																					"id": "pick-by-comparison",
																					"objectClass": "System",
																					"sid": 553159868067061,
																					"parameters": {
																						"object": "item",
																						"expression": "item.identifier",
																						"comparison": 0,
																						"value": "swapID"
																					}
																				},
																				{
																					"id": "pick-all",
																					"objectClass": "System",
																					"sid": 428620782307139,
																					"parameters": {
																						"object": "slot"
																					}
																				},
																				{
																					"id": "pick-by-comparison",
																					"objectClass": "System",
																					"sid": 248876190255851,
																					"parameters": {
																						"object": "slot",
																						"expression": "slot.UID",
																						"comparison": 0,
																						"value": "draggedOriginSlotUID"
																					}
																				}
																			],
																			"actions": [
																				{
																					"type": "comment",
																					"text": "now pick and detach the overlapped item that shouldn't be there (but the slot's identifier is OK), and pick the origin slot, and attach the two"
																				},
																				{
																					"id": "remove-from-parent",
																					"objectClass": "item",
																					"sid": 992757793937793
																				},
																				{
																					"callFunction": "manageMods",
																					"sid": 589077264734930,
																					"parameters": [
																						false
																					]
																				},
																				{
																					"callFunction": "attachItem",
																					"sid": 589004778395882
																				}
																			],
																			"sid": 762906856022523,
																			"children": [
																				{
																					"eventType": "block",
																					"conditions": [
																						{
																							"id": "compare-two-values",
																							"objectClass": "System",
																							"sid": 829910294078159,
																							"parameters": {
																								"first-value": "slot.type",
																								"comparison": 1,
																								"second-value": "\"none\""
																							}
																						}
																					],
																					"actions": [
																						{
																							"type": "comment",
																							"text": "if it came from a character slot, manage the gear and mods appropriately"
																						},
																						{
																							"callFunction": "queueGearManagement",
																							"sid": 610304706525411
																						},
																						{
																							"callFunction": "manageMods",
																							"sid": 689374442970799,
																							"parameters": [
																								true
																							]
																						}
																					],
																					"sid": 142763226872703
																				}
																			]
																		}
																	]
																}
															]
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "else",
																	"objectClass": "System",
																	"sid": 213136981060223
																},
																{
																	"id": "pick-all",
																	"objectClass": "System",
																	"sid": 367739148944933,
																	"parameters": {
																		"object": "slot"
																	}
																},
																{
																	"id": "pick-by-comparison",
																	"objectClass": "System",
																	"sid": 356724652666509,
																	"parameters": {
																		"object": "slot",
																		"expression": "slot.UID",
																		"comparison": 0,
																		"value": "draggedOriginSlotUID"
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "if it can't, don't swap, and send the item being dragged back to the origin slot"
																},
																{
																	"callFunction": "attachItem",
																	"sid": 208792725258952
																}
															],
															"sid": 328654190933021,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "compare-two-values",
																			"objectClass": "System",
																			"sid": 630410726847750,
																			"parameters": {
																				"first-value": "slot.type",
																				"comparison": 1,
																				"second-value": "\"none\""
																			}
																		}
																	],
																	"actions": [
																		{
																			"type": "comment",
																			"text": "if it came from a character slot, manage the gear and mods appropriately"
																		},
																		{
																			"callFunction": "queueGearManagement",
																			"sid": 432156743268246
																		},
																		{
																			"callFunction": "manageMods",
																			"sid": 313335070956290,
																			"parameters": [
																				true
																			]
																		}
																	],
																	"sid": 813365229432282
																}
															]
														}
													]
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [],
											"actions": [],
											"sid": 320051214841384
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 430044180804925
										},
										{
											"id": "cursor-is-over-object",
											"objectClass": "mouse",
											"sid": 754410337887077,
											"parameters": {
												"object": "invalidLocation"
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 606915429390926,
											"parameters": {
												"object": "slot",
												"expression": "slot.UID",
												"comparison": 0,
												"value": "draggedOriginSlotUID"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if the cursor was over an invalid location, send the item back to the slot it came from"
										},
										{
											"callFunction": "attachItem",
											"sid": 567535042357262
										}
									],
									"sid": 173613641132192,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 669438137384719,
													"parameters": {
														"first-value": "slot.type",
														"comparison": 1,
														"second-value": "\"none\""
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "if it came from a character slot, manage the gear and mods appropriately"
												},
												{
													"callFunction": "queueGearManagement",
													"sid": 506503431033482
												},
												{
													"callFunction": "manageMods",
													"sid": 664725274448361,
													"parameters": [
														true
													]
												}
											],
											"sid": 815270002103978
										}
									]
								},
								{
									"eventType": "comment",
									"text": "can't combine the above and below in an OR block, possibly due to the following:"
								},
								{
									"eventType": "comment",
									"text": "https://github.com/Scirra/Construct-bugs/issues/7003",
									"text-color": [
										0,
										0,
										1,
										1
									],
									"background-color": [
										1,
										1,
										1,
										1
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 351119690702053
										},
										{
											"id": "cursor-is-over-object",
											"objectClass": "mouse",
											"sid": 142829702532871,
											"parameters": {
												"object": "9PatchInvalidLocations"
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 473465490257499,
											"parameters": {
												"object": "slot",
												"expression": "slot.UID",
												"comparison": 0,
												"value": "draggedOriginSlotUID"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if the cursor was over an invalid 9patch location, send the item back to the slot it came from"
										},
										{
											"callFunction": "attachItem",
											"sid": 284540353299655
										}
									],
									"sid": 655650270015638,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 662340366940638,
													"parameters": {
														"first-value": "slot.type",
														"comparison": 1,
														"second-value": "\"none\""
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "if it came from a character slot, manage the gear and mods appropriately"
												},
												{
													"callFunction": "queueGearManagement",
													"sid": 193937137921424
												},
												{
													"callFunction": "manageMods",
													"sid": 772061093534735,
													"parameters": [
														true
													]
												}
											],
											"sid": 410460793748021
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 746631595027754
										},
										{
											"id": "cursor-is-over-object",
											"objectClass": "mouse",
											"sid": 219299045904732,
											"parameters": {
												"object": "background"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if the cursor was over the game world background, spawn its loot"
										},
										{
											"id": "create-object-by-name",
											"objectClass": "System",
											"sid": 627793945948014,
											"parameters": {
												"object-name": "item.simpleName & \"_loot\"",
												"layer": "\"background\"",
												"x": "mouse.X",
												"y": "mouse.Y",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										}
									],
									"sid": 556251734949061,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-last-created",
													"objectClass": "System",
													"sid": 719006855336677,
													"parameters": {
														"object": "loot"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "transfer data from item to loot, then destroy the item"
												},
												{
													"id": "set-animation",
													"objectClass": "loot",
													"sid": 771862003723927,
													"parameters": {
														"animation": "\"static_\" & (floor(random(1, 17)) * 22.5) - 180",
														"from": "beginning"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "loot",
													"sid": 981668832353211,
													"parameters": {
														"instance-variable": "identifier",
														"value": "item.identifier"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "loot",
													"sid": 959227679172870,
													"parameters": {
														"instance-variable": "simpleName",
														"value": "item.simpleName"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "loot",
													"sid": 388357061755415,
													"parameters": {
														"instance-variable": "fullName",
														"value": "item.fullName"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "loot",
													"sid": 914179442486360,
													"parameters": {
														"instance-variable": "type",
														"value": "item.type"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "loot",
													"sid": 902484779634297,
													"parameters": {
														"instance-variable": "lore",
														"value": "item.lore"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "loot",
													"sid": 362669929305554,
													"parameters": {
														"instance-variable": "level",
														"value": "item.level"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "loot",
													"sid": 571714791507665,
													"parameters": {
														"instance-variable": "mods",
														"value": "item.mods"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "loot",
													"sid": 212656048331637,
													"parameters": {
														"instance-variable": "classRestrictions",
														"value": "item.classRestrictions"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "loot",
													"sid": 855866223536522,
													"parameters": {
														"instance-variable": "modTable",
														"value": "item.modTable"
													}
												},
												{
													"id": "destroy",
													"objectClass": "item",
													"sid": 197838163977498
												}
											],
											"sid": 496856218332598
										}
									]
								}
							]
						},
						{
							"functionName": "attachItem",
							"functionDescription": "attaches an item to a slot",
							"functionCategory": "equipment",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-position",
									"objectClass": "item",
									"sid": 775239099829963,
									"parameters": {
										"x": "slot.X",
										"y": "slot.Y"
									}
								},
								{
									"id": "move-to-layer",
									"objectClass": "item",
									"sid": 282712149404009,
									"parameters": {
										"layer": "slot.LayerName"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "slot",
									"sid": 815964194354236,
									"parameters": {
										"instance-variable": "identifier",
										"value": "item.identifier"
									}
								},
								{
									"id": "add-child",
									"objectClass": "slot",
									"sid": 829487362594103,
									"parameters": {
										"child": "item",
										"transform-x": true,
										"transform-y": true,
										"transform-w": false,
										"transform-h": false,
										"transform-a": false,
										"transform-o": false,
										"transform-z-elevation": false,
										"transform-visibility": false,
										"destroy-with-parent": true
									}
								}
							],
							"sid": 437730535233655,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-overlapping-point",
											"objectClass": "System",
											"sid": 776138648900020,
											"parameters": {
												"object": "placeholder",
												"x": "item.X",
												"y": "item.Y"
											}
										}
									],
									"actions": [
										{
											"id": "set-visible",
											"objectClass": "placeholder",
											"sid": 422365193427941,
											"parameters": {
												"visibility": "invisible"
											}
										}
									],
									"sid": 554238670862256
								}
							]
						},
						{
							"functionName": "detachItem",
							"functionDescription": "detaches an item from a slot",
							"functionCategory": "equipment",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "slot",
									"sid": 714493473542525,
									"parameters": {
										"instance-variable": "identifier",
										"value": "0"
									}
								},
								{
									"id": "remove-from-parent",
									"objectClass": "item",
									"sid": 226225276438894
								}
							],
							"sid": 881944124391655,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-overlapping-point",
											"objectClass": "System",
											"sid": 140983841569789,
											"parameters": {
												"object": "placeholder",
												"x": "item.X",
												"y": "item.Y"
											}
										}
									],
									"actions": [
										{
											"id": "set-visible",
											"objectClass": "placeholder",
											"sid": 174570673259630,
											"parameters": {
												"visibility": "visible"
											}
										}
									],
									"sid": 417363291653191
								}
							]
						}
					],
					"sid": 645635025486599
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "gear",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"functionName": "queueGearManagement",
							"functionDescription": "Add a request to manage gear to the queue",
							"functionCategory": "equipment",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 767810941640445,
									"parameters": {
										"value": "slot.type <> \"neck\" | slot.type <> \"ring\""
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "as long as the slot's type is not neck or ring..."
								},
								{
									"id": "push",
									"objectClass": "gearQueueArray",
									"sid": 749412664334466,
									"parameters": {
										"where": "front",
										"value": "slot.UID",
										"axis": "x"
									}
								}
							],
							"sid": 143517779829659
						},
						{
							"eventType": "variable",
							"name": "blocked",
							"type": "boolean",
							"initialValue": "false",
							"comment": "",
							"isStatic": true,
							"isConstant": false,
							"sid": 695329498320645
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 456274353307555,
									"parameters": {
										"variable": "blocked"
									},
									"isInverted": true
								}
							],
							"actions": [],
							"sid": 999175052855849,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-empty",
											"objectClass": "gearQueueArray",
											"sid": 444888010907526,
											"isInverted": true
										},
										{
											"id": "pick-by-unique-id",
											"objectClass": "slot",
											"sid": 826222459576580,
											"parameters": {
												"unique-id": "gearQueueArray.Back"
											}
										}
									],
									"actions": [
										{
											"id": "pop",
											"objectClass": "gearQueueArray",
											"sid": 495025889538759,
											"parameters": {
												"where": "back",
												"axis": "x"
											}
										},
										{
											"callFunction": "updateAnimations",
											"sid": 397934085809959,
											"parameters": [
												"\"idle\"",
												"fpsOfAnimations",
												"\"playFromBeginning\""
											]
										},
										{
											"id": "stop",
											"objectClass": "player",
											"sid": 755835890060922,
											"behaviorType": "MoveTo"
										},
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 753309846385322,
											"parameters": {
												"variable": "blocked",
												"value": "true"
											}
										}
									],
									"sid": 868134707259503,
									"children": [
										{
											"eventType": "variable",
											"name": "gearToSpawn",
											"type": "string",
											"initialValue": "",
											"comment": "the name of the gear to spawn",
											"isStatic": true,
											"isConstant": false,
											"sid": 507532226337350
										},
										{
											"eventType": "variable",
											"name": "gearToDestroy",
											"type": "string",
											"initialValue": "",
											"comment": "the name of the gear to destroy",
											"isStatic": true,
											"isConstant": false,
											"sid": 796888351887491
										},
										{
											"eventType": "variable",
											"name": "gearToDestroyUID",
											"type": "number",
											"initialValue": "0",
											"comment": "the UID of the gear to destroy",
											"isStatic": true,
											"isConstant": false,
											"sid": 653142365454175
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 802497492991623,
													"parameters": {
														"object": "item",
														"expression": "item.identifier",
														"comparison": 0,
														"value": "slot.identifier"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "if it's not empty, pick the item that's currently in that slot"
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 785633943433889,
													"parameters": {
														"variable": "gearToSpawn",
														"value": "body.ObjectTypeName & \"_\" & item.simpleName & \"_gear\""
													}
												}
											],
											"sid": 641425482981819,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-by-comparison",
															"objectClass": "System",
															"sid": 864155460211772,
															"parameters": {
																"object": "gear",
																"expression": "gear.type",
																"comparison": 0,
																"value": "slot.type"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "destroy the existing gear that correlates with the slot's type, if it exists"
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 270133762466694,
															"parameters": {
																"variable": "gearToDestroy",
																"value": "gear.ObjectTypeName"
															}
														}
													],
													"sid": 854297470528183
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 413498936600433
												},
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 635448070838991,
													"parameters": {
														"object": "gear",
														"expression": "gear.type",
														"comparison": 0,
														"value": "slot.type"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "if it's empty, pick the gear that correlates with the slot's type"
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 294524074614853,
													"parameters": {
														"variable": "gearToDestroy",
														"value": "gear.ObjectTypeName"
													}
												}
											],
											"sid": 932158191432713,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-instance-variable",
															"objectClass": "slot",
															"sid": 848296478272481,
															"parameters": {
																"instance-variable": "type",
																"comparison": 0,
																"value": "\"chest\""
															}
														},
														{
															"id": "compare-instance-variable",
															"objectClass": "slot",
															"sid": 114006959877210,
															"parameters": {
																"instance-variable": "type",
																"comparison": 0,
																"value": "\"legs\""
															}
														},
														{
															"id": "compare-instance-variable",
															"objectClass": "slot",
															"sid": 292918180453755,
															"parameters": {
																"instance-variable": "type",
																"comparison": 0,
																"value": "\"head\""
															}
														},
														{
															"id": "compare-instance-variable",
															"objectClass": "slot",
															"sid": 107639740855875,
															"parameters": {
																"instance-variable": "type",
																"comparison": 0,
																"value": "\"feet\""
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "if it's chest, legs, feet or head (the slots with visual representation that have default gear), load the default gear"
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 621298938763509,
															"parameters": {
																"variable": "gearToSpawn",
																"value": "body.ObjectTypeName & \"_\" & slot.type & \"Default_gear\""
															}
														}
													],
													"sid": 482972403415376,
													"isOrBlock": true
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 834074795987185
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "if there's no gear, that means the game has just started, and we just need to spawn default gear"
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 459732092901564,
													"parameters": {
														"variable": "gearToSpawn",
														"value": "body.ObjectTypeName & \"_\" & slot.type & \"Default_gear\""
													}
												}
											],
											"sid": 127748103716226
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 229922055588224,
													"parameters": {
														"variable": "gearToSpawn",
														"comparison": 1,
														"value": "\"\""
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "https://github.com/Laserwolve-Games/DaggerQuest/issues/35",
													"text-color": [
														0,
														0,
														1,
														1
													],
													"background-color": [
														1,
														1,
														1,
														1
													]
												},
												{
													"type": "comment",
													"text": "https://github.com/Laserwolve-Games/DaggerQuest/issues/36",
													"text-color": [
														0,
														0,
														1,
														1
													],
													"background-color": [
														1,
														1,
														1,
														1
													]
												},
												{
													"id": "load-object-images-by-name",
													"objectClass": "System",
													"sid": 141994234606501,
													"parameters": {
														"object": "gearToSpawn"
													}
												},
												{
													"id": "wait-for-previous-actions",
													"objectClass": "System",
													"sid": 306533516831540
												},
												{
													"id": "create-object-by-name",
													"objectClass": "System",
													"sid": 159036866421100,
													"parameters": {
														"object-name": "gearToSpawn",
														"layer": "\"main\"",
														"x": "player.X",
														"y": "player.Y",
														"create-hierarchy": false,
														"template-name": "\"\""
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 823666391121210,
													"parameters": {
														"variable": "gearToSpawn",
														"value": "\"\""
													}
												}
											],
											"sid": 731974333425003,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-last-created",
															"objectClass": "System",
															"sid": 713404709268296,
															"parameters": {
																"object": "gear"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "unblock in this subevent, where we can guarantee the gear exists"
														},
														{
															"id": "set-instvar-value",
															"objectClass": "gear",
															"sid": 101642919569253,
															"parameters": {
																"instance-variable": "type",
																"value": "slot.type"
															}
														},
														{
															"id": "add-child",
															"objectClass": "body",
															"sid": 474768909675716,
															"parameters": {
																"child": "gear",
																"transform-x": true,
																"transform-y": true,
																"transform-w": false,
																"transform-h": false,
																"transform-a": false,
																"transform-o": false,
																"transform-z-elevation": false,
																"transform-visibility": false,
																"destroy-with-parent": true
															}
														}
													],
													"sid": 806281012459289
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-by-comparison",
															"objectClass": "System",
															"sid": 801785853100774,
															"parameters": {
																"object": "gear",
																"expression": "gearToDestroy",
																"comparison": 0,
																"value": "gear.ObjectTypeName"
															}
														}
													],
													"actions": [
														{
															"id": "destroy",
															"objectClass": "gear",
															"sid": 435627271916718
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 634449951731529,
															"parameters": {
																"variable": "gearToDestroy",
																"value": "\"\""
															}
														}
													],
													"sid": 731691639457784
												},
												{
													"eventType": "block",
													"conditions": [],
													"actions": [
														{
															"type": "comment",
															"text": "if we're only creating gear and not destroying any, the previous event won't run, so this needs to be separate"
														},
														{
															"id": "set-boolean-eventvar",
															"objectClass": "System",
															"sid": 639617080021623,
															"parameters": {
																"variable": "blocked",
																"value": "false"
															}
														}
													],
													"sid": 294159635762109
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 583501936080612
												},
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 953512478490965,
													"parameters": {
														"object": "gear",
														"expression": "gearToDestroy",
														"comparison": 0,
														"value": "gear.ObjectTypeName"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "if we're destroying gear without creating gear, we can instantly destroy it without waiting"
												},
												{
													"id": "destroy",
													"objectClass": "gear",
													"sid": 607711161998475
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 188726040899818,
													"parameters": {
														"variable": "gearToDestroy",
														"value": "\"\""
													}
												},
												{
													"id": "set-boolean-eventvar",
													"objectClass": "System",
													"sid": 557632153383694,
													"parameters": {
														"variable": "blocked",
														"value": "false"
													}
												}
											],
											"sid": 224880611156571
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 579877351665732
										},
										{
											"id": "trigger-once-while-true",
											"objectClass": "System",
											"sid": 882868098116194
										}
									],
									"actions": [
										{
											"id": "unload-unused-images",
											"objectClass": "System",
											"sid": 192725039673478
										}
									],
									"sid": 950005626813540
								}
							]
						}
					],
					"sid": 976456797084060
				}
			],
			"sid": 156017693834822
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "isometry",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-on-screen",
							"objectClass": "sortable",
							"sid": 365385957978388
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "this event needs to be above the sorting group to prevent a graphical glitch"
						},
						{
							"id": "set-instvar-value",
							"objectClass": "sortable",
							"sid": 206267541351144,
							"parameters": {
								"instance-variable": "yValue",
								"value": "Self.ImagePointY(1)"
							}
						},
						{
							"id": "sort-z-order",
							"objectClass": "System",
							"sid": 480855599480174,
							"parameters": {
								"object": "sortable",
								"instance-variable": {
									"name": "yValue",
									"objectClass": "sortable"
								}
							}
						}
					],
					"sid": 868041002995505
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "sorting",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-animation-playing",
									"objectClass": "man_simpleSword_gear",
									"sid": 755476965331208,
									"parameters": {
										"animation": "\"idle_157.5\""
									}
								}
							],
							"actions": [
								{
									"id": "move-to-object",
									"objectClass": "offHand",
									"sid": 702532448346007,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "head",
									"sid": 390173758568011,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "chest",
									"sid": 883275433593183,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "mainHand",
									"sid": 564538742535919,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "feet",
									"sid": 788751064850888,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "legs",
									"sid": 942548275877263,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "hands",
									"sid": 445366415603596,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								}
							],
							"sid": 348299811569005
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 503835850935764
								},
								{
									"id": "is-between-values",
									"objectClass": "System",
									"sid": 611856887479244,
									"parameters": {
										"value": "player.degrees",
										"lower-bound": "-67.5",
										"upper-bound": "22.5"
									}
								}
							],
							"actions": [
								{
									"id": "move-to-object",
									"objectClass": "mainHand",
									"sid": 901435269026737,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "offHand",
									"sid": 172207901148276,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "head",
									"sid": 290903160034197,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "chest",
									"sid": 186295098346742,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "feet",
									"sid": 979459098737440,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "legs",
									"sid": 287088795551390,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "hands",
									"sid": 701638109081111,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								}
							],
							"sid": 701987836742656
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 875563291302660
								}
							],
							"actions": [
								{
									"id": "move-to-object",
									"objectClass": "offHand",
									"sid": 938400889925313,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "head",
									"sid": 988530964135385,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "mainHand",
									"sid": 651222762711156,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "chest",
									"sid": 547581038454800,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "feet",
									"sid": 882564343136704,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "legs",
									"sid": 597937028052401,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "hands",
									"sid": 167383299477802,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								}
							],
							"sid": 603941084953152
						}
					],
					"sid": 621826706568727
				}
			],
			"sid": 937100591006447
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "player",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "generation",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-signal",
									"objectClass": "System",
									"sid": 908302383908767,
									"parameters": {
										"tag": "\"startLoading\""
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "TODO: the player to be created is determined on the character selection screen",
									"background-color": [
										1,
										1,
										0,
										1
									]
								},
								{
									"id": "set-moving-angle",
									"objectClass": "player",
									"sid": 903710838478062,
									"behaviorType": "MoveTo",
									"parameters": {
										"angle": "90"
									}
								},
								{
									"id": "create-object-by-name",
									"objectClass": "System",
									"sid": 824010743775710,
									"parameters": {
										"object-name": "player.class",
										"layer": "\"main\"",
										"x": "player.X",
										"y": "player.Y",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								}
							],
							"sid": 247596661271128
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-created",
									"objectClass": "body",
									"sid": 821906498427267
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "somehow the default 'head' is spawning before the body's name can be referenced. this 'wait 0' fixes that."
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 232463430017992,
									"parameters": {
										"seconds": "0"
									}
								},
								{
									"id": "add-child",
									"objectClass": "player",
									"sid": 954676924295979,
									"parameters": {
										"child": "body",
										"transform-x": true,
										"transform-y": true,
										"transform-w": false,
										"transform-h": false,
										"transform-a": false,
										"transform-o": false,
										"transform-z-elevation": false,
										"transform-visibility": false,
										"destroy-with-parent": true
									}
								},
								{
									"callFunction": "updateAnimations",
									"sid": 637328215420222,
									"parameters": [
										"\"idle\"",
										"fpsOfAnimations",
										"\"playFromBeginning\""
									]
								}
							],
							"sid": 147297134178316,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 194080292251659,
											"parameters": {
												"object": "slot",
												"expression": "slot.type",
												"comparison": 0,
												"value": "\"head\""
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "these events to spawn default gear need to be nested, and I don't know why"
										},
										{
											"callFunction": "queueGearManagement",
											"sid": 104426710382001
										},
										{
											"id": "wait-for-previous-actions",
											"objectClass": "System",
											"sid": 136218559561968
										}
									],
									"sid": 315854207588580,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-all",
													"objectClass": "System",
													"sid": 765496292019045,
													"parameters": {
														"object": "slot"
													}
												},
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 412188331434210,
													"parameters": {
														"object": "slot",
														"expression": "slot.type",
														"comparison": 0,
														"value": "\"chest\""
													}
												}
											],
											"actions": [
												{
													"callFunction": "queueGearManagement",
													"sid": 708988139671752
												},
												{
													"id": "wait-for-previous-actions",
													"objectClass": "System",
													"sid": 118214878188060
												}
											],
											"sid": 944221062483027,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-all",
															"objectClass": "System",
															"sid": 364662952518424,
															"parameters": {
																"object": "slot"
															}
														},
														{
															"id": "pick-by-comparison",
															"objectClass": "System",
															"sid": 845785517442690,
															"parameters": {
																"object": "slot",
																"expression": "slot.type",
																"comparison": 0,
																"value": "\"legs\""
															}
														}
													],
													"actions": [
														{
															"callFunction": "queueGearManagement",
															"sid": 741855895061145
														},
														{
															"id": "wait-for-previous-actions",
															"objectClass": "System",
															"sid": 357268931968551
														}
													],
													"sid": 298826179305528,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "pick-all",
																	"objectClass": "System",
																	"sid": 897906325124482,
																	"parameters": {
																		"object": "slot"
																	}
																},
																{
																	"id": "pick-by-comparison",
																	"objectClass": "System",
																	"sid": 223627520597337,
																	"parameters": {
																		"object": "slot",
																		"expression": "slot.type",
																		"comparison": 0,
																		"value": "\"feet\""
																	}
																}
															],
															"actions": [
																{
																	"callFunction": "queueGearManagement",
																	"sid": 947324745508221
																}
															],
															"sid": 206572827278688
														}
													]
												}
											]
										}
									]
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 832071860216420,
									"parameters": {
										"first-value": "body.Count",
										"comparison": 0,
										"second-value": "1"
									}
								},
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 945186957136710,
									"parameters": {
										"first-value": "gear.Count",
										"comparison": 0,
										"second-value": "3"
									}
								},
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 626069295956755
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "if there's 1 body and 3 gears, the character has finished loading"
								},
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 722718954816036,
									"parameters": {
										"variable": "characterLoaded",
										"value": "true"
									}
								}
							],
							"sid": 820528211110689
						}
					],
					"sid": 273395503606669
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "facings",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "player",
									"sid": 778284806513307,
									"parameters": {
										"instance-variable": "alive"
									}
								}
							],
							"actions": [
								{
									"callFunction": "updateFacing",
									"sid": 457704822269483,
									"parameters": [
										"-1",
										"-1"
									]
								}
							],
							"sid": 774150289546542
						},
						{
							"functionName": "updateFacing",
							"functionDescription": "",
							"functionCategory": "playerFunctions",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "x",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"sid": 941295715930551
								},
								{
									"name": "y",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"sid": 915092038699125
								}
							],
							"eventType": "function-block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 942919002777203,
									"parameters": {
										"first-value": "timescale",
										"comparison": 1,
										"second-value": "0"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "this is a function so it can be called in the middle of an ability function"
								}
							],
							"sid": 564814853184454,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 218107748119510,
											"parameters": {
												"variable": "x",
												"comparison": 1,
												"value": "-1"
											}
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 400230555700600,
											"parameters": {
												"variable": "y",
												"comparison": 1,
												"value": "-1"
											}
										}
									],
									"actions": [
										{
											"id": "set-moving-angle",
											"objectClass": "player",
											"sid": 379297991393983,
											"behaviorType": "MoveTo",
											"parameters": {
												"angle": "angle(Self.X, Self.Y, x, y)"
											}
										}
									],
									"sid": 601663005552594
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "player",
											"sid": 370363002887553,
											"parameters": {
												"instance-variable": "degrees",
												"value": "round(player.MoveTo.MovingAngle / 22.5) * 22.5"
											}
										}
									],
									"sid": 472815315459873
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "player",
											"sid": 839912950654796,
											"parameters": {
												"instance-variable": "degrees",
												"comparison": 0,
												"value": "-180"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "both -180 and 180 are possible outcomes, so compensate for the one that doesn't have an animation"
										},
										{
											"id": "set-instvar-value",
											"objectClass": "player",
											"sid": 483699238532964,
											"parameters": {
												"instance-variable": "degrees",
												"value": "180"
											}
										}
									],
									"sid": 481218350912265
								}
							]
						}
					],
					"sid": 528071924570554
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "health and mana",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "player",
									"sid": 438214241218846,
									"parameters": {
										"instance-variable": "alive"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "if the player exists, set the orbs to the correct values and scroll them"
								},
								{
									"type": "comment",
									"text": "if the orb's height gets set before the players health and mana values are loaded, it'll divide by zero and its height will be NaN"
								},
								{
									"id": "set-height",
									"objectClass": "healthOrb",
									"sid": 838430323348818,
									"parameters": {
										"height": "clamp(player.currentHealth / player.maxHealth * 210, 0, 210)"
									}
								},
								{
									"id": "set-height",
									"objectClass": "manaOrb",
									"sid": 609764393613840,
									"parameters": {
										"height": "clamp(player.currentMana / player.maxMana * 210, 0, 210)"
									}
								}
							],
							"sid": 154905051816206
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 930777219360607,
									"parameters": {
										"instance-variable": "currentHealth",
										"comparison": 4,
										"value": "player.maxHealth"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Don't let the Player's Mana or Health exceed the maximum"
								},
								{
									"id": "set-instvar-value",
									"objectClass": "player",
									"sid": 948005510207791,
									"parameters": {
										"instance-variable": "currentHealth",
										"value": "Self.maxHealth"
									}
								}
							],
							"sid": 626822929654135
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 927297459158316,
									"parameters": {
										"instance-variable": "currentMana",
										"comparison": 4,
										"value": "player.maxMana"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "player",
									"sid": 206021598300202,
									"parameters": {
										"instance-variable": "currentMana",
										"value": "Self.maxMana"
									}
								}
							],
							"sid": 596737171205302
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "player",
									"sid": 440720543124514,
									"parameters": {
										"instance-variable": "alive"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "regen health and mana while not at max and not paused"
								}
							],
							"sid": 668684290774718,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "player",
											"sid": 854256445918559,
											"parameters": {
												"instance-variable": "currentHealth",
												"comparison": 2,
												"value": "Self.maxHealth"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 603804130668118,
											"parameters": {
												"instance-variable": "currentHealth",
												"value": "Self.healthRegen / 60 * timescale"
											}
										}
									],
									"sid": 675573875826434
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "player",
											"sid": 463626831502173,
											"parameters": {
												"instance-variable": "currentMana",
												"comparison": 2,
												"value": "Self.maxMana"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 878876979790378,
											"parameters": {
												"instance-variable": "currentMana",
												"value": "Self.ManaRegen / 60 * timescale"
											}
										}
									],
									"sid": 510763216032454
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 494411441798188,
									"parameters": {
										"instance-variable": "currentHealth",
										"comparison": 3,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "set-boolean-instvar",
									"objectClass": "player",
									"sid": 327792398533154,
									"parameters": {
										"instance-variable": "alive",
										"value": "false"
									}
								}
							],
							"sid": 426922323504474
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "player",
									"sid": 272213140570599,
									"parameters": {
										"instance-variable": "alive"
									},
									"isInverted": true
								},
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 562594633971818
								}
							],
							"actions": [
								{
									"callFunction": "updateAnimations",
									"sid": 952278306690971,
									"parameters": [
										"\"die\"",
										"fpsOfAnimations",
										"\"playFromBeginning\""
									]
								},
								{
									"id": "stop",
									"objectClass": "player",
									"sid": 265532492838695,
									"behaviorType": "MoveTo"
								}
							],
							"sid": 274794580633845
						}
					],
					"sid": 382578483115015
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "movement",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "player",
									"sid": 442789165294478,
									"parameters": {
										"instance-variable": "alive"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "player",
									"sid": 506584128717096,
									"parameters": {
										"instance-variable": "absoluteMovingAngle",
										"value": "abs(player.MoveTo.MovingAngle)"
									}
								},
								{
									"type": "comment",
									"text": "The \"scroll to\" behavior, but still clamp to the right edge even though the layout continues, while not in a building"
								},
								{
									"id": "scroll-to-y",
									"objectClass": "System",
									"sid": 696937311605022,
									"parameters": {
										"y": "player.Y"
									}
								}
							],
							"sid": 245583672645296,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "player",
											"sid": 934973500556509,
											"parameters": {
												"instance-variable": "isInsideBuilding"
											}
										}
									],
									"actions": [
										{
											"id": "scroll-to-x",
											"objectClass": "System",
											"sid": 693011245316956,
											"parameters": {
												"x": "player.X"
											}
										}
									],
									"sid": 543324437619692
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 959223916317378
										}
									],
									"actions": [
										{
											"id": "scroll-to-x",
											"objectClass": "System",
											"sid": 933806109829407,
											"parameters": {
												"x": "min(player.X, LayoutHeight - ViewportWidth(\"main\") / 2)"
											}
										}
									],
									"sid": 499255416095747
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-overlapping-another-object",
											"objectClass": "player",
											"sid": 173878403506337,
											"parameters": {
												"object": "prop"
											}
										}
									],
									"actions": [
										{
											"id": "stop",
											"objectClass": "player",
											"sid": 876779841081134,
											"behaviorType": "MoveTo"
										},
										{
											"id": "push-out-solid",
											"objectClass": "player",
											"sid": 751606118494834,
											"behaviorType": "Custom",
											"parameters": {
												"direction": "nearest"
											}
										}
									],
									"sid": 762040588479492
								},
								{
									"eventType": "comment",
									"text": "isometrically correct movement"
								},
								{
									"eventType": "comment",
									"text": "https://github.com/Laserwolve-Games/DaggerQuest/issues/4",
									"text-color": [
										0,
										0,
										1,
										1
									],
									"background-color": [
										1,
										1,
										1,
										1
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "player",
											"sid": 578540092978873,
											"parameters": {
												"instance-variable": "absoluteMovingAngle",
												"comparison": 3,
												"value": "90"
											}
										}
									],
									"actions": [
										{
											"id": "set-max-speed",
											"objectClass": "player",
											"sid": 946918027073857,
											"behaviorType": "MoveTo",
											"parameters": {
												"max-speed": "Self.movementSpeed * lerp(1, sqrt(2)/2, unlerp(0, 90, Self.absoluteMovingAngle))"
											}
										}
									],
									"sid": 782977246713564
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 646207952282782
										}
									],
									"actions": [
										{
											"id": "set-max-speed",
											"objectClass": "player",
											"sid": 399320722713690,
											"behaviorType": "MoveTo",
											"parameters": {
												"max-speed": "Self.movementSpeed * lerp(sqrt(2)/2, 1, unlerp(90, 180, Self.absoluteMovingAngle))"
											}
										}
									],
									"sid": 700592390302659
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 573849551764633,
											"parameters": {
												"variable": "isOnInteractCooldown"
											}
										},
										{
											"id": "trigger-once-while-true",
											"objectClass": "System",
											"sid": 385074943703849
										}
									],
									"actions": [
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 646357893737341,
											"parameters": {
												"seconds": "interactCooldown"
											}
										},
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 568247653890569,
											"parameters": {
												"variable": "isOnInteractCooldown",
												"value": "false"
											}
										}
									],
									"sid": 690102869686332
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 978143679708726,
											"parameters": {
												"variable": "isOnInteractCooldown"
											},
											"isInverted": true
										},
										{
											"id": "mouse-button-is-down",
											"objectClass": "mouse",
											"sid": 333298564071331,
											"parameters": {
												"mouse-button": "left"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "the redundancy here can probably only be solved with inheritance, which Construct currently doesn't have"
										}
									],
									"sid": 903969286228194,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "cursor-is-over-object",
													"objectClass": "mouse",
													"sid": 847539967846893,
													"parameters": {
														"object": "npcBody"
													}
												},
												{
													"id": "pick-parent",
													"objectClass": "npcBody",
													"sid": 699745615466680,
													"parameters": {
														"parent": "npc",
														"which": "own"
													}
												}
											],
											"actions": [],
											"sid": 835848342248823,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-instance-variable",
															"objectClass": "npc",
															"sid": 411484989510481,
															"parameters": {
																"instance-variable": "interactRange",
																"comparison": 5,
																"value": "distance(npc.X, npc.Y, player.X, player.Y)"
															}
														}
													],
													"actions": [
														{
															"id": "stop",
															"objectClass": "player",
															"sid": 491104182229753,
															"behaviorType": "MoveTo"
														},
														{
															"callFunction": "updateAnimations",
															"sid": 678078874997710,
															"parameters": [
																"\"idle\"",
																"fpsOfAnimations",
																"\"playFromBeginning\""
															]
														},
														{
															"callFunction": "beginDialog",
															"sid": 309503324718462
														}
													],
													"sid": 641734535023417
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 643998034517070
														}
													],
													"actions": [
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 229953425033817,
															"parameters": {
																"variable": "uidOfClicked",
																"value": "npc.UID"
															}
														},
														{
															"id": "move-to-position",
															"objectClass": "player",
															"sid": 319982596893757,
															"behaviorType": "MoveTo",
															"parameters": {
																"x": "npc.x + cos(angle(npc.x, npc.y, player.x, player.y)) * npc.interactRange",
																"y": "npc.y + sin(angle(npc.x, npc.y, player.x, player.y)) * npc.interactRange",
																"mode": "direct"
															}
														}
													],
													"sid": 427665327590872
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 367200789500488
												},
												{
													"id": "cursor-is-over-object",
													"objectClass": "mouse",
													"sid": 803351705248790,
													"parameters": {
														"object": "loot"
													}
												},
												{
													"id": "pick-topbottom",
													"objectClass": "loot",
													"sid": 232999226144291,
													"parameters": {
														"which": "top"
													}
												}
											],
											"actions": [],
											"sid": 169232376872581,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-instance-variable",
															"objectClass": "player",
															"sid": 213511129039912,
															"parameters": {
																"instance-variable": "pickupRange",
																"comparison": 5,
																"value": "distance(player.X, player.Y, loot.X, loot.Y)"
															}
														}
													],
													"actions": [
														{
															"id": "stop",
															"objectClass": "player",
															"sid": 826362810870089,
															"behaviorType": "MoveTo"
														},
														{
															"callFunction": "updateAnimations",
															"sid": 512504051309512,
															"parameters": [
																"\"idle\"",
																"fpsOfAnimations",
																"\"playFromBeginning\""
															]
														},
														{
															"callFunction": "pickUpLoot",
															"sid": 179972406738069
														}
													],
													"sid": 126826838589515
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 342898607643646
														}
													],
													"actions": [
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 922930535780417,
															"parameters": {
																"variable": "uidOfClicked",
																"value": "loot.UID"
															}
														},
														{
															"id": "move-to-position",
															"objectClass": "player",
															"sid": 190242941312589,
															"behaviorType": "MoveTo",
															"parameters": {
																"x": "loot.x + cos(angle(loot.x, loot.y, player.x, player.y)) * player.pickupRange",
																"y": "loot.y + sin(angle(loot.x, loot.y, player.x, player.y)) * player.pickupRange",
																"mode": "direct"
															}
														}
													],
													"sid": 973265333338329
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 175050506358937
												},
												{
													"id": "cursor-is-over-object",
													"objectClass": "mouse",
													"sid": 996743336762302,
													"parameters": {
														"object": "door"
													}
												}
											],
											"actions": [],
											"sid": 479773362673259,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-instance-variable",
															"objectClass": "door",
															"sid": 987267690455311,
															"parameters": {
																"instance-variable": "interactRange",
																"comparison": 5,
																"value": "distance(door.ImagePointX(1), door.ImagePointY(1), player.X, player.Y)"
															}
														}
													],
													"actions": [
														{
															"callFunction": "buildingTransition",
															"sid": 744348318848902
														}
													],
													"sid": 436095560436944
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 871386455787587
														}
													],
													"actions": [
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 275020723577871,
															"parameters": {
																"variable": "uidOfClicked",
																"value": "door.UID"
															}
														},
														{
															"id": "move-to-position",
															"objectClass": "player",
															"sid": 121651091625366,
															"behaviorType": "MoveTo",
															"parameters": {
																"x": "door.ImagePointX(1) + cos(angle(door.ImagePointX(1), door.ImagePointY(1), player.x, player.y)) * door.interactRange",
																"y": "door.ImagePointY(1) + sin(angle(door.ImagePointX(1), door.ImagePointY(1), player.x, player.y)) * door.interactRange",
																"mode": "direct"
															}
														}
													],
													"sid": 597494309837339
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 357226637634347
												},
												{
													"id": "cursor-is-over-object",
													"objectClass": "mouse",
													"sid": 326863248303330,
													"parameters": {
														"object": "player"
													},
													"isInverted": true
												},
												{
													"id": "cursor-is-over-object",
													"objectClass": "mouse",
													"sid": 138167436561949,
													"parameters": {
														"object": "invalidLocation"
													},
													"isInverted": true
												},
												{
													"id": "cursor-is-over-object",
													"objectClass": "mouse",
													"sid": 851443191813940,
													"parameters": {
														"object": "9PatchInvalidLocations"
													},
													"isInverted": true
												},
												{
													"id": "cursor-is-over-object",
													"objectClass": "mouse",
													"sid": 216022271995411,
													"parameters": {
														"object": "item"
													},
													"isInverted": true
												},
												{
													"id": "layer-is-visible",
													"objectClass": "System",
													"sid": 775847804277291,
													"parameters": {
														"layer": "\"escapeMenu\""
													},
													"isInverted": true
												},
												{
													"id": "layer-is-visible",
													"objectClass": "System",
													"sid": 388126389480175,
													"parameters": {
														"layer": "\"mainMenu\""
													},
													"isInverted": true
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "if the mouse isn't over any of the specified, reset uidOfClicked and walk there normally"
												},
												{
													"id": "move-to-position",
													"objectClass": "player",
													"sid": 597457179007743,
													"behaviorType": "MoveTo",
													"parameters": {
														"x": "mouse.X",
														"y": "mouse.Y",
														"mode": "direct"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 983960257720300,
													"parameters": {
														"variable": "uidOfClicked",
														"value": "0"
													}
												}
											],
											"sid": 166715960982564
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-arrived",
											"objectClass": "player",
											"sid": 266023590542015,
											"behaviorType": "MoveTo"
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 735511063130572,
											"parameters": {
												"variable": "uidOfClicked",
												"comparison": 1,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "when we arrive somewhere, if we had a UID saved of something, call a function based off of what it is"
										},
										{
											"type": "comment",
											"text": "we don't need to check that it's 0 for this to function, however it saves us from evaluating each sub-event's condition"
										}
									],
									"sid": 876565196589800,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 249763389925295,
													"parameters": {
														"object": "npc",
														"expression": "npc.UID",
														"comparison": 0,
														"value": "uidOfClicked"
													}
												},
												{
													"id": "pick-children",
													"objectClass": "npc",
													"sid": 126656198576000,
													"parameters": {
														"child": "npcBody",
														"which": "own"
													}
												}
											],
											"actions": [
												{
													"callFunction": "beginDialog",
													"sid": 110486132137755
												}
											],
											"sid": 182085532883072
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 711163033533160,
													"parameters": {
														"object": "loot",
														"expression": "loot.UID",
														"comparison": 0,
														"value": "uidOfClicked"
													}
												}
											],
											"actions": [
												{
													"callFunction": "pickUpLoot",
													"sid": 606163483948961
												}
											],
											"sid": 760647023019795
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 677377253264415,
													"parameters": {
														"object": "door",
														"expression": "uidOfClicked",
														"comparison": 0,
														"value": "door.UID"
													}
												}
											],
											"actions": [
												{
													"callFunction": "buildingTransition",
													"sid": 722250069952467
												}
											],
											"sid": 155097763547603
										}
									]
								}
							]
						},
						{
							"eventType": "comment",
							"text": "The below 2 events have to be here. Do not move them elsewhere. If you do, gear will desynchronize and abilities will break.",
							"text-color": [
								1,
								1,
								1,
								1
							],
							"background-color": [
								0.6078431372549019,
								0,
								0,
								1
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-moving",
									"objectClass": "player",
									"sid": 257293166185651,
									"behaviorType": "MoveTo"
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "...if they're moving, set their animation appropriately"
								}
							],
							"sid": 146079688686831,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 352311202166792,
											"parameters": {
												"value": "find(body.AnimationName, \"idle\") <> -1\n"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if they were idling, start the animation from the beginning"
										},
										{
											"callFunction": "updateAnimations",
											"sid": 813757426231788,
											"parameters": [
												"\"walk\"",
												"player.movementSpeed / animationDivisor",
												"\"playFromBeginning\""
											]
										}
									],
									"sid": 948214990872049
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 891393396713570
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 716678570682387,
											"parameters": {
												"value": "find(body.AnimationName, \"walk\") <> -1\n"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if they were already walking, play the animation from the current frame"
										},
										{
											"callFunction": "updateAnimations",
											"sid": 713576676136872,
											"parameters": [
												"\"walk\"",
												"player.movementSpeed / animationDivisor",
												"\"playFromCurrentFrame\""
											]
										}
									],
									"sid": 405952666635705
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-arrived",
									"objectClass": "player",
									"sid": 890033528637521,
									"behaviorType": "MoveTo"
								},
								{
									"id": "on-hit-solid",
									"objectClass": "player",
									"sid": 905301131920126,
									"behaviorType": "MoveTo"
								}
							],
							"actions": [
								{
									"callFunction": "updateAnimations",
									"sid": 589735361435979,
									"parameters": [
										"\"idle\"",
										"fpsOfAnimations",
										"\"playFromBeginning\""
									]
								}
							],
							"sid": 527150234376711,
							"isOrBlock": true
						}
					],
					"sid": 914713205483917
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "abilities",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "player",
									"sid": 185638574466964,
									"parameters": {
										"instance-variable": "alive"
									}
								}
							],
							"actions": [],
							"sid": 736239834560724,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-key-pressed",
											"objectClass": "keyboard",
											"sid": 596432560112866,
											"parameters": {
												"key": 81
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 534634455222636,
											"parameters": {
												"object": "ability",
												"expression": "ability.IID",
												"comparison": 0,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"id": "call-mapped-function",
											"objectClass": "Functions",
											"sid": 188353794003162,
											"parameters": {
												"name": "\"playerAbilities\"",
												"string": "ability.AnimationName",
												"forward-params": "0"
											}
										}
									],
									"sid": 792810018655248
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-key-pressed",
											"objectClass": "keyboard",
											"sid": 399100830826277,
											"parameters": {
												"key": 87
											}
										}
									],
									"actions": [],
									"sid": 949187034190135
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-key-pressed",
											"objectClass": "keyboard",
											"sid": 424570406192381,
											"parameters": {
												"key": 69
											}
										}
									],
									"actions": [],
									"sid": 179482036150432
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-key-pressed",
											"objectClass": "keyboard",
											"sid": 789118543897601,
											"parameters": {
												"key": 82
											}
										}
									],
									"actions": [],
									"sid": 258916997745556
								}
							]
						},
						{
							"eventType": "group",
							"disabled": false,
							"title": "Man Upward Slash",
							"description": "",
							"isActiveOnStart": true,
							"children": [
								{
									"functionName": "heroicStrike",
									"functionDescription": "",
									"functionCategory": "abilities",
									"functionReturnType": "none",
									"functionCopyPicked": false,
									"functionIsAsync": false,
									"functionParameters": [],
									"eventType": "function-block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 417279376105749,
											"parameters": {
												"object": "gear",
												"expression": "gear.type",
												"comparison": 0,
												"value": "\"mainHand\""
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "player",
											"sid": 725385373354233,
											"parameters": {
												"instance-variable": "currentMana",
												"comparison": 5,
												"value": "50"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "must have a weapon equipped and enough mana"
										},
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 997812150594519,
											"parameters": {
												"instance-variable": "currentMana",
												"value": "50"
											}
										},
										{
											"id": "stop",
											"objectClass": "player",
											"sid": 393221085649804,
											"behaviorType": "MoveTo"
										},
										{
											"callFunction": "updateFacing",
											"sid": 834207086762945,
											"parameters": [
												"mouse.X",
												"mouse.Y"
											]
										},
										{
											"id": "set-group-active",
											"objectClass": "System",
											"sid": 353746224432749,
											"parameters": {
												"group-name": "\"movement\"",
												"state": "deactivated"
											}
										},
										{
											"id": "set-group-active",
											"objectClass": "System",
											"sid": 231435887947911,
											"parameters": {
												"group-name": "\"Man Upward Slash\"",
												"state": "deactivated"
											}
										},
										{
											"id": "set-group-active",
											"objectClass": "System",
											"sid": 410156274113782,
											"parameters": {
												"group-name": "\"facings\"",
												"state": "deactivated"
											}
										},
										{
											"id": "set-animation",
											"objectClass": "body",
											"sid": 372691237668019,
											"parameters": {
												"animation": "\"upwardSlash_\" & player.degrees",
												"from": "beginning"
											}
										},
										{
											"id": "set-animation-speed",
											"objectClass": "body",
											"sid": 541008262873611,
											"parameters": {
												"speed": "player.actionSpeed"
											}
										},
										{
											"type": "comment",
											"text": "the 4 here is the 0-based frame to fire the projectile on"
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 509435642718061,
											"parameters": {
												"seconds": "ticksPerSecond / body.AnimationSpeed *  4 / ticksPerSecond"
											}
										},
										{
											"id": "create-object",
											"objectClass": "System",
											"sid": 538961495854265,
											"parameters": {
												"object-to-create": "projectile",
												"layer": "\"mechanics\"",
												"x": "player.X",
												"y": "player.Y",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										},
										{
											"type": "comment",
											"text": "These waits mean we can handle everything pertaining to a particular ability within it's designated function. This prevents us, however, from implemented functionality such as silencing the player or an enemy mid-ability."
										}
									],
									"sid": 839839600918941,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-last-created",
													"objectClass": "System",
													"sid": 740701285920758,
													"parameters": {
														"object": "projectile"
													}
												}
											],
											"actions": [
												{
													"id": "set-boolean-instvar",
													"objectClass": "projectile",
													"sid": 994274575092173,
													"parameters": {
														"instance-variable": "friendly",
														"value": "true"
													}
												},
												{
													"id": "set-boolean-instvar",
													"objectClass": "projectile",
													"sid": 634162557124733,
													"parameters": {
														"instance-variable": "piercing",
														"value": "true"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "projectile",
													"sid": 493810727305846,
													"parameters": {
														"instance-variable": "range",
														"value": "150"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "projectile",
													"sid": 813246016323838,
													"parameters": {
														"instance-variable": "slashDamage",
														"value": "player.slashDamage"
													}
												},
												{
													"id": "set-width",
													"objectClass": "projectile",
													"sid": 618327782944650,
													"parameters": {
														"width": "128"
													}
												},
												{
													"id": "set-height",
													"objectClass": "projectile",
													"sid": 484062895432408,
													"parameters": {
														"height": "Self.Width / 2"
													}
												},
												{
													"id": "set-speed",
													"objectClass": "projectile",
													"sid": 187475994167593,
													"behaviorType": "Bullet",
													"parameters": {
														"speed": "700"
													}
												},
												{
													"id": "set-angle-of-motion",
													"objectClass": "projectile",
													"sid": 138694018116338,
													"behaviorType": "Bullet",
													"parameters": {
														"angle": "player.MoveTo.MovingAngle"
													}
												},
												{
													"id": "wait",
													"objectClass": "System",
													"sid": 211717945170467,
													"parameters": {
														"seconds": "body.AnimationFrameCount / body.AnimationSpeed - ticksPerSecond / body.AnimationSpeed *  4 / ticksPerSecond"
													}
												},
												{
													"id": "set-group-active",
													"objectClass": "System",
													"sid": 501236974096876,
													"parameters": {
														"group-name": "\"movement\"",
														"state": "activated"
													}
												},
												{
													"id": "set-group-active",
													"objectClass": "System",
													"sid": 184359154376958,
													"parameters": {
														"group-name": "\"facings\"",
														"state": "activated"
													}
												},
												{
													"id": "set-group-active",
													"objectClass": "System",
													"sid": 112499015872170,
													"parameters": {
														"group-name": "\"Man Upward Slash\"",
														"state": "activated"
													}
												},
												{
													"callFunction": "updateAnimations",
													"sid": 784706056682974,
													"parameters": [
														"\"idle\"",
														"fpsOfAnimations",
														"\"playFromBeginning\""
													]
												}
											],
											"sid": 112061215502004
										}
									]
								}
							],
							"sid": 893967530718635
						}
					],
					"sid": 600857244900806
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "animations",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "gear",
									"sid": 918420809278874,
									"parameters": {
										"animation": "body.AnimationName",
										"from": "current-frame"
									}
								},
								{
									"id": "set-animation-frame",
									"objectClass": "gear",
									"sid": 985026365790824,
									"parameters": {
										"frame-number": "body.AnimationFrame"
									}
								}
							],
							"sid": 568021042849555
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-animation-frame-changed",
									"objectClass": "body",
									"sid": 409557183449858
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "To completely get rid of the incorrect height and width values, we need to have this run every tick, however, there's no actual different outcome"
								},
								{
									"type": "comment",
									"text": "https://github.com/Scirra/Construct-3-bugs/issues/5895",
									"text-color": [
										0,
										0,
										1,
										1
									],
									"background-color": [
										1,
										1,
										1,
										1
									]
								},
								{
									"id": "set-scale",
									"objectClass": "body",
									"sid": 375932065893818,
									"parameters": {
										"scale": "1"
									}
								},
								{
									"id": "set-scale",
									"objectClass": "gear",
									"sid": 454439231883482,
									"parameters": {
										"scale": "1"
									}
								}
							],
							"sid": 560213321966011
						},
						{
							"functionName": "updateAnimations",
							"functionDescription": "change the player's animations",
							"functionCategory": "playerFunctions",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "animationName",
									"type": "string",
									"initialValue": "",
									"comment": "which animation to play",
									"sid": 308447533896746
								},
								{
									"name": "animationSpeed",
									"type": "number",
									"initialValue": "10",
									"comment": "how fast the animation plays",
									"sid": 938843169588506
								},
								{
									"name": "startPoint",
									"type": "string",
									"initialValue": "playFromBeginning",
									"comment": "",
									"sid": 930634823243599
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"type": "comment",
									"text": "startPoint is a string because it needs to get passed from an ability"
								}
							],
							"sid": 949345204534566,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 144076295106404,
											"parameters": {
												"variable": "startPoint",
												"comparison": 0,
												"value": "\"playFromBeginning\""
											}
										}
									],
									"actions": [],
									"sid": 677168092068879,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-overlapping-another-object",
													"objectClass": "player",
													"sid": 392818208108379,
													"parameters": {
														"object": "nonCombatArea"
													}
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "body",
													"sid": 949731453876850,
													"parameters": {
														"animation": "animationName & \"Unarmed_\" & player.degrees",
														"from": "beginning"
													}
												}
											],
											"sid": 698798497685117
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 404852243674637
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "body",
													"sid": 891147137616039,
													"parameters": {
														"animation": "animationName & \"_\" & player.degrees",
														"from": "beginning"
													}
												}
											],
											"sid": 325151199826490
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 231308396923232
										}
									],
									"actions": [],
									"sid": 834228980308368,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-overlapping-another-object",
													"objectClass": "player",
													"sid": 124338315118198,
													"parameters": {
														"object": "nonCombatArea"
													}
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "body",
													"sid": 552711159272530,
													"parameters": {
														"animation": "animationName & \"Unarmed_\" & player.degrees",
														"from": "current-frame"
													}
												}
											],
											"sid": 419077934913228
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 927310848662319
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "body",
													"sid": 679455878213392,
													"parameters": {
														"animation": "animationName & \"_\" & player.degrees",
														"from": "current-frame"
													}
												}
											],
											"sid": 937174547054673
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"type": "comment",
											"text": "this has to be done after the animation is set, so it goes in a blank event, instead of repeating it"
										},
										{
											"id": "set-animation-speed",
											"objectClass": "body",
											"sid": 227155609644533,
											"parameters": {
												"speed": "animationSpeed"
											}
										}
									],
									"sid": 604915883843805
								}
							]
						}
					],
					"sid": 121151613548917
				}
			],
			"sid": 254080374675516
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "overlay",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "settings",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-clicked",
									"objectClass": "fullscreen",
									"sid": 884720227289241
								},
								{
									"id": "on-signal",
									"objectClass": "System",
									"sid": 193635475221663,
									"parameters": {
										"tag": "\"setFullscreen\""
									}
								}
							],
							"actions": [],
							"sid": 320316284696177,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-checked",
											"objectClass": "fullscreen",
											"sid": 779631249255931
										}
									],
									"actions": [
										{
											"id": "request-fullscreen",
											"objectClass": "browser",
											"sid": 952420963287170,
											"parameters": {
												"mode": "stretch-letterbox-scale",
												"navigation-ui": "auto"
											}
										}
									],
									"sid": 436831244908382
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 134815186727090
										}
									],
									"actions": [
										{
											"id": "cancel-fullscreen",
											"objectClass": "browser",
											"sid": 991937773642652
										},
										{
											"id": "maximize",
											"objectClass": "NWjs",
											"sid": 457658142351718
										}
									],
									"sid": 962108258523367
								}
							],
							"isOrBlock": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-clicked",
									"objectClass": "shadows",
									"sid": 878818799881212
								},
								{
									"id": "layer-is-visible",
									"objectClass": "System",
									"sid": 541463885231968,
									"parameters": {
										"layer": "\"mainMenu\""
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "TODO: If this checkbox gets spammed, it might cause problems"
								}
							],
							"sid": 244022475371789,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-checked",
											"objectClass": "shadows",
											"sid": 554532696313372
										},
										{
											"id": "for-each",
											"objectClass": "System",
											"sid": 854294652366274,
											"parameters": {
												"object": "hasShadow"
											}
										}
									],
									"actions": [
										{
											"callFunction": "spawnShadows",
											"sid": 836230612106996
										}
									],
									"sid": 151709082605452
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-checked",
											"objectClass": "shadows",
											"sid": 896903373419417,
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "destroy",
											"objectClass": "shadow",
											"sid": 920179466175367
										},
										{
											"type": "comment",
											"text": "a wait 0 here being the official recommended way to unload images after destroying them, according to the manual"
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 183045845632500,
											"parameters": {
												"seconds": "0"
											}
										},
										{
											"id": "unload-object-images",
											"objectClass": "System",
											"sid": 111126715296548,
											"parameters": {
												"object": "shadow"
											}
										}
									],
									"sid": 606708545399068
								}
							]
						}
					],
					"sid": 594124344109029
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "ability bar",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-signal",
									"objectClass": "System",
									"sid": 731849256423025,
									"parameters": {
										"tag": "\"setAbilities\""
									}
								},
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 842924391244404,
									"parameters": {
										"object": "abilitySlot"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "for each ability cover, create the appropriate ability on the same layer as that cover"
								},
								{
									"id": "create-object-by-name",
									"objectClass": "System",
									"sid": 310461313926225,
									"parameters": {
										"object-name": "body.ObjectTypeName & \"_ability\"",
										"layer": "abilitySlot.LayerName",
										"x": "abilitySlot.X",
										"y": "abilitySlot.Y",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								}
							],
							"sid": 148380052646638,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-last-created",
											"objectClass": "System",
											"sid": 512281520571349,
											"parameters": {
												"object": "ability"
											}
										}
									],
									"actions": [
										{
											"id": "set-effect-enabled",
											"objectClass": "ability",
											"sid": 478618911194993,
											"parameters": {
												"mode": "disable",
												"effect": "\"Grayscale\""
											}
										},
										{
											"id": "set-effect-parameter",
											"objectClass": "ability",
											"sid": 365762631956037,
											"parameters": {
												"effect": "\"Grayscale\"",
												"parameter-index": "0",
												"value": "100"
											}
										},
										{
											"id": "add-child",
											"objectClass": "abilitySlot",
											"sid": 885983193919372,
											"parameters": {
												"child": "ability",
												"transform-x": true,
												"transform-y": true,
												"transform-w": true,
												"transform-h": true,
												"transform-a": true,
												"transform-o": false,
												"transform-z-elevation": true,
												"transform-visibility": false,
												"destroy-with-parent": false
											}
										}
									],
									"sid": 285945286407844,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 384375389560131,
													"parameters": {
														"first-value": "ability.IID",
														"comparison": 0,
														"second-value": "0"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "give the player their first ability"
												},
												{
													"id": "set-animation",
													"objectClass": "ability",
													"sid": 373144257876183,
													"parameters": {
														"animation": "abilitiesArray.At(Functions.getColumnNumber(abilitiesArray.ObjectTypeName, \"simpleName\"), 1)",
														"from": "beginning"
													}
												}
											],
											"sid": 879980347055074
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 192623867896742,
													"parameters": {
														"first-value": "ability.IID",
														"comparison": 0,
														"second-value": "1"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "for debugging"
												},
												{
													"id": "set-animation",
													"objectClass": "ability",
													"sid": 816183634789484,
													"parameters": {
														"animation": "abilitiesArray.At(Functions.getColumnNumber(abilitiesArray.ObjectTypeName, \"simpleName\"), 4)",
														"from": "beginning"
													}
												}
											],
											"sid": 952911104834769
										}
									]
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-click",
									"objectClass": "mouse",
									"sid": 166153498320785,
									"parameters": {
										"mouse-button": "left",
										"click-type": "clicked"
									}
								},
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 787939671581480,
									"parameters": {
										"object": "abilitySlot"
									},
									"isInverted": true
								},
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 521994085679042,
									"parameters": {
										"object": "statue"
									},
									"isInverted": true
								},
								{
									"id": "layer-is-visible",
									"objectClass": "System",
									"sid": 645893643706577,
									"parameters": {
										"layer": "\"abilitySelector\""
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "close the ability selector if we click anywhere that's not an ability or statue"
								},
								{
									"callFunction": "closeLayer",
									"sid": 266146458793314,
									"parameters": [
										"\"abilitySelector\""
									]
								},
								{
									"callFunction": "setCoverHightlight",
									"sid": 631288369787676,
									"parameters": [
										false
									]
								}
							],
							"sid": 520831656298993
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-button-released",
									"objectClass": "mouse",
									"sid": 230212459618653,
									"parameters": {
										"mouse-button": "left"
									}
								},
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 116681259991173,
									"parameters": {
										"object": "ability"
									}
								},
								{
									"id": "is-animation-playing",
									"objectClass": "ability",
									"sid": 163607170891846,
									"parameters": {
										"animation": "\"none\""
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "when we click an ability that's not set to 'none'..."
								},
								{
									"type": "comment",
									"text": "left mouse released instead of 'on click', so when the ability selector is closed after choosing an ability, the click isn't also registered and moves the player"
								}
							],
							"sid": 888951027546163,
							"children": [
								{
									"eventType": "variable",
									"name": "abilityUID",
									"type": "number",
									"initialValue": "0",
									"comment": "the ability's UID, use solely to set the glow effect",
									"isStatic": true,
									"isConstant": false,
									"sid": 726146004487848
								},
								{
									"eventType": "variable",
									"name": "currentAbility",
									"type": "string",
									"initialValue": "",
									"comment": "the ability that's current chosen for the displayed class of abilities",
									"isStatic": true,
									"isConstant": false,
									"sid": 998769302146377
								},
								{
									"eventType": "variable",
									"name": "selectedAbility",
									"type": "string",
									"initialValue": "",
									"comment": "The ability in the ability selector that was selected",
									"isStatic": true,
									"isConstant": false,
									"sid": 451349966261905
								},
								{
									"eventType": "variable",
									"name": "currentCategory",
									"type": "string",
									"initialValue": "",
									"comment": "the class of abilities that's currently being displayed",
									"isStatic": true,
									"isConstant": false,
									"sid": 672748660792463
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-on-layer",
											"objectClass": "ability",
											"sid": 131501295979639,
											"parameters": {
												"layer": "\"abilityBar\""
											}
										},
										{
											"id": "pick-parent",
											"objectClass": "ability",
											"sid": 528251545987983,
											"parameters": {
												"parent": "abilitySlot",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if it's on the ability bar..."
										}
									],
									"sid": 208998898503068,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "layer-is-visible",
													"objectClass": "System",
													"sid": 925518533361833,
													"parameters": {
														"layer": "\"abilitySelector\""
													}
												},
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 996328531262219,
													"parameters": {
														"variable": "currentCategory",
														"comparison": 0,
														"value": "Functions.arrayLookup(abilitiesArray.ObjectTypeName, \"simpleName\", ability.AnimationName, \"category\")"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "if the class of the clicked ability is the one that's already being displayed, just close the ability selector"
												},
												{
													"callFunction": "closeLayer",
													"sid": 851728876144982,
													"parameters": [
														"\"abilitySelector\""
													]
												},
												{
													"callFunction": "setCoverHightlight",
													"sid": 386774398821656,
													"parameters": [
														false
													]
												}
											],
											"sid": 816106086978843
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 804338414293539
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "otherwise, open the ability selector and show the relevant abilities"
												},
												{
													"callFunction": "setCoverHightlight",
													"sid": 177523294220788,
													"parameters": [
														true
													]
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 988164220318512,
													"parameters": {
														"variable": "abilityUID",
														"value": "ability.UID"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 605454855294263,
													"parameters": {
														"variable": "currentAbility",
														"value": "ability.AnimationName"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 331646563762280,
													"parameters": {
														"variable": "currentCategory",
														"value": "Functions.arrayLookup(abilitiesArray.ObjectTypeName, \"simpleName\", ability.AnimationName, \"category\")"
													}
												},
												{
													"callFunction": "openLayer",
													"sid": 671087962683915,
													"parameters": [
														"\"abilitySelector\""
													]
												}
											],
											"sid": 552225060590609,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "for",
															"objectClass": "System",
															"sid": 770594899934171,
															"parameters": {
																"name": "\"\"",
																"start-index": "1",
																"end-index": "abilitiesArray.Height - 1"
															}
														},
														{
															"id": "compare-at-xy",
															"objectClass": "abilitiesArray",
															"sid": 536294436707036,
															"parameters": {
																"x": "Functions.getColumnNumber(abilitiesArray.ObjectTypeName, \"category\")",
																"y": "loopindex",
																"comparison": 0,
																"value": "currentCategory"
															}
														},
														{
															"id": "compare-at-xy",
															"objectClass": "abilitiesArray",
															"sid": 747483695361926,
															"parameters": {
																"x": "Functions.getColumnNumber(abilitiesArray.ObjectTypeName, \"level\")",
																"y": "loopindex",
																"comparison": 3,
																"value": "player.level"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "populate the abilityOptionsArray with abilities that are of the matching class and meet the level requirement"
														},
														{
															"id": "push",
															"objectClass": "abilityOptionsArray",
															"sid": 257492307908906,
															"parameters": {
																"where": "front",
																"value": "abilitiesArray.At(Functions.getColumnNumber(abilitiesArray.ObjectTypeName, \"simpleName\"), loopindex)",
																"axis": "x"
															}
														}
													],
													"sid": 708255959243154
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-all",
															"objectClass": "System",
															"sid": 982520047288136,
															"parameters": {
																"object": "ability"
															}
														}
													],
													"actions": [],
													"sid": 728722378298061,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "pick-by-comparison",
																	"objectClass": "System",
																	"sid": 926374187397733,
																	"parameters": {
																		"object": "ability",
																		"expression": "ability.LayerName",
																		"comparison": 0,
																		"value": "\"abilitySelector\""
																	}
																},
																{
																	"id": "for-each",
																	"objectClass": "System",
																	"sid": 103986784995558,
																	"parameters": {
																		"object": "ability"
																	}
																}
															],
															"actions": [],
															"sid": 622889163515134,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "is-empty",
																			"objectClass": "abilityOptionsArray",
																			"sid": 218549028970161
																		}
																	],
																	"actions": [
																		{
																			"id": "set-animation",
																			"objectClass": "ability",
																			"sid": 741180166312704,
																			"parameters": {
																				"animation": "\"none\"",
																				"from": "beginning"
																			}
																		}
																	],
																	"sid": 208781154702523
																},
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "else",
																			"objectClass": "System",
																			"sid": 421791918312952
																		}
																	],
																	"actions": [
																		{
																			"id": "set-animation",
																			"objectClass": "ability",
																			"sid": 277887591088732,
																			"parameters": {
																				"animation": "abilityOptionsArray.Back",
																				"from": "beginning"
																			}
																		},
																		{
																			"id": "pop",
																			"objectClass": "abilityOptionsArray",
																			"sid": 771062483134409,
																			"parameters": {
																				"where": "back",
																				"axis": "x"
																			}
																		}
																	],
																	"sid": 704351852125970
																},
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "pick-by-comparison",
																			"objectClass": "System",
																			"sid": 992399196919024,
																			"parameters": {
																				"object": "ability",
																				"expression": "ability.AnimationName",
																				"comparison": 0,
																				"value": "currentAbility"
																			}
																		}
																	],
																	"actions": [
																		{
																			"id": "set-effect-enabled",
																			"objectClass": "ability",
																			"sid": 238085019319847,
																			"parameters": {
																				"mode": "enable",
																				"effect": "\"Grayscale\""
																			}
																		}
																	],
																	"sid": 954936503658220
																},
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "pick-by-comparison",
																			"objectClass": "System",
																			"sid": 148325386910517,
																			"parameters": {
																				"object": "ability",
																				"expression": "ability.AnimationName",
																				"comparison": 1,
																				"value": "currentAbility"
																			}
																		}
																	],
																	"actions": [
																		{
																			"id": "set-effect-enabled",
																			"objectClass": "ability",
																			"sid": 145603175504239,
																			"parameters": {
																				"mode": "disable",
																				"effect": "\"Grayscale\""
																			}
																		}
																	],
																	"sid": 674591081863892
																}
															]
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "pick-by-comparison",
																	"objectClass": "System",
																	"sid": 152656832815296,
																	"parameters": {
																		"object": "ability",
																		"expression": "ability.UID",
																		"comparison": 1,
																		"value": "abilityUID"
																	}
																},
																{
																	"id": "pick-all",
																	"objectClass": "System",
																	"sid": 784947759337350,
																	"parameters": {
																		"object": "abilitySlot"
																	}
																},
																{
																	"id": "pick-parent",
																	"objectClass": "ability",
																	"sid": 323380240398685,
																	"parameters": {
																		"parent": "abilitySlot",
																		"which": "own"
																	}
																}
															],
															"actions": [
																{
																	"callFunction": "setCoverHightlight",
																	"sid": 744253514949944,
																	"parameters": [
																		false
																	]
																}
															],
															"sid": 620014128918085
														}
													]
												}
											]
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 197310871060374
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if we clicked on an ability option..."
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 727347019975754,
											"parameters": {
												"variable": "selectedAbility",
												"value": "ability.AnimationName"
											}
										},
										{
											"callFunction": "setCoverHightlight",
											"sid": 567073269370095,
											"parameters": [
												false
											]
										},
										{
											"callFunction": "closeLayer",
											"sid": 127468865291980,
											"parameters": [
												"\"abilitySelector\""
											]
										}
									],
									"sid": 913381454522330,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-all",
													"objectClass": "System",
													"sid": 855871030350454,
													"parameters": {
														"object": "ability"
													}
												},
												{
													"id": "is-animation-playing",
													"objectClass": "ability",
													"sid": 751269906242521,
													"parameters": {
														"animation": "currentAbility"
													}
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "ability",
													"sid": 741897931232925,
													"parameters": {
														"animation": "selectedAbility",
														"from": "beginning"
													}
												}
											],
											"sid": 923600810680650
										}
									]
								}
							]
						},
						{
							"functionName": "setCoverHightlight",
							"functionDescription": "Turns the highlight of an ability cover on or off",
							"functionCategory": "menus",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "on",
									"type": "boolean",
									"initialValue": "false",
									"comment": "whether to turn the highlight on or off",
									"sid": 629415599733892
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 342338163426331,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 931218441751746,
											"parameters": {
												"variable": "on"
											}
										}
									],
									"actions": [
										{
											"id": "set-effect-enabled",
											"objectClass": "abilitySlot",
											"sid": 654147713762156,
											"parameters": {
												"mode": "enable",
												"effect": "\"Brightness\""
											}
										}
									],
									"sid": 611467681715653
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 294577515846640
										}
									],
									"actions": [
										{
											"id": "set-effect-enabled",
											"objectClass": "abilitySlot",
											"sid": 711173797562710,
											"parameters": {
												"mode": "disable",
												"effect": "\"Brightness\""
											}
										}
									],
									"sid": 902932743069428
								}
							]
						}
					],
					"sid": 600010803561002
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "text buttons",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-created",
									"objectClass": "textButtons",
									"sid": 338636659483810
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "change font size instead of position of actual size, this works better once we start dragging around menus with text buttons on them"
								},
								{
									"id": "set-instvar-value",
									"objectClass": "textButtons",
									"sid": 395206916764681,
									"parameters": {
										"instance-variable": "originalFaceSize",
										"value": "Self.FaceSize"
									}
								}
							],
							"sid": 131538089901693
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 503065502826559,
									"parameters": {
										"object": "textButtons"
									}
								}
							],
							"actions": [],
							"sid": 789998557833802,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "mouse-button-is-down",
											"objectClass": "mouse",
											"sid": 624277522715547,
											"parameters": {
												"mouse-button": "left"
											}
										},
										{
											"id": "trigger-once-while-true",
											"objectClass": "System",
											"sid": 256781537362184
										}
									],
									"actions": [
										{
											"id": "set-font-size",
											"objectClass": "textButtons",
											"sid": 857192487048772,
											"parameters": {
												"size-pt": "Self.FaceSize * .9"
											}
										}
									],
									"sid": 397880025818090
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "trigger-once-while-true",
											"objectClass": "System",
											"sid": 218341905454075
										}
									],
									"actions": [
										{
											"id": "set-effect-enabled",
											"objectClass": "textButtons",
											"sid": 383677348512210,
											"parameters": {
												"mode": "enable",
												"effect": "\"GlowHorizontal\""
											}
										},
										{
											"id": "set-effect-enabled",
											"objectClass": "textButtons",
											"sid": 512538497333438,
											"parameters": {
												"mode": "enable",
												"effect": "\"GlowVertical\""
											}
										}
									],
									"sid": 416763800063386
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-button-released",
									"objectClass": "mouse",
									"sid": 360138719168563,
									"parameters": {
										"mouse-button": "left"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "the elses will ensure only one button is ever clicked with each release"
								}
							],
							"sid": 929436437537100,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "cursor-is-over-object",
											"objectClass": "mouse",
											"sid": 789472167050719,
											"parameters": {
												"object": "play"
											}
										}
									],
									"actions": [
										{
											"id": "set-layer-interactive",
											"objectClass": "System",
											"sid": 368453438581152,
											"parameters": {
												"layer": "\"mainMenu\"",
												"interactive": false
											}
										},
										{
											"id": "tween-one-property",
											"objectClass": "fader",
											"sid": 830574222437942,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"\"",
												"property": "offsetOpacity",
												"end-value": "100",
												"time": ".5",
												"ease": "noease",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"id": "wait-for-previous-actions",
											"objectClass": "System",
											"sid": 967673771973946
										},
										{
											"id": "tween-one-property",
											"objectClass": "loadingScreen",
											"sid": 594631295358869,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"\"",
												"property": "offsetOpacity",
												"end-value": "100",
												"time": ".5",
												"ease": "noease",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"id": "wait-for-previous-actions",
											"objectClass": "System",
											"sid": 971229746494791
										},
										{
											"type": "comment",
											"text": "this is separate from making the main menu interactive, so we can prevent double clicks on \"play\" without having the main menu instantly disappear"
										},
										{
											"id": "set-layer-visible",
											"objectClass": "System",
											"sid": 315300035412316,
											"parameters": {
												"layer": "\"mainMenu\"",
												"visibility": "invisible"
											}
										},
										{
											"id": "signal",
											"objectClass": "System",
											"sid": 670296274973281,
											"parameters": {
												"tag": "\"startLoading\""
											}
										}
									],
									"sid": 286943185376714
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 435197868425745
										},
										{
											"id": "cursor-is-over-object",
											"objectClass": "mouse",
											"sid": 489043993651650,
											"parameters": {
												"object": "resume"
											}
										}
									],
									"actions": [
										{
											"id": "set-time-scale",
											"objectClass": "System",
											"sid": 359576134942504,
											"parameters": {
												"time-scale": "1"
											}
										},
										{
											"callFunction": "closeLayer",
											"sid": 271055231762324,
											"parameters": [
												"\"escapeMenu\""
											]
										},
										{
											"id": "set-layer-interactive",
											"objectClass": "System",
											"sid": 542104168578441,
											"parameters": {
												"layer": "\"main\"",
												"interactive": true
											}
										},
										{
											"id": "set-layer-interactive",
											"objectClass": "System",
											"sid": 375722271217346,
											"parameters": {
												"layer": "\"abilityBar\"",
												"interactive": true
											}
										},
										{
											"id": "set-layer-interactive",
											"objectClass": "System",
											"sid": 715979451338509,
											"parameters": {
												"layer": "\"background\"",
												"interactive": true
											}
										}
									],
									"sid": 732498834150420
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 645320405410371
										},
										{
											"id": "cursor-is-over-object",
											"objectClass": "mouse",
											"sid": 903858500844683,
											"parameters": {
												"object": "settings"
											}
										}
									],
									"actions": [
										{
											"callFunction": "closeLayer",
											"sid": 371405180610885,
											"parameters": [
												"\"startMenu\""
											]
										},
										{
											"callFunction": "closeLayer",
											"sid": 404139501071200,
											"parameters": [
												"\"escapeMenu\""
											]
										},
										{
											"callFunction": "openLayer",
											"sid": 269457566869366,
											"parameters": [
												"\"settingsMenu\""
											]
										}
									],
									"sid": 621365975628591,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "layer-is-visible",
													"objectClass": "System",
													"sid": 406363912356451,
													"parameters": {
														"layer": "\"mainMenu\""
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "if we're on the main menu, make the text buttons not interactable after the settings menu opens"
												},
												{
													"id": "set-layer-interactive",
													"objectClass": "System",
													"sid": 193432582475267,
													"parameters": {
														"layer": "\"mainMenu\"",
														"interactive": false
													}
												}
											],
											"sid": 143559116245592
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 228808632078173
										},
										{
											"id": "cursor-is-over-object",
											"objectClass": "mouse",
											"sid": 751653092246409,
											"parameters": {
												"object": "back"
											}
										}
									],
									"actions": [
										{
											"callFunction": "closeLayer",
											"sid": 450521796405513,
											"parameters": [
												"\"settingsMenu\""
											]
										}
									],
									"sid": 712524815953989,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "layer-is-visible",
													"objectClass": "System",
													"sid": 636222857891383,
													"parameters": {
														"layer": "\"mainMenu\""
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "if we were on the main menu, make the text buttons interactable again when the settings close"
												},
												{
													"id": "set-layer-interactive",
													"objectClass": "System",
													"sid": 450449840628637,
													"parameters": {
														"layer": "\"mainMenu\"",
														"interactive": true
													}
												}
											],
											"sid": 264452684314489
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 601424569685679
												}
											],
											"actions": [
												{
													"callFunction": "openLayer",
													"sid": 384609591142886,
													"parameters": [
														"\"escapeMenu\""
													]
												}
											],
											"sid": 885224889590265
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 858343085778986
										},
										{
											"id": "cursor-is-over-object",
											"objectClass": "mouse",
											"sid": 803411465191552,
											"parameters": {
												"object": "exit"
											}
										}
									],
									"actions": [
										{
											"id": "close",
											"objectClass": "browser",
											"sid": 431847613598267
										}
									],
									"sid": 775602261724262
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 441559908758599
										},
										{
											"id": "cursor-is-over-object",
											"objectClass": "mouse",
											"sid": 906734121434280,
											"parameters": {
												"object": "save"
											}
										}
									],
									"actions": [
										{
											"callFunction": "saveGame",
											"sid": 813485864869611
										}
									],
									"sid": 976071399932294
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 497351682173627,
									"parameters": {
										"object": "textButtons"
									},
									"isInverted": true
								},
								{
									"id": "mouse-button-is-down",
									"objectClass": "mouse",
									"sid": 594961166438681,
									"parameters": {
										"mouse-button": "left"
									},
									"isInverted": true
								}
							],
							"actions": [],
							"sid": 688824896354918,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "trigger-once-while-true",
											"objectClass": "System",
											"sid": 899287018203679
										}
									],
									"actions": [
										{
											"id": "set-font-size",
											"objectClass": "textButtons",
											"sid": 868780918278046,
											"parameters": {
												"size-pt": "Self.originalFaceSize"
											}
										}
									],
									"sid": 337106989943488
								}
							],
							"isOrBlock": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 817250147786579,
									"parameters": {
										"object": "textButtons"
									},
									"isInverted": true
								},
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 226840281183386
								}
							],
							"actions": [
								{
									"id": "set-effect-enabled",
									"objectClass": "textButtons",
									"sid": 748635816528097,
									"parameters": {
										"mode": "disable",
										"effect": "\"GlowHorizontal\""
									}
								},
								{
									"id": "set-effect-enabled",
									"objectClass": "textButtons",
									"sid": 357362083477838,
									"parameters": {
										"mode": "disable",
										"effect": "\"GlowVertical\""
									}
								}
							],
							"sid": 974878943780297
						}
					],
					"sid": 139549291994701
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "menus",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-drag-start",
									"objectClass": "statue",
									"sid": 604836220159451,
									"behaviorType": "DragDrop"
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "disable anchoring when we move a statue, and don't turn it back on until we reset the settings"
								},
								{
									"id": "set-enabled",
									"objectClass": "statue",
									"sid": 415687442313234,
									"behaviorType": "Anchor",
									"parameters": {
										"state": "disabled"
									}
								},
								{
									"id": "move-layer",
									"objectClass": "System",
									"sid": 514606985739261,
									"parameters": {
										"layer": "statue.LayerName",
										"insert-by": "\"tooltip\"",
										"where": "below"
									}
								}
							],
							"sid": 538423186911769
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-opacity",
									"objectClass": "loadingText",
									"sid": 183271123958890,
									"parameters": {
										"comparison": 1,
										"opacity": "0"
									}
								},
								{
									"id": "every-x-seconds",
									"objectClass": "System",
									"sid": 280046529311295,
									"parameters": {
										"interval-seconds": "1.0"
									}
								}
							],
							"actions": [
								{
									"id": "append-text",
									"objectClass": "loadingText",
									"sid": 156015385953250,
									"parameters": {
										"text": "\".\""
									}
								}
							],
							"sid": 224088913979755,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-text",
											"objectClass": "loadingText",
											"sid": 165844915572928,
											"parameters": {
												"text-to-compare": "\"loading....\"",
												"case-sensitivity": "case-sensitive"
											}
										}
									],
									"actions": [
										{
											"id": "set-text",
											"objectClass": "loadingText",
											"sid": 915878164556293,
											"parameters": {
												"text": "\"loading\""
											}
										}
									],
									"sid": 131672576122018
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "layer-is-interactive",
									"objectClass": "System",
									"sid": 783488370144269,
									"parameters": {
										"layer": "\"escapeMenu\""
									},
									"isInverted": true
								},
								{
									"id": "layer-is-interactive",
									"objectClass": "System",
									"sid": 767964414839531,
									"parameters": {
										"layer": "\"settingsMenu\""
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "you can only open game menus when the game isn't paused"
								}
							],
							"sid": 589869390653306,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-key-pressed",
											"objectClass": "keyboard",
											"sid": 598601637453541,
											"parameters": {
												"key": 67
											}
										}
									],
									"actions": [],
									"sid": 178878258421278,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "layer-is-interactive",
													"objectClass": "System",
													"sid": 869535471606522,
													"parameters": {
														"layer": "\"characterMenu\""
													}
												}
											],
											"actions": [
												{
													"callFunction": "closeLayer",
													"sid": 917867284245243,
													"parameters": [
														"\"characterMenu\""
													]
												}
											],
											"sid": 262009421223096
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 753520278789364
												}
											],
											"actions": [
												{
													"callFunction": "openLayer",
													"sid": 349067267734666,
													"parameters": [
														"\"characterMenu\""
													]
												}
											],
											"sid": 497647737905739
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-key-pressed",
											"objectClass": "keyboard",
											"sid": 370431537167266,
											"parameters": {
												"key": 73
											}
										}
									],
									"actions": [],
									"sid": 737222622995605,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "layer-is-interactive",
													"objectClass": "System",
													"sid": 387601690380153,
													"parameters": {
														"layer": "\"inventoryMenu\""
													}
												}
											],
											"actions": [
												{
													"callFunction": "closeLayer",
													"sid": 662212905681547,
													"parameters": [
														"\"inventoryMenu\""
													]
												}
											],
											"sid": 428106017687038
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 586412931600477
												}
											],
											"actions": [
												{
													"callFunction": "openLayer",
													"sid": 640706410167039,
													"parameters": [
														"\"inventoryMenu\""
													]
												}
											],
											"sid": 428606722325241
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-key-pressed",
											"objectClass": "keyboard",
											"sid": 190862893393706,
											"parameters": {
												"key": 27
											}
										},
										{
											"id": "layer-is-interactive",
											"objectClass": "System",
											"sid": 123582640644231,
											"parameters": {
												"layer": "\"mainMenu\""
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"callFunction": "closeDialog",
											"sid": 436185292278617
										},
										{
											"id": "set-layer-interactive",
											"objectClass": "System",
											"sid": 866498944092759,
											"parameters": {
												"layer": "\"main\"",
												"interactive": false
											}
										},
										{
											"id": "set-layer-interactive",
											"objectClass": "System",
											"sid": 913446666074020,
											"parameters": {
												"layer": "\"abilityBar\"",
												"interactive": false
											}
										},
										{
											"id": "set-layer-interactive",
											"objectClass": "System",
											"sid": 320766050784367,
											"parameters": {
												"layer": "\"background\"",
												"interactive": false
											}
										},
										{
											"callFunction": "closeLayer",
											"sid": 653317503500515,
											"parameters": [
												"\"characterMenu\""
											]
										},
										{
											"callFunction": "closeLayer",
											"sid": 634976525456230,
											"parameters": [
												"\"inventoryMenu\""
											]
										},
										{
											"callFunction": "closeLayer",
											"sid": 268127072506266,
											"parameters": [
												"\"abilitySelector\""
											]
										},
										{
											"callFunction": "openLayer",
											"sid": 285880886589486,
											"parameters": [
												"\"escapeMenu\""
											]
										},
										{
											"id": "set-time-scale",
											"objectClass": "System",
											"sid": 491153929553650,
											"parameters": {
												"time-scale": "0"
											}
										}
									],
									"sid": 320363040752513
								}
							]
						},
						{
							"functionName": "closeLayer",
							"functionDescription": "Close the specified layer",
							"functionCategory": "menus",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "menuName",
									"type": "string",
									"initialValue": "",
									"comment": "The name of the layer to close",
									"sid": 231291736061001
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 882411785524150,
									"parameters": {
										"layer": "menuName",
										"interactive": false
									}
								},
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 170936119734949,
									"parameters": {
										"layer": "menuName",
										"visibility": "invisible"
									}
								}
							],
							"sid": 475860601676582
						},
						{
							"functionName": "openLayer",
							"functionDescription": "Open the specified layer",
							"functionCategory": "menus",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "menuName",
									"type": "string",
									"initialValue": "",
									"comment": "The name of the layer to open",
									"sid": 228302164093831
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 561058418895223,
									"parameters": {
										"layer": "menuName",
										"interactive": true
									}
								},
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 667878201713297,
									"parameters": {
										"layer": "menuName",
										"visibility": "visible"
									}
								}
							],
							"sid": 667271432738870
						}
					],
					"sid": 121445526787026
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "tooltip",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 981186403162279,
									"parameters": {
										"object": "item"
									}
								},
								{
									"id": "is-dragging",
									"objectClass": "item",
									"sid": 661446268155956,
									"behaviorType": "DragDrop",
									"isInverted": true
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "TODO: Make sure this works with rings"
								},
								{
									"callFunction": "updateTooltip",
									"sid": 492511576570162,
									"parameters": [
										false,
										"item.fullName",
										"item.classRestrictions",
										"item.level",
										"item.mods",
										"item.lore"
									]
								}
							],
							"sid": 790194075805752,
							"children": [
								{
									"eventType": "variable",
									"name": "typeForComparison",
									"type": "string",
									"initialValue": "",
									"comment": "The type of the gear that we want to compare",
									"isStatic": true,
									"isConstant": false,
									"sid": 601592912280583
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-on-layer",
											"objectClass": "item",
											"sid": 144692810035873,
											"parameters": {
												"layer": "\"inventoryMenu\""
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if the item is in the inventory, compare to the relevant equipped item, if one exists"
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 900795861844406,
											"parameters": {
												"variable": "typeForComparison",
												"value": "item.type"
											}
										}
									],
									"sid": 605206569134355,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-all",
													"objectClass": "System",
													"sid": 501700459756974,
													"parameters": {
														"object": "item"
													}
												},
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 455722943966993,
													"parameters": {
														"object": "item",
														"expression": "item.LayerName",
														"comparison": 0,
														"value": "\"characterMenu\""
													}
												},
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 568491989334633,
													"parameters": {
														"object": "item",
														"expression": "item.type",
														"comparison": 0,
														"value": "typeForComparison"
													}
												}
											],
											"actions": [
												{
													"callFunction": "updateComparisonTooltip",
													"sid": 987586995886080,
													"parameters": [
														"item.fullName",
														"item.classRestrictions",
														"item.level",
														"item.mods",
														"item.lore"
													]
												}
											],
											"sid": 919484608171964
										}
									]
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 581155306246120
								},
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 792740501012082,
									"parameters": {
										"object": "loot"
									}
								},
								{
									"id": "pick-topbottom",
									"objectClass": "loot",
									"sid": 313560641429212,
									"parameters": {
										"which": "top"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "the \"else\" is for if we drag and hold an item over a loot"
								},
								{
									"callFunction": "updateTooltip",
									"sid": 761579158674167,
									"parameters": [
										false,
										"loot.fullName",
										"loot.classRestrictions",
										"loot.level",
										"loot.mods",
										"loot.lore"
									]
								}
							],
							"sid": 147156728149685
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 589066293736765
								},
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 508854908562343,
									"parameters": {
										"object": "ability"
									}
								},
								{
									"id": "is-animation-playing",
									"objectClass": "ability",
									"sid": 741682250451677,
									"parameters": {
										"animation": "\"none\""
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"callFunction": "updateTooltip",
									"sid": 780753506499680,
									"parameters": [
										true,
										"Functions.arrayLookup(abilitiesArray.ObjectTypeName, \"simpleName\", ability.AnimationName, \"fullName\")",
										"Functions.arrayLookup(abilitiesArray.ObjectTypeName, \"simpleName\", ability.AnimationName, \"class\")",
										"int(Functions.arrayLookup(abilitiesArray.ObjectTypeName, \"simpleName\", ability.AnimationName, \"level\"))",
										"Functions.arrayLookup(abilitiesArray.ObjectTypeName, \"simpleName\", ability.AnimationName, \"description\")",
										"Functions.arrayLookup(abilitiesArray.ObjectTypeName, \"simpleName\", ability.AnimationName, \"lore\")"
									]
								}
							],
							"sid": 363981334138353
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 321286857234222
								},
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 796967080551416
								}
							],
							"actions": [
								{
									"id": "set-opacity",
									"objectClass": "tooltip",
									"sid": 798114110205421,
									"parameters": {
										"opacity": "0"
									}
								},
								{
									"id": "set-opacity",
									"objectClass": "comparisonTooltip",
									"sid": 735608559975432,
									"parameters": {
										"opacity": "0"
									}
								}
							],
							"sid": 736478380255083
						},
						{
							"functionName": "updateTooltip",
							"functionDescription": "update and show the tooltip with the specified information",
							"functionCategory": "menus",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "isAbility",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"sid": 644466920870083
								},
								{
									"name": "name",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 655975269993235
								},
								{
									"name": "class",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 945794792643289
								},
								{
									"name": "level",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"sid": 445357807781583
								},
								{
									"name": "text",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 893908292176095
								},
								{
									"name": "lore",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 824750967220550
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "tooltipName",
									"sid": 534517625800845,
									"parameters": {
										"text": "name"
									}
								},
								{
									"id": "set-text",
									"objectClass": "tooltipClass",
									"sid": 522948856064234,
									"parameters": {
										"text": "class"
									}
								},
								{
									"id": "set-text",
									"objectClass": "tooltipLevel",
									"sid": 645922994485869,
									"parameters": {
										"text": "\"Level \" & level"
									}
								},
								{
									"id": "set-text",
									"objectClass": "tooltipLore",
									"sid": 752447281676204,
									"parameters": {
										"text": "lore"
									}
								}
							],
							"sid": 759325424482027,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 649898746054398,
											"parameters": {
												"variable": "isAbility"
											}
										}
									],
									"actions": [
										{
											"id": "set-text",
											"objectClass": "tooltipDescription",
											"sid": 450889447511397,
											"parameters": {
												"text": "text"
											}
										},
										{
											"id": "set-font-color",
											"objectClass": "tooltipClass",
											"sid": 508058487582192,
											"parameters": {
												"color": "rgb(235, 223, 164)"
											}
										},
										{
											"id": "set-font-color",
											"objectClass": "tooltipLevel",
											"sid": 562615732621313,
											"parameters": {
												"color": "rgb(235, 223, 164)"
											}
										}
									],
									"sid": 763060192049106
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 763942990940543
										}
									],
									"actions": [
										{
											"id": "set-text",
											"objectClass": "tooltipDescription",
											"sid": 450876267436261,
											"parameters": {
												"text": "\"\""
											}
										}
									],
									"sid": 646781768384696,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "for",
													"objectClass": "System",
													"sid": 401957080157648,
													"parameters": {
														"name": "\"\"",
														"start-index": "0",
														"end-index": "tokencount(text, \";\") - 2"
													}
												}
											],
											"actions": [
												{
													"id": "append-text",
													"objectClass": "tooltipDescription",
													"sid": 406451035312540,
													"parameters": {
														"text": "RegexReplace(tokenat(tokenat(text, loopindex, \";\"), 1, \":\"), \"\\{|}\", \"g\", \"\") & newline "
													}
												}
											],
											"sid": 630356183524025
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 734959368484984,
													"parameters": {
														"value": "find(class, body.ObjectTypeName) <> -1 | findCase(class, \"All Classes\") <> - 1"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "set the color of the level and class restrictions text box depending if the player can use them. (evaluate with or operator wasn't working)"
												},
												{
													"id": "set-font-color",
													"objectClass": "tooltipClass",
													"sid": 690009318545707,
													"parameters": {
														"color": "rgbEx(0, 100, 0)"
													}
												}
											],
											"sid": 765991964130597,
											"isOrBlock": true
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 813739954778648
												}
											],
											"actions": [
												{
													"id": "set-font-color",
													"objectClass": "tooltipClass",
													"sid": 887313244913320,
													"parameters": {
														"color": "rgbEx(100, 0, 0)"
													}
												}
											],
											"sid": 699456439858615
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 696338830206071,
													"parameters": {
														"first-value": "player.level",
														"comparison": 5,
														"second-value": "level"
													}
												}
											],
											"actions": [
												{
													"id": "set-font-color",
													"objectClass": "tooltipLevel",
													"sid": 309880282157325,
													"parameters": {
														"color": "rgbEx(0, 100, 0)"
													}
												}
											],
											"sid": 794048442218917
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 771110532435994
												}
											],
											"actions": [
												{
													"id": "set-font-color",
													"objectClass": "tooltipLevel",
													"sid": 502447536210441,
													"parameters": {
														"color": "rgbEx(100, 0, 0)"
													}
												}
											],
											"sid": 196249808030852
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each-ordered",
											"objectClass": "System",
											"sid": 843521397468893,
											"parameters": {
												"object": "tooltipText",
												"expression": "tooltipText.TextWidth",
												"order": "descending"
											}
										}
									],
									"actions": [
										{
											"id": "set-width",
											"objectClass": "tooltip",
											"sid": 105216766448373,
											"parameters": {
												"width": "tooltipText.TextWidth + 50"
											}
										},
										{
											"id": "stop-loop",
											"objectClass": "System",
											"sid": 620375102499779
										}
									],
									"sid": 330945650350467
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"type": "comment",
											"text": "wait for the text to render. Using layer opacity or visibility will cause a stutter when changing text values"
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 694290287195429,
											"parameters": {
												"seconds": "0"
											}
										},
										{
											"id": "set-opacity",
											"objectClass": "tooltip",
											"sid": 306451052549903,
											"parameters": {
												"opacity": "100"
											}
										}
									],
									"sid": 662762068157903
								}
							]
						},
						{
							"functionName": "updateComparisonTooltip",
							"functionDescription": "update and show the comparison tooltip with the specified information",
							"functionCategory": "menus",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "name",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 910590846581926
								},
								{
									"name": "class",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 591887021608529
								},
								{
									"name": "level",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"sid": 301944540294416
								},
								{
									"name": "text",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 893566839981270
								},
								{
									"name": "lore",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 711926424267286
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"type": "comment",
									"text": "we can't compare abilities, so no boolean parameter for that"
								},
								{
									"id": "set-text",
									"objectClass": "comparisonTooltipName",
									"sid": 824814775616819,
									"parameters": {
										"text": "name"
									}
								},
								{
									"id": "set-text",
									"objectClass": "comparisonTooltipClass",
									"sid": 543527112959690,
									"parameters": {
										"text": "class"
									}
								},
								{
									"id": "set-text",
									"objectClass": "comparisonTooltipLevel",
									"sid": 824938158454118,
									"parameters": {
										"text": "\"Level \" & level"
									}
								},
								{
									"id": "set-text",
									"objectClass": "comparisonTooltipLore",
									"sid": 575354792888595,
									"parameters": {
										"text": "lore"
									}
								},
								{
									"id": "set-text",
									"objectClass": "comparisonTooltipDescription",
									"sid": 399001034140106,
									"parameters": {
										"text": "\"\""
									}
								}
							],
							"sid": 943885777192739,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 829112719816767,
											"parameters": {
												"name": "\"\"",
												"start-index": "0",
												"end-index": "tokencount(text, \";\") - 2"
											}
										}
									],
									"actions": [
										{
											"id": "append-text",
											"objectClass": "comparisonTooltipDescription",
											"sid": 265087721775888,
											"parameters": {
												"text": "RegexReplace(tokenat(tokenat(text, loopindex, \";\"), 1, \":\"), \"\\{|}\", \"g\", \"\") & newline "
											}
										}
									],
									"sid": 166074427221325
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 134440797018304,
											"parameters": {
												"value": "find(class, body.ObjectTypeName) <> -1 | findCase(class, \"All Classes\") <> - 1"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "set the color of the level and class restrictions text box depending if the player can use them. (evaluate with or operator wasn't working)"
										},
										{
											"id": "set-font-color",
											"objectClass": "comparisonTooltipClass",
											"sid": 983222596540263,
											"parameters": {
												"color": "rgbEx(0, 100, 0)"
											}
										}
									],
									"sid": 928300519864730,
									"isOrBlock": true
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 464183020747268
										}
									],
									"actions": [
										{
											"id": "set-font-color",
											"objectClass": "comparisonTooltipClass",
											"sid": 673913629937480,
											"parameters": {
												"color": "rgbEx(100, 0, 0)"
											}
										}
									],
									"sid": 570480678051004
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 792823110178621,
											"parameters": {
												"first-value": "player.level",
												"comparison": 5,
												"second-value": "level"
											}
										}
									],
									"actions": [
										{
											"id": "set-font-color",
											"objectClass": "comparisonTooltipLevel",
											"sid": 570492528701475,
											"parameters": {
												"color": "rgbEx(0, 100, 0)"
											}
										}
									],
									"sid": 103253862958061
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 246626424806030
										}
									],
									"actions": [
										{
											"id": "set-font-color",
											"objectClass": "comparisonTooltipLevel",
											"sid": 966203662113193,
											"parameters": {
												"color": "rgbEx(100, 0, 0)"
											}
										}
									],
									"sid": 452964067971167
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each-ordered",
											"objectClass": "System",
											"sid": 976685334015162,
											"parameters": {
												"object": "comparisonTooltipText",
												"expression": "comparisonTooltipText.TextWidth",
												"order": "descending"
											}
										}
									],
									"actions": [
										{
											"id": "set-width",
											"objectClass": "comparisonTooltip",
											"sid": 115456399313237,
											"parameters": {
												"width": "comparisonTooltipText.TextWidth + 50"
											}
										},
										{
											"id": "stop-loop",
											"objectClass": "System",
											"sid": 220779688855783
										}
									],
									"sid": 758644597798527
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"type": "comment",
											"text": "wait for the text to render. Using layer opacity or visibility will cause a stutter when changing text values"
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 958235739280331,
											"parameters": {
												"seconds": "0"
											}
										},
										{
											"id": "set-opacity",
											"objectClass": "comparisonTooltip",
											"sid": 665808019213538,
											"parameters": {
												"opacity": "100"
											}
										}
									],
									"sid": 345794445703827
								}
							]
						}
					],
					"sid": 534862555037467
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "enemy info",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"functionName": "updateEnemyInfo",
							"functionDescription": "",
							"functionCategory": "",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "enemyName",
									"sid": 141033310620679,
									"parameters": {
										"text": "enemy.fullName"
									}
								},
								{
									"id": "set-text",
									"objectClass": "enemyAttributes",
									"sid": 409317286234059,
									"parameters": {
										"text": "\"\""
									}
								}
							],
							"sid": 207514323582349,
							"children": [
								{
									"eventType": "variable",
									"name": "attributes",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 868891487243485
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 282617316485548,
											"parameters": {
												"variable": "attributes",
												"value": "Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", enemy.simpleName, \"attributes\")"
											}
										}
									],
									"sid": 840458797442361
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 317603452927616,
											"parameters": {
												"name": "\"\"",
												"start-index": "0",
												"end-index": "tokencount(attributes, \",\")"
											}
										}
									],
									"actions": [
										{
											"id": "append-text",
											"objectClass": "enemyAttributes",
											"sid": 350219713546243,
											"parameters": {
												"text": "tokenat(attributes, loopindex, \",\") & newline"
											}
										}
									],
									"sid": 613390831560091
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 875991590626014,
											"parameters": {
												"seconds": "0"
											}
										},
										{
											"id": "set-opacity",
											"objectClass": "enemyHealthFrame",
											"sid": 725478292957384,
											"parameters": {
												"opacity": "100"
											}
										}
									],
									"sid": 984462441645642
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 560016983693502,
									"parameters": {
										"object": "enemyBody"
									}
								},
								{
									"id": "pick-topbottom",
									"objectClass": "enemyBody",
									"sid": 941475082877777,
									"parameters": {
										"which": "top"
									}
								},
								{
									"id": "pick-parent",
									"objectClass": "enemyBody",
									"sid": 795137331020642,
									"parameters": {
										"parent": "enemy",
										"which": "own"
									}
								}
							],
							"actions": [],
							"sid": 107491999194856,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "trigger-once-while-true",
											"objectClass": "System",
											"sid": 960441615476776
										}
									],
									"actions": [
										{
											"callFunction": "updateEnemyInfo",
											"sid": 425571750613563
										}
									],
									"sid": 639451042301086
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-text",
											"objectClass": "enemyName",
											"sid": 434210227725965,
											"parameters": {
												"text-to-compare": "enemy.fullName",
												"case-sensitivity": "ignore-case"
											},
											"isInverted": true
										},
										{
											"id": "trigger-once-while-true",
											"objectClass": "System",
											"sid": 957637580777324
										}
									],
									"actions": [
										{
											"callFunction": "updateEnemyInfo",
											"sid": 381983047162617
										}
									],
									"sid": 866235878046209
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 154584809601562,
											"parameters": {
												"first-value": "enemyHealthBar.ImageScaleX",
												"comparison": 1,
												"second-value": "enemy.currentHealth / enemy.maxHealth * 100"
											}
										},
										{
											"id": "trigger-once-while-true",
											"objectClass": "System",
											"sid": 765997918956657
										}
									],
									"actions": [
										{
											"id": "set-image-scale-x",
											"objectClass": "enemyHealthBar",
											"sid": 427298398704366,
											"parameters": {
												"scale-x": "enemy.currentHealth / enemy.maxHealth * 100"
											}
										}
									],
									"sid": 782496995465253
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 879642486780677
								},
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 479992439038144
								}
							],
							"actions": [
								{
									"id": "set-opacity",
									"objectClass": "enemyHealthFrame",
									"sid": 977522645063873,
									"parameters": {
										"opacity": "0"
									}
								}
							],
							"sid": 820060221223573
						}
					],
					"sid": 407220405598445
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 540998461367906
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "https://github.com/Laserwolve-Games/DaggerQuest/issues/39",
							"text-color": [
								0,
								0,
								1,
								1
							],
							"background-color": [
								1,
								1,
								1,
								1
							]
						},
						{
							"id": "set-opacity",
							"objectClass": "loadingText",
							"sid": 539616378611820,
							"parameters": {
								"opacity": "loadingScreen.Opacity"
							}
						},
						{
							"id": "set-opacity",
							"objectClass": "loadingTextBackground",
							"sid": 524956281529582,
							"parameters": {
								"opacity": "loadingScreen.Opacity"
							}
						}
					],
					"sid": 719910557193400
				}
			],
			"sid": 491413826418283
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "enemies",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "enemy generation",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-signal",
									"objectClass": "System",
									"sid": 434373747254022,
									"parameters": {
										"tag": "\"generateEnemies\""
									}
								}
							],
							"actions": [],
							"sid": 258393414366867,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "repeat",
											"objectClass": "System",
											"sid": 836240726222999,
											"parameters": {
												"count": "5"
											}
										}
									],
									"actions": [
										{
											"id": "create-object",
											"objectClass": "System",
											"sid": 817989080893966,
											"parameters": {
												"object-to-create": "enemy",
												"layer": "\"mechanics\"",
												"x": "1200 + random(-100, 100)",
												"y": "1200 + random(-100, 100)",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 153383100038050,
											"parameters": {
												"instance-variable": "simpleName",
												"value": "advancedRandom.WeightedByName(\"enemies\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 255914402663929,
											"disabled": true,
											"parameters": {
												"instance-variable": "simpleName",
												"value": "\"goblinArcher\""
											}
										},
										{
											"id": "set-width",
											"objectClass": "enemy",
											"sid": 427898120293848,
											"parameters": {
												"width": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"size\"))"
											}
										},
										{
											"id": "set-height",
											"objectClass": "enemy",
											"sid": 645724007798150,
											"parameters": {
												"height": "Self.Width * 1/3"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 400310089290897,
											"parameters": {
												"instance-variable": "arcaneDamage",
												"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"arcaneDamage\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 182837757962810,
											"parameters": {
												"instance-variable": "attackSpeed",
												"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"attackSpeed\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 504830492173575,
											"parameters": {
												"instance-variable": "attributes",
												"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"attributes\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 580002954197100,
											"parameters": {
												"instance-variable": "coldDamage",
												"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"coldDamage\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 624138163257823,
											"parameters": {
												"instance-variable": "corruptDamage",
												"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"corruptDamage\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 611307284639910,
											"parameters": {
												"instance-variable": "fireDamage",
												"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"fireDamage\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 913257578666083,
											"parameters": {
												"instance-variable": "fullName",
												"value": "Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"fullName\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 804358855674666,
											"parameters": {
												"instance-variable": "currentHealth",
												"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"health\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 216145688867608,
											"parameters": {
												"instance-variable": "maxHealth",
												"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"health\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 242373758554037,
											"parameters": {
												"instance-variable": "lightningDamage",
												"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"lightningDamage\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 674841003089077,
											"parameters": {
												"instance-variable": "slashDamage",
												"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"slashDamage\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 179872877107735,
											"parameters": {
												"instance-variable": "smashDamage",
												"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"smashDamage\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 901695383750276,
											"parameters": {
												"instance-variable": "stabDamage",
												"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"stabDamage\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 329452382412430,
											"parameters": {
												"instance-variable": "type",
												"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"type\"))"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 714518405686285,
											"parameters": {
												"instance-variable": "attackRange",
												"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"attackRange\"))"
											}
										},
										{
											"id": "set-max-speed",
											"objectClass": "enemy",
											"sid": 890227594666955,
											"behaviorType": "MoveTo",
											"parameters": {
												"max-speed": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"movementSpeed\"))"
											}
										},
										{
											"id": "set-range",
											"objectClass": "enemy",
											"sid": 734780333858861,
											"behaviorType": "LineOfSight",
											"parameters": {
												"range": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"sightRange\"))"
											}
										},
										{
											"id": "add-obstacle",
											"objectClass": "enemy",
											"sid": 937085143334034,
											"behaviorType": "LineOfSight",
											"parameters": {
												"obstacle": "prop"
											}
										},
										{
											"id": "start-timer",
											"objectClass": "enemy",
											"sid": 927742037862492,
											"behaviorType": "Timer",
											"parameters": {
												"duration": "random(2, 4)",
												"type": "regular",
												"tag": "\"idle\""
											}
										},
										{
											"type": "comment",
											"text": "set a random facing on spawn, and spawn the enemy's body"
										},
										{
											"id": "set-moving-angle",
											"objectClass": "enemy",
											"sid": 719043212896691,
											"behaviorType": "MoveTo",
											"parameters": {
												"angle": "random(-180, 180)"
											}
										},
										{
											"id": "create-object-by-name",
											"objectClass": "System",
											"sid": 525499604242985,
											"parameters": {
												"object-name": "enemy.simpleName",
												"layer": "\"main\"",
												"x": "enemy.X",
												"y": "enemy.Y",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										}
									],
									"sid": 280230353193906,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-last-created",
													"objectClass": "System",
													"sid": 649469891952876,
													"parameters": {
														"object": "enemyBody"
													}
												}
											],
											"actions": [
												{
													"id": "add-child",
													"objectClass": "enemy",
													"sid": 477573968724165,
													"parameters": {
														"child": "enemyBody",
														"transform-x": true,
														"transform-y": true,
														"transform-w": false,
														"transform-h": false,
														"transform-a": false,
														"transform-o": true,
														"transform-z-elevation": false,
														"transform-visibility": false,
														"destroy-with-parent": true
													}
												}
											],
											"sid": 567146891182716
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 111919074606738,
											"parameters": {
												"variable": "enemiesLoaded",
												"value": "true"
											}
										}
									],
									"sid": 255136346252609
								}
							]
						}
					],
					"sid": 644327675921449
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "behaviors",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-on-screen",
									"objectClass": "enemyBody",
									"sid": 426377860000821
								},
								{
									"id": "pick-parent",
									"objectClass": "enemyBody",
									"sid": 814286520771065,
									"parameters": {
										"parent": "enemy",
										"which": "own"
									}
								}
							],
							"actions": [],
							"sid": 476001805712100,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "enemy",
											"sid": 248089365326045,
											"parameters": {
												"instance-variable": "currentHealth",
												"comparison": 3,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "enemy",
											"sid": 373656054592635,
											"parameters": {
												"instance-variable": "alive",
												"value": "false"
											}
										}
									],
									"sid": 858660492222022
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "enemy",
											"sid": 384560223884263,
											"parameters": {
												"instance-variable": "alive"
											}
										},
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 617997223111887,
											"parameters": {
												"first-value": "timescale",
												"comparison": 1,
												"second-value": "0"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "check if we're not paused, otherwise enemies will continue to push out of each other"
										}
									],
									"sid": 933842933885710,
									"children": [
										{
											"eventType": "comment",
											"text": "if enemies overlap, slowly push one of them away. This can cause enemies to overlap the player or props, so push them out if that happens."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-overlapping-another-object",
													"objectClass": "enemy",
													"sid": 932816908214743,
													"parameters": {
														"object": "enemy"
													}
												},
												{
													"id": "pick-topbottom",
													"objectClass": "enemy",
													"sid": 384235396994498,
													"parameters": {
														"which": "bottom"
													}
												}
											],
											"actions": [
												{
													"id": "move-at-angle",
													"objectClass": "enemy",
													"sid": 728157553223064,
													"parameters": {
														"angle": "Self.MoveTo.MovingAngle - 90",
														"distance": ".5"
													}
												}
											],
											"sid": 677224893189240
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-overlapping-another-object",
													"objectClass": "enemy",
													"sid": 226568717066080,
													"parameters": {
														"object": "player"
													}
												}
											],
											"actions": [
												{
													"id": "move-at-angle",
													"objectClass": "enemy",
													"sid": 196479359536416,
													"parameters": {
														"angle": "Self.MoveTo.MovingAngle - 90",
														"distance": ".5"
													}
												}
											],
											"sid": 594867618371045
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-overlapping-another-object",
													"objectClass": "enemy",
													"sid": 489138033769847,
													"parameters": {
														"object": "prop"
													}
												}
											],
											"actions": [
												{
													"id": "stop",
													"objectClass": "enemy",
													"sid": 610736715772109,
													"behaviorType": "MoveTo"
												},
												{
													"id": "move-at-angle",
													"objectClass": "enemy",
													"sid": 302300573047777,
													"parameters": {
														"angle": "angle(Self.X, Self.Y, prop.X, prop.Y)",
														"distance": ".5"
													}
												}
											],
											"sid": 716810355456483
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-moving",
													"objectClass": "enemy",
													"sid": 271441516135696,
													"behaviorType": "MoveTo"
												},
												{
													"id": "pick-children",
													"objectClass": "enemy",
													"sid": 419885330126787,
													"parameters": {
														"child": "enemyBody",
														"which": "own"
													}
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "enemyBody",
													"sid": 828585005596839,
													"parameters": {
														"animation": "\"walk_\" & enemy.degrees",
														"from": "beginning"
													}
												}
											],
											"sid": 337923214546929
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "has-los-to-object",
													"objectClass": "enemy",
													"sid": 286230012234224,
													"behaviorType": "LineOfSight",
													"parameters": {
														"object": "player",
														"image-point": "0"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "if they have line of sight, they may or may not also be in range"
												},
												{
													"id": "set-boolean-instvar",
													"objectClass": "enemy",
													"sid": 736346859248245,
													"parameters": {
														"instance-variable": "alerted",
														"value": "true"
													}
												}
											],
											"sid": 559074502599033,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-by-comparison",
															"objectClass": "System",
															"sid": 908136400954120,
															"parameters": {
																"object": "enemy",
																"expression": "distance(enemy.X, enemy.Y, player.X, player.Y)",
																"comparison": 3,
																"value": "enemy.attackRange"
															}
														}
													],
													"actions": [
														{
															"id": "set-boolean-instvar",
															"objectClass": "enemy",
															"sid": 847068310577022,
															"parameters": {
																"instance-variable": "inRange",
																"value": "true"
															}
														}
													],
													"sid": 591827953544134
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 987687916873012,
													"parameters": {
														"object": "enemy",
														"expression": "distance(enemy.X, enemy.Y, player.X, player.Y)",
														"comparison": 4,
														"value": "enemy.attackRange"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "if they're not in range, they may or may not have line of sight"
												},
												{
													"id": "set-boolean-instvar",
													"objectClass": "enemy",
													"sid": 563329931533064,
													"parameters": {
														"instance-variable": "inRange",
														"value": "false"
													}
												}
											],
											"sid": 411977277908769,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "has-los-to-object",
															"objectClass": "enemy",
															"sid": 195172642874656,
															"behaviorType": "LineOfSight",
															"parameters": {
																"object": "player",
																"image-point": "0"
															},
															"isInverted": true
														}
													],
													"actions": [
														{
															"id": "set-boolean-instvar",
															"objectClass": "enemy",
															"sid": 453847106805907,
															"parameters": {
																"instance-variable": "alerted",
																"value": "false"
															}
														}
													],
													"sid": 843225961900578
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-boolean-instance-variable-set",
													"objectClass": "enemy",
													"sid": 948340135117364,
													"parameters": {
														"instance-variable": "alerted"
													}
												},
												{
													"id": "is-boolean-instance-variable-set",
													"objectClass": "enemy",
													"sid": 910258109473812,
													"parameters": {
														"instance-variable": "attacking"
													},
													"isInverted": true
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "enemy",
													"sid": 334170811782710,
													"parameters": {
														"instance-variable": "degrees",
														"value": "round(angle(Self.X, Self.Y, player.X, player.Y) / 22.5) * 22.5"
													}
												},
												{
													"callFunction": "correctEnemyAngle",
													"sid": 455446402233240
												}
											],
											"sid": 240583155986572,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-boolean-instance-variable-set",
															"objectClass": "enemy",
															"sid": 531086139728793,
															"parameters": {
																"instance-variable": "inRange"
															},
															"isInverted": true
														}
													],
													"actions": [
														{
															"id": "move-to-object",
															"objectClass": "enemy",
															"sid": 576365237424412,
															"behaviorType": "MoveTo",
															"parameters": {
																"object": "player",
																"image-point": "0",
																"mode": "direct"
															}
														}
													],
													"sid": 778505852096023
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "for-each",
															"objectClass": "System",
															"sid": 744371686696271,
															"parameters": {
																"object": "enemy"
															}
														},
														{
															"id": "is-boolean-instance-variable-set",
															"objectClass": "enemy",
															"sid": 248326533263059,
															"parameters": {
																"instance-variable": "inRange"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "if the player is in range..."
														},
														{
															"id": "call-mapped-function",
															"objectClass": "Functions",
															"sid": 939811886158849,
															"parameters": {
																"name": "\"enemyAbilities\"",
																"string": "enemy.simpleName",
																"forward-params": "0"
															}
														}
													],
													"sid": 176339748185990
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-boolean-instance-variable-set",
													"objectClass": "enemy",
													"sid": 807048788680842,
													"parameters": {
														"instance-variable": "alerted"
													},
													"isInverted": true
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "enemy",
													"sid": 929269334590625,
													"parameters": {
														"instance-variable": "degrees",
														"value": "round(Self.MoveTo.MovingAngle / 22.5) * 22.5"
													}
												},
												{
													"callFunction": "correctEnemyAngle",
													"sid": 588650749045384
												}
											],
											"sid": 922336148029034,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "on-timer",
															"objectClass": "enemy",
															"sid": 613318836908855,
															"behaviorType": "Timer",
															"parameters": {
																"tag": "\"idle\""
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "find a random nearby location"
														},
														{
															"type": "comment",
															"text": "TODO: minimum distance so they don't walk 1 pixel away",
															"background-color": [
																1,
																1,
																0,
																1
															]
														},
														{
															"id": "set-instvar-value",
															"objectClass": "enemy",
															"sid": 403642690829229,
															"parameters": {
																"instance-variable": "idleX",
																"value": "Self.X + random(Self.Width * -2, Self.Width * 2)"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "enemy",
															"sid": 241176457915239,
															"parameters": {
																"instance-variable": "idleY",
																"value": "Self.Y + random(Self.Width * -2, Self.Width * 2)"
															}
														}
													],
													"sid": 806714911012155,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "has-los-to-position",
																	"objectClass": "enemy",
																	"sid": 173177200831477,
																	"behaviorType": "LineOfSight",
																	"parameters": {
																		"x": "Self.idleX",
																		"y": "Self.idleY"
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "walk there, provided it's not in or behind a prop"
																},
																{
																	"id": "move-to-position",
																	"objectClass": "enemy",
																	"sid": 327097378899146,
																	"behaviorType": "MoveTo",
																	"parameters": {
																		"x": "Self.idleX",
																		"y": "Self.idleY",
																		"mode": "direct"
																	}
																}
															],
															"sid": 310604089057859
														}
													]
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-moving",
															"objectClass": "enemy",
															"sid": 864036661519191,
															"behaviorType": "MoveTo",
															"isInverted": true
														},
														{
															"id": "pick-children",
															"objectClass": "enemy",
															"sid": 686920589340033,
															"parameters": {
																"child": "enemyBody",
																"which": "own"
															}
														}
													],
													"actions": [
														{
															"id": "set-animation",
															"objectClass": "enemyBody",
															"sid": 186127422558677,
															"parameters": {
																"animation": "\"idle_\" & enemy.degrees",
																"from": "beginning"
															}
														}
													],
													"sid": 780963165027679
												}
											]
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "enemy",
											"sid": 480937589260679,
											"parameters": {
												"instance-variable": "alive"
											},
											"isInverted": true
										},
										{
											"id": "pick-children",
											"objectClass": "enemy",
											"sid": 815071911624665,
											"parameters": {
												"child": "enemyBody",
												"which": "own"
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 792875154432758,
											"parameters": {
												"object": "enemyBody",
												"expression": "find(enemyBody.AnimationName, \"die\")",
												"comparison": 0,
												"value": "-1"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "pick enemies that are dead, and their bodies that aren't playing the die animation. Immediately stop their movement and disabled solids, and play the die animation"
										},
										{
											"id": "stop",
											"objectClass": "enemy",
											"sid": 148380833294715,
											"behaviorType": "MoveTo"
										},
										{
											"id": "set-enabled",
											"objectClass": "enemy",
											"sid": 818083537927502,
											"behaviorType": "Solid",
											"parameters": {
												"state": "disabled"
											}
										},
										{
											"id": "set-animation",
											"objectClass": "enemyBody",
											"sid": 979126748341638,
											"parameters": {
												"animation": "\"die_\" & enemy.degrees",
												"from": "beginning"
											}
										}
									],
									"sid": 363363874255790,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "trigger-once-while-true",
													"objectClass": "System",
													"sid": 414075271566645
												}
											],
											"actions": [
												{
													"callFunction": "spawnLoot",
													"sid": 122993682754255,
													"parameters": [
														"enemy.X",
														"enemy.Y"
													]
												}
											],
											"sid": 292205185653640
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-any-animation-finished",
											"objectClass": "enemyBody",
											"sid": 315375025215723
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 267667893950844,
											"parameters": {
												"object": "enemyBody",
												"expression": "find(enemyBody.AnimationName, \"die\")",
												"comparison": 1,
												"value": "-1"
											}
										},
										{
											"id": "pick-parent",
											"objectClass": "enemyBody",
											"sid": 454490420401228,
											"parameters": {
												"parent": "enemy",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if we're on the last frame of a die animation, reduce the opacity by 1 (every tick)"
										},
										{
											"id": "set-opacity",
											"objectClass": "enemyBody",
											"sid": 984116077737318,
											"parameters": {
												"opacity": "Self.Opacity - 1"
											}
										},
										{
											"id": "tween-one-property",
											"objectClass": "enemy",
											"sid": 958642430551542,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"\"",
												"property": "offsetOpacity",
												"end-value": "0",
												"time": "1",
												"ease": "noease",
												"destroy-on-complete": "yes",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 120369709351630
								},
								{
									"functionName": "correctEnemyAngle",
									"functionDescription": "",
									"functionCategory": "",
									"functionReturnType": "none",
									"functionCopyPicked": true,
									"functionIsAsync": false,
									"functionParameters": [],
									"eventType": "function-block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "enemy",
											"sid": 943364457263327,
											"parameters": {
												"instance-variable": "degrees",
												"comparison": 0,
												"value": "-180"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "this needs to be a function so it can be called immediately after the enemy degrees is set"
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 872758525129347,
											"parameters": {
												"instance-variable": "degrees",
												"value": "180"
											}
										}
									],
									"sid": 839528805683530
								}
							]
						}
					],
					"sid": 346842453318444
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "enemy abilities",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"functionName": "goblinUnderling",
							"functionDescription": "",
							"functionCategory": "enemies",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 429038780345131,
							"children": [
								{
									"eventType": "variable",
									"name": "waitPeriod",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 211932246081304
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-children",
											"objectClass": "enemy",
											"sid": 798162200338716,
											"parameters": {
												"child": "enemyBody",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "enemy",
											"sid": 965605275472030,
											"parameters": {
												"instance-variable": "attacking",
												"value": "true"
											}
										},
										{
											"id": "stop",
											"objectClass": "enemy",
											"sid": 773381885453265,
											"behaviorType": "MoveTo"
										},
										{
											"id": "set-animation",
											"objectClass": "enemyBody",
											"sid": 957952672967573,
											"parameters": {
												"animation": "\"attack_\" & enemy.degrees",
												"from": "beginning"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 191487015686769,
											"parameters": {
												"variable": "waitPeriod",
												"value": "ticksPerSecond / enemyBody.AnimationSpeed *  38 / ticksPerSecond"
											}
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 504629123416583,
											"parameters": {
												"seconds": "waitPeriod"
											}
										},
										{
											"id": "create-object",
											"objectClass": "System",
											"sid": 407330687199050,
											"parameters": {
												"object-to-create": "projectile",
												"layer": "\"mechanics\"",
												"x": "enemy.X",
												"y": "enemy.Y",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										}
									],
									"sid": 637095266380560,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-last-created",
													"objectClass": "System",
													"sid": 306169381692502,
													"parameters": {
														"object": "projectile"
													}
												}
											],
											"actions": [
												{
													"id": "set-boolean-instvar",
													"objectClass": "projectile",
													"sid": 435082607904322,
													"parameters": {
														"instance-variable": "friendly",
														"value": "false"
													}
												},
												{
													"id": "set-boolean-instvar",
													"objectClass": "projectile",
													"sid": 642441044173211,
													"parameters": {
														"instance-variable": "piercing",
														"value": "true"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "projectile",
													"sid": 421947269715217,
													"parameters": {
														"instance-variable": "range",
														"value": "enemy.attackRange"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "projectile",
													"sid": 625256602482310,
													"parameters": {
														"instance-variable": "slashDamage",
														"value": "enemy.slashDamage"
													}
												},
												{
													"id": "set-width",
													"objectClass": "projectile",
													"sid": 868181777184268,
													"parameters": {
														"width": "120"
													}
												},
												{
													"id": "set-height",
													"objectClass": "projectile",
													"sid": 176639158518050,
													"parameters": {
														"height": "Self.Width / 3"
													}
												},
												{
													"id": "set-speed",
													"objectClass": "projectile",
													"sid": 184010790922265,
													"behaviorType": "Bullet",
													"parameters": {
														"speed": "700"
													}
												},
												{
													"id": "set-angle-of-motion",
													"objectClass": "projectile",
													"sid": 210312104926155,
													"behaviorType": "Bullet",
													"parameters": {
														"angle": "angle(Self.X, Self.Y, player.X, player.Y)"
													}
												},
												{
													"id": "wait",
													"objectClass": "System",
													"sid": 108628200063609,
													"parameters": {
														"seconds": "enemyBody.AnimationFrameCount / enemyBody.AnimationSpeed - waitPeriod"
													}
												},
												{
													"id": "set-boolean-instvar",
													"objectClass": "enemy",
													"sid": 228705299376612,
													"parameters": {
														"instance-variable": "attacking",
														"value": "false"
													}
												}
											],
											"sid": 977939820763027
										}
									]
								}
							]
						},
						{
							"functionName": "goblinArcher",
							"functionDescription": "",
							"functionCategory": "enemies",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 266372004783406,
							"children": [
								{
									"eventType": "variable",
									"name": "waitPeriod",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 696087909733481
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-children",
											"objectClass": "enemy",
											"sid": 105445611718963,
											"parameters": {
												"child": "enemyBody",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "enemy",
											"sid": 558507287337418,
											"parameters": {
												"instance-variable": "attacking",
												"value": "true"
											}
										},
										{
											"id": "stop",
											"objectClass": "enemy",
											"sid": 740508463648355,
											"behaviorType": "MoveTo"
										},
										{
											"id": "set-animation",
											"objectClass": "enemyBody",
											"sid": 924616726098714,
											"parameters": {
												"animation": "\"attack_\" & enemy.degrees",
												"from": "beginning"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 505834943870034,
											"parameters": {
												"variable": "waitPeriod",
												"value": "ticksPerSecond / enemyBody.AnimationSpeed *  6 / ticksPerSecond"
											}
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 820159986153971,
											"parameters": {
												"seconds": "waitPeriod"
											}
										},
										{
											"id": "create-object",
											"objectClass": "System",
											"sid": 363034684453033,
											"parameters": {
												"object-to-create": "projectile",
												"layer": "\"mechanics\"",
												"x": "enemy.X",
												"y": "enemy.Y",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										}
									],
									"sid": 816917315635176,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-last-created",
													"objectClass": "System",
													"sid": 796344370059456,
													"parameters": {
														"object": "projectile"
													}
												}
											],
											"actions": [
												{
													"id": "set-boolean-instvar",
													"objectClass": "projectile",
													"sid": 309216381152305,
													"parameters": {
														"instance-variable": "friendly",
														"value": "false"
													}
												},
												{
													"id": "set-boolean-instvar",
													"objectClass": "projectile",
													"sid": 115298856092433,
													"parameters": {
														"instance-variable": "piercing",
														"value": "true"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "projectile",
													"sid": 260498165103581,
													"parameters": {
														"instance-variable": "range",
														"value": "enemy.attackRange"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "projectile",
													"sid": 621337243746619,
													"parameters": {
														"instance-variable": "slashDamage",
														"value": "enemy.slashDamage"
													}
												},
												{
													"id": "set-width",
													"objectClass": "projectile",
													"sid": 193861968963935,
													"parameters": {
														"width": "30"
													}
												},
												{
													"id": "set-height",
													"objectClass": "projectile",
													"sid": 365722857222348,
													"parameters": {
														"height": "Self.Width / 3"
													}
												},
												{
													"id": "set-speed",
													"objectClass": "projectile",
													"sid": 269862804231534,
													"behaviorType": "Bullet",
													"parameters": {
														"speed": "700"
													}
												},
												{
													"id": "set-angle-of-motion",
													"objectClass": "projectile",
													"sid": 667087146522934,
													"behaviorType": "Bullet",
													"parameters": {
														"angle": "angle(Self.X, Self.Y, player.X, player.Y)"
													}
												},
												{
													"id": "wait",
													"objectClass": "System",
													"sid": 239748351802532,
													"parameters": {
														"seconds": "enemyBody.AnimationFrameCount / enemyBody.AnimationSpeed - waitPeriod"
													}
												},
												{
													"id": "set-boolean-instvar",
													"objectClass": "enemy",
													"sid": 808837922130560,
													"parameters": {
														"instance-variable": "attacking",
														"value": "false"
													}
												}
											],
											"sid": 370006946744075
										}
									]
								}
							]
						},
						{
							"functionName": "goblinWarlock",
							"functionDescription": "",
							"functionCategory": "enemies",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 195491233080812,
							"children": [
								{
									"eventType": "variable",
									"name": "waitPeriod",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 851120241612677
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-children",
											"objectClass": "enemy",
											"sid": 314920875130410,
											"parameters": {
												"child": "enemyBody",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "enemy",
											"sid": 142076905224775,
											"parameters": {
												"instance-variable": "attacking",
												"value": "true"
											}
										},
										{
											"id": "stop",
											"objectClass": "enemy",
											"sid": 830657030129777,
											"behaviorType": "MoveTo"
										},
										{
											"id": "set-animation",
											"objectClass": "enemyBody",
											"sid": 912767484979645,
											"parameters": {
												"animation": "\"attack_\" & enemy.degrees",
												"from": "beginning"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 963546350909828,
											"parameters": {
												"variable": "waitPeriod",
												"value": "ticksPerSecond / enemyBody.AnimationSpeed *  10 / ticksPerSecond"
											}
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 832629659398298,
											"parameters": {
												"seconds": "waitPeriod"
											}
										},
										{
											"id": "create-object",
											"objectClass": "System",
											"sid": 774645058329043,
											"parameters": {
												"object-to-create": "projectile",
												"layer": "\"mechanics\"",
												"x": "enemy.X",
												"y": "enemy.Y",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										},
										{
											"id": "create-object",
											"objectClass": "System",
											"sid": 591620327036336,
											"parameters": {
												"object-to-create": "lightningOrb",
												"layer": "\"main\"",
												"x": "enemy.X",
												"y": "enemy.Y",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										}
									],
									"sid": 406308995601874,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-last-created",
													"objectClass": "System",
													"sid": 386414059219293,
													"parameters": {
														"object": "projectile"
													}
												},
												{
													"id": "pick-last-created",
													"objectClass": "System",
													"sid": 618628102218224,
													"parameters": {
														"object": "lightningOrb"
													}
												}
											],
											"actions": [
												{
													"id": "add-child",
													"objectClass": "projectile",
													"sid": 215832460537368,
													"parameters": {
														"child": "lightningOrb",
														"transform-x": true,
														"transform-y": true,
														"transform-w": false,
														"transform-h": false,
														"transform-a": true,
														"transform-o": true,
														"transform-z-elevation": true,
														"transform-visibility": false,
														"destroy-with-parent": true
													}
												},
												{
													"id": "set-visible",
													"objectClass": "lightningOrb",
													"sid": 656885986086268,
													"parameters": {
														"visibility": "invisible"
													}
												},
												{
													"type": "comment",
													"text": "need lightning orb to turn visible after a set amount of time, but don't want to recalculate the wait down below"
												},
												{
													"id": "set-boolean-instvar",
													"objectClass": "projectile",
													"sid": 975528139394415,
													"parameters": {
														"instance-variable": "friendly",
														"value": "false"
													}
												},
												{
													"id": "set-boolean-instvar",
													"objectClass": "projectile",
													"sid": 183054145863476,
													"parameters": {
														"instance-variable": "piercing",
														"value": "true"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "projectile",
													"sid": 436733010713003,
													"parameters": {
														"instance-variable": "range",
														"value": "enemy.attackRange"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "projectile",
													"sid": 278195394714033,
													"parameters": {
														"instance-variable": "slashDamage",
														"value": "enemy.slashDamage"
													}
												},
												{
													"id": "set-width",
													"objectClass": "projectile",
													"sid": 675912856457757,
													"parameters": {
														"width": "30"
													}
												},
												{
													"id": "set-height",
													"objectClass": "projectile",
													"sid": 488612417025538,
													"parameters": {
														"height": "Self.Width / 3"
													}
												},
												{
													"id": "set-speed",
													"objectClass": "projectile",
													"sid": 776688734765434,
													"behaviorType": "Bullet",
													"parameters": {
														"speed": "700"
													}
												},
												{
													"id": "set-angle-of-motion",
													"objectClass": "projectile",
													"sid": 410567305766358,
													"behaviorType": "Bullet",
													"parameters": {
														"angle": "angle(Self.X, Self.Y, player.X, player.Y)"
													}
												},
												{
													"id": "wait",
													"objectClass": "System",
													"sid": 699846711223375,
													"parameters": {
														"seconds": "enemyBody.AnimationFrameCount / enemyBody.AnimationSpeed - waitPeriod"
													}
												},
												{
													"id": "set-boolean-instvar",
													"objectClass": "enemy",
													"sid": 776723673493495,
													"parameters": {
														"instance-variable": "attacking",
														"value": "false"
													}
												}
											],
											"sid": 696474949340151
										}
									]
								}
							]
						}
					],
					"sid": 353498742385237
				}
			],
			"sid": 617251843840566
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "shadows",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "we tried a lot of different things to get shadows to stay immediately behind their hasShadow. A 'for' loop over the shadows moving them behind their hasShadow didn't work, neither did the Z elevation hierarchy parameter. We just decided to make shadows sortable, that seems to be working."
				},
				{
					"functionName": "spawnShadows",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "create-object-by-name",
							"objectClass": "System",
							"sid": 456650011814749,
							"parameters": {
								"object-name": "hasShadow.ObjectTypeName & \"_shadow\"",
								"layer": "hasShadow.LayerName",
								"x": "hasShadow.X",
								"y": "hasShadow.Y - 1",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						}
					],
					"sid": 122326320160649,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-last-created",
									"objectClass": "System",
									"sid": 536976280938980,
									"parameters": {
										"object": "shadow"
									}
								}
							],
							"actions": [
								{
									"id": "add-child",
									"objectClass": "hasShadow",
									"sid": 241530028593238,
									"parameters": {
										"child": "shadow",
										"transform-x": true,
										"transform-y": true,
										"transform-w": false,
										"transform-h": false,
										"transform-a": true,
										"transform-o": true,
										"transform-z-elevation": false,
										"transform-visibility": true,
										"destroy-with-parent": true
									}
								},
								{
									"id": "set-opacity",
									"objectClass": "shadow",
									"sid": 524722467011293,
									"parameters": {
										"opacity": "30"
									}
								},
								{
									"id": "set-effect-parameter",
									"objectClass": "shadow",
									"sid": 967102842334003,
									"parameters": {
										"effect": "\"BlurHorizontal\"",
										"parameter-index": "0",
										"value": "75"
									}
								},
								{
									"id": "set-effect-parameter",
									"objectClass": "shadow",
									"sid": 611025268084507,
									"parameters": {
										"effect": "\"BlurVertical\"",
										"parameter-index": "0",
										"value": "75"
									}
								}
							],
							"sid": 874584007285148
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-parent",
							"objectClass": "shadow",
							"sid": 721771950880500,
							"parameters": {
								"parent": "hasShadow",
								"which": "own"
							}
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "shadow",
							"sid": 724704673527402,
							"parameters": {
								"animation": "hasShadow.AnimationName",
								"from": "current-frame"
							}
						},
						{
							"id": "set-animation-frame",
							"objectClass": "shadow",
							"sid": 179496891440497,
							"parameters": {
								"frame-number": "hasShadow.AnimationFrame"
							}
						}
					],
					"sid": 365044933941635
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-created",
							"objectClass": "hasShadow",
							"sid": 446392350790686
						},
						{
							"id": "is-checked",
							"objectClass": "shadows",
							"sid": 652894087172699
						},
						{
							"id": "compare-opacity",
							"objectClass": "loadingScreen",
							"sid": 471138380159630,
							"parameters": {
								"comparison": 0,
								"opacity": "0"
							}
						},
						{
							"id": "compare-opacity",
							"objectClass": "fader",
							"sid": 586231790855718,
							"parameters": {
								"comparison": 0,
								"opacity": "0"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "spawn shadows during the game for things that need them, if it's not during a loading screen"
						},
						{
							"callFunction": "spawnShadows",
							"sid": 989790559126505
						}
					],
					"sid": 160921299784915
				}
			],
			"sid": 538206850780870
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "projectiles",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-distance-travelled",
							"objectClass": "projectile",
							"sid": 243287186081921,
							"behaviorType": "Bullet",
							"parameters": {
								"comparison": 4,
								"distance": "Self.range"
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "projectile",
							"sid": 785391520212267
						}
					],
					"sid": 585039691434774
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "projectile",
							"sid": 980155639317506,
							"parameters": {
								"object": "enemy"
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "projectile",
							"sid": 172656301180449,
							"parameters": {
								"instance-variable": "friendly"
							}
						}
					],
					"actions": [
						{
							"id": "subtract-from-instvar",
							"objectClass": "enemy",
							"sid": 341924341314063,
							"parameters": {
								"instance-variable": "currentHealth",
								"value": "projectile.slashDamage * (1 - Self.slashResistance)"
							}
						}
					],
					"sid": 117313514456786
				}
			],
			"sid": 725204103231325
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "misc",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "game saves",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "variable",
							"name": "saveSuccessfulTimer",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": true,
							"isConstant": false,
							"sid": 154646613668118
						},
						{
							"functionName": "saveGame",
							"functionDescription": "saves the state of the game",
							"functionCategory": "general",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"type": "comment",
									"text": "TODO: save the player's level, all the items, and the selected abilities, and maybe the position of the statues"
								}
							],
							"sid": 162036800390837,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "layer-is-visible",
											"objectClass": "System",
											"sid": 941200574163992,
											"parameters": {
												"layer": "\"escapeMenu\""
											}
										}
									],
									"actions": [
										{
											"id": "set-visible",
											"objectClass": "saveSuccessful",
											"sid": 356428073293943,
											"parameters": {
												"visibility": "visible"
											}
										},
										{
											"type": "comment",
											"text": "wall clock time, since we're paused so normal waits and timers won't work"
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 472720389100434,
											"parameters": {
												"variable": "saveSuccessfulTimer",
												"value": "wallclocktime"
											}
										}
									],
									"sid": 247387140275747
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-visible",
									"objectClass": "saveSuccessful",
									"sid": 170636780802953
								},
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 395384947623650,
									"parameters": {
										"first-value": "wallclocktime",
										"comparison": 5,
										"second-value": "saveSuccessfulTimer + 1"
									}
								},
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 702726404007882
								}
							],
							"actions": [
								{
									"id": "set-visible",
									"objectClass": "saveSuccessful",
									"sid": 240705239373629,
									"parameters": {
										"visibility": "invisible"
									}
								}
							],
							"sid": 835485994637741
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "every-x-seconds",
									"objectClass": "System",
									"sid": 333127395085509,
									"parameters": {
										"interval-seconds": "60"
									}
								}
							],
							"actions": [
								{
									"callFunction": "saveGame",
									"sid": 672732823059614
								}
							],
							"sid": 252297367938613
						}
					],
					"sid": 300267274287503
				},
				{
					"functionName": "arrayLookup",
					"functionDescription": "look up a value in an array",
					"functionCategory": "data",
					"functionReturnType": "string",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "array",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 138615066068748
						},
						{
							"name": "sourceColumn",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 749816088821036
						},
						{
							"name": "valueToFind",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 918344827624248
						},
						{
							"name": "targetColumn",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 291672800255140
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 787369920357309,
							"parameters": {
								"object": "queriedArrays",
								"expression": "queriedArrays.ObjectTypeName",
								"comparison": 0,
								"value": "array"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "pick the array that was passed (the calling event might not pick it, so we can't use \"copy picked\")"
						}
					],
					"sid": 643674845440053,
					"children": [
						{
							"eventType": "variable",
							"name": "targetColumnNumber",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": true,
							"isConstant": false,
							"sid": 559595863195308
						},
						{
							"eventType": "variable",
							"name": "sourceColumnNumber",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": true,
							"isConstant": false,
							"sid": 959500024424395
						},
						{
							"eventType": "variable",
							"name": "returnValue",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"isStatic": true,
							"isConstant": false,
							"sid": 148176261089754
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each-element",
									"objectClass": "queriedArrays",
									"sid": 165803417552242,
									"parameters": {
										"axes": "x"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "loop through the column headers to find the columns we want"
								},
								{
									"type": "comment",
									"text": "\"stop loop\" doesn't work with the array loops. using a standard loop with arrays.width wasn't working either for some reason"
								}
							],
							"sid": 946216334824181,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-current-value",
											"objectClass": "queriedArrays",
											"sid": 540675478633314,
											"parameters": {
												"comparison": 0,
												"value": "sourceColumn"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "this line cannot be combined into the previous line"
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 870520498246570,
											"parameters": {
												"variable": "sourceColumnNumber",
												"value": "queriedArrays.CurX"
											}
										}
									],
									"sid": 660086940294346
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-current-value",
											"objectClass": "queriedArrays",
											"sid": 265769457322804,
											"parameters": {
												"comparison": 0,
												"value": "targetColumn"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 148872933326070,
											"parameters": {
												"variable": "targetColumnNumber",
												"value": "queriedArrays.CurX"
											}
										}
									],
									"sid": 567741713139032
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 572601404125749,
									"parameters": {
										"name": "\"\"",
										"start-index": "1",
										"end-index": "queriedArrays.Height"
									}
								},
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 628104764048334,
									"parameters": {
										"first-value": "queriedArrays.At(sourceColumnNumber, loopindex)",
										"comparison": 0,
										"second-value": "valueToFind"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "loop through the cells of just that column to find the value we want, skipping the header row. Once we find it, set returnValue to the value of the cell located in that row but column of targetColumnNumber"
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 134057885551602,
									"parameters": {
										"variable": "returnValue",
										"value": "queriedArrays.At(targetColumnNumber, loopindex)"
									}
								}
							],
							"sid": 895434417246662,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 956672283334857,
											"parameters": {
												"first-value": "returnValue",
												"comparison": 1,
												"second-value": "\"\""
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "once we have a return value, stop the loop (we're not sure if setting a return value also ends the function)"
										},
										{
											"id": "stop-loop",
											"objectClass": "System",
											"sid": 596610162597647
										},
										{
											"id": "set-function-return-value",
											"objectClass": "Functions",
											"sid": 211056130340703,
											"parameters": {
												"value": "returnValue"
											}
										}
									],
									"sid": 721602884260980
								}
							]
						}
					]
				},
				{
					"functionName": "getColumnNumber",
					"functionDescription": "Find the column number of a column by its name",
					"functionCategory": "data",
					"functionReturnType": "number",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "array",
							"type": "string",
							"initialValue": "",
							"comment": "The array in which to find the column name and number",
							"sid": 417535318627685
						},
						{
							"name": "columnName",
							"type": "string",
							"initialValue": "",
							"comment": "The column name for which the number is needed",
							"sid": 535319316146738
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 969157735323348,
							"parameters": {
								"object": "queriedArrays",
								"expression": "queriedArrays.ObjectTypeName",
								"comparison": 0,
								"value": "array"
							}
						},
						{
							"id": "for-each-element",
							"objectClass": "queriedArrays",
							"sid": 809142578541249,
							"parameters": {
								"axes": "x"
							}
						},
						{
							"id": "compare-current-value",
							"objectClass": "queriedArrays",
							"sid": 807903728824992,
							"parameters": {
								"comparison": 0,
								"value": "columnName"
							}
						}
					],
					"actions": [
						{
							"id": "set-function-return-value",
							"objectClass": "Functions",
							"sid": 874778872234686,
							"parameters": {
								"value": "queriedArrays.CurX"
							}
						}
					],
					"sid": 454046452601444
				},
				{
					"functionName": "getSheetNumber",
					"functionDescription": "Find the number of a sheet by its name",
					"functionCategory": "data",
					"functionReturnType": "number",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "nameArray",
							"type": "string",
							"initialValue": "",
							"comment": "The array which contains the names of the sheets",
							"sid": 698802982475783
						},
						{
							"name": "value",
							"type": "string",
							"initialValue": "",
							"comment": "The value that we want the sheet of",
							"sid": 219389862100279
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 435052508819299,
							"parameters": {
								"object": "queriedArrays",
								"expression": "queriedArrays.ObjectTypeName",
								"comparison": 0,
								"value": "nameArray"
							}
						},
						{
							"id": "for-each-element",
							"objectClass": "queriedArrays",
							"sid": 587115061092778,
							"parameters": {
								"axes": "xy"
							}
						},
						{
							"id": "compare-current-value",
							"objectClass": "queriedArrays",
							"sid": 480528147530679,
							"parameters": {
								"comparison": 0,
								"value": "value"
							}
						}
					],
					"actions": [
						{
							"id": "set-function-return-value",
							"objectClass": "Functions",
							"sid": 166673294832581,
							"parameters": {
								"value": "queriedArrays.CurY"
							}
						}
					],
					"sid": 850952352225054
				}
			],
			"sid": 864124535956996
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "initialization",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "variable",
					"name": "minimumWindowSizeWidth",
					"type": "number",
					"initialValue": "1280",
					"comment": "the width of the minimum window size, in pixels",
					"isStatic": false,
					"isConstant": true,
					"sid": 411533255849662
				},
				{
					"eventType": "variable",
					"name": "minimumWindowSizeHeight",
					"type": "number",
					"initialValue": "720",
					"comment": "the height of the minimum window size, in pixels",
					"isStatic": false,
					"isConstant": true,
					"sid": 769008014635282
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 573126427733994
						}
					],
					"actions": [
						{
							"id": "signal",
							"objectClass": "System",
							"sid": 868274610575053,
							"parameters": {
								"tag": "\"setFullscreen\""
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "fader",
							"sid": 748676738389286,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"\"",
								"property": "offsetOpacity",
								"end-value": "0",
								"time": ".5",
								"ease": "noease",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "set-looping",
							"objectClass": "video",
							"sid": 549497456676793,
							"parameters": {
								"mode": "looping"
							}
						},
						{
							"id": "set-text",
							"objectClass": "versionText",
							"sid": 250472185913112,
							"parameters": {
								"text": "projectversion"
							}
						},
						{
							"type": "comment",
							"text": "set the minimum window size to not be smaller than the screen size, or 720p, whichever is lower"
						},
						{
							"id": "set-minimum-size",
							"objectClass": "NWjs",
							"sid": 998887025792244,
							"parameters": {
								"min-width": "min(minimumWindowSizeWidth, PlatformInfo.ScreenWidth)",
								"min-height": "min(minimumWindowSizeHeight, PlatformInfo.ScreenHeight)"
							}
						}
					],
					"sid": 142931005715493
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 763501423126985,
							"parameters": {
								"variable": "characterLoaded"
							}
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 352829548225660,
							"parameters": {
								"variable": "dataLoaded"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "TODO: We will need to rework these to kick off one after another. We already had issues with abilities being set before the player was made. Need to figure out how we're spawning props first"
						}
					],
					"sid": 741802595166358,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 871368170341139
								}
							],
							"actions": [
								{
									"id": "signal",
									"objectClass": "System",
									"sid": 605845851663143,
									"parameters": {
										"tag": "\"setAbilities\""
									}
								}
							],
							"sid": 527343560270373
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 470592211562367,
									"parameters": {
										"variable": "enemiesLoaded"
									}
								},
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 911942656771529,
									"parameters": {
										"variable": "npcsLoaded"
									}
								},
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 565303113216660
								}
							],
							"actions": [],
							"sid": 787722674281662,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-checked",
											"objectClass": "shadows",
											"sid": 640272453346311
										},
										{
											"id": "for-each",
											"objectClass": "System",
											"sid": 345152691738219,
											"parameters": {
												"object": "hasShadow"
											}
										},
										{
											"id": "trigger-once-while-true",
											"objectClass": "System",
											"sid": 819184044466419
										}
									],
									"actions": [
										{
											"callFunction": "spawnShadows",
											"sid": 913566020701277
										}
									],
									"sid": 780562019240488
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 870038718753990,
											"parameters": {
												"seconds": "5"
											}
										},
										{
											"id": "tween-one-property",
											"objectClass": "loadingScreen",
											"sid": 675989491254633,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"\"",
												"property": "offsetOpacity",
												"end-value": "0",
												"time": ".5",
												"ease": "noease",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"id": "wait-for-previous-actions",
											"objectClass": "System",
											"sid": 687390670105329
										},
										{
											"id": "tween-one-property",
											"objectClass": "fader",
											"sid": 839363790197514,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"\"",
												"property": "offsetOpacity",
												"end-value": "0",
												"time": ".5",
												"ease": "noease",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 935126704272548
								}
							]
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-signal",
							"objectClass": "System",
							"sid": 641566405849024,
							"parameters": {
								"tag": "\"startLoading\""
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "load and parse out data"
						},
						{
							"id": "request-project-file",
							"objectClass": "AJAX",
							"sid": 643583976543378,
							"parameters": {
								"tag": "\"dialog\"",
								"file": "npcDialog.json"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 538486492364201
						},
						{
							"id": "load",
							"objectClass": "npcDialogArray",
							"sid": 995578618712741,
							"parameters": {
								"json": "AJAX.LastData"
							}
						},
						{
							"id": "request-project-file",
							"objectClass": "AJAX",
							"sid": 710945861120802,
							"parameters": {
								"tag": "\"abilities\"",
								"file": "abilities.json"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 788174360714570
						},
						{
							"id": "load",
							"objectClass": "abilitiesArray",
							"sid": 608578720052768,
							"parameters": {
								"json": "AJAX.LastData"
							}
						},
						{
							"id": "request-project-file",
							"objectClass": "AJAX",
							"sid": 920440186593964,
							"parameters": {
								"tag": "\"enemies\"",
								"file": "enemies.json"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 903011922692493
						},
						{
							"id": "load",
							"objectClass": "enemiesArray",
							"sid": 894468445598159,
							"parameters": {
								"json": "AJAX.LastData"
							}
						},
						{
							"id": "createProbabilityTable",
							"objectClass": "advancedRandom",
							"sid": 354747158044542,
							"parameters": {
								"name": "\"enemies\""
							}
						},
						{
							"id": "request-project-file",
							"objectClass": "AJAX",
							"sid": 497113787435464,
							"parameters": {
								"tag": "\"equipment\"",
								"file": "equipment.json"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 750608439134245
						},
						{
							"id": "load",
							"objectClass": "equipmentArray",
							"sid": 172105989325916,
							"parameters": {
								"json": "AJAX.LastData"
							}
						},
						{
							"id": "createProbabilityTable",
							"objectClass": "advancedRandom",
							"sid": 926959556837082,
							"parameters": {
								"name": "\"equipment\""
							}
						},
						{
							"id": "request-project-file",
							"objectClass": "AJAX",
							"sid": 517928590083291,
							"parameters": {
								"tag": "\"mods\"",
								"file": "mods.json"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 215027585354868
						},
						{
							"id": "load",
							"objectClass": "modsArray",
							"sid": 326626465371332,
							"parameters": {
								"json": "AJAX.LastData"
							}
						},
						{
							"id": "request-project-file",
							"objectClass": "AJAX",
							"sid": 817865350352474,
							"parameters": {
								"tag": "\"modRelationships\"",
								"file": "modRelationships.json"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 420080757435607
						},
						{
							"id": "load",
							"objectClass": "modRelationshipsArray",
							"sid": 946746743767847,
							"parameters": {
								"json": "AJAX.LastData"
							}
						},
						{
							"id": "createProbabilityTable",
							"objectClass": "advancedRandom",
							"sid": 159389144809897,
							"parameters": {
								"name": "\"modValues\""
							}
						},
						{
							"type": "comment",
							"text": "map function mods - equipment mods"
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 247179058728032,
							"parameters": {
								"name": "\"equipmentMods\"",
								"string": "\"flatHealth\"",
								"function": "flatHealth"
							}
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 201741876481201,
							"parameters": {
								"name": "\"equipmentMods\"",
								"string": "\"flatSlash\"",
								"function": "flatSlash"
							}
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 124373662697521,
							"parameters": {
								"name": "\"equipmentMods\"",
								"string": "\"flatStab\"",
								"function": "flatStab"
							}
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 490800972305279,
							"parameters": {
								"name": "\"equipmentMods\"",
								"string": "\"flatSmash\"",
								"function": "flatSmash"
							}
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 636426569416839,
							"parameters": {
								"name": "\"equipmentMods\"",
								"string": "\"flatBlockChance\"",
								"function": "flatBlockChance"
							}
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 549595640272861,
							"parameters": {
								"name": "\"equipmentMods\"",
								"string": "\"flatManaRegen\"",
								"function": "flatManaRegen"
							}
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 686238726133757,
							"parameters": {
								"name": "\"equipmentMods\"",
								"string": "\"flatSlashAndStab\"",
								"function": "flatSlashAndStab"
							}
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 586830790743241,
							"parameters": {
								"name": "\"equipmentMods\"",
								"string": "\"oscillatePhysical\"",
								"function": "oscillatePhysical"
							}
						},
						{
							"type": "comment",
							"text": "map function mods - player abilities"
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 394529823473024,
							"parameters": {
								"name": "\"playerAbilities\"",
								"string": "\"heroicStrike\"",
								"function": "heroicStrike"
							}
						},
						{
							"type": "comment",
							"text": "map function mods - enemy abilities"
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 318266161970046,
							"parameters": {
								"name": "\"enemyAbilities\"",
								"string": "\"goblinUnderling\"",
								"function": "goblinUnderling"
							}
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 811409482361320,
							"parameters": {
								"name": "\"enemyAbilities\"",
								"string": "\"goblinWarlock\"",
								"function": "goblinWarlock"
							}
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 746424719092194,
							"parameters": {
								"name": "\"enemyAbilities\"",
								"string": "\"goblinArcher\"",
								"function": "goblinArcher"
							}
						}
					],
					"sid": 532995399136102,
					"children": [
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "setProbabilityTable",
									"objectClass": "advancedRandom",
									"sid": 569494377044820,
									"parameters": {
										"name": "\"enemies\""
									}
								}
							],
							"sid": 112170896522901
						},
						{
							"eventType": "comment",
							"text": "Using a system loop is faster than the array loop here because we don't need to loop over XY, only Y, which isn't possible with array loop"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 858278599151536,
									"parameters": {
										"name": "\"\"",
										"start-index": "1",
										"end-index": "enemiesArray.Height - 1"
									}
								}
							],
							"actions": [
								{
									"id": "addProbabilityEntry",
									"objectClass": "advancedRandom",
									"sid": 569790593755369,
									"parameters": {
										"value": "enemiesArray.At(Functions.getColumnNumber(enemiesArray.ObjectTypeName, \"simpleName\"), loopindex)",
										"weight": "enemiesArray.At(Functions.getColumnNumber(enemiesArray.ObjectTypeName, \"rarity\"), loopindex)"
									}
								}
							],
							"sid": 391512807391587
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "signal",
									"objectClass": "System",
									"sid": 565101366090050,
									"parameters": {
										"tag": "\"generateEnemies\""
									}
								}
							],
							"sid": 914594101330032
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "setProbabilityTable",
									"objectClass": "advancedRandom",
									"sid": 527201751585900,
									"parameters": {
										"name": "\"equipment\""
									}
								}
							],
							"sid": 537651463997366
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 161277702824369,
									"parameters": {
										"name": "\"\"",
										"start-index": "1",
										"end-index": "equipmentArray.Height - 1"
									}
								}
							],
							"actions": [
								{
									"id": "addProbabilityEntry",
									"objectClass": "advancedRandom",
									"sid": 462161066233346,
									"parameters": {
										"value": "equipmentArray.At(Functions.getColumnNumber(equipmentArray.ObjectTypeName, \"simpleName\"), loopindex)",
										"weight": "equipmentArray.At(Functions.getColumnNumber(equipmentArray.ObjectTypeName, \"rarity\"), loopindex)"
									}
								}
							],
							"sid": 363609991636586
						},
						{
							"eventType": "variable",
							"name": "modTableName",
							"type": "string",
							"initialValue": "",
							"comment": "The name of the modTable to create and use",
							"isStatic": true,
							"isConstant": false,
							"sid": 153722454041510
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 938268666012959,
									"parameters": {
										"name": "\"\"",
										"start-index": "1",
										"end-index": "equipmentArray.Height - 1"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Populate the modTableNamesArray with the values from the modTable column in the equipmentArray"
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 819998973144750,
									"parameters": {
										"variable": "modTableName",
										"value": "equipmentArray.At(Functions.getColumnNumber(equipmentArray.ObjectTypeName, \"modTable\"), loopindex)"
									}
								}
							],
							"sid": 331050158213265,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "contains-value",
											"objectClass": "modTableNamesArray",
											"sid": 624586429993127,
											"parameters": {
												"value": "modTableName"
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "push",
											"objectClass": "modTableNamesArray",
											"sid": 985549320205467,
											"parameters": {
												"where": "back",
												"value": "modTableName",
												"axis": "x"
											}
										}
									],
									"sid": 342490949321196
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each-element",
									"objectClass": "modTableNamesArray",
									"sid": 969967315228306,
									"parameters": {
										"axes": "x"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 429144231082775,
									"parameters": {
										"variable": "modTableName",
										"value": "modTableNamesArray.CurValue"
									}
								},
								{
									"id": "createProbabilityTable",
									"objectClass": "advancedRandom",
									"sid": 643690238625194,
									"parameters": {
										"name": "modTableName"
									}
								},
								{
									"id": "setProbabilityTable",
									"objectClass": "advancedRandom",
									"sid": 269998747673991,
									"parameters": {
										"name": "modTableName"
									}
								}
							],
							"sid": 266387431749440,
							"children": [
								{
									"eventType": "variable",
									"name": "modName",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 895817371529010
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 924261551291335,
											"parameters": {
												"name": "\"\"",
												"start-index": "1",
												"end-index": "modRelationshipsArray.Height - 1"
											}
										},
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 740429727234499,
											"parameters": {
												"first-value": "modRelationshipsArray.At(Functions.getColumnNumber(modRelationshipsArray.ObjectTypeName, \"modTableName\"), loopindex)",
												"comparison": 0,
												"second-value": "modTableName"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 410438335810045,
											"parameters": {
												"variable": "modName",
												"value": "modRelationshipsArray.At(Functions.getColumnNumber(modRelationshipsArray.ObjectTypeName, \"mod\"), loopindex)"
											}
										},
										{
											"id": "addProbabilityEntry",
											"objectClass": "advancedRandom",
											"sid": 852474257247651,
											"parameters": {
												"value": "modName",
												"weight": "int(Functions.arrayLookup(modsArray.ObjectTypeName, \"simpleName\", modName, \"rarity\"))"
											}
										}
									],
									"sid": 724785017388781
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 381002642022937,
									"parameters": {
										"variable": "dataLoaded",
										"value": "true"
									}
								}
							],
							"sid": 582145504896098
						}
					]
				}
			],
			"sid": 507296452024802
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "mods",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"functionName": "manageMods",
					"functionDescription": "activate or deactivate the mods of an item to the player",
					"functionCategory": "mods",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "active",
							"type": "boolean",
							"initialValue": "false",
							"comment": "whether or not to activate or deactivate this mod",
							"sid": 608758543573668
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 502769143658461,
					"children": [
						{
							"eventType": "variable",
							"name": "mod",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"isStatic": true,
							"isConstant": false,
							"sid": 675202259414484
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 195257844547582,
									"parameters": {
										"name": "\"\"",
										"start-index": "0",
										"end-index": "tokencount(item.mods, \";\") - 2"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 144624815497568,
									"parameters": {
										"variable": "mod",
										"value": "tokenat(item.mods, loopindex, \";\")"
									}
								}
							],
							"sid": 867779511144806,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 468135131817932,
											"parameters": {
												"variable": "active"
											}
										}
									],
									"actions": [
										{
											"callFunction": "modCaller",
											"sid": 828874850314975,
											"parameters": [
												true,
												"tokenat(mod, 1, \":\")",
												"tokenat(mod, 0, \":\")"
											]
										}
									],
									"sid": 931958845924383
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 797626541149464
										}
									],
									"actions": [
										{
											"callFunction": "modCaller",
											"sid": 735049010108810,
											"parameters": [
												false,
												"tokenat(mod, 1, \":\")",
												"tokenat(mod, 0, \":\")"
											]
										}
									],
									"sid": 218511279335757
								}
							]
						}
					]
				},
				{
					"functionName": "modCaller",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "active",
							"type": "boolean",
							"initialValue": "false",
							"comment": "",
							"sid": 185032068040398
						},
						{
							"name": "modDescription",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 668551496321785
						},
						{
							"name": "ModName",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 563496748576604
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "call-mapped-function",
							"objectClass": "Functions",
							"sid": 314460352638117,
							"parameters": {
								"name": "\"equipmentMods\"",
								"string": "modName",
								"forward-params": "0"
							}
						}
					],
					"sid": 899772844374345
				},
				{
					"functionName": "getValueFromMod",
					"functionDescription": "returns the Nth text value found inside the specified mod description",
					"functionCategory": "mods",
					"functionReturnType": "any",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "string",
							"type": "string",
							"initialValue": "",
							"comment": "the mod description from which to extract the string",
							"sid": 615512659832660
						},
						{
							"name": "index",
							"type": "number",
							"initialValue": "0",
							"comment": "the index of the value to extract",
							"sid": 799799702803442
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-function-return-value",
							"objectClass": "Functions",
							"sid": 231109643138954,
							"parameters": {
								"value": "RegexReplace(RegexMatchAt(string, \"\\{.*?\\}\", \"g\", index), \"\\{|}\", \"g\", \"\")"
							}
						}
					],
					"sid": 320744027056050
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "mod functions",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"functionName": "flatHealth",
							"functionDescription": "",
							"functionCategory": "mods",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "active",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"sid": 570253738943713
								},
								{
									"name": "modDescription",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 307511183096554
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"type": "comment",
									"text": "TODO: Make sure this can't kill the player"
								}
							],
							"sid": 444193088646752,
							"children": [
								{
									"eventType": "variable",
									"name": "value",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 263274720117195
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 695155855001729,
											"parameters": {
												"variable": "value",
												"value": "Functions.getValueFromMod(modDescription, 0)"
											}
										}
									],
									"sid": 534777214177807
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 259894643029231,
											"parameters": {
												"variable": "active"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 197132544744124,
											"parameters": {
												"instance-variable": "maxHealth",
												"value": "value"
											}
										},
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 778544303269221,
											"parameters": {
												"instance-variable": "currentHealth",
												"value": "value"
											}
										}
									],
									"sid": 942509778023512
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 465894261465579
										}
									],
									"actions": [
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 530959900465471,
											"parameters": {
												"instance-variable": "currentHealth",
												"value": "value"
											}
										},
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 429082425325855,
											"parameters": {
												"instance-variable": "maxHealth",
												"value": "value"
											}
										}
									],
									"sid": 122281662245358
								}
							]
						},
						{
							"functionName": "flatSlash",
							"functionDescription": "",
							"functionCategory": "mods",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "active",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"sid": 902260859033184
								},
								{
									"name": "modDescription",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 824779299585551
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 485337182466415,
							"children": [
								{
									"eventType": "variable",
									"name": "value",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 114515034340047
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 363740006116352,
											"parameters": {
												"variable": "value",
												"value": "Functions.getValueFromMod(modDescription, 0)"
											}
										}
									],
									"sid": 777594694730042
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 594579713986562,
											"parameters": {
												"variable": "active"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 284955818513996,
											"parameters": {
												"instance-variable": "slashDamage",
												"value": "value"
											}
										}
									],
									"sid": 100630951832736
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 578322709621714
										}
									],
									"actions": [
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 860832872719684,
											"parameters": {
												"instance-variable": "slashDamage",
												"value": "value"
											}
										}
									],
									"sid": 843155040696154
								}
							]
						},
						{
							"functionName": "flatStab",
							"functionDescription": "",
							"functionCategory": "mods",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "active",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"sid": 795247527844535
								},
								{
									"name": "modDescription",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 195992795428678
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 428722222280473,
							"children": [
								{
									"eventType": "variable",
									"name": "value",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 134117444559985
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 966143064087912,
											"parameters": {
												"variable": "value",
												"value": "Functions.getValueFromMod(modDescription, 0)"
											}
										}
									],
									"sid": 836654181109835
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 124294150702013,
											"parameters": {
												"variable": "active"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 299665220624183,
											"parameters": {
												"instance-variable": "stabDamage",
												"value": "value"
											}
										}
									],
									"sid": 310036445399785
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 588054324025359
										}
									],
									"actions": [
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 110376256430086,
											"parameters": {
												"instance-variable": "stabDamage",
												"value": "value"
											}
										}
									],
									"sid": 915180563061296
								}
							]
						},
						{
							"functionName": "flatSlashAndStab",
							"functionDescription": "",
							"functionCategory": "mods",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "active",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"sid": 486814130079463
								},
								{
									"name": "modDescription",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 113661033345682
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 856050339528452,
							"children": [
								{
									"eventType": "variable",
									"name": "value",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 810736970502754
								},
								{
									"eventType": "variable",
									"name": "value2",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 472590266064672
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 595553801627760,
											"parameters": {
												"variable": "value",
												"value": "Functions.getValueFromMod(modDescription, 0)"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 485531725133262,
											"parameters": {
												"variable": "value2",
												"value": "Functions.getValueFromMod(modDescription, 1)"
											}
										}
									],
									"sid": 257923106845929
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 509733711440273,
											"parameters": {
												"variable": "active"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 953003764567580,
											"parameters": {
												"instance-variable": "slashDamage",
												"value": "value"
											}
										},
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 182117520102904,
											"parameters": {
												"instance-variable": "stabDamage",
												"value": "value2"
											}
										}
									],
									"sid": 333950422080430
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 789420711930422
										}
									],
									"actions": [
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 380230977470890,
											"parameters": {
												"instance-variable": "slashDamage",
												"value": "value"
											}
										},
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 625265836678152,
											"parameters": {
												"instance-variable": "stabDamage",
												"value": "value2"
											}
										}
									],
									"sid": 163550454082777
								}
							]
						},
						{
							"functionName": "flatSmash",
							"functionDescription": "",
							"functionCategory": "mods",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "active",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"sid": 677819658597203
								},
								{
									"name": "modDescription",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 412305460215976
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 233218428812949,
							"children": [
								{
									"eventType": "variable",
									"name": "value",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 190596318771045
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 862743270532982,
											"parameters": {
												"variable": "value",
												"value": "Functions.getValueFromMod(modDescription, 0)"
											}
										}
									],
									"sid": 415952678182173
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 437744311338199,
											"parameters": {
												"variable": "active"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 125990175741193,
											"parameters": {
												"instance-variable": "smashDamage",
												"value": "value"
											}
										}
									],
									"sid": 192060783652640
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 518410678394064
										}
									],
									"actions": [
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 863032040703286,
											"parameters": {
												"instance-variable": "smashDamage",
												"value": "value"
											}
										}
									],
									"sid": 672711044894469
								}
							]
						},
						{
							"functionName": "flatBlockChance",
							"functionDescription": "",
							"functionCategory": "mods",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "active",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"sid": 442129090983909
								},
								{
									"name": "modDescription",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 892096715698480
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 346081716829858,
							"children": [
								{
									"eventType": "variable",
									"name": "value",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 342503026746160
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 665873668250678,
											"parameters": {
												"variable": "value",
												"value": "Functions.getValueFromMod(modDescription, 0)"
											}
										}
									],
									"sid": 504155363810469
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 593334773718544,
											"parameters": {
												"variable": "active"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 250993466607563,
											"parameters": {
												"instance-variable": "blockChance",
												"value": "value"
											}
										}
									],
									"sid": 366342256423378
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 537242814208340
										}
									],
									"actions": [
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 513624251503529,
											"parameters": {
												"instance-variable": "blockChance",
												"value": "value"
											}
										}
									],
									"sid": 717615008279974
								}
							]
						},
						{
							"functionName": "flatManaRegen",
							"functionDescription": "",
							"functionCategory": "mods",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "active",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"sid": 620809625623140
								},
								{
									"name": "modDescription",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 771057121423808
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 618432132660579,
							"children": [
								{
									"eventType": "variable",
									"name": "value",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 379334632151382
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 843414371578072,
											"parameters": {
												"variable": "value",
												"value": "Functions.getValueFromMod(modDescription, 0)"
											}
										}
									],
									"sid": 109070798439151
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 150944168713245,
											"parameters": {
												"variable": "active"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 311392191049775,
											"parameters": {
												"instance-variable": "manaRegen",
												"value": "value"
											}
										}
									],
									"sid": 968321874689214
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 437016688859259
										}
									],
									"actions": [
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 715372430908789,
											"parameters": {
												"instance-variable": "manaRegen",
												"value": "value"
											}
										}
									],
									"sid": 143811748396171
								}
							]
						},
						{
							"functionName": "oscillatePhysical",
							"functionDescription": "",
							"functionCategory": "mods",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "active",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"sid": 499944774915861
								},
								{
									"name": "modDescription",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 989673922363299
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 402192560156812,
							"children": [
								{
									"eventType": "variable",
									"name": "value",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 175249790575320
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 958231985560123,
											"parameters": {
												"variable": "value",
												"value": "Functions.getValueFromMod(modDescription, 0)"
											}
										}
									],
									"sid": 970262893628206
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 957382791527811,
											"parameters": {
												"variable": "active"
											}
										}
									],
									"actions": [],
									"sid": 460177480565386
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 121694386698797
										}
									],
									"actions": [],
									"sid": 869658595429510
								}
							]
						}
					],
					"sid": 640233763055874
				}
			],
			"sid": 368443066853777
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "environment",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "cursor-is-over-object",
							"objectClass": "mouse",
							"sid": 212487329704118,
							"parameters": {
								"object": "door"
							}
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "door",
							"sid": 285583430795064,
							"parameters": {
								"animation": "\"open\"",
								"from": "current-frame"
							}
						},
						{
							"id": "set-effect-parameter",
							"objectClass": "door",
							"sid": 183373806402720,
							"parameters": {
								"effect": "\"Brightness\"",
								"parameter-index": "0",
								"value": "105"
							}
						},
						{
							"id": "set-effect-enabled",
							"objectClass": "door",
							"sid": 808797388754580,
							"parameters": {
								"mode": "enable",
								"effect": "\"GlowHorizontal\""
							}
						},
						{
							"id": "set-effect-enabled",
							"objectClass": "door",
							"sid": 120141362090610,
							"parameters": {
								"mode": "enable",
								"effect": "\"GlowVertical\""
							}
						}
					],
					"sid": 991839766226039
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 449281099921006
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "door",
							"sid": 888366485508554,
							"parameters": {
								"animation": "\"close\"",
								"from": "current-frame"
							}
						},
						{
							"id": "set-effect-parameter",
							"objectClass": "door",
							"sid": 335527086862279,
							"parameters": {
								"effect": "\"Brightness\"",
								"parameter-index": "0",
								"value": "100"
							}
						},
						{
							"id": "set-effect-enabled",
							"objectClass": "door",
							"sid": 809827324346415,
							"parameters": {
								"mode": "disable",
								"effect": "\"GlowHorizontal\""
							}
						},
						{
							"id": "set-effect-enabled",
							"objectClass": "door",
							"sid": 735079784184243,
							"parameters": {
								"mode": "disable",
								"effect": "\"GlowVertical\""
							}
						}
					],
					"sid": 348574872578129
				},
				{
					"functionName": "buildingTransition",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-position",
							"objectClass": "player",
							"sid": 306084288011336,
							"parameters": {
								"x": "door.relocateToX",
								"y": "door.relocateToY"
							}
						},
						{
							"id": "stop",
							"objectClass": "player",
							"sid": 428990218376500,
							"behaviorType": "MoveTo"
						},
						{
							"callFunction": "updateAnimations",
							"sid": 388786730635919,
							"parameters": [
								"\"idle\"",
								"fpsOfAnimations",
								"\"playFromBeginning\""
							]
						},
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 210074657667276,
							"parameters": {
								"variable": "isOnInteractCooldown",
								"value": "true"
							}
						}
					],
					"sid": 605751022796155,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-overlapping-another-object",
									"objectClass": "player",
									"sid": 383444319400282,
									"parameters": {
										"object": "background"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "if the player is now overlapping the background, they're back in the main area, and not in a building"
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "player",
									"sid": 233530060981134,
									"parameters": {
										"instance-variable": "isInsideBuilding",
										"value": "false"
									}
								}
							],
							"sid": 557921840107408
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 654018853199339
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "if they're not overlapping the background, they're now in a building"
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "player",
									"sid": 884524246634332,
									"parameters": {
										"instance-variable": "isInsideBuilding",
										"value": "true"
									}
								}
							],
							"sid": 549145578319639
						}
					]
				}
			],
			"sid": 992252066588856
		}
	],
	"sid": 318845921999986
}