{
	"name": "global",
	"events": [
		{
			"eventType": "group",
			"disabled": false,
			"title": "settings",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-object-clicked",
							"objectClass": "mouse",
							"sid": 819353188215412,
							"parameters": {
								"mouse-button": "left",
								"click-type": "clicked",
								"object-clicked": "checkbox"
							}
						}
					],
					"actions": [],
					"sid": 249576718844003,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-animation-playing",
									"objectClass": "checkbox",
									"sid": 998517017404734,
									"parameters": {
										"animation": "\"checked\""
									}
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "checkbox",
									"sid": 660787222901096,
									"parameters": {
										"animation": "\"unchecked\"",
										"from": "beginning"
									}
								},
								{
									"id": "play",
									"objectClass": "Audio",
									"sid": 693035622635705,
									"parameters": {
										"audio-file": "uncheck",
										"loop": "not-looping",
										"volume": "0",
										"stereo-pan": "0",
										"tag-optional": "\"\""
									}
								}
							],
							"sid": 567634355511150
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 540117233832786
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "checkbox",
									"sid": 248762469082731,
									"parameters": {
										"animation": "\"checked\"",
										"from": "beginning"
									}
								},
								{
									"id": "play",
									"objectClass": "Audio",
									"sid": 115996532458945,
									"parameters": {
										"audio-file": "check",
										"loop": "not-looping",
										"volume": "0",
										"stereo-pan": "0",
										"tag-optional": "\"\""
									}
								}
							],
							"sid": 397789996162613
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-object-clicked",
							"objectClass": "mouse",
							"sid": 285145416814278,
							"parameters": {
								"mouse-button": "left",
								"click-type": "clicked",
								"object-clicked": "settings"
							}
						},
						{
							"id": "on-key-pressed",
							"objectClass": "keyboard",
							"sid": 378910903372860,
							"parameters": {
								"key": 32
							}
						}
					],
					"actions": [],
					"sid": 811581458870603,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-any-playing",
									"objectClass": "statue",
									"sid": 377784460082299,
									"behaviorType": "Tween",
									"isInverted": true
								},
								{
									"id": "is-any-playing",
									"objectClass": "fader",
									"sid": 604210080512177,
									"behaviorType": "Tween",
									"isInverted": true
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "The settings menu can't be opened while anything else is fading"
								},
								{
									"callFunction": "closeDialog",
									"sid": 957012793684221
								}
							],
							"sid": 246816430830739,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "layer-is-visible",
											"objectClass": "System",
											"sid": 953670359020365,
											"parameters": {
												"layer": "settingsMenuStatue.LayerName"
											}
										}
									],
									"actions": [
										{
											"callFunction": "closeSettings",
											"sid": 722834857681868
										}
									],
									"sid": 866828367517389
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 265671339413149
										}
									],
									"actions": [
										{
											"id": "set-time-scale",
											"objectClass": "System",
											"sid": 458608985324305,
											"parameters": {
												"time-scale": "LayoutName = \"mainMenu\" ? 1 : 0"
											}
										},
										{
											"id": "set-layer-interactive",
											"objectClass": "System",
											"sid": 184844667524562,
											"parameters": {
												"layer": "\"main\"",
												"interactive": false
											}
										},
										{
											"id": "set-layer-interactive",
											"objectClass": "System",
											"sid": 806385525437943,
											"parameters": {
												"layer": "abilityBarStatue.LayerName",
												"interactive": false
											}
										},
										{
											"id": "set-layer-interactive",
											"objectClass": "System",
											"sid": 431040159978479,
											"parameters": {
												"layer": "\"background\"",
												"interactive": false
											}
										},
										{
											"callFunction": "closeDialog",
											"sid": 733171908563200
										},
										{
											"callFunction": "closeLayer",
											"sid": 646699840997348,
											"parameters": [
												"equippedMenuStatue.LayerName"
											]
										},
										{
											"callFunction": "closeLayer",
											"sid": 717723199756421,
											"parameters": [
												"inventoryMenuStatue.LayerName"
											]
										},
										{
											"callFunction": "closeLayer",
											"sid": 704678246712086,
											"parameters": [
												"abilitySelectorStatue.LayerName"
											]
										},
										{
											"callFunction": "closeLayer",
											"sid": 638233684157236,
											"parameters": [
												"characterMenuStatue.LayerName"
											]
										},
										{
											"callFunction": "openLayer",
											"sid": 210621093467952,
											"parameters": [
												"settingsMenuStatue.LayerName"
											]
										}
									],
									"sid": 909335655578482
								}
							]
						}
					],
					"isOrBlock": true
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-object-clicked",
							"objectClass": "mouse",
							"sid": 868350890968875,
							"parameters": {
								"mouse-button": "left",
								"click-type": "clicked",
								"object-clicked": "back"
							}
						}
					],
					"actions": [
						{
							"callFunction": "closeSettings",
							"sid": 531182819951944
						}
					],
					"sid": 232650027134106
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-object-clicked",
							"objectClass": "mouse",
							"sid": 234608436153114,
							"parameters": {
								"mouse-button": "left",
								"click-type": "clicked",
								"object-clicked": "abilityKeybinder"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "If none of the abilityKeybinders are waiting to receive an input..."
						}
					],
					"sid": 624853563860279,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-all",
									"objectClass": "System",
									"sid": 289952808078967,
									"parameters": {
										"object": "abilityKeybinder"
									}
								},
								{
									"id": "compare-text",
									"objectClass": "abilityKeybinder",
									"sid": 945167189320660,
									"parameters": {
										"text-to-compare": "\"...\"",
										"case-sensitivity": "ignore-case"
									}
								}
							],
							"actions": [],
							"sid": 116366951603053
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 108340379093015
								}
							],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "abilityKeybinder",
									"sid": 674062111231683,
									"parameters": {
										"text": "\"...\""
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "abilityKeybinder",
									"sid": 844152643084687,
									"parameters": {
										"instance-variable": "keycode",
										"value": "0"
									}
								}
							],
							"sid": 213190621332534
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-any-key-pressed",
							"objectClass": "keyboard",
							"sid": 590047996966487
						},
						{
							"id": "compare-text",
							"objectClass": "abilityKeybinder",
							"sid": 243638226477874,
							"parameters": {
								"text-to-compare": "\"...\"",
								"case-sensitivity": "ignore-case"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "When a key is pressed, and there's an abilityKeybinder waiting to receive input..."
						}
					],
					"sid": 775977342078053,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-all",
									"objectClass": "System",
									"sid": 434600803622891,
									"parameters": {
										"object": "abilityKeybinder"
									}
								},
								{
									"id": "compare-text",
									"objectClass": "abilityKeybinder",
									"sid": 299749577826444,
									"parameters": {
										"text-to-compare": "keyboard.TypedKey",
										"case-sensitivity": "ignore-case"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "...And the key that was pressed isn't already bound..."
								}
							],
							"sid": 409986188951731
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 829555850088501
								}
							],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "abilityKeybinder",
									"sid": 518669049380662,
									"parameters": {
										"text": "uppercase(keyboard.TypedKey)"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "abilityKeybinder",
									"sid": 873639350872428,
									"parameters": {
										"instance-variable": "keycode",
										"value": "keyboard.LastKeyCode"
									}
								}
							],
							"sid": 693641686142634
						}
					]
				},
				{
					"functionName": "closeSettings",
					"functionDescription": "Close the settings menu.",
					"functionCategory": "menus",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 344421160906860,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 879018780145331,
									"parameters": {
										"object": "abilityKeybinder",
										"expression": "abilityKeybinder.PlainText",
										"comparison": 0,
										"value": "\"...\""
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Only allow closure of the settings menu if we aren't currently rebinding a key"
								}
							],
							"sid": 948415840917847
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 116903168694180
								}
							],
							"actions": [
								{
									"id": "set-time-scale",
									"objectClass": "System",
									"sid": 537233870682541,
									"parameters": {
										"time-scale": "1"
									}
								},
								{
									"callFunction": "closeLayer",
									"sid": 467344173930687,
									"parameters": [
										"settingsMenuStatue.LayerName"
									]
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 143101296800155,
									"parameters": {
										"layer": "\"main\"",
										"interactive": true
									}
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 840362518392313,
									"parameters": {
										"layer": "abilityBarStatue.LayerName",
										"interactive": true
									}
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 139811887726216,
									"parameters": {
										"layer": "\"background\"",
										"interactive": true
									}
								}
							],
							"sid": 542261891796675
						}
					]
				}
			],
			"sid": 158031389107245
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "statues",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 820960587805487,
							"parameters": {
								"object": "statue"
							}
						},
						{
							"id": "is-playing",
							"objectClass": "statue",
							"sid": 173783793187177,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "Self.ObjectTypeName & \" \" & Self.UID & \" fade\""
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Yes, the for each is absolutely necessary here"
						},
						{
							"id": "set-layer-opacity",
							"objectClass": "System",
							"sid": 746549321242423,
							"parameters": {
								"layer": "statue.LayerName",
								"opacity": "statue.Tween.Value(statue.ObjectTypeName & \" \" & statue.UID & \" fade\")"
							}
						}
					],
					"sid": 209824256960056
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-created",
							"objectClass": "statue",
							"sid": 654365848377800
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "statue",
							"sid": 114128461993951,
							"parameters": {
								"instance-variable": "originalX",
								"value": "Self.X"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "statue",
							"sid": 820226298695611,
							"parameters": {
								"instance-variable": "originalY",
								"value": "Self.Y"
							}
						},
						{
							"type": "comment",
							"text": "This is so fades still work for statues when paused"
						},
						{
							"id": "set-object-time-scale",
							"objectClass": "System",
							"sid": 855423426952033,
							"parameters": {
								"object": "statue",
								"time-scale": "1.0"
							}
						}
					],
					"sid": 546590760396709
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-drag-start",
							"objectClass": "statue",
							"sid": 921532297493206,
							"behaviorType": "DragDrop"
						}
					],
					"actions": [
						{
							"id": "set-enabled",
							"objectClass": "statue",
							"sid": 593508445350170,
							"behaviorType": "Anchor",
							"parameters": {
								"state": "disabled"
							}
						},
						{
							"type": "comment",
							"text": "For some reason this works, but tweening the opacity for showing/hiding menus doesn't. Probably something to do with the fact we're only going to 50 here, and we go to 0 there."
						},
						{
							"id": "tween-one-property",
							"objectClass": "statue",
							"sid": 528819643657927,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "Self.ObjectTypeName & \" opacity tween out\"",
								"property": "offsetOpacity",
								"end-value": "50",
								"time": ".2",
								"ease": "noease",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"type": "comment",
							"text": "'toolip' and all overlay layers above can't be re-organized, all overlay layers beneath it can be reorganized. If we change layouts with this event enabled, overlay sprites get sent to the wrong layer (since global sprites go to their matching layout number, and re-organizing layers messes with their number).\n\nThe ability to dynamically sort layers would require a refactor of overlay layers to put all their content on one layer."
						},
						{
							"id": "move-layer",
							"objectClass": "System",
							"sid": 640757650997869,
							"disabled": true,
							"parameters": {
								"layer": "statue.LayerName",
								"insert-by": "\"tooltip\"",
								"where": "below"
							}
						}
					],
					"sid": 853110582736759
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-drop",
							"objectClass": "statue",
							"sid": 104810528278196,
							"behaviorType": "DragDrop"
						}
					],
					"actions": [
						{
							"id": "tween-one-property",
							"objectClass": "statue",
							"sid": 743662017465459,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "Self.ObjectTypeName & \" opacity tween in\"",
								"property": "offsetOpacity",
								"end-value": "100",
								"time": ".2",
								"ease": "noease",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 217495091864071
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-object-clicked",
							"objectClass": "mouse",
							"sid": 447016322697626,
							"parameters": {
								"mouse-button": "left",
								"click-type": "double-clicked",
								"object-clicked": "statue"
							}
						},
						{
							"id": "pick-topbottom",
							"objectClass": "statue",
							"sid": 289702388705521,
							"parameters": {
								"which": "top"
							}
						}
					],
					"actions": [
						{
							"id": "set-position",
							"objectClass": "statue",
							"sid": 651223483898203,
							"parameters": {
								"x": "Self.originalX",
								"y": "Self.originalY"
							}
						},
						{
							"id": "set-enabled",
							"objectClass": "statue",
							"sid": 875522253676724,
							"behaviorType": "Anchor",
							"parameters": {
								"state": "enabled"
							}
						}
					],
					"sid": 912446903232720
				}
			],
			"sid": 380762940661044
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "text buttons",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "cursor-is-over-object",
							"objectClass": "mouse",
							"sid": 695198587206575,
							"parameters": {
								"object": "textButtons"
							},
							"isInverted": true
						},
						{
							"id": "mouse-button-is-down",
							"objectClass": "mouse",
							"sid": 777014660891822,
							"parameters": {
								"mouse-button": "left"
							},
							"isInverted": true
						}
					],
					"actions": [],
					"sid": 385733783539216,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 679384635331615
								}
							],
							"actions": [
								{
									"id": "set-font-size",
									"objectClass": "textButtons",
									"sid": 499574825610442,
									"parameters": {
										"size-pt": "Self.originalFaceSize"
									}
								}
							],
							"sid": 319885694686360
						}
					],
					"isOrBlock": true
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "cursor-is-over-object",
							"objectClass": "mouse",
							"sid": 598005761907628,
							"parameters": {
								"object": "textButtons"
							},
							"isInverted": true
						},
						{
							"id": "is-effect-enabled",
							"objectClass": "textButtons",
							"sid": 152989179300688,
							"parameters": {
								"effect": "\"GlowHorizontal\""
							}
						},
						{
							"id": "trigger-once-while-true",
							"objectClass": "System",
							"sid": 466782544771302
						}
					],
					"actions": [
						{
							"id": "set-effect-enabled",
							"objectClass": "textButtons",
							"sid": 769190371290502,
							"parameters": {
								"mode": "disable",
								"effect": "\"GlowHorizontal\""
							}
						},
						{
							"id": "set-effect-enabled",
							"objectClass": "textButtons",
							"sid": 308855638953782,
							"parameters": {
								"mode": "disable",
								"effect": "\"GlowVertical\""
							}
						}
					],
					"sid": 719878892376839,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-tag-playing",
									"objectClass": "Audio",
									"sid": 239338159852543,
									"parameters": {
										"tag": "\"menuClose\""
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "We have to check if 'glowHorizontal' is enabled before running this event, or else it'll run when the first text buttons are created (on the main menu). That's ok for disabling the effects, but we don't want the mouse off sound effect to play. We also don't want the mouse off sound effect to play when the action that cause the mouse-off is the closing of a menu."
								},
								{
									"id": "play",
									"objectClass": "Audio",
									"sid": 702551051106774,
									"parameters": {
										"audio-file": "mouseOff",
										"loop": "not-looping",
										"volume": "0",
										"stereo-pan": "0",
										"tag-optional": "\"\""
									}
								}
							],
							"sid": 230109403454654
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-created",
							"objectClass": "textButtons",
							"sid": 683111592748245
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "change font size instead of position of actual size, this works better once we start dragging around menus with text buttons on them"
						},
						{
							"id": "set-instvar-value",
							"objectClass": "textButtons",
							"sid": 967864504942657,
							"parameters": {
								"instance-variable": "originalFaceSize",
								"value": "Self.FaceSize"
							}
						}
					],
					"sid": 145346222786557
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "cursor-is-over-object",
							"objectClass": "mouse",
							"sid": 705522751108484,
							"parameters": {
								"object": "textButtons"
							}
						}
					],
					"actions": [],
					"sid": 756209398406674,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "mouse-button-is-down",
									"objectClass": "mouse",
									"sid": 564995762613267,
									"parameters": {
										"mouse-button": "left"
									}
								},
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 631078204702773
								}
							],
							"actions": [
								{
									"id": "set-font-size",
									"objectClass": "textButtons",
									"sid": 407272484417269,
									"parameters": {
										"size-pt": "Self.FaceSize * .9"
									}
								}
							],
							"sid": 570867909264545
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 476390416434824
								}
							],
							"actions": [
								{
									"id": "set-effect-enabled",
									"objectClass": "textButtons",
									"sid": 707362724140933,
									"parameters": {
										"mode": "enable",
										"effect": "\"GlowHorizontal\""
									}
								},
								{
									"id": "set-effect-enabled",
									"objectClass": "textButtons",
									"sid": 117393214391281,
									"parameters": {
										"mode": "enable",
										"effect": "\"GlowVertical\""
									}
								},
								{
									"id": "play",
									"objectClass": "Audio",
									"sid": 413432739922119,
									"parameters": {
										"audio-file": "mouseOn",
										"loop": "not-looping",
										"volume": "0",
										"stereo-pan": "0",
										"tag-optional": "\"\""
									}
								}
							],
							"sid": 684776001897592
						}
					]
				}
			],
			"sid": 455771140551538
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-start-of-layout",
					"objectClass": "System",
					"sid": 149671096853946
				}
			],
			"actions": [
				{
					"id": "play-by-name",
					"objectClass": "Audio",
					"sid": 110162837917985,
					"parameters": {
						"folder": "music",
						"audio-file-name": "LayoutName",
						"loop": "looping",
						"volume": "-100",
						"stereo-pan": "0",
						"tag-optional": "LayoutName"
					}
				},
				{
					"id": "fade-volume",
					"objectClass": "Audio",
					"sid": 455037978494125,
					"parameters": {
						"tag": "LayoutName",
						"db": "-10",
						"duration": "FADE_TIME",
						"ending": "keep-playing"
					}
				},
				{
					"id": "tween-one-property",
					"objectClass": "fader",
					"sid": 583174295704050,
					"behaviorType": "Tween",
					"parameters": {
						"tags": "Self.ObjectTypeName",
						"property": "offsetOpacity",
						"end-value": "0",
						"time": "FADE_TIME",
						"ease": "noease",
						"destroy-on-complete": "no",
						"loop": "no",
						"ping-pong": "no",
						"repeat-count": "1"
					}
				}
			],
			"sid": 105358788655215
		}
	],
	"sid": 143332858877120
}