{
	"name": "splashScreen",
	"events": [
		{
			"eventType": "group",
			"disabled": false,
			"title": "splash screen",
			"description": "in a category so we can reduce variable scope",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "variable",
					"name": "updateAvailable",
					"type": "boolean",
					"initialValue": "false",
					"comment": "Whether or not an update is available.",
					"isStatic": true,
					"isConstant": false,
					"sid": 255447198174867
				},
				{
					"eventType": "comment",
					"text": "There's no way to do an \"On update not found\" trigger: https://www.construct.net/en/forum/construct-3/how-do-i-8/start-game-browser-not-update-175590"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-update-found-sw",
							"objectClass": "browser",
							"sid": 691497159284594
						}
					],
					"actions": [
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 298649766153894,
							"parameters": {
								"variable": "updateAvailable",
								"value": "true"
							}
						},
						{
							"id": "set-text",
							"objectClass": "launcherMessage",
							"sid": 744652312210251,
							"parameters": {
								"text": "\"Update available. Downloading\""
							}
						}
					],
					"sid": 732686039218090
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 438783416248417,
							"parameters": {
								"variable": "updateAvailable"
							}
						},
						{
							"id": "every-x-seconds",
							"objectClass": "System",
							"sid": 805116272556535,
							"parameters": {
								"interval-seconds": "0.5"
							}
						}
					],
					"actions": [
						{
							"id": "set-text",
							"objectClass": "launcherMessage",
							"sid": 820819320875258,
							"parameters": {
								"text": "Self.Text = \"Update available. Downloading...\" ? \"Update available. Downloading\" : Self.Text & \".\""
							}
						}
					],
					"sid": 703324802027352
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-update-ready-sw",
							"objectClass": "browser",
							"sid": 914907367177721
						}
					],
					"actions": [
						{
							"id": "reload",
							"objectClass": "browser",
							"sid": 643091263556062
						}
					],
					"sid": 736856252742852
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 774700340711731
						}
					],
					"actions": [
						{
							"id": "tween-one-property",
							"objectClass": "fader",
							"sid": 901274633348921,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "Self.ObjectTypeName",
								"property": "offsetOpacity",
								"end-value": "0",
								"time": "FADE_TIME",
								"ease": "noease",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "launcherMessage",
							"sid": 790516563955118,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"\"",
								"property": "offsetOpacity",
								"end-value": "10",
								"time": "1",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "yes",
								"ping-pong": "yes",
								"repeat-count": "0"
							}
						},
						{
							"id": "play-by-name",
							"objectClass": "Audio",
							"sid": 712396378924728,
							"parameters": {
								"folder": "music",
								"audio-file-name": "LayoutName",
								"loop": "looping",
								"volume": "-100",
								"stereo-pan": "0",
								"tag-optional": "LayoutName"
							}
						},
						{
							"id": "fade-volume",
							"objectClass": "Audio",
							"sid": 134815970171295,
							"parameters": {
								"tag": "LayoutName",
								"db": "0",
								"duration": "FADE_TIME",
								"ending": "keep-playing"
							}
						}
					],
					"sid": 277147762016600
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-any-key-pressed",
							"objectClass": "keyboard",
							"sid": 151169116968630
						},
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 350086436656584,
							"parameters": {
								"first-value": "keyboard.LastKeyCode",
								"comparison": 1,
								"second-value": "27"
							}
						},
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 788392128759753,
							"parameters": {
								"first-value": "keyboard.LastKeyCode",
								"comparison": 1,
								"second-value": "122"
							}
						},
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 239141489123527,
							"parameters": {
								"first-value": "keyboard.LastKeyCode",
								"comparison": 1,
								"second-value": "123"
							}
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 840931282979907,
							"parameters": {
								"variable": "updateAvailable"
							},
							"isInverted": true
						},
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 242104066820008,
							"parameters": {
								"first-value": "loadingprogress",
								"comparison": 0,
								"second-value": "1"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "If we've finished loading, there's no update, and a key was pressed that wasn't F11, F12 or escape, start the game."
						},
						{
							"id": "fade-volume",
							"objectClass": "Audio",
							"sid": 554000219513429,
							"parameters": {
								"tag": "LayoutName",
								"db": "-100",
								"duration": "1",
								"ending": "stop"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "fader",
							"sid": 940671130976522,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "Self.ObjectTypeName",
								"property": "offsetOpacity",
								"end-value": "100",
								"time": "FADE_TIME",
								"ease": "noease",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 589815070034445
						},
						{
							"id": "go-to-layout",
							"objectClass": "System",
							"sid": 816194191131911,
							"parameters": {
								"layout": "mainMenu"
							}
						}
					],
					"sid": 596130575223459
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 325307568266297,
							"parameters": {
								"first-value": "loadingprogress",
								"comparison": 1,
								"second-value": "1"
							}
						}
					],
					"actions": [
						{
							"id": "set-visible",
							"objectClass": "launcherMessage",
							"sid": 326618954085655,
							"parameters": {
								"visibility": "invisible"
							}
						},
						{
							"id": "set-visible",
							"objectClass": "loadingBarFrame",
							"sid": 647600223397914,
							"parameters": {
								"visibility": "visible"
							}
						},
						{
							"id": "set-image-scale-x",
							"objectClass": "loadingBar",
							"sid": 533370799125088,
							"parameters": {
								"scale-x": "loadingprogress * 100"
							}
						}
					],
					"sid": 181118355525718
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 710547151992762
						}
					],
					"actions": [
						{
							"id": "set-visible",
							"objectClass": "launcherMessage",
							"sid": 471207418511441,
							"parameters": {
								"visibility": "visible"
							}
						},
						{
							"id": "set-visible",
							"objectClass": "loadingBarFrame",
							"sid": 694825951034526,
							"parameters": {
								"visibility": "invisible"
							}
						}
					],
					"sid": 830884642059031
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-object-clicked",
							"objectClass": "mouse",
							"sid": 934940274268889,
							"parameters": {
								"mouse-button": "left",
								"click-type": "clicked",
								"object-clicked": "fullscreenIcon"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Use our own fullscreen icon instead of the one on Itch. This way we can start the audio context if this is the first button clicked. We tried using an SVG for this fullscreen icon, but it caused the entire project to load before showing the loader layout. We were unable to duplicate this bug in a new project."
						}
					],
					"sid": 551410993474741,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-fullscreen",
									"objectClass": "browser",
									"sid": 102988732446380
								}
							],
							"actions": [
								{
									"id": "cancel-fullscreen",
									"objectClass": "browser",
									"sid": 236394121614606
								}
							],
							"sid": 343296602415546
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 687952442055542
								}
							],
							"actions": [
								{
									"id": "request-fullscreen",
									"objectClass": "browser",
									"sid": 627588659576075,
									"parameters": {
										"mode": "stretch-letterbox-scale",
										"navigation-ui": "auto"
									}
								}
							],
							"sid": 521592820833468
						}
					]
				}
			],
			"sid": 297998252022528
		}
	],
	"sid": 267646085855592
}