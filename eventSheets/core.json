{
	"name": "core",
	"events": [
		{
			"eventType": "include",
			"includeSheet": "global"
		},
		{
			"eventType": "variable",
			"name": "INTERACT_COOLDOWN",
			"type": "number",
			"initialValue": "0.3",
			"comment": "How frequently to let the player interact with things, in seconds.",
			"isStatic": false,
			"isConstant": true,
			"sid": 319367684950517
		},
		{
			"eventType": "variable",
			"name": "MENU_FADE_TIME",
			"type": "number",
			"initialValue": "0.2",
			"comment": "The duration of fade-ins and fade-outs of menus, in seconds.",
			"isStatic": false,
			"isConstant": true,
			"sid": 362007502373957
		},
		{
			"eventType": "variable",
			"name": "LAYOUT_FADE_TIME",
			"type": "number",
			"initialValue": "1",
			"comment": "The duration of the fade-in and fade-out between layouts, in seconds.",
			"isStatic": false,
			"isConstant": true,
			"sid": 536894991799042
		},
		{
			"eventType": "variable",
			"name": "ANIMATION_DIVISOR",
			"type": "number",
			"initialValue": "7",
			"comment": "The number by which to divide the movement speed to obtain the animation speed.",
			"isStatic": false,
			"isConstant": true,
			"sid": 274670126082924
		},
		{
			"eventType": "variable",
			"name": "ARC",
			"type": "number",
			"initialValue": "22.5",
			"comment": "The number of degrees in a circle divided by the number of angles our assets have.",
			"isStatic": false,
			"isConstant": true,
			"sid": 363141446243930
		},
		{
			"eventType": "variable",
			"name": "QUARTER_CIRCLE",
			"type": "number",
			"initialValue": "90",
			"comment": "The number of degrees in a quarter of a circle.",
			"isStatic": false,
			"isConstant": true,
			"sid": 883872539904860
		},
		{
			"eventType": "variable",
			"name": "HALF_CIRCLE",
			"type": "number",
			"initialValue": "180",
			"comment": "The number of degrees in half of a circle.",
			"isStatic": false,
			"isConstant": true,
			"sid": 192320948206579
		},
		{
			"eventType": "variable",
			"name": "ISOMETRIC_DIVIDER",
			"type": "number",
			"initialValue": "3",
			"comment": "The number by which to divide projectile's and character's height to be properly isometric.",
			"isStatic": false,
			"isConstant": true,
			"sid": 449892706850942
		},
		{
			"eventType": "variable",
			"name": "PERCENTAGE_DIVIDER",
			"type": "number",
			"initialValue": "100",
			"comment": "Used when converting percentage modifiers to flat values.",
			"isStatic": false,
			"isConstant": true,
			"sid": 372911249857549
		},
		{
			"eventType": "variable",
			"name": "NONE_KEYWORD",
			"type": "string",
			"initialValue": "none",
			"comment": "Used as a default or empty value for various other variables.",
			"isStatic": false,
			"isConstant": true,
			"sid": 389311828403507
		},
		{
			"eventType": "variable",
			"name": "ALL_CLASSES_KEYWORD",
			"type": "string",
			"initialValue": "All Classes",
			"comment": "Used when checking if the player can equip an item or not.",
			"isStatic": false,
			"isConstant": true,
			"sid": 882619457243399
		},
		{
			"eventType": "variable",
			"name": "nextAvailableIdentifier",
			"type": "number",
			"initialValue": "2",
			"comment": "Stores the next available identifier, to be assigned to equipment. 1 is used by the coins in the starting inventory.",
			"isStatic": false,
			"isConstant": false,
			"sid": 995721705060518
		},
		{
			"eventType": "variable",
			"name": "uidOfClicked",
			"type": "number",
			"initialValue": "0",
			"comment": "The UID of the object that the player clicked.",
			"isStatic": false,
			"isConstant": false,
			"sid": 849112042530215
		},
		{
			"eventType": "variable",
			"name": "targetLayout",
			"type": "string",
			"initialValue": "",
			"comment": "The layout to which to change.",
			"isStatic": false,
			"isConstant": false,
			"sid": 175140439511758
		},
		{
			"eventType": "variable",
			"name": "isOnInteractCooldown",
			"type": "boolean",
			"initialValue": "false",
			"comment": "Whether or not the player is allowed to interact with objects.",
			"isStatic": false,
			"isConstant": false,
			"sid": 918997179558722
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "npc",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "variable",
					"name": "PORTRAIT_POSITION",
					"type": "number",
					"initialValue": "1280",
					"comment": "The position on the X axis of where the portrait should spawn",
					"isStatic": false,
					"isConstant": true,
					"sid": 795195881715473
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 865837950108649,
							"parameters": {
								"object": "npc",
								"expression": "merchantMenuStatue.merchantStore",
								"comparison": 0,
								"value": "npc.simpleName"
							}
						},
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 458572986276943,
							"parameters": {
								"first-value": "Functions.isometrify(npc.storeRange, angle(player.X, player.Y, npc.X, npc.Y))",
								"comparison": 2,
								"second-value": "distance(player.X, player.Y, npc.X, npc.Y)"
							}
						},
						{
							"id": "layer-is-visible",
							"objectClass": "System",
							"sid": 482924763540793,
							"parameters": {
								"layer": "\"merchantMenu\""
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Close the merchant menu if the player gets too far away from the merchant to whose shop is being displayed."
						},
						{
							"callFunction": "closeLayer",
							"sid": 799974808803615,
							"parameters": [
								"\"merchantMenu\""
							]
						}
					],
					"sid": 549858707087405
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-playing",
							"objectClass": "portrait",
							"sid": 507225872154479,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "Self.ObjectTypeName & \" \" & Self.UID & \" opacity fade out\""
							},
							"isInverted": true
						},
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 569871185373821,
							"parameters": {
								"object": "npc",
								"expression": "npc.simpleName",
								"comparison": 0,
								"value": "player.talkingToNpc"
							}
						},
						{
							"id": "pick-children",
							"objectClass": "npc",
							"sid": 141990365338759,
							"parameters": {
								"child": "npcBody",
								"which": "own"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Don't execute if the portrait is fading out. Pick only the NPC and corresponding body that the player is talking to, to check if they were clicked in the next subevent."
						}
					],
					"sid": 976300196461213,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-object-clicked",
									"objectClass": "mouse",
									"sid": 365632780391333,
									"parameters": {
										"mouse-button": "left",
										"click-type": "clicked",
										"object-clicked": "dialog"
									}
								},
								{
									"id": "on-object-clicked",
									"objectClass": "mouse",
									"sid": 673643516057644,
									"parameters": {
										"mouse-button": "left",
										"click-type": "clicked",
										"object-clicked": "portrait"
									}
								}
							],
							"actions": [],
							"sid": 413801469471723,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "npc",
											"sid": 201582184752954,
											"parameters": {
												"instance-variable": "dialogCounter",
												"comparison": 2,
												"value": "Self.totalNumberOfDialogs"
											}
										}
									],
									"actions": [
										{
											"id": "stop",
											"objectClass": "Audio",
											"sid": 865795706750829,
											"parameters": {
												"tag": "\"dialog\""
											}
										},
										{
											"id": "add-to-instvar",
											"objectClass": "npc",
											"sid": 786664198588895,
											"parameters": {
												"instance-variable": "dialogCounter",
												"value": "1"
											}
										},
										{
											"id": "set-text",
											"objectClass": "dialogText",
											"sid": 903408887080024,
											"parameters": {
												"text": "Functions.arrayLookup(npcDialogArray.ObjectTypeName, npc.simpleName & \"-\" & npc.dialogCounter, \"message\")"
											}
										},
										{
											"id": "play-by-name",
											"objectClass": "Audio",
											"sid": 872476359734218,
											"parameters": {
												"folder": "sounds",
												"audio-file-name": "\"dialog/\" & npc.simpleName & \"-\" & npc.dialogCounter",
												"loop": "not-looping",
												"volume": "0",
												"stereo-pan": "0",
												"tag-optional": "\"dialog\""
											}
										}
									],
									"sid": 311090975793726
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 343554691022423
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if this NPC doesn't have any more dialog, close the dialog"
										},
										{
											"callFunction": "closeDialog",
											"sid": 625554042063782
										}
									],
									"sid": 455608331835792
								}
							],
							"isOrBlock": true
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 910099168097387
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "lazy man's solution to one of our never ending hierarchal tween opacity issues "
						},
						{
							"id": "set-opacity",
							"objectClass": "dialog",
							"sid": 225337882686273,
							"parameters": {
								"opacity": "portrait.Opacity"
							}
						}
					],
					"sid": 377042677871573
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 669647297717125,
							"parameters": {
								"object": "npc",
								"expression": "npc.UID",
								"comparison": 0,
								"value": "uidOfClicked"
							}
						},
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 923163265375557,
							"parameters": {
								"first-value": "Functions.isometrify(npc.interactRange, angle(player.X, player.Y, npc.X, npc.Y))",
								"comparison": 5,
								"second-value": "distance(player.X, player.Y, npc.X, npc.Y)"
							}
						},
						{
							"id": "pick-children",
							"objectClass": "npc",
							"sid": 547596792009158,
							"parameters": {
								"child": "npcBody",
								"which": "own"
							}
						}
					],
					"actions": [
						{
							"id": "stop",
							"objectClass": "player",
							"sid": 995148384126742,
							"behaviorType": "MoveTo"
						},
						{
							"id": "reset-eventvar",
							"objectClass": "System",
							"sid": 655217773003387,
							"parameters": {
								"variable": "uidOfClicked"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "player",
							"sid": 843563941878163,
							"parameters": {
								"instance-variable": "talkingToNpc",
								"value": "npc.simpleName"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "npc",
							"sid": 495876452183269,
							"parameters": {
								"instance-variable": "degrees",
								"value": "round(angle(Self.X, Self.Y, player.X, player.Y) / ARC) * ARC"
							}
						},
						{
							"id": "set-text",
							"objectClass": "dialogNpcName",
							"sid": 228783782150172,
							"parameters": {
								"text": "lowercase(npc.fullName)"
							}
						},
						{
							"id": "set-text",
							"objectClass": "dialogText",
							"sid": 527413904870532,
							"parameters": {
								"text": "Functions.arrayLookup(npcDialogArray.ObjectTypeName, npc.simpleName & \"-\" & npc.dialogCounter, \"message\")"
							}
						},
						{
							"id": "play-by-name",
							"objectClass": "Audio",
							"sid": 713594692786856,
							"parameters": {
								"folder": "sounds",
								"audio-file-name": "\"dialog/\" & npc.simpleName & \"-\" & npc.dialogCounter",
								"loop": "not-looping",
								"volume": "0",
								"stereo-pan": "0",
								"tag-optional": "\"dialog\""
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "npc",
							"sid": 599211582277082,
							"parameters": {
								"instance-variable": "degrees",
								"value": "Self.degrees = -HALF_CIRCLE ? HALF_CIRCLE : Self.degrees"
							}
						},
						{
							"id": "set-animation",
							"objectClass": "npcBody",
							"sid": 518867995994817,
							"parameters": {
								"animation": "\"idle_\" & npc.degrees",
								"from": "current-frame"
							}
						},
						{
							"callFunction": "updateFacing",
							"sid": 308186343635600,
							"parameters": [
								"npc.X",
								"npc.Y"
							]
						},
						{
							"callFunction": "updateAnimation",
							"sid": 750511475664798,
							"parameters": [
								"\"idle\"",
								"player.movementSpeed / ANIMATION_DIVISOR",
								"\"playFromBeginning\""
							]
						},
						{
							"callFunction": "openLayer",
							"sid": 557918979499813,
							"parameters": [
								"\"dialog\""
							]
						},
						{
							"type": "comment",
							"text": "TODO: This + 5 here is probably going to need to be a property of the portrait in npcDialog.json because it will be different for each portrait"
						},
						{
							"id": "create-object-by-name",
							"objectClass": "System",
							"sid": 615399486461175,
							"parameters": {
								"object-name": "npc.simpleName & \"_portrait\"",
								"layer": "\"portraits\"",
								"x": "PORTRAIT_POSITION",
								"y": "ViewportBottom(\"portraits\") + 5",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						}
					],
					"sid": 421647053250642,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-last-created",
									"objectClass": "System",
									"sid": 243855207346801,
									"parameters": {
										"object": "portrait"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "parent it to the dialog so it resizes correctly"
								},
								{
									"id": "add-child",
									"objectClass": "dialog",
									"sid": 595127476977745,
									"parameters": {
										"child": "portrait",
										"transform-x": true,
										"transform-y": true,
										"transform-w": false,
										"transform-h": false,
										"transform-a": false,
										"transform-o": false,
										"transform-z-elevation": false,
										"transform-visibility": false,
										"destroy-with-parent": false
									}
								},
								{
									"id": "set-opacity",
									"objectClass": "portrait",
									"sid": 581317999554329,
									"parameters": {
										"opacity": "0"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "portrait",
									"sid": 165459076919538,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"\"",
										"property": "offsetOpacity",
										"end-value": "100",
										"time": "MENU_FADE_TIME",
										"ease": "noease",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 547973787915997
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "npc",
									"sid": 562723409565951,
									"parameters": {
										"instance-variable": "isMerchant"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "merchantMenuStatue",
									"sid": 364088315942513,
									"parameters": {
										"instance-variable": "merchantStore",
										"value": "npc.simpleName"
									}
								},
								{
									"callFunction": "openLayer",
									"sid": 866546316811041,
									"parameters": [
										"\"merchantMenu\""
									]
								}
							],
							"sid": 112943394436478,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "layer-is-visible",
											"objectClass": "System",
											"sid": 522633786102803,
											"parameters": {
												"layer": "\"equippedMenu\""
											}
										}
									],
									"actions": [
										{
											"callFunction": "closeLayer",
											"sid": 392761074199444,
											"parameters": [
												"\"equippedMenu\""
											]
										}
									],
									"sid": 625180142345685
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "layer-is-visible",
											"objectClass": "System",
											"sid": 475539151099004,
											"parameters": {
												"layer": "\"inventoryMenu\""
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"callFunction": "openLayer",
											"sid": 623449632814768,
											"parameters": [
												"\"inventoryMenu\""
											]
										}
									],
									"sid": 488359596355318
								}
							]
						}
					]
				},
				{
					"functionName": "closeDialog",
					"functionDescription": "End dialog with an NPC.",
					"functionCategory": "world",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 757408856145196,
							"parameters": {
								"object": "npc",
								"expression": "npc.simpleName",
								"comparison": 0,
								"value": "player.talkingToNpc"
							}
						}
					],
					"actions": [
						{
							"id": "fade-volume",
							"objectClass": "Audio",
							"sid": 955868083870139,
							"parameters": {
								"tag": "\"dialog\"",
								"db": "-100",
								"duration": ".2",
								"ending": "stop"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "npc",
							"sid": 749519782918544,
							"parameters": {
								"instance-variable": "dialogCounter",
								"value": "1"
							}
						},
						{
							"callFunction": "closeLayer",
							"sid": 150349941126726,
							"parameters": [
								"\"dialog\""
							]
						},
						{
							"id": "tween-one-property",
							"objectClass": "portrait",
							"sid": 534290965390064,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "Self.ObjectTypeName & \" \" & Self.UID & \" opacity fade out\"",
								"property": "offsetOpacity",
								"end-value": "0",
								"time": "MENU_FADE_TIME",
								"ease": "noease",
								"destroy-on-complete": "yes",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 941566309323723
						},
						{
							"id": "set-text",
							"objectClass": "dialogText",
							"sid": 714648981532825,
							"parameters": {
								"text": "\"\""
							}
						},
						{
							"type": "comment",
							"text": "This wait being the official recommended method to unload an object after destroying it."
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 667796081139953,
							"parameters": {
								"seconds": "0"
							}
						},
						{
							"id": "unload-object-images",
							"objectClass": "System",
							"sid": 659778460881200,
							"parameters": {
								"object": "portrait"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "player",
							"sid": 615059103889778,
							"parameters": {
								"instance-variable": "talkingToNpc",
								"value": "\"none\""
							}
						}
					],
					"sid": 396375011211115
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-height",
							"objectClass": "dialogText",
							"sid": 586932421352978,
							"parameters": {
								"comparison": 2,
								"height": "Self.TextHeight"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "if the dialog text doesn't fit in the dialog box..."
						}
					],
					"sid": 181299880680297
				}
			],
			"sid": 217312584951758
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "equipment",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "variable",
					"name": "allowEquipmentInteraction",
					"type": "boolean",
					"initialValue": "true",
					"comment": "Whether or not the player is currently allowed to interact with equipment",
					"isStatic": true,
					"isConstant": false,
					"sid": 683308433353572
				},
				{
					"eventType": "variable",
					"name": "swapIdentifier",
					"type": "number",
					"initialValue": "0",
					"comment": "The saved identifier for swapping.",
					"isStatic": true,
					"isConstant": false,
					"sid": 841899330934363
				},
				{
					"eventType": "variable",
					"name": "swapSlotUid",
					"type": "number",
					"initialValue": "0",
					"comment": "the UID of the original slot in a swap",
					"isStatic": true,
					"isConstant": false,
					"sid": 592861658035522
				},
				{
					"eventType": "variable",
					"name": "draggedOriginSlotUid",
					"type": "number",
					"initialValue": "0",
					"comment": "the UID of the slot the drag originated from",
					"isStatic": true,
					"isConstant": false,
					"sid": 201307089918324
				},
				{
					"eventType": "variable",
					"name": "draggedItemUid",
					"type": "number",
					"initialValue": "0",
					"comment": "the UID of the item we're dragging",
					"isStatic": true,
					"isConstant": false,
					"sid": 298078267734463
				},
				{
					"eventType": "variable",
					"name": "droppedOnSlotUid",
					"type": "number",
					"initialValue": "0",
					"comment": "the UID of the slot we dropped on",
					"isStatic": true,
					"isConstant": false,
					"sid": 422173916162530
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "loot",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "keyboard",
									"sid": 629756992293274,
									"parameters": {
										"key": 83
									}
								},
								{
									"id": "is-in-preview",
									"objectClass": "System",
									"sid": 814944312378252
								}
							],
							"actions": [
								{
									"callFunction": "spawnLoot",
									"sid": 538939051809675,
									"parameters": [
										"player.X",
										"player.Y",
										"max(player.Width, player.Height)"
									]
								}
							],
							"sid": 349355571470231
						},
						{
							"functionName": "pickUpLoot",
							"functionDescription": "Picking up loot and turning it into an item",
							"functionCategory": "equipment",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 369764335379107,
									"parameters": {
										"variable": "isOnInteractCooldown",
										"value": "true"
									}
								}
							],
							"sid": 653257849123262,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-animation-playing",
											"objectClass": "autoEquip",
											"sid": 488279947558139,
											"parameters": {
												"animation": "\"checked\""
											}
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 647201888815502,
											"parameters": {
												"value": "Functions.contains(loot.classRestrictions, body.ObjectTypeName) | Functions.contains(loot.classRestrictions, ALL_CLASSES_KEYWORD)"
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "player",
											"sid": 730282754581605,
											"parameters": {
												"instance-variable": "level",
												"comparison": 5,
												"value": "loot.level"
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 664728702172861,
											"parameters": {
												"object": "slot",
												"expression": "slot.type",
												"comparison": 0,
												"value": "loot.type"
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 492799500541261,
											"parameters": {
												"object": "slot",
												"expression": "slot.identifier",
												"comparison": 0,
												"value": "0"
											}
										},
										{
											"id": "pick-nth-instance",
											"objectClass": "System",
											"sid": 452173619109154,
											"parameters": {
												"object": "slot",
												"instance": "0"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if auto equip is enabled, and the player's class matches the loot's restrictions, pick the first empty slot matching the loot's type, and spawn the item there"
										},
										{
											"id": "create-object-by-name",
											"objectClass": "System",
											"sid": 339502509864802,
											"parameters": {
												"object-name": "loot.simpleName & \"_item\"",
												"layer": "\"equippedMenu\"",
												"x": "slot.X",
												"y": "slot.Y",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										}
									],
									"sid": 417026782949109,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-last-created",
													"objectClass": "System",
													"sid": 958412799812861,
													"parameters": {
														"object": "item"
													}
												}
											],
											"actions": [
												{
													"callFunction": "setItemVariables",
													"sid": 578892715081229
												},
												{
													"callFunction": "queueGearManagement",
													"sid": 950198310626390,
													"parameters": [
														true
													]
												}
											],
											"sid": 323602104316470
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 341369713051807
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 740204793762600,
											"parameters": {
												"object": "slot",
												"expression": "slot.type",
												"comparison": 0,
												"value": "\"none\""
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 772858798512530,
											"parameters": {
												"object": "slot",
												"expression": "slot.identifier",
												"comparison": 0,
												"value": "0"
											}
										},
										{
											"id": "pick-nth-instance",
											"objectClass": "System",
											"sid": 196356171794867,
											"parameters": {
												"object": "slot",
												"instance": "0"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if auto equip is disabled, or there's no empty slots matching the item's type, spawn the item in the first empty inventory slot."
										},
										{
											"id": "create-object-by-name",
											"objectClass": "System",
											"sid": 885272990136247,
											"parameters": {
												"object-name": "loot.simpleName & \"_item\"",
												"layer": "\"inventoryMenu\"",
												"x": "slot.X",
												"y": "slot.Y",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										},
										{
											"id": "play-at-object-by-name",
											"objectClass": "Audio",
											"sid": 677882558199251,
											"parameters": {
												"folder": "sounds",
												"audio-file-name": "\"obtainedItem_\" & round(random(1))",
												"loop": "not-looping",
												"volume": "0",
												"object": "player",
												"inner-angle": "360",
												"outer-angle": "360",
												"outer-gain": "0",
												"tag-optional": "\"\""
											}
										}
									],
									"sid": 658192619640202,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-last-created",
													"objectClass": "System",
													"sid": 483526905581318,
													"parameters": {
														"object": "item"
													}
												}
											],
											"actions": [
												{
													"callFunction": "setItemVariables",
													"sid": 356730110629027
												}
											],
											"sid": 319164556849852
										}
									]
								}
							]
						},
						{
							"functionName": "setItemVariables",
							"functionDescription": "set the variables on an item, from its loot",
							"functionCategory": "equipment",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 695618123166718,
									"parameters": {
										"instance-variable": "identifier",
										"value": "loot.identifier"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 894947352405585,
									"parameters": {
										"instance-variable": "simpleName",
										"value": "loot.simpleName"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 682567391690132,
									"parameters": {
										"instance-variable": "fullName",
										"value": "loot.fullName"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 762874512826659,
									"parameters": {
										"instance-variable": "value",
										"value": "loot.value"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 112068630443208,
									"parameters": {
										"instance-variable": "type",
										"value": "loot.type"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 728841582247601,
									"parameters": {
										"instance-variable": "lore",
										"value": "loot.lore"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 358574228575891,
									"parameters": {
										"instance-variable": "level",
										"value": "loot.level"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 904449258452233,
									"parameters": {
										"instance-variable": "mods",
										"value": "loot.mods"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 968287328115240,
									"parameters": {
										"instance-variable": "classRestrictions",
										"value": "loot.classRestrictions"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 701634170777121,
									"parameters": {
										"instance-variable": "modTable",
										"value": "loot.modTable"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 466078975570333,
									"parameters": {
										"instance-variable": "sound",
										"value": "loot.sound"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "slot",
									"sid": 818920739961129,
									"parameters": {
										"instance-variable": "identifier",
										"value": "item.identifier"
									}
								},
								{
									"id": "add-child",
									"objectClass": "slot",
									"sid": 418593601200365,
									"parameters": {
										"child": "item",
										"transform-x": true,
										"transform-y": true,
										"transform-w": false,
										"transform-h": false,
										"transform-a": false,
										"transform-o": false,
										"transform-z-elevation": false,
										"transform-visibility": false,
										"destroy-with-parent": true
									}
								},
								{
									"id": "destroy",
									"objectClass": "loot",
									"sid": 354827222227349
								}
							],
							"sid": 441193875115599,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-overlapping-point",
											"objectClass": "System",
											"sid": 666223508174307,
											"parameters": {
												"object": "placeholder",
												"x": "item.X",
												"y": "item.Y"
											}
										}
									],
									"actions": [
										{
											"id": "set-visible",
											"objectClass": "placeholder",
											"sid": 168572126852132,
											"parameters": {
												"visibility": "invisible"
											}
										}
									],
									"sid": 581771949495265
								}
							]
						},
						{
							"eventType": "variable",
							"name": "TRAVEL_TIME",
							"type": "number",
							"initialValue": "0.5",
							"comment": "The amount of time it takes loot to get to its destination.",
							"isStatic": false,
							"isConstant": true,
							"sid": 853578934190498
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-tweens-finished",
									"objectClass": "loot",
									"sid": 778561935894008,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"ascension\""
									}
								}
							],
							"actions": [
								{
									"id": "tween-one-property",
									"objectClass": "loot",
									"sid": 235375886758818,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"\"",
										"property": "offsetY",
										"end-value": "Self.destinationY",
										"time": "TRAVEL_TIME / 2",
										"ease": "easeinsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "wait-for-previous-actions",
									"objectClass": "System",
									"sid": 315389258203181
								}
							],
							"sid": 629339917694708,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-tag-playing",
											"objectClass": "Audio",
											"sid": 804144167636984,
											"parameters": {
												"tag": "loot.sound & \"_drop\""
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "play-at-object-by-name",
											"objectClass": "Audio",
											"sid": 486635349317362,
											"parameters": {
												"folder": "sounds",
												"audio-file-name": "loot.sound & \"_drop\" & round(random(1))",
												"loop": "not-looping",
												"volume": "0",
												"object": "loot",
												"inner-angle": "360",
												"outer-angle": "360",
												"outer-gain": "0",
												"tag-optional": "\"\""
											}
										}
									],
									"sid": 384688841304585
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-created",
									"objectClass": "loot",
									"sid": 198963619407955
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "This isn't a part of the 'spawnLoot' function because we need it to work for loot that's already in a layout."
								},
								{
									"id": "set-instvar-value",
									"objectClass": "loot",
									"sid": 500570871920815,
									"parameters": {
										"instance-variable": "identifier",
										"value": "nextAvailableIdentifier"
									}
								},
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 292727294235481,
									"parameters": {
										"variable": "nextAvailableIdentifier",
										"value": "1"
									}
								}
							],
							"sid": 328634154225649
						},
						{
							"functionName": "spawnLoot",
							"functionDescription": "spawn loot at the specified location",
							"functionCategory": "equipment",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "x",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"sid": 839401055522675
								},
								{
									"name": "y",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"sid": 508129132310762
								},
								{
									"name": "lootDistance",
									"type": "number",
									"initialValue": "0",
									"comment": "How far away from the object to spawn loot.",
									"sid": 245277320896905
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "setProbabilityTable",
									"objectClass": "advancedRandom",
									"sid": 583245095565362,
									"parameters": {
										"name": "\"loot\""
									}
								},
								{
									"id": "create-object-by-name",
									"objectClass": "System",
									"sid": 210734168625939,
									"parameters": {
										"object-name": "advancedRandom.WeightedByName(\"equipment\") & \"_loot\"",
										"layer": "\"background\"",
										"x": "x",
										"y": "y",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								},
								{
									"type": "comment",
									"text": "TODO: lootDistance should be the smallest isometric circle (oval) that completely encompasses the object that spawned the loot."
								}
							],
							"sid": 144578606465063,
							"children": [
								{
									"eventType": "variable",
									"name": "theAngle",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 326422520929617
								},
								{
									"eventType": "variable",
									"name": "isometrifiedDistance",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 542239830488062
								},
								{
									"eventType": "variable",
									"name": "LOOT_ALTITUDE",
									"type": "number",
									"initialValue": "100",
									"comment": "How high the loot should fly up into the air after it spawns.",
									"isStatic": false,
									"isConstant": true,
									"sid": 586249255052912
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-last-created",
											"objectClass": "System",
											"sid": 608751264424369,
											"parameters": {
												"object": "loot"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "https://github.com/Laserwolve-Games/DaggerQuest/issues/38"
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 974018068570534,
											"parameters": {
												"variable": "theAngle",
												"value": "random(-HALF_CIRCLE, HALF_CIRCLE)"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 112883245426002,
											"parameters": {
												"variable": "isometrifiedDistance",
												"value": "Functions.isometrify(lootDistance + max(loot.Width, loot.Height), theAngle)"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 244398877909043,
											"parameters": {
												"instance-variable": "destinationX",
												"value": "x + isometrifiedDistance * cos(theAngle)"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 328334205073985,
											"parameters": {
												"instance-variable": "destinationY",
												"value": "y + isometrifiedDistance * sin(theAngle)"
											}
										},
										{
											"id": "set-scale",
											"objectClass": "loot",
											"sid": 285100696477771,
											"parameters": {
												"scale": ".5"
											}
										},
										{
											"id": "tween-two-properties",
											"objectClass": "loot",
											"sid": 426061561589021,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"\"",
												"property": "scale",
												"end-x": "1",
												"end-y": "1",
												"time": "TRAVEL_TIME",
												"ease": "noease",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"id": "tween-one-property",
											"objectClass": "loot",
											"sid": 906550384634452,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"\"",
												"property": "offsetX",
												"end-value": "Self.destinationX",
												"time": "TRAVEL_TIME",
												"ease": "noease",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"id": "tween-one-property",
											"objectClass": "loot",
											"sid": 908264258762765,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"ascension\"",
												"property": "offsetY",
												"end-value": "Self.destinationY - Functions.isometrify(LOOT_ALTITUDE, theAngle)",
												"time": "TRAVEL_TIME / 2",
												"ease": "easeoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"id": "set-animation",
											"objectClass": "loot",
											"sid": 874150850325430,
											"parameters": {
												"animation": "\"static_\" & (floor(random(1, 17)) * ARC) - HALF_CIRCLE",
												"from": "beginning"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 937896836624100,
											"parameters": {
												"instance-variable": "simpleName",
												"value": "tokenat(loot.ObjectTypeName, 0, \"_\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 387156835177166,
											"parameters": {
												"instance-variable": "fullName",
												"value": "Functions.arrayLookup(equipmentArray.ObjectTypeName, Self.simpleName, \"fullName\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 740584911958729,
											"parameters": {
												"instance-variable": "type",
												"value": "Functions.arrayLookup(equipmentArray.ObjectTypeName, Self.simpleName, \"type\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 360927318720871,
											"parameters": {
												"instance-variable": "lore",
												"value": "Functions.arrayLookup(equipmentArray.ObjectTypeName, Self.simpleName, \"lore\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 992658870893090,
											"parameters": {
												"instance-variable": "level",
												"value": "Functions.arrayLookup(equipmentArray.ObjectTypeName, Self.simpleName, \"level\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 341407944527451,
											"parameters": {
												"instance-variable": "value",
												"value": "Functions.arrayLookup(equipmentArray.ObjectTypeName, Self.simpleName, \"value\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 431466943186454,
											"parameters": {
												"instance-variable": "classRestrictions",
												"value": "Functions.arrayLookup(equipmentArray.ObjectTypeName, Self.simpleName, \"classRestrictions\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 181518222104383,
											"parameters": {
												"instance-variable": "modTable",
												"value": "Functions.arrayLookup(equipmentArray.ObjectTypeName, Self.simpleName, \"modTable\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 380178747402522,
											"parameters": {
												"instance-variable": "sound",
												"value": "Functions.arrayLookup(equipmentArray.ObjectTypeName, Self.simpleName, \"sound\")"
											}
										}
									],
									"sid": 365625576088734,
									"children": [
										{
											"eventType": "variable",
											"name": "MIN_MODS",
											"type": "number",
											"initialValue": "1",
											"comment": "The minimum number of mods an item can have.",
											"isStatic": true,
											"isConstant": true,
											"sid": 331110515125803
										},
										{
											"eventType": "variable",
											"name": "MAX_MODS",
											"type": "number",
											"initialValue": "4",
											"comment": "The maximum number of mods an item can have.",
											"isStatic": true,
											"isConstant": true,
											"sid": 161080292351024
										},
										{
											"eventType": "variable",
											"name": "mod",
											"type": "string",
											"initialValue": "",
											"comment": "",
											"isStatic": true,
											"isConstant": false,
											"sid": 246965271765553
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "repeat",
													"objectClass": "System",
													"sid": 869657056641050,
													"parameters": {
														"count": "round(random(MIN_MODS, MAX_MODS))"
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 446693176521729,
													"parameters": {
														"variable": "mod",
														"value": "advancedRandom.WeightedByName(loot.modTable)"
													}
												},
												{
													"id": "add-to-instvar",
													"objectClass": "loot",
													"sid": 696283491550463,
													"parameters": {
														"instance-variable": "mods",
														"value": "((mod & \":\") & Functions.arrayLookup(modsArray.ObjectTypeName, mod, \"description\")) & \";\""
													}
												}
											],
											"sid": 375380483704702
										},
										{
											"eventType": "variable",
											"name": "MOD_VALUE_REGEX",
											"type": "string",
											"initialValue": "\\[.*?\\]",
											"comment": "the regex that will return the first mod value",
											"isStatic": true,
											"isConstant": true,
											"sid": 168471026558236
										},
										{
											"eventType": "variable",
											"name": "modValue",
											"type": "string",
											"initialValue": "",
											"comment": "The text inside the brackets of a given mod",
											"isStatic": true,
											"isConstant": false,
											"sid": 675449617154846
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "for",
													"objectClass": "System",
													"sid": 114331841409558,
													"parameters": {
														"name": "\"\"",
														"start-index": "1",
														"end-index": "RegexMatchCount(loot.mods, MOD_VALUE_REGEX, \"g\")"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "for each set of square brackets in this loot's mods"
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 809453843635835,
													"parameters": {
														"variable": "modValue",
														"value": "RegexReplace(RegexMatchAt(loot.mods, MOD_VALUE_REGEX, \"\", 0), \"\\[|]\", \"g\", \"\")"
													}
												}
											],
											"sid": 668230999384246,
											"children": [
												{
													"eventType": "variable",
													"name": "lowerLimit",
													"type": "number",
													"initialValue": "0",
													"comment": "the lowest number that this mod can roll",
													"isStatic": true,
													"isConstant": false,
													"sid": 694917693599524
												},
												{
													"eventType": "variable",
													"name": "upperLimit",
													"type": "number",
													"initialValue": "0",
													"comment": "the highest number that this mod can roll",
													"isStatic": true,
													"isConstant": false,
													"sid": 136852260606726
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "evaluate-expression",
															"objectClass": "System",
															"sid": 764092778524370,
															"parameters": {
																"value": "Functions.contains(modValue, \"-\")"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "if this particular value contains a dash, it's a numeric value"
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 461581557850035,
															"parameters": {
																"variable": "lowerLimit",
																"value": "int(tokenat(modValue, 0, \"-\")) * loot.level"
															}
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 841670533825303,
															"parameters": {
																"variable": "upperLimit",
																"value": "int(tokenat(modValue, 1, \"-\")) * loot.level"
															}
														},
														{
															"id": "setProbabilityTable",
															"objectClass": "advancedRandom",
															"sid": 264346351548282,
															"parameters": {
																"name": "\"modValues\""
															}
														}
													],
													"sid": 878549987436267,
													"children": [
														{
															"eventType": "comment",
															"text": "Set a numeric mod's value to a random number between the lower and upper limit. Higher numbers are rarer. The rarity of higher numbers diminishingly scales with the loot level."
														},
														{
															"eventType": "comment",
															"text": "TODO: Negative values - should lower numbers be better? or worse?",
															"background-color": [
																0.984313725490196,
																1,
																0,
																1
															]
														},
														{
															"eventType": "variable",
															"name": "total",
															"type": "number",
															"initialValue": "0",
															"comment": "the total weight of all possible mod values, unconverted",
															"isStatic": true,
															"isConstant": false,
															"sid": 275844986849541
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "for",
																	"objectClass": "System",
																	"sid": 219774906891118,
																	"parameters": {
																		"name": "\"\"",
																		"start-index": "lowerLimit",
																		"end-index": "upperLimit"
																	}
																}
															],
															"actions": [
																{
																	"id": "add-to-eventvar",
																	"objectClass": "System",
																	"sid": 213474108009376,
																	"parameters": {
																		"variable": "total",
																		"value": "Functions.standardizeModValue(lowerLimit, upperLimit, loopindex)"
																	}
																}
															],
															"sid": 231459355083010
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "for",
																	"objectClass": "System",
																	"sid": 584623522244621,
																	"parameters": {
																		"name": "\"\"",
																		"start-index": "lowerLimit",
																		"end-index": "upperLimit"
																	}
																}
															],
															"actions": [
																{
																	"id": "addProbabilityEntry",
																	"objectClass": "advancedRandom",
																	"sid": 526391445067413,
																	"parameters": {
																		"value": "loopindex * (.1 ^ RegexMatchCount(modValue, \"x\", \"g\"))",
																		"weight": "Functions.standardizeModValue(lowerLimit, upperLimit, loopindex) / total"
																	}
																},
																{
																	"type": "comment",
																	"text": "the number of Xs in the mod value is the number of decimal places to shift the result. We have to do it this way because of floating point math problems"
																}
															],
															"sid": 455988557394103
														},
														{
															"eventType": "block",
															"conditions": [],
															"actions": [
																{
																	"id": "set-instvar-value",
																	"objectClass": "loot",
																	"sid": 461098221041892,
																	"parameters": {
																		"instance-variable": "mods",
																		"value": "RegexReplace(Self.mods, MOD_VALUE_REGEX, \"\", \"{\" & advancedRandom.Weighted & \"}\")"
																	}
																},
																{
																	"id": "reset-eventvar",
																	"objectClass": "System",
																	"sid": 195781823527184,
																	"parameters": {
																		"variable": "total"
																	}
																}
															],
															"sid": 424302104263233
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "for",
																	"objectClass": "System",
																	"sid": 887803499960340,
																	"parameters": {
																		"name": "\"\"",
																		"start-index": "lowerLimit",
																		"end-index": "upperLimit"
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "We can remove an entire mod table, so remove the entries the same way we added them"
																},
																{
																	"id": "removeProbabilityEntry",
																	"objectClass": "advancedRandom",
																	"sid": 235462776396470,
																	"parameters": {
																		"value": "loopindex * (.1 ^ RegexMatchCount(modValue, \"x\", \"g\"))",
																		"weight": "0"
																	}
																}
															],
															"sid": 533866735890312
														}
													]
												},
												{
													"eventType": "comment",
													"text": "For text mod values, select a choice at random"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 834396030101558
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "if it doesn't, it should contain a dollar sign, which means it's a text value"
														},
														{
															"id": "set-instvar-value",
															"objectClass": "loot",
															"sid": 835948514084487,
															"parameters": {
																"instance-variable": "mods",
																"value": "RegexReplace(Self.mods, MOD_VALUE_REGEX, \"\", \"{\" & tokenat(modValue, floor(random(tokencount(modValue, \"$\"))), \"$\") & \"}\")"
															}
														}
													],
													"sid": 734276999010657
												}
											]
										}
									]
								}
							]
						},
						{
							"functionName": "standardizeModValue",
							"functionDescription": "Standardize the possible value of a mod to a uniform range",
							"functionCategory": "mods",
							"functionReturnType": "number",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "lowerLimit",
									"type": "number",
									"initialValue": "0",
									"comment": "the lowest number that this mod can roll",
									"sid": 165700446124118
								},
								{
									"name": "upperLimit",
									"type": "number",
									"initialValue": "0",
									"comment": "the highest number that this mod can roll",
									"sid": 140901520535839
								},
								{
									"name": "currentLoopindex",
									"type": "number",
									"initialValue": "0",
									"comment": "the loopindex of the current loop over possible mod values",
									"sid": 762366194120232
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-function-return-value",
									"objectClass": "Functions",
									"sid": 237729906977959,
									"parameters": {
										"value": "lerp(loot.level, 1, unlerp(lowerLimit, upperLimit, currentLoopindex))"
									}
								}
							],
							"sid": 949225567251958
						}
					],
					"sid": 258106155275995
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "items",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "group",
							"disabled": false,
							"title": "merchants",
							"description": "There can only be one merchants per layout. We generate/refresh that merchant's inventory (the merchant menu) on the start of that layout.",
							"isActiveOnStart": true,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-start-of-layout",
											"objectClass": "System",
											"sid": 607174205309859
										},
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "npc",
											"sid": 177131204117234,
											"parameters": {
												"instance-variable": "isMerchant"
											}
										},
										{
											"id": "is-on-layer",
											"objectClass": "slot",
											"sid": 832317720319855,
											"parameters": {
												"layer": "merchantMenuStatue.LayerName"
											}
										},
										{
											"id": "is-on-layer",
											"objectClass": "item",
											"sid": 573466018144373,
											"parameters": {
												"layer": "merchantMenuStatue.LayerName"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "At the start of each layout, if this layout has a merchant NPC, pick all the slots and items on the merchant menu. Destroy all the items that are currently on there, if any; they're from the previous layout."
										},
										{
											"id": "destroy",
											"objectClass": "item",
											"sid": 131283347821390
										}
									],
									"sid": 746576205425298
								}
							],
							"sid": 717055253183813
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-object-clicked",
									"objectClass": "mouse",
									"sid": 902624678400026,
									"parameters": {
										"mouse-button": "right",
										"click-type": "clicked",
										"object-clicked": "item"
									}
								},
								{
									"id": "is-dragging",
									"objectClass": "item",
									"sid": 559873276613647,
									"behaviorType": "DragDrop",
									"isInverted": true
								},
								{
									"id": "layer-is-interactive",
									"objectClass": "System",
									"sid": 543470329738268,
									"parameters": {
										"layer": "inventoryMenuStatue.LayerName"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "if an item is right clicked while it's not being dragged, and the inventory menu is open..."
								}
							],
							"sid": 516496370527557,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "layer-is-interactive",
											"objectClass": "System",
											"sid": 261625433778583,
											"parameters": {
												"layer": "equippedMenuStatue.LayerName"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "...if the equipped menu is open..."
										}
									],
									"sid": 141483461589071,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-on-layer",
													"objectClass": "item",
													"sid": 373666143811986,
													"parameters": {
														"layer": "equippedMenuStatue.LayerName"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "...and the item is in the equipped menu..."
												}
											],
											"sid": 259729607655343,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-on-layer",
															"objectClass": "slot",
															"sid": 204483611763530,
															"parameters": {
																"layer": "inventoryMenuStatue.LayerName"
															}
														},
														{
															"id": "compare-instance-variable",
															"objectClass": "slot",
															"sid": 464335822734662,
															"parameters": {
																"instance-variable": "identifier",
																"comparison": 0,
																"value": "0"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "check to see if there's any empty inventory slots the item can go into"
														}
													],
													"sid": 615870837667651,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "pick-all",
																	"objectClass": "System",
																	"sid": 143397265739429,
																	"parameters": {
																		"object": "slot"
																	}
																},
																{
																	"id": "compare-instance-variable",
																	"objectClass": "slot",
																	"sid": 354642036138383,
																	"parameters": {
																		"instance-variable": "identifier",
																		"comparison": 0,
																		"value": "item.identifier"
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "if there are, detach the item from its current slot"
																},
																{
																	"callFunction": "detachItem",
																	"sid": 188966051254299
																}
															],
															"sid": 327329318397352
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "pick-all",
																	"objectClass": "System",
																	"sid": 904084341283974,
																	"parameters": {
																		"object": "slot"
																	}
																},
																{
																	"id": "is-on-layer",
																	"objectClass": "slot",
																	"sid": 812399325623394,
																	"parameters": {
																		"layer": "inventoryMenuStatue.LayerName"
																	}
																},
																{
																	"id": "compare-instance-variable",
																	"objectClass": "slot",
																	"sid": 926916826114853,
																	"parameters": {
																		"instance-variable": "identifier",
																		"comparison": 0,
																		"value": "0"
																	}
																},
																{
																	"id": "pick-nth-instance",
																	"objectClass": "System",
																	"sid": 497017517327860,
																	"parameters": {
																		"object": "slot",
																		"instance": "0"
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "then attach it to the first empty inventory slot"
																},
																{
																	"callFunction": "attachItem",
																	"sid": 234862840931038
																}
															],
															"sid": 286487193984274
														}
													]
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 243958853211203
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "\"I can't carry any more\""
														}
													],
													"sid": 179465482061357
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 882475673725979
												},
												{
													"id": "is-on-layer",
													"objectClass": "item",
													"sid": 210850705213818,
													"parameters": {
														"layer": "inventoryMenuStatue.LayerName"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "...and the item is in the in the inventory menu...\nThis else is necessary so that only one thing happens to the item per right click."
												}
											],
											"sid": 179130591788354,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "evaluate-expression",
															"objectClass": "System",
															"sid": 741688984569110,
															"parameters": {
																"value": "Functions.contains(item.classRestrictions, body.ObjectTypeName) | Functions.contains(item.classRestrictions, ALL_CLASSES_KEYWORD)"
															}
														},
														{
															"id": "compare-instance-variable",
															"objectClass": "player",
															"sid": 979390650824515,
															"parameters": {
																"instance-variable": "level",
																"comparison": 5,
																"value": "item.level"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "...and can be equipped..."
														}
													],
													"sid": 816224069253620,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "is-on-layer",
																	"objectClass": "slot",
																	"sid": 456376101268231,
																	"parameters": {
																		"layer": "equippedMenuStatue.LayerName"
																	}
																},
																{
																	"id": "compare-instance-variable",
																	"objectClass": "slot",
																	"sid": 572823768934564,
																	"parameters": {
																		"instance-variable": "type",
																		"comparison": 0,
																		"value": "item.type"
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "pick the equipped menu slots that match the item's type"
																}
															],
															"sid": 502572037153546,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "compare-instance-variable",
																			"objectClass": "slot",
																			"sid": 135844910243692,
																			"parameters": {
																				"instance-variable": "identifier",
																				"comparison": 0,
																				"value": "0"
																			}
																		}
																	],
																	"actions": [
																		{
																			"type": "comment",
																			"text": "of those slots, check if any are empty"
																		}
																	],
																	"sid": 611656446932646,
																	"children": [
																		{
																			"eventType": "block",
																			"conditions": [
																				{
																					"id": "pick-all",
																					"objectClass": "System",
																					"sid": 813888886156308,
																					"parameters": {
																						"object": "slot"
																					}
																				},
																				{
																					"id": "compare-instance-variable",
																					"objectClass": "slot",
																					"sid": 416730467022575,
																					"parameters": {
																						"instance-variable": "identifier",
																						"comparison": 0,
																						"value": "item.identifier"
																					}
																				}
																			],
																			"actions": [
																				{
																					"type": "comment",
																					"text": "now that we know there's an empty equipped menu slot for this item, go back to the inventory menu slot holding our item, and detach"
																				},
																				{
																					"callFunction": "detachItem",
																					"sid": 131421743767293
																				}
																			],
																			"sid": 195533417383285
																		},
																		{
																			"eventType": "block",
																			"conditions": [
																				{
																					"id": "pick-all",
																					"objectClass": "System",
																					"sid": 156477775914989,
																					"parameters": {
																						"object": "slot"
																					}
																				},
																				{
																					"id": "compare-instance-variable",
																					"objectClass": "slot",
																					"sid": 585688927479561,
																					"parameters": {
																						"instance-variable": "type",
																						"comparison": 0,
																						"value": "item.type"
																					}
																				},
																				{
																					"id": "compare-instance-variable",
																					"objectClass": "slot",
																					"sid": 999243174386320,
																					"parameters": {
																						"instance-variable": "identifier",
																						"comparison": 0,
																						"value": "0"
																					}
																				},
																				{
																					"id": "pick-nth-instance",
																					"objectClass": "System",
																					"sid": 381623664014871,
																					"parameters": {
																						"object": "slot",
																						"instance": "0"
																					}
																				}
																			],
																			"actions": [
																				{
																					"type": "comment",
																					"text": "re-pick the first empty equipped menu slot that matches the item's type, and attach to it"
																				},
																				{
																					"callFunction": "attachItem",
																					"sid": 327984834416614
																				}
																			],
																			"sid": 218558563544337
																		}
																	]
																},
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "else",
																			"objectClass": "System",
																			"sid": 572019427785162
																		},
																		{
																			"id": "pick-nth-instance",
																			"objectClass": "System",
																			"sid": 390815014546678,
																			"parameters": {
																				"object": "slot",
																				"instance": "0"
																			}
																		}
																	],
																	"actions": [
																		{
																			"type": "comment",
																			"text": "if no slots are empty, start a swap. pick the first equipped menu slot (necessary in the case of rings, because there are two slots) and store its identifier, which is also the identifier of the item in it"
																		},
																		{
																			"id": "set-eventvar-value",
																			"objectClass": "System",
																			"sid": 604084880763839,
																			"parameters": {
																				"variable": "swapIdentifier",
																				"value": "slot.identifier"
																			}
																		}
																	],
																	"sid": 210265590913200,
																	"children": [
																		{
																			"eventType": "block",
																			"conditions": [
																				{
																					"id": "pick-all",
																					"objectClass": "System",
																					"sid": 752533324952199,
																					"parameters": {
																						"object": "slot"
																					}
																				},
																				{
																					"id": "compare-instance-variable",
																					"objectClass": "slot",
																					"sid": 381204298338618,
																					"parameters": {
																						"instance-variable": "identifier",
																						"comparison": 0,
																						"value": "item.identifier"
																					}
																				}
																			],
																			"actions": [
																				{
																					"type": "comment",
																					"text": "go back to the slot holding our item, and detach. save this slots UID so we know where to put the other item"
																				},
																				{
																					"id": "set-eventvar-value",
																					"objectClass": "System",
																					"sid": 311564767470210,
																					"parameters": {
																						"variable": "swapSlotUid",
																						"value": "slot.UID"
																					}
																				},
																				{
																					"callFunction": "detachItem",
																					"sid": 836662842091155
																				}
																			],
																			"sid": 215652186379056,
																			"children": [
																				{
																					"eventType": "block",
																					"conditions": [
																						{
																							"id": "pick-all",
																							"objectClass": "System",
																							"sid": 336836206895685,
																							"parameters": {
																								"object": "slot"
																							}
																						},
																						{
																							"id": "is-on-layer",
																							"objectClass": "slot",
																							"sid": 592571561211843,
																							"parameters": {
																								"layer": "equippedMenuStatue.LayerName"
																							}
																						},
																						{
																							"id": "compare-instance-variable",
																							"objectClass": "slot",
																							"sid": 217011974300001,
																							"parameters": {
																								"instance-variable": "type",
																								"comparison": 0,
																								"value": "item.type"
																							}
																						},
																						{
																							"id": "pick-nth-instance",
																							"objectClass": "System",
																							"sid": 539048875567544,
																							"parameters": {
																								"object": "slot",
																								"instance": "0"
																							}
																						}
																					],
																					"actions": [
																						{
																							"type": "comment",
																							"text": "re-pick the first equipped menu slot that matches the item's type, and attach to it, even though it has an different item in it"
																						},
																						{
																							"callFunction": "attachItem",
																							"sid": 173606397215514
																						}
																					],
																					"sid": 208754529740190,
																					"children": [
																						{
																							"eventType": "block",
																							"conditions": [
																								{
																									"id": "pick-all",
																									"objectClass": "System",
																									"sid": 692479422454669,
																									"parameters": {
																										"object": "item"
																									}
																								},
																								{
																									"id": "compare-instance-variable",
																									"objectClass": "item",
																									"sid": 271581528396390,
																									"parameters": {
																										"instance-variable": "identifier",
																										"comparison": 0,
																										"value": "swapIdentifier"
																									}
																								},
																								{
																									"id": "pick-all",
																									"objectClass": "System",
																									"sid": 677226589270042,
																									"parameters": {
																										"object": "slot"
																									}
																								},
																								{
																									"id": "pick-by-unique-id",
																									"objectClass": "slot",
																									"sid": 348968224795269,
																									"parameters": {
																										"unique-id": "swapSlotUid"
																									}
																								}
																							],
																							"actions": [
																								{
																									"type": "comment",
																									"text": "now we have both items in the same slot. we'll detach the item that shouldn't be there, picking it with swapID. We don't need to clear the identifier value because it was already set correctly in the previous event"
																								},
																								{
																									"id": "remove-from-parent",
																									"objectClass": "item",
																									"sid": 238096414769910
																								},
																								{
																									"callFunction": "manageMods",
																									"sid": 582563508271707,
																									"parameters": [
																										false
																									]
																								},
																								{
																									"callFunction": "attachItem",
																									"sid": 389391319527430
																								}
																							],
																							"sid": 216178085774942
																						}
																					]
																				}
																			]
																		}
																	]
																}
															]
														}
													]
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 872168138322245
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "\"I don't meet the requirements for this item\""
														}
													],
													"sid": 715392308037857
												}
											]
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "layer-is-interactive",
											"objectClass": "System",
											"sid": 951140948527553,
											"parameters": {
												"layer": "merchantMenuStatue.LayerName"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "...if the merchant menu is open..."
										}
									],
									"sid": 305621605690708,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-on-layer",
													"objectClass": "item",
													"sid": 153342285769272,
													"parameters": {
														"layer": "merchantMenuStatue.LayerName"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "...and the item is in the merchant menu..."
												}
											],
											"sid": 494713688753610,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-on-layer",
															"objectClass": "slot",
															"sid": 829655037631147,
															"parameters": {
																"layer": "inventoryMenuStatue.LayerName"
															}
														},
														{
															"id": "compare-instance-variable",
															"objectClass": "slot",
															"sid": 935302164198032,
															"parameters": {
																"instance-variable": "identifier",
																"comparison": 0,
																"value": "0"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "check to see if there's any empty inventory slots the item can go into"
														}
													],
													"sid": 181754026692635,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-instance-variable",
																	"objectClass": "item",
																	"sid": 326474860562062,
																	"parameters": {
																		"instance-variable": "value",
																		"comparison": 3,
																		"value": "player.coins"
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "Check if the player can pay for the item, and if so, charge them"
																},
																{
																	"id": "subtract-from-instvar",
																	"objectClass": "player",
																	"sid": 526847057139408,
																	"parameters": {
																		"instance-variable": "coins",
																		"value": "item.value"
																	}
																}
															],
															"sid": 580986029317286,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "pick-all",
																			"objectClass": "System",
																			"sid": 342955611112313,
																			"parameters": {
																				"object": "slot"
																			}
																		},
																		{
																			"id": "compare-instance-variable",
																			"objectClass": "slot",
																			"sid": 436704766403690,
																			"parameters": {
																				"instance-variable": "identifier",
																				"comparison": 0,
																				"value": "item.identifier"
																			}
																		}
																	],
																	"actions": [
																		{
																			"type": "comment",
																			"text": "if there are, detach the item from its current slot"
																		},
																		{
																			"callFunction": "detachItem",
																			"sid": 131505584950739
																		}
																	],
																	"sid": 518708578055429
																},
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "pick-all",
																			"objectClass": "System",
																			"sid": 512394241193415,
																			"parameters": {
																				"object": "slot"
																			}
																		},
																		{
																			"id": "is-on-layer",
																			"objectClass": "slot",
																			"sid": 741939023261402,
																			"parameters": {
																				"layer": "inventoryMenuStatue.LayerName"
																			}
																		},
																		{
																			"id": "compare-instance-variable",
																			"objectClass": "slot",
																			"sid": 435381455243604,
																			"parameters": {
																				"instance-variable": "identifier",
																				"comparison": 0,
																				"value": "0"
																			}
																		},
																		{
																			"id": "pick-nth-instance",
																			"objectClass": "System",
																			"sid": 797247422144166,
																			"parameters": {
																				"object": "slot",
																				"instance": "0"
																			}
																		}
																	],
																	"actions": [
																		{
																			"type": "comment",
																			"text": "then attach it to the first empty inventory slot"
																		},
																		{
																			"callFunction": "attachItem",
																			"sid": 539107870797046
																		}
																	],
																	"sid": 364953540658440
																}
															]
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "else",
																	"objectClass": "System",
																	"sid": 402232361581370
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "\"I have insufficient gold\" - we possibly could include this in the transaction function"
																}
															],
															"sid": 894028079555078
														}
													]
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 271667908446741
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "\"I can't carry any more\" or \"I have no room for this purchase\""
														}
													],
													"sid": 643614221231479
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 972375055810035
												},
												{
													"id": "is-on-layer",
													"objectClass": "item",
													"sid": 326718653324686,
													"parameters": {
														"layer": "inventoryMenuStatue.LayerName"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "...and the item is in the in the inventory menu...\nThis else is necessary so that only one thing happens to the item per right click."
												}
											],
											"sid": 464545087234551,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-on-layer",
															"objectClass": "slot",
															"sid": 273213334054707,
															"parameters": {
																"layer": "merchantMenuStatue.LayerName"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "pick the slots on the merchant menu"
														}
													],
													"sid": 395523626453058,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-instance-variable",
																	"objectClass": "slot",
																	"sid": 185416270970694,
																	"parameters": {
																		"instance-variable": "identifier",
																		"comparison": 0,
																		"value": "0"
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "pick the empty slots"
																}
															],
															"sid": 123784696618458,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "pick-all",
																			"objectClass": "System",
																			"sid": 882135933696076,
																			"parameters": {
																				"object": "slot"
																			}
																		},
																		{
																			"id": "compare-instance-variable",
																			"objectClass": "slot",
																			"sid": 973313787830797,
																			"parameters": {
																				"instance-variable": "identifier",
																				"comparison": 0,
																				"value": "item.identifier"
																			}
																		}
																	],
																	"actions": [
																		{
																			"type": "comment",
																			"text": "now that we know there's an empty merchant menu slot for this item, go back to the inventory menu slot holding our item, and detach"
																		},
																		{
																			"callFunction": "detachItem",
																			"sid": 491360834332678
																		}
																	],
																	"sid": 574364136361459
																},
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "pick-all",
																			"objectClass": "System",
																			"sid": 574433549571399,
																			"parameters": {
																				"object": "slot"
																			}
																		},
																		{
																			"id": "is-on-layer",
																			"objectClass": "slot",
																			"sid": 453776050558308,
																			"parameters": {
																				"layer": "merchantMenuStatue.LayerName"
																			}
																		},
																		{
																			"id": "compare-instance-variable",
																			"objectClass": "slot",
																			"sid": 402308270095072,
																			"parameters": {
																				"instance-variable": "identifier",
																				"comparison": 0,
																				"value": "0"
																			}
																		},
																		{
																			"id": "pick-nth-instance",
																			"objectClass": "System",
																			"sid": 870824738355914,
																			"parameters": {
																				"object": "slot",
																				"instance": "0"
																			}
																		}
																	],
																	"actions": [
																		{
																			"type": "comment",
																			"text": "re-pick the first empty merchant menu slot that matches the item's type, and attach to it, and TODO: give the player money for the item they just sold"
																		},
																		{
																			"callFunction": "attachItem",
																			"sid": 469748168894396
																		},
																		{
																			"id": "add-to-instvar",
																			"objectClass": "player",
																			"sid": 220199546620661,
																			"parameters": {
																				"instance-variable": "coins",
																				"value": "item.value"
																			}
																		}
																	],
																	"sid": 278144136058467
																}
															]
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "else",
																	"objectClass": "System",
																	"sid": 764775576450374
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "if there's no empty slots on the merchant menu, the merchant plays the dialog line \"I have no more room to purchase items\""
																}
															],
															"sid": 374919461999711
														}
													]
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 815553133475659
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "\"I don't meet the requirements for this item\""
														}
													],
													"sid": 103414643103367
												}
											]
										}
									]
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-drag-start",
									"objectClass": "item",
									"sid": 171542721559928,
									"behaviorType": "DragDrop"
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "slot",
									"sid": 660907865564922,
									"parameters": {
										"instance-variable": "identifier",
										"comparison": 0,
										"value": "item.identifier"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "when an item starts being dragged, record where it came from, set dragging to true, and detach it"
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 886968429260276,
									"parameters": {
										"variable": "draggedOriginSlotUid",
										"value": "slot.UID"
									}
								},
								{
									"callFunction": "detachItem",
									"sid": 266807440365284
								},
								{
									"type": "comment",
									"text": "This ensures whatever is being dragged is always on top"
								},
								{
									"id": "move-to-layer",
									"objectClass": "item",
									"sid": 988977807503661,
									"parameters": {
										"layer": "\"overlay\""
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "item",
									"sid": 408939210599875,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "Self.UID & \" opacity tween\"",
										"property": "offsetOpacity",
										"end-value": "70",
										"time": "LAYOUT_FADE_TIME",
										"ease": "noease",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 827535395163321
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-drop",
									"objectClass": "item",
									"sid": 940330704376401,
									"behaviorType": "DragDrop"
								}
							],
							"actions": [
								{
									"id": "tween-one-property",
									"objectClass": "item",
									"sid": 709919241960901,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "Self.UID & \" opacity tween\"",
										"property": "offsetOpacity",
										"end-value": "100",
										"time": "MENU_FADE_TIME",
										"ease": "noease",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 399701785813219,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "cursor-is-over-object",
											"objectClass": "mouse",
											"sid": 940744174099667,
											"parameters": {
												"object": "slot"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if the item was dropped over a slot..."
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 596354897933685,
											"parameters": {
												"variable": "droppedOnSlotUid",
												"value": "slot.UID"
											}
										}
									],
									"sid": 975172186095144,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 653827654958201,
													"parameters": {
														"first-value": "Functions.canThisItemGoIntoThisSlot",
														"comparison": 0,
														"second-value": "1"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "and that slot's type was none, or it's the same as the item's type, and the player meets all the requirements to equip it..."
												}
											],
											"sid": 109270735818354,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-on-layer",
															"objectClass": "slot",
															"sid": 688397402341653,
															"parameters": {
																"layer": "merchantMenuStatue.LayerName"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "if the slot that was dropped over is on the merchant menu..."
														}
													],
													"sid": 658673599562839,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-instance-variable",
																	"objectClass": "slot",
																	"sid": 180794855633957,
																	"parameters": {
																		"instance-variable": "identifier",
																		"comparison": 0,
																		"value": "0"
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "...and it's empty, put the item there..."
																},
																{
																	"callFunction": "attachItem",
																	"sid": 599867682290781
																}
															],
															"sid": 742996182313594,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "pick-all",
																			"objectClass": "System",
																			"sid": 329422040405669,
																			"parameters": {
																				"object": "slot"
																			}
																		},
																		{
																			"id": "pick-by-unique-id",
																			"objectClass": "slot",
																			"sid": 380561836624216,
																			"parameters": {
																				"unique-id": "draggedOriginSlotUid"
																			}
																		},
																		{
																			"id": "is-on-layer",
																			"objectClass": "slot",
																			"sid": 139247012700056,
																			"parameters": {
																				"layer": "merchantMenuStatue.LayerName"
																			},
																			"isInverted": true
																		}
																	],
																	"actions": [
																		{
																			"type": "comment",
																			"text": "and give the player the appropriate amount of coins if the item didn't originally also come from the merchant menu"
																		},
																		{
																			"id": "add-to-instvar",
																			"objectClass": "player",
																			"sid": 837791978400585,
																			"parameters": {
																				"instance-variable": "coins",
																				"value": "item.value"
																			}
																		}
																	],
																	"sid": 711415580749517
																}
															]
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "else",
																	"objectClass": "System",
																	"sid": 228069300484542
																},
																{
																	"id": "compare-instance-variable",
																	"objectClass": "slot",
																	"sid": 380955082769886,
																	"parameters": {
																		"instance-variable": "identifier",
																		"comparison": 1,
																		"value": "0"
																	}
																}
															],
															"actions": [
																{
																	"callFunction": "returnItem",
																	"sid": 657989560447870
																},
																{
																	"type": "comment",
																	"text": "...and it's not empty. send the item back. We don't swap items from the merchant menu."
																}
															],
															"sid": 199153147600887
														}
													]
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 569988289496927
														},
														{
															"id": "pick-all",
															"objectClass": "System",
															"sid": 226638190597145,
															"parameters": {
																"object": "slot"
															}
														},
														{
															"id": "pick-by-unique-id",
															"objectClass": "slot",
															"sid": 557132173559795,
															"parameters": {
																"unique-id": "draggedOriginSlotUid"
															}
														},
														{
															"id": "is-on-layer",
															"objectClass": "slot",
															"sid": 234984840404105,
															"parameters": {
																"layer": "merchantMenuStatue.LayerName"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "if the item that was dropped came from the merchant menu..."
														}
													],
													"sid": 285398140168474,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "pick-all",
																	"objectClass": "System",
																	"sid": 575172335793380,
																	"parameters": {
																		"object": "slot"
																	}
																},
																{
																	"id": "pick-by-unique-id",
																	"objectClass": "slot",
																	"sid": 451809780090832,
																	"parameters": {
																		"unique-id": "droppedOnSlotUid"
																	}
																},
																{
																	"id": "compare-instance-variable",
																	"objectClass": "slot",
																	"sid": 476129399617223,
																	"parameters": {
																		"instance-variable": "identifier",
																		"comparison": 0,
																		"value": "0"
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "...and it was dropped an an empty slot..."
																}
															],
															"sid": 549102013202866,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "compare-instance-variable",
																			"objectClass": "item",
																			"sid": 941630635583079,
																			"parameters": {
																				"instance-variable": "value",
																				"comparison": 3,
																				"value": "player.coins"
																			}
																		}
																	],
																	"actions": [
																		{
																			"type": "comment",
																			"text": "charge the player for the item and give it to them, provided they have enough coins"
																		},
																		{
																			"callFunction": "attachItem",
																			"sid": 253809529660030
																		},
																		{
																			"id": "subtract-from-instvar",
																			"objectClass": "player",
																			"sid": 128779680962990,
																			"parameters": {
																				"instance-variable": "coins",
																				"value": "item.value"
																			}
																		}
																	],
																	"sid": 745206024162352
																},
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "else",
																			"objectClass": "System",
																			"sid": 525823638673718
																		}
																	],
																	"actions": [
																		{
																			"type": "comment",
																			"text": "\"I don't have enough coins for this purchase\""
																		}
																	],
																	"sid": 770628791762358
																}
															]
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "else",
																	"objectClass": "System",
																	"sid": 779522646713748
																},
																{
																	"id": "pick-all",
																	"objectClass": "System",
																	"sid": 534191303572532,
																	"parameters": {
																		"object": "slot"
																	}
																},
																{
																	"id": "pick-by-unique-id",
																	"objectClass": "slot",
																	"sid": 899811999325995,
																	"parameters": {
																		"unique-id": "droppedOnSlotUid"
																	}
																},
																{
																	"id": "compare-instance-variable",
																	"objectClass": "slot",
																	"sid": 763220475970033,
																	"parameters": {
																		"instance-variable": "identifier",
																		"comparison": 1,
																		"value": "0"
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "...and it was dropped on a slot that wasn't empty, return it. No swapping from the merchant menu."
																},
																{
																	"callFunction": "returnItem",
																	"sid": 737496615976106
																}
															],
															"sid": 784485727885849
														}
													]
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 444701618560179
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "only allow drag and drop swapping when neither the origin or destination slot are on the merchant menu"
														}
													],
													"sid": 800442567316545,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-instance-variable",
																	"objectClass": "slot",
																	"sid": 673896809220318,
																	"parameters": {
																		"instance-variable": "identifier",
																		"comparison": 0,
																		"value": "0"
																	}
																}
															],
															"actions": [
																{
																	"callFunction": "attachItem",
																	"sid": 876885722662709
																}
															],
															"sid": 256926424981849
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "else",
																	"objectClass": "System",
																	"sid": 965803415258555
																},
																{
																	"id": "compare-instance-variable",
																	"objectClass": "slot",
																	"sid": 960652851844416,
																	"parameters": {
																		"instance-variable": "identifier",
																		"comparison": 1,
																		"value": "0"
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "and that slot is not empty, save its identifier (which is also its item's identifier) so we can overwrite it"
																},
																{
																	"id": "set-eventvar-value",
																	"objectClass": "System",
																	"sid": 711223640044608,
																	"parameters": {
																		"variable": "swapIdentifier",
																		"value": "slot.identifier"
																	}
																},
																{
																	"id": "set-eventvar-value",
																	"objectClass": "System",
																	"sid": 938359797690223,
																	"parameters": {
																		"variable": "draggedItemUid",
																		"value": "item.UID"
																	}
																}
															],
															"sid": 538398876781851,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "pick-all",
																			"objectClass": "System",
																			"sid": 871040984737131,
																			"parameters": {
																				"object": "item"
																			}
																		},
																		{
																			"id": "compare-instance-variable",
																			"objectClass": "item",
																			"sid": 596248838749628,
																			"parameters": {
																				"instance-variable": "identifier",
																				"comparison": 0,
																				"value": "swapIdentifier"
																			}
																		},
																		{
																			"id": "pick-all",
																			"objectClass": "System",
																			"sid": 615199949178196,
																			"parameters": {
																				"object": "slot"
																			}
																		},
																		{
																			"id": "pick-by-unique-id",
																			"objectClass": "slot",
																			"sid": 435196364225877,
																			"parameters": {
																				"unique-id": "draggedOriginSlotUID"
																			}
																		},
																		{
																			"id": "evaluate-expression",
																			"objectClass": "System",
																			"sid": 638525709696283,
																			"parameters": {
																				"value": "slot.type = item.type | slot.type = NONE_KEYWORD"
																			}
																		}
																	],
																	"actions": [
																		{
																			"type": "comment",
																			"text": "check if the item can go back to the origin slot"
																		}
																	],
																	"sid": 125981301750550,
																	"children": [
																		{
																			"eventType": "block",
																			"conditions": [
																				{
																					"id": "pick-all",
																					"objectClass": "System",
																					"sid": 923964156028970,
																					"parameters": {
																						"object": "item"
																					}
																				},
																				{
																					"id": "pick-by-unique-id",
																					"objectClass": "item",
																					"sid": 982419229705179,
																					"parameters": {
																						"unique-id": "draggedItemUid"
																					}
																				},
																				{
																					"id": "pick-all",
																					"objectClass": "System",
																					"sid": 481784894716348,
																					"parameters": {
																						"object": "slot"
																					}
																				},
																				{
																					"id": "pick-by-unique-id",
																					"objectClass": "slot",
																					"sid": 864542111705744,
																					"parameters": {
																						"unique-id": "droppedOnSlotUid"
																					}
																				}
																			],
																			"actions": [
																				{
																					"type": "comment",
																					"text": "if it can, re-pick the item being dragged, and the slot we dropped it on, and attach them"
																				},
																				{
																					"callFunction": "attachItem",
																					"sid": 109330069133877
																				}
																			],
																			"sid": 956003647143740,
																			"children": [
																				{
																					"eventType": "block",
																					"conditions": [
																						{
																							"id": "pick-all",
																							"objectClass": "System",
																							"sid": 782601427504381,
																							"parameters": {
																								"object": "item"
																							}
																						},
																						{
																							"id": "compare-instance-variable",
																							"objectClass": "item",
																							"sid": 891620420442663,
																							"parameters": {
																								"instance-variable": "identifier",
																								"comparison": 0,
																								"value": "swapIdentifier"
																							}
																						},
																						{
																							"id": "pick-all",
																							"objectClass": "System",
																							"sid": 871716533242601,
																							"parameters": {
																								"object": "slot"
																							}
																						},
																						{
																							"id": "pick-by-unique-id",
																							"objectClass": "slot",
																							"sid": 470434966871125,
																							"parameters": {
																								"unique-id": "draggedOriginSlotUid"
																							}
																						}
																					],
																					"actions": [
																						{
																							"type": "comment",
																							"text": "now pick and detach the overlapped item that shouldn't be there (but the slot's identifier is OK), and pick the origin slot, and attach the two"
																						},
																						{
																							"id": "remove-from-parent",
																							"objectClass": "item",
																							"sid": 716732211753505
																						},
																						{
																							"callFunction": "manageMods",
																							"sid": 906665275106208,
																							"parameters": [
																								false
																							]
																						},
																						{
																							"callFunction": "attachItem",
																							"sid": 914241056139398
																						}
																					],
																					"sid": 709309740092848
																				}
																			]
																		}
																	]
																},
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "else",
																			"objectClass": "System",
																			"sid": 254573820810304
																		},
																		{
																			"id": "pick-all",
																			"objectClass": "System",
																			"sid": 388487288238395,
																			"parameters": {
																				"object": "slot"
																			}
																		},
																		{
																			"id": "pick-by-unique-id",
																			"objectClass": "slot",
																			"sid": 449302265931478,
																			"parameters": {
																				"unique-id": "draggedOriginSlotUid"
																			}
																		}
																	],
																	"actions": [
																		{
																			"type": "comment",
																			"text": "if it can't, don't swap, and send the item being dragged back to the origin slot"
																		},
																		{
																			"callFunction": "attachItem",
																			"sid": 502563268648869
																		}
																	],
																	"sid": 298617583833361
																}
															]
														}
													]
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 839852839292939
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "send the item back to the slot it came from"
												},
												{
													"callFunction": "returnItem",
													"sid": 867884544509701
												}
											],
											"sid": 771584118890591
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 819452010239969
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Can't have an else condition in an OR block"
										}
									],
									"sid": 589012115814521,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "cursor-is-over-object",
													"objectClass": "mouse",
													"sid": 143217342965722,
													"parameters": {
														"object": "invalidLocation"
													}
												},
												{
													"id": "cursor-is-over-object",
													"objectClass": "mouse",
													"sid": 283074474173400,
													"parameters": {
														"object": "prop"
													}
												},
												{
													"id": "cursor-is-over-object",
													"objectClass": "mouse",
													"sid": 609127198070053,
													"parameters": {
														"object": "9PatchInvalidLocations"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "if the item was dropped on an invalid location, send the item back to the slot it came from"
												},
												{
													"callFunction": "returnItem",
													"sid": 662644883081418
												}
											],
											"sid": 730960747189332,
											"isOrBlock": true
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 692673207200540
												},
												{
													"id": "cursor-is-over-object",
													"objectClass": "mouse",
													"sid": 164393393233569,
													"parameters": {
														"object": "background"
													}
												},
												{
													"id": "pick-all",
													"objectClass": "System",
													"sid": 164190723268839,
													"parameters": {
														"object": "slot"
													}
												},
												{
													"id": "pick-by-unique-id",
													"objectClass": "slot",
													"sid": 606953233684230,
													"parameters": {
														"unique-id": "draggedOriginSlotUID"
													}
												},
												{
													"id": "is-on-layer",
													"objectClass": "slot",
													"sid": 789640874482342,
													"parameters": {
														"layer": "merchantMenuStatue.LayerName"
													},
													"isInverted": true
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "if the item is dropped over the background, and it didn't come from the merchant menu, turn it into loot."
												},
												{
													"id": "create-object-by-name",
													"objectClass": "System",
													"sid": 530528793366786,
													"parameters": {
														"object-name": "item.simpleName & \"_loot\"",
														"layer": "\"background\"",
														"x": "mouse.X",
														"y": "mouse.Y",
														"create-hierarchy": false,
														"template-name": "\"\""
													}
												}
											],
											"sid": 131335017684878,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-last-created",
															"objectClass": "System",
															"sid": 401210540621586,
															"parameters": {
																"object": "loot"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "transfer data from item to loot, then destroy the item"
														},
														{
															"id": "set-animation",
															"objectClass": "loot",
															"sid": 455412466954669,
															"parameters": {
																"animation": "\"static_\" & (floor(random(1, 17)) * ARC) - HALF_CIRCLE",
																"from": "beginning"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "loot",
															"sid": 436549342660758,
															"parameters": {
																"instance-variable": "identifier",
																"value": "item.identifier"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "loot",
															"sid": 940214577653810,
															"parameters": {
																"instance-variable": "simpleName",
																"value": "item.simpleName"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "loot",
															"sid": 609318629333019,
															"parameters": {
																"instance-variable": "fullName",
																"value": "item.fullName"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "loot",
															"sid": 477524337490032,
															"parameters": {
																"instance-variable": "value",
																"value": "item.value"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "loot",
															"sid": 706705149091083,
															"parameters": {
																"instance-variable": "type",
																"value": "item.type"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "loot",
															"sid": 527832429101211,
															"parameters": {
																"instance-variable": "lore",
																"value": "item.lore"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "loot",
															"sid": 624606486964256,
															"parameters": {
																"instance-variable": "level",
																"value": "item.level"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "loot",
															"sid": 990786707769387,
															"parameters": {
																"instance-variable": "mods",
																"value": "item.mods"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "loot",
															"sid": 222537070982038,
															"parameters": {
																"instance-variable": "classRestrictions",
																"value": "item.classRestrictions"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "loot",
															"sid": 372579724498442,
															"parameters": {
																"instance-variable": "modTable",
																"value": "item.modTable"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "loot",
															"sid": 651883566374374,
															"parameters": {
																"instance-variable": "sound",
																"value": "item.sound"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "loot",
															"sid": 240008030508494,
															"parameters": {
																"instance-variable": "verticalHeight",
																"value": "0"
															}
														},
														{
															"id": "destroy",
															"objectClass": "item",
															"sid": 994504075540251
														}
													],
													"sid": 134994942053203
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-tag-playing",
															"objectClass": "Audio",
															"sid": 660562335418045,
															"parameters": {
																"tag": "loot.sound & \"_drop\""
															},
															"isInverted": true
														}
													],
													"actions": [
														{
															"id": "play-at-object-by-name",
															"objectClass": "Audio",
															"sid": 592701064279149,
															"parameters": {
																"folder": "sounds",
																"audio-file-name": "loot.sound & \"_drop\" & round(random(1))",
																"loop": "not-looping",
																"volume": "0",
																"object": "loot",
																"inner-angle": "360",
																"outer-angle": "360",
																"outer-gain": "0",
																"tag-optional": "\"\""
															}
														}
													],
													"sid": 813480458593952
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 298877847229759
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "Prevent items from being dropped outside the game window."
												},
												{
													"callFunction": "returnItem",
													"sid": 364509381859564
												}
											],
											"sid": 327474167530248
										}
									]
								}
							]
						},
						{
							"functionName": "canThisItemGoIntoThisSlot",
							"functionDescription": "Determine whether a specified item can go into a specified slot. Returns 1 for true and 0 for false.",
							"functionCategory": "equipment",
							"functionReturnType": "number",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-function-return-value",
									"objectClass": "Functions",
									"sid": 459864711907091,
									"parameters": {
										"value": "0"
									}
								}
							],
							"sid": 890908719073071,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "slot",
											"sid": 677432910697048,
											"parameters": {
												"instance-variable": "type",
												"comparison": 0,
												"value": "NONE_KEYWORD"
											}
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 561754982621973,
											"parameters": {
												"value": "item.level <= player.level & slot.type = item.type & (Functions.contains(item.classRestrictions, ALL_CLASSES_KEYWORD) | Functions.contains(item.classRestrictions, body.ObjectTypeName))"
											}
										}
									],
									"actions": [
										{
											"id": "set-function-return-value",
											"objectClass": "Functions",
											"sid": 758990715165183,
											"parameters": {
												"value": "1"
											}
										}
									],
									"sid": 382330715404624,
									"isOrBlock": true
								}
							]
						},
						{
							"functionName": "returnItem",
							"functionDescription": "Send a dragged item back to the slot from which it came.",
							"functionCategory": "equipment",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [
								{
									"id": "pick-all",
									"objectClass": "System",
									"sid": 187101144035540,
									"parameters": {
										"object": "slot"
									}
								},
								{
									"id": "pick-by-unique-id",
									"objectClass": "slot",
									"sid": 607616016334312,
									"parameters": {
										"unique-id": "draggedOriginSlotUID"
									}
								}
							],
							"actions": [
								{
									"callFunction": "attachItem",
									"sid": 796892767703320
								}
							],
							"sid": 785533791417044
						},
						{
							"functionName": "attachItem",
							"functionDescription": "attaches an item to a slot",
							"functionCategory": "equipment",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-position-to-another-object",
									"objectClass": "item",
									"sid": 888715407713644,
									"parameters": {
										"object": "slot",
										"image-point-optional": "0"
									}
								},
								{
									"id": "move-to-layer",
									"objectClass": "item",
									"sid": 282712149404009,
									"parameters": {
										"layer": "slot.LayerName"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "slot",
									"sid": 815964194354236,
									"parameters": {
										"instance-variable": "identifier",
										"value": "item.identifier"
									}
								},
								{
									"id": "add-child",
									"objectClass": "slot",
									"sid": 829487362594103,
									"parameters": {
										"child": "item",
										"transform-x": true,
										"transform-y": true,
										"transform-w": false,
										"transform-h": false,
										"transform-a": false,
										"transform-o": false,
										"transform-z-elevation": false,
										"transform-visibility": false,
										"destroy-with-parent": true
									}
								}
							],
							"sid": 437730535233655,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-overlapping-point",
											"objectClass": "System",
											"sid": 746031527290853,
											"parameters": {
												"object": "placeholder",
												"x": "item.X",
												"y": "item.Y"
											}
										}
									],
									"actions": [
										{
											"id": "set-visible",
											"objectClass": "placeholder",
											"sid": 253648163462631,
											"parameters": {
												"visibility": "invisible"
											}
										}
									],
									"sid": 109730520509292
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-on-layer",
											"objectClass": "slot",
											"sid": 574448825085483,
											"parameters": {
												"layer": "equippedMenuStatue.LayerName"
											}
										}
									],
									"actions": [
										{
											"callFunction": "queueGearManagement",
											"sid": 419629290552279,
											"parameters": [
												true
											]
										}
									],
									"sid": 150732631465097
								}
							]
						},
						{
							"functionName": "detachItem",
							"functionDescription": "detaches an item from a slot",
							"functionCategory": "equipment",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "slot",
									"sid": 988043997215968,
									"parameters": {
										"instance-variable": "identifier",
										"value": "0"
									}
								},
								{
									"id": "remove-from-parent",
									"objectClass": "item",
									"sid": 580210031479108
								}
							],
							"sid": 312257914941975,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-overlapping-point",
											"objectClass": "System",
											"sid": 553031951461940,
											"parameters": {
												"object": "placeholder",
												"x": "item.X",
												"y": "item.Y"
											}
										}
									],
									"actions": [
										{
											"id": "set-visible",
											"objectClass": "placeholder",
											"sid": 857116200654787,
											"parameters": {
												"visibility": "visible"
											}
										}
									],
									"sid": 417652766240155
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-on-layer",
											"objectClass": "slot",
											"sid": 339780433114922,
											"parameters": {
												"layer": "equippedMenuStatue.LayerName"
											}
										}
									],
									"actions": [
										{
											"callFunction": "queueGearManagement",
											"sid": 685089990900130,
											"parameters": [
												false
											]
										}
									],
									"sid": 425680196320642
								}
							]
						}
					],
					"sid": 645635025486599
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "gear",
					"description": "Warning: Using variables and functions to clean up these events leads to bizarre timing issues that are hard to troubleshoot.",
					"isActiveOnStart": true,
					"children": [
						{
							"functionName": "queueGearManagement",
							"functionDescription": "Add a request to manage gear to the queue",
							"functionCategory": "equipment",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "active",
									"type": "boolean",
									"initialValue": "true",
									"comment": "",
									"sid": 653983944416797
								}
							],
							"eventType": "function-block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 661364819095502,
									"parameters": {
										"value": "slot.type <> \"neck\" | slot.type <> \"ring\""
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "as long as the slot's type is not neck or ring..."
								},
								{
									"id": "push",
									"objectClass": "gearQueueArray",
									"sid": 356911054804939,
									"parameters": {
										"where": "front",
										"value": "slot.UID",
										"axis": "x"
									}
								}
							],
							"sid": 819431238558145,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 179204186824764,
											"parameters": {
												"variable": "active"
											}
										}
									],
									"actions": [
										{
											"callFunction": "manageMods",
											"sid": 132606893568216,
											"parameters": [
												true
											]
										}
									],
									"sid": 847732328432390
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 197187788371514
										}
									],
									"actions": [
										{
											"callFunction": "manageMods",
											"sid": 983577034004282,
											"parameters": [
												false
											]
										}
									],
									"sid": 761629228050916
								}
							]
						},
						{
							"eventType": "variable",
							"name": "allowGearManagement",
							"type": "boolean",
							"initialValue": "true",
							"comment": "Whether or not the below events are currently running.",
							"isStatic": true,
							"isConstant": false,
							"sid": 925621554027701
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 820556575473557,
									"parameters": {
										"object": "slot",
										"expression": "gearQueueArray.Back",
										"comparison": 0,
										"value": "slot.UID"
									}
								},
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 732243934327391,
									"parameters": {
										"variable": "allowGearManagement"
									}
								}
							],
							"actions": [
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 578216793122315,
									"parameters": {
										"variable": "allowGearManagement",
										"value": "false"
									}
								},
								{
									"id": "pop",
									"objectClass": "gearQueueArray",
									"sid": 810792965075179,
									"parameters": {
										"where": "back",
										"axis": "x"
									}
								}
							],
							"sid": 701337323720421,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 762550168577106,
											"parameters": {
												"object": "item",
												"expression": "item.identifier",
												"comparison": 0,
												"value": "slot.identifier"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if there's an item in this slot, spawn its gear"
										},
										{
											"id": "load-object-images-by-name",
											"objectClass": "System",
											"sid": 794676870111503,
											"parameters": {
												"object": "body.ObjectTypeName & \"_\" & item.simpleName & \"_gear\""
											}
										},
										{
											"id": "wait-for-previous-actions",
											"objectClass": "System",
											"sid": 133325860735263
										},
										{
											"id": "create-object-by-name",
											"objectClass": "System",
											"sid": 160314852164560,
											"parameters": {
												"object-name": "body.ObjectTypeName & \"_\" & item.simpleName & \"_gear\"",
												"layer": "\"main\"",
												"x": "player.X",
												"y": "player.Y",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										}
									],
									"sid": 546677173220756,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-last-created",
													"objectClass": "System",
													"sid": 417520329182408,
													"parameters": {
														"object": "gear"
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "gear",
													"sid": 758489405623660,
													"parameters": {
														"instance-variable": "type",
														"value": "slot.type"
													}
												},
												{
													"id": "add-child",
													"objectClass": "body",
													"sid": 514856245612226,
													"parameters": {
														"child": "gear",
														"transform-x": true,
														"transform-y": true,
														"transform-w": false,
														"transform-h": false,
														"transform-a": true,
														"transform-o": true,
														"transform-z-elevation": true,
														"transform-visibility": true,
														"destroy-with-parent": true
													}
												}
											],
											"sid": 232582795396905
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-tag-playing",
													"objectClass": "Audio",
													"sid": 556741492740266,
													"parameters": {
														"tag": "item.ObjectTypeName & \" \" & item.UID & \" equip sound\""
													},
													"isInverted": true
												}
											],
											"actions": [
												{
													"id": "play-at-object-by-name",
													"objectClass": "Audio",
													"sid": 805348509726415,
													"parameters": {
														"folder": "sounds",
														"audio-file-name": "item.sound & \"_equip\" & round(random(1))",
														"loop": "not-looping",
														"volume": "0",
														"object": "player",
														"inner-angle": "360",
														"outer-angle": "360",
														"outer-gain": "0",
														"tag-optional": "\"\""
													}
												}
											],
											"sid": 353334637416312
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 438566182346342,
													"parameters": {
														"object": "gear",
														"expression": "slot.type",
														"comparison": 0,
														"value": "gear.type"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "This won't destroy the gear that was just created. Only gear(s) that pertained to this slot beforehand get destroyed."
												},
												{
													"id": "destroy",
													"objectClass": "gear",
													"sid": 490579754262484
												},
												{
													"id": "wait",
													"objectClass": "System",
													"sid": 623014151542829,
													"parameters": {
														"seconds": "0"
													}
												},
												{
													"id": "wait-for-previous-actions",
													"objectClass": "System",
													"sid": 565925561607643
												},
												{
													"id": "unload-object-images",
													"objectClass": "System",
													"sid": 293283187130566,
													"parameters": {
														"object": "gear"
													}
												},
												{
													"id": "set-boolean-eventvar",
													"objectClass": "System",
													"sid": 960151300312722,
													"parameters": {
														"variable": "allowGearManagement",
														"value": "true"
													}
												}
											],
											"sid": 327547775356116
										},
										{
											"eventType": "comment",
											"text": "We are playing the equip noise for the item that just got equipped right now, so we don't need to play an unequip noise."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 631498319308368
												}
											],
											"actions": [
												{
													"id": "set-boolean-eventvar",
													"objectClass": "System",
													"sid": 424095786786034,
													"parameters": {
														"variable": "allowGearManagement",
														"value": "true"
													}
												}
											],
											"sid": 291917537478887
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 784638280342671
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "If there's no item in this slot..."
										}
									],
									"sid": 989859722530036,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 569714206068831,
													"parameters": {
														"value": "(slot.type = \"chest\" & body.ObjectTypeName <> \"man\") | slot.type = \"legs\" | slot.type = \"head\""
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "...and the slot is legs or head, or chest and not a man, (the slots that have default gear), load the default gear"
												},
												{
													"id": "load-object-images-by-name",
													"objectClass": "System",
													"sid": 199714343318785,
													"parameters": {
														"object": "body.ObjectTypeName & \"_\" & slot.type & \"Default_gear\""
													}
												},
												{
													"id": "wait-for-previous-actions",
													"objectClass": "System",
													"sid": 417345207782363
												},
												{
													"id": "create-object-by-name",
													"objectClass": "System",
													"sid": 511701545225016,
													"parameters": {
														"object-name": "body.ObjectTypeName & \"_\" & slot.type & \"Default_gear\"",
														"layer": "\"main\"",
														"x": "player.X",
														"y": "player.Y",
														"create-hierarchy": false,
														"template-name": "\"\""
													}
												}
											],
											"sid": 749400924663849,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-last-created",
															"objectClass": "System",
															"sid": 949815511554775,
															"parameters": {
																"object": "gear"
															}
														}
													],
													"actions": [
														{
															"id": "set-instvar-value",
															"objectClass": "gear",
															"sid": 928945733462840,
															"parameters": {
																"instance-variable": "type",
																"value": "slot.type"
															}
														},
														{
															"id": "add-child",
															"objectClass": "body",
															"sid": 470891141814071,
															"parameters": {
																"child": "gear",
																"transform-x": true,
																"transform-y": true,
																"transform-w": false,
																"transform-h": false,
																"transform-a": true,
																"transform-o": true,
																"transform-z-elevation": true,
																"transform-visibility": true,
																"destroy-with-parent": true
															}
														}
													],
													"sid": 883709877144829
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-by-comparison",
															"objectClass": "System",
															"sid": 987182229147591,
															"parameters": {
																"object": "gear",
																"expression": "slot.type",
																"comparison": 0,
																"value": "gear.type"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "...destroy the (non-default) gear that was affiliated with this slot. This won't destroy the default gear that was just created."
														}
													],
													"sid": 622605866580318,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "is-tag-playing",
																	"objectClass": "Audio",
																	"sid": 939629008248107,
																	"parameters": {
																		"tag": "\"unequip\""
																	},
																	"isInverted": true
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "weird positioning because we only want the unequip audio to play if it isn't playing already, and only if non-default gear is getting destroyed, but we don't need to wait until it's unloaded from memory to play this."
																},
																{
																	"id": "play-at-object-by-name",
																	"objectClass": "Audio",
																	"sid": 720818633523058,
																	"parameters": {
																		"folder": "sounds",
																		"audio-file-name": "\"unequip\" & round(random(1))",
																		"loop": "not-looping",
																		"volume": "0",
																		"object": "player",
																		"inner-angle": "360",
																		"outer-angle": "360",
																		"outer-gain": "0",
																		"tag-optional": "\"\""
																	}
																}
															],
															"sid": 477457434428723
														},
														{
															"eventType": "block",
															"conditions": [],
															"actions": [
																{
																	"id": "destroy",
																	"objectClass": "gear",
																	"sid": 731770334202317
																},
																{
																	"id": "wait",
																	"objectClass": "System",
																	"sid": 529179038582809,
																	"parameters": {
																		"seconds": "0"
																	}
																},
																{
																	"id": "wait-for-previous-actions",
																	"objectClass": "System",
																	"sid": 725515237960752
																},
																{
																	"id": "unload-object-images",
																	"objectClass": "System",
																	"sid": 332528951421909,
																	"parameters": {
																		"object": "gear"
																	}
																},
																{
																	"id": "set-boolean-eventvar",
																	"objectClass": "System",
																	"sid": 504434520995583,
																	"parameters": {
																		"variable": "allowGearManagement",
																		"value": "true"
																	}
																}
															],
															"sid": 571661860624005
														}
													]
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 271838665518264
												},
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 953224413768724,
													"parameters": {
														"object": "gear",
														"expression": "slot.type",
														"comparison": 0,
														"value": "gear.type"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "If there's no default gear for this slot, just destroy the gear and then we're done"
												}
											],
											"sid": 549938953636278,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-tag-playing",
															"objectClass": "Audio",
															"sid": 411085929005082,
															"parameters": {
																"tag": "\"unequip\""
															},
															"isInverted": true
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "weird positioning because we only want the unequip audio to play if it isn't playing already, and only if non-default gear is getting destroyed, but we don't need to wait until it's unloaded from memory to play this."
														},
														{
															"id": "play-at-object-by-name",
															"objectClass": "Audio",
															"sid": 801817113614994,
															"parameters": {
																"folder": "sounds",
																"audio-file-name": "\"unequip\" & round(random(1))",
																"loop": "not-looping",
																"volume": "0",
																"object": "player",
																"inner-angle": "360",
																"outer-angle": "360",
																"outer-gain": "0",
																"tag-optional": "\"\""
															}
														}
													],
													"sid": 844672912598669
												},
												{
													"eventType": "block",
													"conditions": [],
													"actions": [
														{
															"id": "destroy",
															"objectClass": "gear",
															"sid": 463226392186588
														},
														{
															"id": "wait",
															"objectClass": "System",
															"sid": 649315171324961,
															"parameters": {
																"seconds": "0"
															}
														},
														{
															"id": "wait-for-previous-actions",
															"objectClass": "System",
															"sid": 612226921109791
														},
														{
															"id": "unload-object-images",
															"objectClass": "System",
															"sid": 964096055563955,
															"parameters": {
																"object": "gear"
															}
														},
														{
															"id": "set-boolean-eventvar",
															"objectClass": "System",
															"sid": 770412536453276,
															"parameters": {
																"variable": "allowGearManagement",
																"value": "true"
															}
														}
													],
													"sid": 806771972298266
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 752879802731640
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "If there was no gear to destroy, the item was (probably?) unequipped before its gear could load. We don't need to do anything, except allow gear management again."
												},
												{
													"id": "set-boolean-eventvar",
													"objectClass": "System",
													"sid": 790696970643658,
													"parameters": {
														"variable": "allowGearManagement",
														"value": "true"
													}
												}
											],
											"sid": 734496488012300
										}
									]
								}
							]
						}
					],
					"sid": 976456797084060
				}
			],
			"sid": 156017693834822
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "isometry",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"functionName": "isometrify",
					"functionDescription": "Modify a value based on an angle, to make it isometrically correct.",
					"functionCategory": "isometry",
					"functionReturnType": "number",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "value",
							"type": "number",
							"initialValue": "0",
							"comment": "The value, which will be modified by the specified angle.",
							"sid": 686725352825470
						},
						{
							"name": "theAngle",
							"type": "number",
							"initialValue": "0",
							"comment": "The angle, which will be used to modify the specified value.",
							"sid": 539771032584735
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "\"theAngle\" because \"angle\" is a reserved keyword."
						},
						{
							"id": "set-function-return-value",
							"objectClass": "Functions",
							"sid": 384071453991693,
							"parameters": {
								"value": "value * lerp(.5, 1, abs(abs(theAngle) - QUARTER_CIRCLE) / QUARTER_CIRCLE)"
							}
						}
					],
					"sid": 700983687129705
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-on-screen",
							"objectClass": "sortable",
							"sid": 365385957978388
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "This event needs to be above the sorting group to prevent a graphical glitch"
						},
						{
							"id": "set-instvar-value",
							"objectClass": "sortable",
							"sid": 337150276514592,
							"parameters": {
								"instance-variable": "yValue",
								"value": "Self.Y"
							}
						},
						{
							"id": "sort-z-order",
							"objectClass": "System",
							"sid": 480855599480174,
							"parameters": {
								"object": "sortable",
								"instance-variable": {
									"name": "yValue",
									"objectClass": "sortable"
								}
							}
						}
					],
					"sid": 868041002995505
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-on-layer",
							"objectClass": "loot",
							"sid": 209328512396284,
							"parameters": {
								"layer": "\"main\""
							}
						},
						{
							"id": "pick-parent",
							"objectClass": "loot",
							"sid": 830738639695161,
							"parameters": {
								"parent": "prop",
								"which": "own"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "This event must be below the above event, or else the loot will flash when the z order of its parent prop changes."
						},
						{
							"type": "comment",
							"text": "If a piece of loot is on the 'main' layer, it's part of the environment, and needs to be moved in front of whatever it's 'on', i.e., the prop that is its parent."
						},
						{
							"id": "move-to-object",
							"objectClass": "loot",
							"sid": 220340964144110,
							"parameters": {
								"where": "in-front",
								"object": "prop"
							}
						}
					],
					"sid": 489056358912797
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "sorting",
					"description": "Check for edge cases to indicate utilization of a custom sorting order, otherwise use the default.",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-animation-playing",
									"objectClass": "man_simpleSword_gear",
									"sid": 755476965331208,
									"parameters": {
										"animation": "\"idle_157.5\""
									}
								}
							],
							"actions": [
								{
									"id": "move-to-object",
									"objectClass": "offHand",
									"sid": 702532448346007,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "head",
									"sid": 390173758568011,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "chest",
									"sid": 883275433593183,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "mainHand",
									"sid": 564538742535919,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "feet",
									"sid": 788751064850888,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "legs",
									"sid": 942548275877263,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "hands",
									"sid": 445366415603596,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								}
							],
							"sid": 348299811569005
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 503835850935764
								},
								{
									"id": "is-between-values",
									"objectClass": "System",
									"sid": 611856887479244,
									"parameters": {
										"value": "player.degrees",
										"lower-bound": "-67.5",
										"upper-bound": "22.5"
									}
								}
							],
							"actions": [
								{
									"id": "move-to-object",
									"objectClass": "mainHand",
									"sid": 901435269026737,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "offHand",
									"sid": 172207901148276,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "head",
									"sid": 290903160034197,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "chest",
									"sid": 186295098346742,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "feet",
									"sid": 979459098737440,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "legs",
									"sid": 287088795551390,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "hands",
									"sid": 701638109081111,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								}
							],
							"sid": 701987836742656
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 875563291302660
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "The normal sorting order."
								},
								{
									"id": "move-to-object",
									"objectClass": "offHand",
									"sid": 938400889925313,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "head",
									"sid": 988530964135385,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "mainHand",
									"sid": 651222762711156,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "chest",
									"sid": 547581038454800,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "feet",
									"sid": 882564343136704,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "legs",
									"sid": 597937028052401,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "hands",
									"sid": 167383299477802,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								}
							],
							"sid": 603941084953152
						}
					],
					"sid": 621826706568727
				}
			],
			"sid": 937100591006447
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "player",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-created",
							"objectClass": "body",
							"sid": 660773735743926
						}
					],
					"actions": [
						{
							"id": "set-listener-object",
							"objectClass": "Audio",
							"sid": 627457486107616,
							"parameters": {
								"object": "body"
							}
						}
					],
					"sid": 769776263062447
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 812764880148303
						}
					],
					"actions": [
						{
							"callFunction": "restorePlayerControl",
							"sid": 558634662959794
						}
					],
					"sid": 554174106514565,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 450487399342423,
									"parameters": {
										"instance-variable": "relocateToX",
										"comparison": 1,
										"value": "0"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 587975782380855,
									"parameters": {
										"instance-variable": "relocateToY",
										"comparison": 1,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "set-position",
									"objectClass": "player",
									"sid": 286533887026869,
									"parameters": {
										"x": "Self.relocateToX",
										"y": "Self.relocateToY"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "player",
									"sid": 171611774832362,
									"parameters": {
										"instance-variable": "relocateToX",
										"value": "0"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "player",
									"sid": 187586262391599,
									"parameters": {
										"instance-variable": "relocateToY",
										"value": "0"
									}
								}
							],
							"sid": 946818210217819
						}
					]
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "levels",
					"description": "handle the player leveling up",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 802049655454701,
									"parameters": {
										"instance-variable": "experience",
										"comparison": 5,
										"value": "Self.level * 100"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "player",
									"sid": 627464003735100,
									"parameters": {
										"instance-variable": "experience",
										"value": "0"
									}
								},
								{
									"id": "add-to-instvar",
									"objectClass": "player",
									"sid": 338763583582706,
									"parameters": {
										"instance-variable": "level",
										"value": "1"
									}
								}
							],
							"sid": 208608154238341
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-parent",
									"objectClass": "ability",
									"sid": 953424379950288,
									"parameters": {
										"parent": "abilitySlot",
										"which": "own"
									}
								},
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 602434934367432,
									"parameters": {
										"object": "abilitySlot",
										"expression": "abilitySlot.unlockLevel",
										"comparison": 0,
										"value": "player.level"
									}
								},
								{
									"id": "pick-children",
									"objectClass": "abilitySlot",
									"sid": 424632925588933,
									"parameters": {
										"child": "ability",
										"which": "own"
									}
								}
							],
							"actions": [],
							"sid": 820140174345689,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "player",
											"sid": 524494304015622,
											"parameters": {
												"instance-variable": "level",
												"comparison": 0,
												"value": "2"
											}
										},
										{
											"id": "trigger-once-while-true",
											"objectClass": "System",
											"sid": 781076181273254
										}
									],
									"actions": [
										{
											"id": "set-animation",
											"objectClass": "ability",
											"sid": 342264984411336,
											"parameters": {
												"animation": "\"heroicStrike\"",
												"from": "beginning"
											}
										}
									],
									"sid": 570054714230054
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "player",
											"sid": 771211897507310,
											"parameters": {
												"instance-variable": "level",
												"comparison": 0,
												"value": "3"
											}
										},
										{
											"id": "trigger-once-while-true",
											"objectClass": "System",
											"sid": 408855644204187
										}
									],
									"actions": [
										{
											"id": "set-animation",
											"objectClass": "ability",
											"sid": 279989319670224,
											"parameters": {
												"animation": "\"kick\"",
												"from": "beginning"
											}
										}
									],
									"sid": 123881620713685
								}
							]
						}
					],
					"sid": 221630090189973
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "camera",
					"description": "",
					"isActiveOnStart": true,
					"children": [],
					"sid": 437386535914416
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "facings",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 226847805408058,
									"parameters": {
										"instance-variable": "currentHealth",
										"comparison": 4,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"callFunction": "updateFacing",
									"sid": 457704822269483,
									"parameters": [
										"-1",
										"-1"
									]
								}
							],
							"sid": 774150289546542
						},
						{
							"functionName": "updateFacing",
							"functionDescription": "Update the facing of the player.",
							"functionCategory": "player",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "x",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"sid": 941295715930551
								},
								{
									"name": "y",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"sid": 915092038699125
								}
							],
							"eventType": "function-block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 942919002777203,
									"parameters": {
										"first-value": "timescale",
										"comparison": 1,
										"second-value": "0"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "this is a function so it can be called in the middle of an ability function"
								}
							],
							"sid": 564814853184454,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 218107748119510,
											"parameters": {
												"variable": "x",
												"comparison": 1,
												"value": "-1"
											}
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 400230555700600,
											"parameters": {
												"variable": "y",
												"comparison": 1,
												"value": "-1"
											}
										}
									],
									"actions": [
										{
											"id": "set-moving-angle",
											"objectClass": "player",
											"sid": 379297991393983,
											"behaviorType": "MoveTo",
											"parameters": {
												"angle": "angle(Self.X, Self.Y, x, y)"
											}
										}
									],
									"sid": 601663005552594
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "player",
											"sid": 537515292230777,
											"parameters": {
												"instance-variable": "degrees",
												"value": "round(Self.MoveTo.MovingAngle / ARC) * ARC"
											}
										}
									],
									"sid": 472815315459873
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "player",
											"sid": 864370576953620,
											"parameters": {
												"instance-variable": "degrees",
												"comparison": 0,
												"value": "-HALF_CIRCLE"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "both -180 and 180 are possible outcomes, so compensate for the one that doesn't have an animation"
										},
										{
											"id": "set-instvar-value",
											"objectClass": "player",
											"sid": 474728216387351,
											"parameters": {
												"instance-variable": "degrees",
												"value": "HALF_CIRCLE"
											}
										}
									],
									"sid": 481218350912265
								}
							]
						}
					],
					"sid": 528071924570554
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "health and mana",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "every-tick",
									"objectClass": "System",
									"sid": 413143904177773
								}
							],
							"actions": [
								{
									"id": "set-height",
									"objectClass": "healthOrb",
									"sid": 378778446921463,
									"parameters": {
										"height": "clamp(player.currentHealth / player.maxHealth * self.ImageHeight, 0, Self.ImageHeight)"
									}
								},
								{
									"id": "set-height",
									"objectClass": "manaOrb",
									"sid": 356871380388085,
									"parameters": {
										"height": "clamp(player.currentMana / player.maxMana * Self.ImageHeight, 0, Self.ImageHeight)"
									}
								}
							],
							"sid": 154905051816206
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 930777219360607,
									"parameters": {
										"instance-variable": "currentHealth",
										"comparison": 4,
										"value": "player.maxHealth"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "player",
									"sid": 948005510207791,
									"parameters": {
										"instance-variable": "currentHealth",
										"value": "Self.maxHealth"
									}
								}
							],
							"sid": 626822929654135
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 347193666593438,
									"parameters": {
										"instance-variable": "currentHealth",
										"comparison": 2,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "player",
									"sid": 568140490164365,
									"parameters": {
										"instance-variable": "currentHealth",
										"value": "0"
									}
								}
							],
							"sid": 284450252978099
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 927297459158316,
									"parameters": {
										"instance-variable": "currentMana",
										"comparison": 4,
										"value": "player.maxMana"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "player",
									"sid": 206021598300202,
									"parameters": {
										"instance-variable": "currentMana",
										"value": "Self.maxMana"
									}
								}
							],
							"sid": 596737171205302
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 414329790171110,
									"parameters": {
										"instance-variable": "currentMana",
										"comparison": 2,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "player",
									"sid": 883040235264336,
									"parameters": {
										"instance-variable": "currentMana",
										"value": "0"
									}
								}
							],
							"sid": 793873407046539
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 310663245428299,
									"parameters": {
										"instance-variable": "currentHealth",
										"comparison": 4,
										"value": "0"
									}
								},
								{
									"id": "every-x-seconds",
									"objectClass": "System",
									"sid": 595736339474715,
									"parameters": {
										"interval-seconds": "1.0"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Regenerate health and mana while not at the maximum values."
								}
							],
							"sid": 257908268855159,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "player",
											"sid": 227461622060153,
											"parameters": {
												"instance-variable": "currentHealth",
												"comparison": 2,
												"value": "Self.maxHealth"
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "player",
											"sid": 673823781424710,
											"parameters": {
												"instance-variable": "currentHealth",
												"comparison": 1,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Regenerate health only when alive."
										},
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 680192376169141,
											"parameters": {
												"instance-variable": "currentHealth",
												"value": "Self.healthRegen"
											}
										}
									],
									"sid": 702126267068577
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "player",
											"sid": 995008637185060,
											"parameters": {
												"instance-variable": "currentMana",
												"comparison": 2,
												"value": "Self.maxMana"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 831745432658274,
											"parameters": {
												"instance-variable": "currentMana",
												"value": "Self.ManaRegen"
											}
										}
									],
									"sid": 162428372958565
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 211795541469612,
									"parameters": {
										"instance-variable": "currentHealth",
										"comparison": 3,
										"value": "0"
									}
								},
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 428474450953551
								}
							],
							"actions": [
								{
									"id": "play-at-object-by-name",
									"objectClass": "Audio",
									"sid": 956897193812549,
									"parameters": {
										"folder": "sounds",
										"audio-file-name": "body.ObjectTypeName & \"_die\"",
										"loop": "not-looping",
										"volume": "0",
										"object": "body",
										"inner-angle": "360",
										"outer-angle": "360",
										"outer-gain": "0",
										"tag-optional": "\"\""
									}
								},
								{
									"callFunction": "updateAnimation",
									"sid": 493662545747149,
									"parameters": [
										"\"die\"",
										"body.OriginalAnimationSpeed",
										"\"playFromBeginning\""
									]
								},
								{
									"callFunction": "removePlayerControl",
									"sid": 806693191738100
								}
							],
							"sid": 631777258825799,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-children",
											"objectClass": "player",
											"sid": 616906564021456,
											"parameters": {
												"child": "projectile",
												"which": "own"
											}
										},
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "projectile",
											"sid": 705670235643340,
											"parameters": {
												"instance-variable": "isMelee"
											}
										}
									],
									"actions": [
										{
											"id": "destroy",
											"objectClass": "projectile",
											"sid": 187159717065772
										}
									],
									"sid": 524782072182495
								}
							]
						}
					],
					"sid": 382578483115015
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "movement and interaction",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 125995727596137,
									"parameters": {
										"instance-variable": "currentHealth",
										"comparison": 4,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "isometrically correct movement"
								},
								{
									"id": "set-max-speed",
									"objectClass": "player",
									"sid": 256885482061283,
									"behaviorType": "MoveTo",
									"parameters": {
										"max-speed": "Functions.isometrify(Self.movementSpeed, Self.MoveTo.MovingAngle)"
									}
								}
							],
							"sid": 245583672645296,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 120982026255155,
											"parameters": {
												"variable": "isOnInteractCooldown"
											}
										},
										{
											"id": "trigger-once-while-true",
											"objectClass": "System",
											"sid": 585721311405905
										}
									],
									"actions": [
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 944013668078549,
											"parameters": {
												"seconds": "INTERACT_COOLDOWN"
											}
										},
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 625124061650027,
											"parameters": {
												"variable": "isOnInteractCooldown",
												"value": "false"
											}
										}
									],
									"sid": 406589245541801
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 414786528197108,
											"parameters": {
												"value": "Functions.isAnimationPlaying(\"walk\")"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "we could use frame tags to tag the footsteps frame appropriately, and then compare the current frame's tag instead of the raw frame number, but we'd have to write a tool to bulk update frame tags"
										}
									],
									"sid": 411372396119511,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-animation-frame",
													"objectClass": "body",
													"sid": 967087257732985,
													"parameters": {
														"comparison": 0,
														"number": "10"
													}
												},
												{
													"id": "trigger-once-while-true",
													"objectClass": "System",
													"sid": 289895318177335
												}
											],
											"actions": [
												{
													"id": "play-at-object-by-name",
													"objectClass": "Audio",
													"sid": 517347621080577,
													"parameters": {
														"folder": "sounds",
														"audio-file-name": "background.ObjectTypeName & \"Footstep0\"",
														"loop": "not-looping",
														"volume": "0",
														"object": "body",
														"inner-angle": "360",
														"outer-angle": "360",
														"outer-gain": "0",
														"tag-optional": "\"\""
													}
												}
											],
											"sid": 462888090850680
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-animation-frame",
													"objectClass": "body",
													"sid": 246511683996633,
													"parameters": {
														"comparison": 0,
														"number": "25"
													}
												},
												{
													"id": "trigger-once-while-true",
													"objectClass": "System",
													"sid": 402546216458844
												}
											],
											"actions": [
												{
													"id": "play-at-object-by-name",
													"objectClass": "Audio",
													"sid": 177009978573720,
													"parameters": {
														"folder": "sounds",
														"audio-file-name": "background.ObjectTypeName & \"Footstep1\"",
														"loop": "not-looping",
														"volume": "0",
														"object": "body",
														"inner-angle": "360",
														"outer-angle": "360",
														"outer-gain": "0",
														"tag-optional": "\"\""
													}
												}
											],
											"sid": 567136850851248
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "layer-is-visible",
											"objectClass": "System",
											"sid": 844520078268042,
											"parameters": {
												"layer": "\"settingsMenu\""
											},
											"isInverted": true
										},
										{
											"id": "cursor-is-over-object",
											"objectClass": "mouse",
											"sid": 128899916492898,
											"parameters": {
												"object": "item"
											},
											"isInverted": true
										},
										{
											"id": "cursor-is-over-object",
											"objectClass": "mouse",
											"sid": 876584298511895,
											"parameters": {
												"object": "invalidLocation"
											},
											"isInverted": true
										},
										{
											"id": "cursor-is-over-object",
											"objectClass": "mouse",
											"sid": 886180726251542,
											"parameters": {
												"object": "9PatchInvalidLocations"
											},
											"isInverted": true
										},
										{
											"id": "cursor-is-over-object",
											"objectClass": "mouse",
											"sid": 752194359354038,
											"parameters": {
												"object": "portrait"
											},
											"isInverted": true
										}
									],
									"actions": [],
									"sid": 596268564767458,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "on-object-clicked",
													"objectClass": "mouse",
													"sid": 581983855282056,
													"parameters": {
														"mouse-button": "left",
														"click-type": "clicked",
														"object-clicked": "npcBody"
													}
												},
												{
													"id": "pick-parent",
													"objectClass": "npcBody",
													"sid": 500343006491042,
													"parameters": {
														"parent": "npc",
														"which": "own"
													}
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "player",
													"sid": 218676865060788,
													"parameters": {
														"instance-variable": "talkingToNpc",
														"comparison": 1,
														"value": "npc.simpleName"
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 981260177954875,
													"parameters": {
														"variable": "uidOfClicked",
														"value": "npc.UID"
													}
												},
												{
													"callFunction": "moveToLocation",
													"sid": 602829088753991,
													"parameters": [
														"npc.X",
														"npc.y"
													]
												}
											],
											"sid": 746307798420541
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "on-object-clicked",
													"objectClass": "mouse",
													"sid": 763879713843625,
													"parameters": {
														"mouse-button": "left",
														"click-type": "clicked",
														"object-clicked": "loot"
													}
												},
												{
													"id": "pick-topbottom",
													"objectClass": "loot",
													"sid": 435457045204375,
													"parameters": {
														"which": "top"
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 640378117880726,
													"parameters": {
														"variable": "uidOfClicked",
														"value": "loot.UID"
													}
												},
												{
													"callFunction": "moveToLocation",
													"sid": 236035510369624,
													"parameters": [
														"loot.X",
														"loot.y"
													]
												}
											],
											"sid": 422837792051483
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "on-object-clicked",
													"objectClass": "mouse",
													"sid": 845886336656501,
													"parameters": {
														"mouse-button": "left",
														"click-type": "clicked",
														"object-clicked": "door"
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 886877031292798,
													"parameters": {
														"variable": "uidOfClicked",
														"value": "door.UID"
													}
												},
												{
													"callFunction": "moveToLocation",
													"sid": 579219826557585,
													"parameters": [
														"door.ImagePointX(1)",
														"door.ImagePointY(1)"
													]
												}
											],
											"sid": 398884856732755
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "on-object-clicked",
													"objectClass": "mouse",
													"sid": 217418460362889,
													"parameters": {
														"mouse-button": "left",
														"click-type": "clicked",
														"object-clicked": "lootChest"
													}
												},
												{
													"id": "compare-animation-frame",
													"objectClass": "lootChest",
													"sid": 340108756894294,
													"parameters": {
														"comparison": 0,
														"number": "0"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "We can only interact with loot chests that haven't been opened"
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 299063216853020,
													"parameters": {
														"variable": "uidOfClicked",
														"value": "lootChest.UID"
													}
												},
												{
													"callFunction": "moveToLocation",
													"sid": 626940978577513,
													"parameters": [
														"lootChest.ImagePointX(1)",
														"lootChest.ImagePointY(1)"
													]
												}
											],
											"sid": 585061498189976
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-all",
													"objectClass": "System",
													"sid": 273856019683302,
													"parameters": {
														"object": "item"
													}
												},
												{
													"id": "is-dragging",
													"objectClass": "item",
													"sid": 268543328021518,
													"behaviorType": "DragDrop"
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "only allow movement when no items are being dragged"
												}
											],
											"sid": 568416994144019
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 480529889420195
												},
												{
													"id": "cursor-is-over-object",
													"objectClass": "mouse",
													"sid": 480275073248378,
													"parameters": {
														"object": "player"
													},
													"isInverted": true
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "'cursor is not over player' is a quick and dirty solution to prevent a glitchy animation when the mouse is held down very near player.x and player.y. The reason it's here and not with the other 'cursor is over' checkers to making picking up loot under the player easier.\n\nTechnically it should be an isometric circle around the player. The size of this isometric circle would be based on the players movement speed; the faster the player is moving, the larger the circle would need to be to prevent this animation.\n\nMaybe with a very high movement speed, the circle would get too big and feel bad to use?"
												}
											],
											"sid": 390542893653536,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "mouse-button-is-down",
															"objectClass": "mouse",
															"sid": 544083824055063,
															"parameters": {
																"mouse-button": "right"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "if the mouse isn't over any of the specified, reset uidOfClicked and walk there normally"
														},
														{
															"id": "reset-eventvar",
															"objectClass": "System",
															"sid": 625913891285005,
															"parameters": {
																"variable": "uidOfClicked"
															}
														},
														{
															"callFunction": "moveToLocation",
															"sid": 800715069665899,
															"parameters": [
																"mouse.X",
																"mouse.Y"
															]
														}
													],
													"sid": 385135479439605
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "mouse-button-is-down",
															"objectClass": "mouse",
															"sid": 842301323408620,
															"parameters": {
																"mouse-button": "left"
															}
														}
													],
													"actions": [],
													"sid": 251039767195007,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "cursor-is-over-object",
																	"objectClass": "mouse",
																	"sid": 310616379297893,
																	"parameters": {
																		"object": "npcBody"
																	},
																	"isInverted": true
																},
																{
																	"id": "cursor-is-over-object",
																	"objectClass": "mouse",
																	"sid": 935659161401123,
																	"parameters": {
																		"object": "enemyBody"
																	},
																	"isInverted": true
																},
																{
																	"id": "cursor-is-over-object",
																	"objectClass": "mouse",
																	"sid": 295687394680588,
																	"parameters": {
																		"object": "loot"
																	},
																	"isInverted": true
																},
																{
																	"id": "cursor-is-over-object",
																	"objectClass": "mouse",
																	"sid": 857588471423663,
																	"parameters": {
																		"object": "door"
																	},
																	"isInverted": true
																},
																{
																	"id": "cursor-is-over-object",
																	"objectClass": "mouse",
																	"sid": 702426213936407,
																	"parameters": {
																		"object": "lootChest"
																	},
																	"isInverted": true
																}
															],
															"actions": [
																{
																	"id": "reset-eventvar",
																	"objectClass": "System",
																	"sid": 904272718557646,
																	"parameters": {
																		"variable": "uidOfClicked"
																	}
																},
																{
																	"callFunction": "moveToLocation",
																	"sid": 957280767915363,
																	"parameters": [
																		"mouse.X",
																		"mouse.Y"
																	]
																}
															],
															"sid": 965651956818810
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-boolean-eventvar",
																	"objectClass": "System",
																	"sid": 688365902885389,
																	"parameters": {
																		"variable": "isOnInteractCooldown"
																	},
																	"isInverted": true
																},
																{
																	"id": "cursor-is-over-object",
																	"objectClass": "mouse",
																	"sid": 595101736513250,
																	"parameters": {
																		"object": "enemyBody"
																	}
																},
																{
																	"id": "pick-topbottom",
																	"objectClass": "enemyBody",
																	"sid": 131903471408561,
																	"parameters": {
																		"which": "top"
																	}
																},
																{
																	"id": "pick-parent",
																	"objectClass": "enemyBody",
																	"sid": 534855859345445,
																	"parameters": {
																		"parent": "enemy",
																		"which": "own"
																	}
																}
															],
															"actions": [
																{
																	"id": "set-eventvar-value",
																	"objectClass": "System",
																	"sid": 541478825081252,
																	"parameters": {
																		"variable": "uidOfClicked",
																		"value": "enemy.UID"
																	}
																},
																{
																	"callFunction": "moveToLocation",
																	"sid": 485950347925945,
																	"parameters": [
																		"enemy.X",
																		"enemy.y"
																	]
																}
															],
															"sid": 133649345780508
														}
													]
												}
											]
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 430217294903986,
											"parameters": {
												"object": "enemy",
												"expression": "uidOfClicked",
												"comparison": 0,
												"value": "enemy.UID"
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 446143722805513,
											"parameters": {
												"object": "gear",
												"expression": "gear.type",
												"comparison": 0,
												"value": "\"mainHand\""
											}
										},
										{
											"id": "is-overlapping-another-object",
											"objectClass": "player",
											"sid": 539468882333294,
											"parameters": {
												"object": "nonCombatArea"
											},
											"isInverted": true
										},
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 504025445902873,
											"parameters": {
												"first-value": "Functions.isometrify(player.attackRange, angle(player.X, player.Y, enemy.X, enemy.Y))",
												"comparison": 5,
												"second-value": "distance(player.X, player.Y, enemy.X, enemy.Y)"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "As soon as the enemy comes in range, stop moving and attack it. We must verify we're in a non-combat area and have a weapon equipped before we get to the basicAttack function."
										},
										{
											"id": "stop",
											"objectClass": "player",
											"sid": 797725622384593,
											"behaviorType": "MoveTo"
										},
										{
											"id": "reset-eventvar",
											"objectClass": "System",
											"sid": 346908793014977,
											"parameters": {
												"variable": "uidOfClicked"
											}
										},
										{
											"id": "call-mapped-function",
											"objectClass": "Functions",
											"sid": 701899096196063,
											"parameters": {
												"name": "\"playerAbilities\"",
												"string": "\"basicAttack\"",
												"forward-params": "0"
											}
										}
									],
									"sid": 388352296582573
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 721662282054252,
											"parameters": {
												"object": "loot",
												"expression": "loot.UID",
												"comparison": 0,
												"value": "uidOfClicked"
											}
										},
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 566842914011511,
											"parameters": {
												"first-value": "Functions.isometrify(player.pickupRange, angle(player.X, player.Y, loot.X, loot.Y))",
												"comparison": 5,
												"second-value": "distance(player.X, player.Y, loot.X, loot.Y) - max(loot.Width, loot.Height) - loot.verticalHeight"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "loot gets a bonus to its pick up range based on its size, and an additional bonus if it has a vertical height"
										},
										{
											"id": "stop",
											"objectClass": "player",
											"sid": 961332417052704,
											"behaviorType": "MoveTo"
										},
										{
											"callFunction": "pickUpLoot",
											"sid": 728141715517524
										},
										{
											"id": "reset-eventvar",
											"objectClass": "System",
											"sid": 726407275983507,
											"parameters": {
												"variable": "uidOfClicked"
											}
										}
									],
									"sid": 781964436868869
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 289372584768611,
											"parameters": {
												"object": "door",
												"expression": "uidOfClicked",
												"comparison": 0,
												"value": "door.UID"
											}
										},
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 351145895360370,
											"parameters": {
												"first-value": "Functions.isometrify(player.pickupRange, angle(player.X, player.Y, door.ImagePointX(1), door.ImagePointY(1)))",
												"comparison": 5,
												"second-value": "distance(player.X, player.Y, door.ImagePointX(1), door.ImagePointY(1)) - max(door.Width, door.Height)"
											}
										}
									],
									"actions": [
										{
											"id": "stop",
											"objectClass": "player",
											"sid": 728178816355344,
											"behaviorType": "MoveTo"
										},
										{
											"id": "set-instvar-value",
											"objectClass": "player",
											"sid": 638177029875875,
											"parameters": {
												"instance-variable": "relocateToX",
												"value": "door.relocateToX"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "player",
											"sid": 666920721217678,
											"parameters": {
												"instance-variable": "relocateToY",
												"value": "door.relocateToY"
											}
										},
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 392334434204623,
											"parameters": {
												"variable": "isOnInteractCooldown",
												"value": "true"
											}
										},
										{
											"callFunction": "changeLayout",
											"sid": 905950862943501,
											"parameters": [
												"door.layout"
											]
										},
										{
											"id": "reset-eventvar",
											"objectClass": "System",
											"sid": 635898589656765,
											"parameters": {
												"variable": "uidOfClicked"
											}
										}
									],
									"sid": 133416707150565
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 820788770937825,
											"parameters": {
												"object": "lootChest",
												"expression": "uidOfClicked",
												"comparison": 0,
												"value": "lootChest.UID"
											}
										},
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 435066524308366,
											"parameters": {
												"first-value": "Functions.isometrify(player.pickupRange, angle(player.X, player.Y, lootChest.ImagePointX(1), lootChest.ImagePointY(1)))",
												"comparison": 5,
												"second-value": "distance(player.X, player.Y, lootChest.ImagePointX(1), lootChest.ImagePointY(1)) - max(lootChest.Width, lootChest.Height)"
											}
										}
									],
									"actions": [
										{
											"id": "stop",
											"objectClass": "player",
											"sid": 837229197482044,
											"behaviorType": "MoveTo"
										},
										{
											"id": "start-animation",
											"objectClass": "lootChest",
											"sid": 717015876556937,
											"parameters": {
												"from": "current-frame"
											}
										},
										{
											"callFunction": "spawnLoot",
											"sid": 109958418072795,
											"parameters": [
												"lootChest.ImagePointX(1)",
												"lootChest.ImagePointY(1)",
												"max(lootChest.Width, lootChest.Height)"
											]
										},
										{
											"id": "reset-eventvar",
											"objectClass": "System",
											"sid": 353763200418633,
											"parameters": {
												"variable": "uidOfClicked"
											}
										}
									],
									"sid": 571517915827350
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-moving",
											"objectClass": "player",
											"sid": 120440326067983,
											"behaviorType": "MoveTo",
											"isInverted": true
										},
										{
											"id": "every-x-seconds",
											"objectClass": "System",
											"sid": 137589272368104,
											"parameters": {
												"interval-seconds": "0.5"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Reset `uidOfClicked` if the player isn't moving. Otherwise, if the clicked object later entered into the player's interact range by its own locomotion, the player would interact with it. Give a small leeway timer to assist with interacting with objects the player is immediately next to."
										},
										{
											"id": "reset-eventvar",
											"objectClass": "System",
											"sid": 214493384981726,
											"parameters": {
												"variable": "uidOfClicked"
											}
										}
									],
									"sid": 266905876334575
								}
							]
						},
						{
							"functionName": "moveToLocation",
							"functionDescription": "Move to a location, specifying a distance away from that location to arrive at",
							"functionCategory": "player",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "x",
									"type": "number",
									"initialValue": "0",
									"comment": "The coordinate on the X axis to move the player to",
									"sid": 476477426097131
								},
								{
									"name": "y",
									"type": "number",
									"initialValue": "0",
									"comment": "The coordinate on the Y axis to move the player to",
									"sid": 381101153777112
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"callFunction": "closeDialog",
									"sid": 675672935428082
								},
								{
									"id": "move-to-position",
									"objectClass": "player",
									"sid": 796317504405257,
									"behaviorType": "MoveTo",
									"parameters": {
										"x": "x",
										"y": "y",
										"mode": "direct"
									}
								}
							],
							"sid": 736875311258128
						}
					],
					"sid": 914713205483917
				},
				{
					"functionName": "removePlayerControl",
					"functionDescription": "Prevent the player from doing anything.",
					"functionCategory": "player",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-enabled",
							"objectClass": "player",
							"sid": 771670356722238,
							"behaviorType": "MoveTo",
							"parameters": {
								"enabled": false
							}
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 919458007647707,
							"parameters": {
								"group-name": "\"movement and interaction\"",
								"state": "deactivated"
							}
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 172655499978699,
							"parameters": {
								"group-name": "\"abilities\"",
								"state": "deactivated"
							}
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 769600853195239,
							"parameters": {
								"group-name": "\"facings\"",
								"state": "deactivated"
							}
						}
					],
					"sid": 920903738678207
				},
				{
					"functionName": "restorePlayerControl",
					"functionDescription": "Reinstate the player's ability to be controlled.",
					"functionCategory": "player",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "this function can't be inside of 'movement and interaction'"
						},
						{
							"id": "set-enabled",
							"objectClass": "player",
							"sid": 392986170340383,
							"behaviorType": "MoveTo",
							"parameters": {
								"enabled": true
							}
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 780931063976395,
							"parameters": {
								"group-name": "\"movement and interaction\"",
								"state": "activated"
							}
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 127572999015231,
							"parameters": {
								"group-name": "\"abilities\"",
								"state": "activated"
							}
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 799495312628293,
							"parameters": {
								"group-name": "\"facings\"",
								"state": "activated"
							}
						},
						{
							"callFunction": "updateAnimation",
							"sid": 904672664768414,
							"parameters": [
								"\"idle\"",
								"player.movementSpeed / ANIMATION_DIVISOR",
								"\"playFromBeginning\""
							]
						}
					],
					"sid": 985297277756848
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "ability management",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 496574190723182,
									"parameters": {
										"object": "abilityKeybinder"
									}
								},
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 700490348345421,
									"parameters": {
										"object": "abilitySlot",
										"expression": "abilitySlot.abilityNumber",
										"comparison": 0,
										"value": "abilityKeybinder.abilityNumber"
									}
								}
							],
							"actions": [],
							"sid": 562841752537406,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "layer-is-visible",
											"objectClass": "System",
											"sid": 916931601824170,
											"parameters": {
												"layer": "\"settingsMenu\""
											},
											"isInverted": true
										},
										{
											"id": "is-overlapping-another-object",
											"objectClass": "player",
											"sid": 218810392213578,
											"parameters": {
												"object": "nonCombatArea"
											},
											"isInverted": true
										},
										{
											"id": "key-code-is-down",
											"objectClass": "keyboard",
											"sid": 975264820589910,
											"parameters": {
												"keycode": "abilityKeybinder.keycode"
											}
										},
										{
											"id": "pick-children",
											"objectClass": "abilitySlot",
											"sid": 850349463613851,
											"parameters": {
												"child": "ability",
												"which": "own"
											}
										},
										{
											"id": "is-animation-playing",
											"objectClass": "ability",
											"sid": 622602028679689,
											"parameters": {
												"animation": "\"none\""
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "If we're not paused or in a non-combat area, check if the keycode for each abilityKeybinder is pressed, and if it is, find the correlating abilitySlot, and ability. Use that ability to call the right player ability function."
										},
										{
											"id": "call-mapped-function",
											"objectClass": "Functions",
											"sid": 482627881379365,
											"parameters": {
												"name": "\"playerAbilities\"",
												"string": "ability.AnimationName",
												"forward-params": "0"
											}
										}
									],
									"sid": 817575705561135
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-children",
											"objectClass": "abilitySlot",
											"sid": 752953979567438,
											"parameters": {
												"child": "abilityKey",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "This doesn't need to be done every tick, however, we are already looping over all abilities and keybinders."
										},
										{
											"id": "set-text",
											"objectClass": "abilityKey",
											"sid": 396180268110455,
											"parameters": {
												"text": "\"[outline=#000000][lineThickness=1.5]\" & abilityKeybinder.PlainText & \"[/outline][/lineThickness]\""
											}
										}
									],
									"sid": 879697940553761
								}
							]
						},
						{
							"eventType": "group",
							"disabled": false,
							"title": "abilities",
							"description": "",
							"isActiveOnStart": true,
							"children": [
								{
									"eventType": "group",
									"disabled": false,
									"title": "man abilities",
									"description": "I'm hesitant to implement DRY principles for abilities as it may spaghettify to the point of unreadability. Compartmentalizing each ability in isolation might facilitate bug squashing and feature implementation in this area.",
									"isActiveOnStart": true,
									"children": [
										{
											"functionName": "basicAttack",
											"functionDescription": "",
											"functionCategory": "abilities",
											"functionReturnType": "none",
											"functionCopyPicked": true,
											"functionIsAsync": false,
											"functionParameters": [],
											"eventType": "function-block",
											"conditions": [],
											"actions": [],
											"sid": 237487584537001,
											"children": [
												{
													"eventType": "variable",
													"name": "PROJECTILE_SPEED",
													"type": "number",
													"initialValue": "650",
													"comment": "The speed of the projectile",
													"isStatic": false,
													"isConstant": true,
													"sid": 660984699450719
												},
												{
													"eventType": "variable",
													"name": "MANIFESTATION_FRAME",
													"type": "number",
													"initialValue": "9",
													"comment": "The (0-based) frame in which the projectile should manifest",
													"isStatic": false,
													"isConstant": true,
													"sid": 720005343852250
												},
												{
													"eventType": "variable",
													"name": "SIZE",
													"type": "number",
													"initialValue": "99",
													"comment": "The size of the projectile",
													"isStatic": false,
													"isConstant": true,
													"sid": 807248292850662
												},
												{
													"eventType": "variable",
													"name": "RANGE",
													"type": "number",
													"initialValue": "150",
													"comment": "",
													"isStatic": false,
													"isConstant": true,
													"sid": 712707695252394
												},
												{
													"eventType": "variable",
													"name": "waitPeriod",
													"type": "number",
													"initialValue": "0",
													"comment": "How long to wait (in seconds) after the start of the animation before generating the projectile",
													"isStatic": true,
													"isConstant": false,
													"sid": 757482629485882
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-by-comparison",
															"objectClass": "System",
															"sid": 645333836504198,
															"parameters": {
																"object": "gear",
																"expression": "gear.type",
																"comparison": 0,
																"value": "\"mainHand\""
															}
														},
														{
															"id": "is-boolean-instance-variable-set",
															"objectClass": "player",
															"sid": 356514004023456,
															"parameters": {
																"instance-variable": "busyCastingAbility"
															},
															"isInverted": true
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "must have a weapon equipped"
														},
														{
															"id": "set-boolean-instvar",
															"objectClass": "player",
															"sid": 277481172016117,
															"parameters": {
																"instance-variable": "busyCastingAbility",
																"value": "true"
															}
														},
														{
															"id": "stop",
															"objectClass": "player",
															"sid": 583316007766166,
															"behaviorType": "MoveTo"
														},
														{
															"callFunction": "updateFacing",
															"sid": 781848113058470,
															"parameters": [
																"enemy.X",
																"enemy.Y"
															]
														},
														{
															"type": "comment",
															"text": "Don't set uidOfClicked to 0 here, because we might have clicked on an enemy"
														},
														{
															"id": "set-enabled",
															"objectClass": "player",
															"sid": 830237007851831,
															"behaviorType": "MoveTo",
															"parameters": {
																"enabled": false
															}
														},
														{
															"id": "set-group-active",
															"objectClass": "System",
															"sid": 540045177007361,
															"parameters": {
																"group-name": "\"movement and interaction\"",
																"state": "deactivated"
															}
														},
														{
															"id": "set-group-active",
															"objectClass": "System",
															"sid": 372080970647780,
															"parameters": {
																"group-name": "\"abilities\"",
																"state": "deactivated"
															}
														},
														{
															"id": "set-group-active",
															"objectClass": "System",
															"sid": 970770820518358,
															"parameters": {
																"group-name": "\"facings\"",
																"state": "deactivated"
															}
														},
														{
															"callFunction": "updateAnimation",
															"sid": 215032955338390,
															"parameters": [
																"\"downwardSlash\"",
																"player.actionSpeed",
																"\"playFromBeginning\""
															]
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 892366142025703,
															"parameters": {
																"variable": "waitPeriod",
																"value": "MANIFESTATION_FRAME / body.AnimationSpeed"
															}
														},
														{
															"id": "wait",
															"objectClass": "System",
															"sid": 107182011802196,
															"parameters": {
																"seconds": "waitPeriod"
															}
														}
													],
													"sid": 244488168514026,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "evaluate-expression",
																	"objectClass": "System",
																	"sid": 128156888964181,
																	"parameters": {
																		"value": "Functions.isAnimationPlaying(\"block\")"
																	},
																	"isInverted": true
																},
																{
																	"id": "evaluate-expression",
																	"objectClass": "System",
																	"sid": 418691805072070,
																	"parameters": {
																		"value": "Functions.isAnimationPlaying(\"hit\")"
																	},
																	"isInverted": true
																}
															],
															"actions": [
																{
																	"id": "play-at-object-by-name",
																	"objectClass": "Audio",
																	"sid": 257018522323174,
																	"parameters": {
																		"folder": "sounds",
																		"audio-file-name": "\"basicAttack\" & round(random(1))",
																		"loop": "not-looping",
																		"volume": "0",
																		"object": "gear",
																		"inner-angle": "360",
																		"outer-angle": "360",
																		"outer-gain": "0",
																		"tag-optional": "\"\""
																	}
																},
																{
																	"id": "create-object",
																	"objectClass": "System",
																	"sid": 745416919506470,
																	"parameters": {
																		"object-to-create": "projectile",
																		"layer": "\"mechanics\"",
																		"x": "player.X",
																		"y": "player.Y",
																		"create-hierarchy": false,
																		"template-name": "\"\""
																	}
																}
															],
															"sid": 251550896279957,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "pick-last-created",
																			"objectClass": "System",
																			"sid": 208215574548532,
																			"parameters": {
																				"object": "projectile"
																			}
																		}
																	],
																	"actions": [
																		{
																			"id": "add-child",
																			"objectClass": "player",
																			"sid": 949661239582408,
																			"parameters": {
																				"child": "projectile",
																				"transform-x": false,
																				"transform-y": false,
																				"transform-w": false,
																				"transform-h": false,
																				"transform-a": false,
																				"transform-o": false,
																				"transform-z-elevation": false,
																				"transform-visibility": false,
																				"destroy-with-parent": true
																			}
																		},
																		{
																			"id": "set-boolean-instvar",
																			"objectClass": "projectile",
																			"sid": 296798700408130,
																			"parameters": {
																				"instance-variable": "isMelee",
																				"value": "true"
																			}
																		},
																		{
																			"id": "set-boolean-instvar",
																			"objectClass": "projectile",
																			"sid": 493825317479779,
																			"parameters": {
																				"instance-variable": "piercing",
																				"value": "true"
																			}
																		},
																		{
																			"id": "set-boolean-instvar",
																			"objectClass": "projectile",
																			"sid": 291460450957102,
																			"parameters": {
																				"instance-variable": "enabled",
																				"value": "true"
																			}
																		},
																		{
																			"id": "set-instvar-value",
																			"objectClass": "projectile",
																			"sid": 676338242554036,
																			"parameters": {
																				"instance-variable": "range",
																				"value": "RANGE"
																			}
																		},
																		{
																			"type": "comment",
																			"text": "Extract the multiplier from the description in the abilities table"
																		},
																		{
																			"id": "set-instvar-value",
																			"objectClass": "projectile",
																			"sid": 537068249707929,
																			"parameters": {
																				"instance-variable": "slashDamage",
																				"value": "player.slashDamage"
																			}
																		},
																		{
																			"id": "set-width",
																			"objectClass": "projectile",
																			"sid": 204851506803354,
																			"parameters": {
																				"width": "SIZE"
																			}
																		},
																		{
																			"id": "set-height",
																			"objectClass": "projectile",
																			"sid": 479795826249039,
																			"parameters": {
																				"height": "Self.Width / ISOMETRIC_DIVIDER"
																			}
																		},
																		{
																			"id": "set-angle-of-motion",
																			"objectClass": "projectile",
																			"sid": 278341211524466,
																			"behaviorType": "Bullet",
																			"parameters": {
																				"angle": "player.MoveTo.MovingAngle"
																			}
																		},
																		{
																			"id": "set-speed",
																			"objectClass": "projectile",
																			"sid": 159766419289161,
																			"behaviorType": "Bullet",
																			"parameters": {
																				"speed": "Functions.isometrify(PROJECTILE_SPEED, Self.Bullet.AngleOfMotion)"
																			}
																		},
																		{
																			"id": "wait",
																			"objectClass": "System",
																			"sid": 241566255672497,
																			"parameters": {
																				"seconds": "body.AnimationFrameCount / body.AnimationSpeed - waitPeriod"
																			}
																		}
																	],
																	"sid": 938046408937770,
																	"children": [
																		{
																			"eventType": "block",
																			"conditions": [
																				{
																					"id": "compare-instance-variable",
																					"objectClass": "player",
																					"sid": 137278534596963,
																					"parameters": {
																						"instance-variable": "currentHealth",
																						"comparison": 4,
																						"value": "0"
																					}
																				},
																				{
																					"id": "evaluate-expression",
																					"objectClass": "System",
																					"sid": 989644719242656,
																					"parameters": {
																						"value": "Functions.isAnimationPlaying(\"block\")"
																					},
																					"isInverted": true
																				},
																				{
																					"id": "evaluate-expression",
																					"objectClass": "System",
																					"sid": 363965503029823,
																					"parameters": {
																						"value": "Functions.isAnimationPlaying(\"hit\")"
																					},
																					"isInverted": true
																				}
																			],
																			"actions": [
																				{
																					"id": "set-enabled",
																					"objectClass": "player",
																					"sid": 187900016768448,
																					"behaviorType": "MoveTo",
																					"parameters": {
																						"enabled": true
																					}
																				},
																				{
																					"id": "set-group-active",
																					"objectClass": "System",
																					"sid": 400945607981217,
																					"parameters": {
																						"group-name": "\"movement and interaction\"",
																						"state": "activated"
																					}
																				},
																				{
																					"id": "set-group-active",
																					"objectClass": "System",
																					"sid": 726832511935774,
																					"parameters": {
																						"group-name": "\"abilities\"",
																						"state": "activated"
																					}
																				},
																				{
																					"id": "set-group-active",
																					"objectClass": "System",
																					"sid": 717246378452700,
																					"parameters": {
																						"group-name": "\"facings\"",
																						"state": "activated"
																					}
																				},
																				{
																					"callFunction": "updateAnimation",
																					"sid": 794069302254510,
																					"parameters": [
																						"\"idle\"",
																						"player.movementSpeed / ANIMATION_DIVISOR",
																						"\"playFromBeginning\""
																					]
																				},
																				{
																					"id": "set-boolean-instvar",
																					"objectClass": "player",
																					"sid": 370192496860816,
																					"parameters": {
																						"instance-variable": "busyCastingAbility",
																						"value": "false"
																					}
																				}
																			],
																			"sid": 914788731121008
																		},
																		{
																			"eventType": "block",
																			"conditions": [
																				{
																					"id": "else",
																					"objectClass": "System",
																					"sid": 467496129267107
																				}
																			],
																			"actions": [
																				{
																					"id": "set-boolean-instvar",
																					"objectClass": "player",
																					"sid": 838540310194858,
																					"parameters": {
																						"instance-variable": "busyCastingAbility",
																						"value": "false"
																					}
																				}
																			],
																			"sid": 879767610530616
																		}
																	]
																}
															]
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "else",
																	"objectClass": "System",
																	"sid": 351395308598430
																}
															],
															"actions": [
																{
																	"id": "set-boolean-instvar",
																	"objectClass": "player",
																	"sid": 446167497842159,
																	"parameters": {
																		"instance-variable": "busyCastingAbility",
																		"value": "false"
																	}
																}
															],
															"sid": 179298565001989
														}
													]
												}
											]
										},
										{
											"functionName": "heroicStrike",
											"functionDescription": "",
											"functionCategory": "abilities",
											"functionReturnType": "none",
											"functionCopyPicked": false,
											"functionIsAsync": false,
											"functionParameters": [],
											"eventType": "function-block",
											"conditions": [],
											"actions": [],
											"sid": 634935363046431,
											"children": [
												{
													"eventType": "variable",
													"name": "MANA_COST",
													"type": "number",
													"initialValue": "10",
													"comment": "",
													"isStatic": false,
													"isConstant": true,
													"sid": 556115538897220
												},
												{
													"eventType": "variable",
													"name": "PROJECTILE_SPEED",
													"type": "number",
													"initialValue": "700",
													"comment": "The speed of the projectile",
													"isStatic": false,
													"isConstant": true,
													"sid": 835135880861055
												},
												{
													"eventType": "variable",
													"name": "MANIFESTATION_FRAME",
													"type": "number",
													"initialValue": "4",
													"comment": "The (0-based) frame in which the projectile should manifest",
													"isStatic": false,
													"isConstant": true,
													"sid": 652712993739128
												},
												{
													"eventType": "variable",
													"name": "SIZE",
													"type": "number",
													"initialValue": "126",
													"comment": "The size of the projectile",
													"isStatic": false,
													"isConstant": true,
													"sid": 671142066928046
												},
												{
													"eventType": "variable",
													"name": "RANGE",
													"type": "number",
													"initialValue": "150",
													"comment": "",
													"isStatic": false,
													"isConstant": true,
													"sid": 149507702256321
												},
												{
													"eventType": "variable",
													"name": "waitPeriod",
													"type": "number",
													"initialValue": "0",
													"comment": "How long to wait (in seconds) after the start of the animation before generating the projectile",
													"isStatic": true,
													"isConstant": false,
													"sid": 249996694158799
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-by-comparison",
															"objectClass": "System",
															"sid": 304381867872836,
															"parameters": {
																"object": "gear",
																"expression": "gear.type",
																"comparison": 0,
																"value": "\"mainHand\""
															}
														},
														{
															"id": "compare-instance-variable",
															"objectClass": "player",
															"sid": 166055072803415,
															"parameters": {
																"instance-variable": "currentMana",
																"comparison": 5,
																"value": "MANA_COST"
															}
														},
														{
															"id": "is-boolean-instance-variable-set",
															"objectClass": "player",
															"sid": 236391576471306,
															"parameters": {
																"instance-variable": "busyCastingAbility"
															},
															"isInverted": true
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "must have a weapon equipped and enough mana"
														},
														{
															"id": "set-boolean-instvar",
															"objectClass": "player",
															"sid": 990243843521963,
															"parameters": {
																"instance-variable": "busyCastingAbility",
																"value": "true"
															}
														},
														{
															"id": "subtract-from-instvar",
															"objectClass": "player",
															"sid": 784402175231481,
															"parameters": {
																"instance-variable": "currentMana",
																"value": "MANA_COST"
															}
														},
														{
															"id": "stop",
															"objectClass": "player",
															"sid": 200154284895796,
															"behaviorType": "MoveTo"
														},
														{
															"id": "reset-eventvar",
															"objectClass": "System",
															"sid": 991256386443864,
															"parameters": {
																"variable": "uidOfClicked"
															}
														},
														{
															"callFunction": "updateFacing",
															"sid": 607225505312555,
															"parameters": [
																"mouse.X",
																"mouse.Y"
															]
														},
														{
															"id": "set-enabled",
															"objectClass": "player",
															"sid": 116647515915870,
															"behaviorType": "MoveTo",
															"parameters": {
																"enabled": false
															}
														},
														{
															"id": "set-group-active",
															"objectClass": "System",
															"sid": 715758804112873,
															"parameters": {
																"group-name": "\"movement and interaction\"",
																"state": "deactivated"
															}
														},
														{
															"id": "set-group-active",
															"objectClass": "System",
															"sid": 398474978359960,
															"parameters": {
																"group-name": "\"abilities\"",
																"state": "deactivated"
															}
														},
														{
															"id": "set-group-active",
															"objectClass": "System",
															"sid": 145935883443095,
															"parameters": {
																"group-name": "\"facings\"",
																"state": "deactivated"
															}
														},
														{
															"callFunction": "updateAnimation",
															"sid": 363478195176085,
															"parameters": [
																"\"upwardSlash\"",
																"player.actionSpeed",
																"\"playFromBeginning\""
															]
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 833243653888076,
															"parameters": {
																"variable": "waitPeriod",
																"value": "MANIFESTATION_FRAME / body.AnimationSpeed"
															}
														},
														{
															"id": "wait",
															"objectClass": "System",
															"sid": 250462301179938,
															"parameters": {
																"seconds": "waitPeriod"
															}
														}
													],
													"sid": 985388799408501,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "evaluate-expression",
																	"objectClass": "System",
																	"sid": 211883634937261,
																	"parameters": {
																		"value": "Functions.isAnimationPlaying(\"block\")"
																	},
																	"isInverted": true
																},
																{
																	"id": "evaluate-expression",
																	"objectClass": "System",
																	"sid": 746800146344135,
																	"parameters": {
																		"value": "Functions.isAnimationPlaying(\"hit\")"
																	},
																	"isInverted": true
																}
															],
															"actions": [
																{
																	"id": "play-at-object-by-name",
																	"objectClass": "Audio",
																	"sid": 195529015890695,
																	"parameters": {
																		"folder": "sounds",
																		"audio-file-name": "\"heroicStrike\" & round(random(1))",
																		"loop": "not-looping",
																		"volume": "0",
																		"object": "gear",
																		"inner-angle": "360",
																		"outer-angle": "360",
																		"outer-gain": "0",
																		"tag-optional": "\"\""
																	}
																},
																{
																	"id": "create-object",
																	"objectClass": "System",
																	"sid": 822025516930424,
																	"parameters": {
																		"object-to-create": "projectile",
																		"layer": "\"mechanics\"",
																		"x": "player.X",
																		"y": "player.Y",
																		"create-hierarchy": false,
																		"template-name": "\"\""
																	}
																}
															],
															"sid": 830477425259486,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "pick-last-created",
																			"objectClass": "System",
																			"sid": 275012647971847,
																			"parameters": {
																				"object": "projectile"
																			}
																		}
																	],
																	"actions": [
																		{
																			"id": "add-child",
																			"objectClass": "player",
																			"sid": 618096097683543,
																			"parameters": {
																				"child": "projectile",
																				"transform-x": false,
																				"transform-y": false,
																				"transform-w": false,
																				"transform-h": false,
																				"transform-a": false,
																				"transform-o": false,
																				"transform-z-elevation": false,
																				"transform-visibility": false,
																				"destroy-with-parent": true
																			}
																		},
																		{
																			"id": "set-boolean-instvar",
																			"objectClass": "projectile",
																			"sid": 503367389226217,
																			"parameters": {
																				"instance-variable": "isMelee",
																				"value": "true"
																			}
																		},
																		{
																			"id": "set-boolean-instvar",
																			"objectClass": "projectile",
																			"sid": 723299027369822,
																			"parameters": {
																				"instance-variable": "piercing",
																				"value": "true"
																			}
																		},
																		{
																			"id": "set-boolean-instvar",
																			"objectClass": "projectile",
																			"sid": 917364713628437,
																			"parameters": {
																				"instance-variable": "enabled",
																				"value": "true"
																			}
																		},
																		{
																			"id": "set-instvar-value",
																			"objectClass": "projectile",
																			"sid": 459531040137562,
																			"parameters": {
																				"instance-variable": "range",
																				"value": "RANGE"
																			}
																		},
																		{
																			"type": "comment",
																			"text": "Extract the multiplier from the description in the abilities table"
																		},
																		{
																			"id": "set-instvar-value",
																			"objectClass": "projectile",
																			"sid": 302997838356410,
																			"parameters": {
																				"instance-variable": "slashDamage",
																				"value": "player.slashDamage + player.slashDamage * int(tokenat(tokenat(Functions.arrayLookup(abilitiesArray.ObjectTypeName, ability.AnimationName, \"description\"), 1, \"{\"), 0, \"}\")) / PERCENTAGE_DIVIDER"
																			}
																		},
																		{
																			"id": "set-width",
																			"objectClass": "projectile",
																			"sid": 954136013834241,
																			"parameters": {
																				"width": "SIZE"
																			}
																		},
																		{
																			"id": "set-height",
																			"objectClass": "projectile",
																			"sid": 910602433393533,
																			"parameters": {
																				"height": "Self.Width / ISOMETRIC_DIVIDER"
																			}
																		},
																		{
																			"id": "set-angle-of-motion",
																			"objectClass": "projectile",
																			"sid": 202252646589259,
																			"behaviorType": "Bullet",
																			"parameters": {
																				"angle": "player.MoveTo.MovingAngle"
																			}
																		},
																		{
																			"id": "set-speed",
																			"objectClass": "projectile",
																			"sid": 915888956163023,
																			"behaviorType": "Bullet",
																			"parameters": {
																				"speed": "Functions.isometrify(PROJECTILE_SPEED, Self.Bullet.AngleOfMotion)"
																			}
																		},
																		{
																			"id": "wait",
																			"objectClass": "System",
																			"sid": 387785928684973,
																			"parameters": {
																				"seconds": "body.AnimationFrameCount / body.AnimationSpeed - waitPeriod"
																			}
																		}
																	],
																	"sid": 948555998576990,
																	"children": [
																		{
																			"eventType": "block",
																			"conditions": [
																				{
																					"id": "compare-instance-variable",
																					"objectClass": "player",
																					"sid": 396700541168287,
																					"parameters": {
																						"instance-variable": "currentHealth",
																						"comparison": 4,
																						"value": "0"
																					}
																				},
																				{
																					"id": "evaluate-expression",
																					"objectClass": "System",
																					"sid": 723472727467631,
																					"parameters": {
																						"value": "Functions.isAnimationPlaying(\"block\")"
																					},
																					"isInverted": true
																				},
																				{
																					"id": "evaluate-expression",
																					"objectClass": "System",
																					"sid": 906728092914930,
																					"parameters": {
																						"value": "Functions.isAnimationPlaying(\"hit\")"
																					},
																					"isInverted": true
																				}
																			],
																			"actions": [
																				{
																					"id": "set-enabled",
																					"objectClass": "player",
																					"sid": 170173809888902,
																					"behaviorType": "MoveTo",
																					"parameters": {
																						"enabled": true
																					}
																				},
																				{
																					"id": "set-group-active",
																					"objectClass": "System",
																					"sid": 469686604038770,
																					"parameters": {
																						"group-name": "\"movement and interaction\"",
																						"state": "activated"
																					}
																				},
																				{
																					"id": "set-group-active",
																					"objectClass": "System",
																					"sid": 953754807712750,
																					"parameters": {
																						"group-name": "\"abilities\"",
																						"state": "activated"
																					}
																				},
																				{
																					"id": "set-group-active",
																					"objectClass": "System",
																					"sid": 388625435702622,
																					"parameters": {
																						"group-name": "\"facings\"",
																						"state": "activated"
																					}
																				},
																				{
																					"callFunction": "updateAnimation",
																					"sid": 250773605661799,
																					"parameters": [
																						"\"idle\"",
																						"player.movementSpeed / ANIMATION_DIVISOR",
																						"\"playFromBeginning\""
																					]
																				},
																				{
																					"id": "set-boolean-instvar",
																					"objectClass": "player",
																					"sid": 399532178094779,
																					"parameters": {
																						"instance-variable": "busyCastingAbility",
																						"value": "false"
																					}
																				}
																			],
																			"sid": 884884868174078
																		},
																		{
																			"eventType": "block",
																			"conditions": [
																				{
																					"id": "else",
																					"objectClass": "System",
																					"sid": 229548760511597
																				}
																			],
																			"actions": [
																				{
																					"id": "set-boolean-instvar",
																					"objectClass": "player",
																					"sid": 144489596645274,
																					"parameters": {
																						"instance-variable": "busyCastingAbility",
																						"value": "false"
																					}
																				}
																			],
																			"sid": 675283709743077
																		}
																	]
																}
															]
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "else",
																	"objectClass": "System",
																	"sid": 946040061474161
																}
															],
															"actions": [
																{
																	"id": "set-boolean-instvar",
																	"objectClass": "player",
																	"sid": 212797628259059,
																	"parameters": {
																		"instance-variable": "busyCastingAbility",
																		"value": "false"
																	}
																}
															],
															"sid": 588939874775068
														}
													]
												}
											]
										},
										{
											"functionName": "kick",
											"functionDescription": "",
											"functionCategory": "abilities",
											"functionReturnType": "none",
											"functionCopyPicked": false,
											"functionIsAsync": false,
											"functionParameters": [],
											"eventType": "function-block",
											"conditions": [],
											"actions": [],
											"sid": 478229012400741,
											"children": [
												{
													"eventType": "variable",
													"name": "MANA_COST",
													"type": "number",
													"initialValue": "15",
													"comment": "",
													"isStatic": false,
													"isConstant": true,
													"sid": 874772102853225
												},
												{
													"eventType": "variable",
													"name": "PROJECTILE_SPEED",
													"type": "number",
													"initialValue": "750",
													"comment": "The speed of the projectile",
													"isStatic": false,
													"isConstant": true,
													"sid": 419264404202457
												},
												{
													"eventType": "variable",
													"name": "MANIFESTATION_FRAME",
													"type": "number",
													"initialValue": "11",
													"comment": "The (0-based) frame in which the projectile should manifest",
													"isStatic": false,
													"isConstant": true,
													"sid": 334647991231281
												},
												{
													"eventType": "variable",
													"name": "SIZE",
													"type": "number",
													"initialValue": "81",
													"comment": "The size of the projectile",
													"isStatic": false,
													"isConstant": true,
													"sid": 399371439995529
												},
												{
													"eventType": "variable",
													"name": "RANGE",
													"type": "number",
													"initialValue": "140",
													"comment": "",
													"isStatic": false,
													"isConstant": true,
													"sid": 358832898728521
												},
												{
													"eventType": "variable",
													"name": "waitPeriod",
													"type": "number",
													"initialValue": "0",
													"comment": "How long to wait (in seconds) after the start of the animation before generating the projectile",
													"isStatic": true,
													"isConstant": false,
													"sid": 812612572948220
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-instance-variable",
															"objectClass": "player",
															"sid": 510270537806645,
															"parameters": {
																"instance-variable": "currentMana",
																"comparison": 5,
																"value": "MANA_COST"
															}
														},
														{
															"id": "is-boolean-instance-variable-set",
															"objectClass": "player",
															"sid": 653889920437975,
															"parameters": {
																"instance-variable": "busyCastingAbility"
															},
															"isInverted": true
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "must have enough mana"
														},
														{
															"id": "set-boolean-instvar",
															"objectClass": "player",
															"sid": 248245335814104,
															"parameters": {
																"instance-variable": "busyCastingAbility",
																"value": "true"
															}
														},
														{
															"id": "subtract-from-instvar",
															"objectClass": "player",
															"sid": 678273584131057,
															"parameters": {
																"instance-variable": "currentMana",
																"value": "MANA_COST"
															}
														},
														{
															"id": "stop",
															"objectClass": "player",
															"sid": 239461193094950,
															"behaviorType": "MoveTo"
														},
														{
															"id": "reset-eventvar",
															"objectClass": "System",
															"sid": 935960032255615,
															"parameters": {
																"variable": "uidOfClicked"
															}
														},
														{
															"callFunction": "updateFacing",
															"sid": 296866015406469,
															"parameters": [
																"mouse.X",
																"mouse.Y"
															]
														},
														{
															"id": "set-enabled",
															"objectClass": "player",
															"sid": 612222422260205,
															"behaviorType": "MoveTo",
															"parameters": {
																"enabled": false
															}
														},
														{
															"id": "set-group-active",
															"objectClass": "System",
															"sid": 409798389243829,
															"parameters": {
																"group-name": "\"movement and interaction\"",
																"state": "deactivated"
															}
														},
														{
															"id": "set-group-active",
															"objectClass": "System",
															"sid": 682023312190514,
															"parameters": {
																"group-name": "\"abilities\"",
																"state": "deactivated"
															}
														},
														{
															"id": "set-group-active",
															"objectClass": "System",
															"sid": 384272519592776,
															"parameters": {
																"group-name": "\"facings\"",
																"state": "deactivated"
															}
														},
														{
															"callFunction": "updateAnimation",
															"sid": 537424289006285,
															"parameters": [
																"\"kick\"",
																"player.actionSpeed",
																"\"playFromBeginning\""
															]
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 818326524867641,
															"parameters": {
																"variable": "waitPeriod",
																"value": "MANIFESTATION_FRAME / body.AnimationSpeed"
															}
														},
														{
															"id": "wait",
															"objectClass": "System",
															"sid": 895879469763713,
															"parameters": {
																"seconds": "waitPeriod"
															}
														},
														{
															"id": "create-object",
															"objectClass": "System",
															"sid": 443918835331804,
															"parameters": {
																"object-to-create": "projectile",
																"layer": "\"mechanics\"",
																"x": "player.X",
																"y": "player.Y",
																"create-hierarchy": false,
																"template-name": "\"\""
															}
														}
													],
													"sid": 470932471079745,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "evaluate-expression",
																	"objectClass": "System",
																	"sid": 391070567208621,
																	"parameters": {
																		"value": "Functions.isAnimationPlaying(\"block\")"
																	},
																	"isInverted": true
																},
																{
																	"id": "evaluate-expression",
																	"objectClass": "System",
																	"sid": 609875190768985,
																	"parameters": {
																		"value": "Functions.isAnimationPlaying(\"hit\")"
																	},
																	"isInverted": true
																}
															],
															"actions": [
																{
																	"id": "create-object",
																	"objectClass": "System",
																	"sid": 310106652557478,
																	"parameters": {
																		"object-to-create": "projectile",
																		"layer": "\"mechanics\"",
																		"x": "player.X",
																		"y": "player.Y",
																		"create-hierarchy": false,
																		"template-name": "\"\""
																	}
																}
															],
															"sid": 414752770000024,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "pick-last-created",
																			"objectClass": "System",
																			"sid": 597749994349055,
																			"parameters": {
																				"object": "projectile"
																			}
																		}
																	],
																	"actions": [
																		{
																			"id": "add-child",
																			"objectClass": "player",
																			"sid": 520565066565259,
																			"parameters": {
																				"child": "projectile",
																				"transform-x": false,
																				"transform-y": false,
																				"transform-w": false,
																				"transform-h": false,
																				"transform-a": false,
																				"transform-o": false,
																				"transform-z-elevation": false,
																				"transform-visibility": false,
																				"destroy-with-parent": true
																			}
																		},
																		{
																			"id": "set-boolean-instvar",
																			"objectClass": "projectile",
																			"sid": 271060225105923,
																			"parameters": {
																				"instance-variable": "isMelee",
																				"value": "true"
																			}
																		},
																		{
																			"id": "set-boolean-instvar",
																			"objectClass": "projectile",
																			"sid": 419687056987356,
																			"parameters": {
																				"instance-variable": "piercing",
																				"value": "true"
																			}
																		},
																		{
																			"id": "set-boolean-instvar",
																			"objectClass": "projectile",
																			"sid": 607413954843359,
																			"parameters": {
																				"instance-variable": "enabled",
																				"value": "true"
																			}
																		},
																		{
																			"id": "set-instvar-value",
																			"objectClass": "projectile",
																			"sid": 665786932956909,
																			"parameters": {
																				"instance-variable": "range",
																				"value": "RANGE"
																			}
																		},
																		{
																			"type": "comment",
																			"text": "Extract the multiplier from the description in the abilities table"
																		},
																		{
																			"id": "set-instvar-value",
																			"objectClass": "projectile",
																			"sid": 136213231534434,
																			"parameters": {
																				"instance-variable": "smashDamage",
																				"value": "player.smashDamage"
																			}
																		},
																		{
																			"id": "set-instvar-value",
																			"objectClass": "projectile",
																			"sid": 897154558312497,
																			"parameters": {
																				"instance-variable": "knockbackDistance",
																				"value": "100"
																			}
																		},
																		{
																			"id": "set-instvar-value",
																			"objectClass": "projectile",
																			"sid": 620154886937640,
																			"parameters": {
																				"instance-variable": "knockbackSpeed",
																				"value": "500"
																			}
																		},
																		{
																			"id": "set-width",
																			"objectClass": "projectile",
																			"sid": 365136522910385,
																			"parameters": {
																				"width": "SIZE"
																			}
																		},
																		{
																			"id": "set-height",
																			"objectClass": "projectile",
																			"sid": 695102876554915,
																			"parameters": {
																				"height": "Self.Width / ISOMETRIC_DIVIDER"
																			}
																		},
																		{
																			"id": "set-angle-of-motion",
																			"objectClass": "projectile",
																			"sid": 239889425746832,
																			"behaviorType": "Bullet",
																			"parameters": {
																				"angle": "player.MoveTo.MovingAngle"
																			}
																		},
																		{
																			"id": "set-speed",
																			"objectClass": "projectile",
																			"sid": 319383070954201,
																			"behaviorType": "Bullet",
																			"parameters": {
																				"speed": "Functions.isometrify(PROJECTILE_SPEED, Self.Bullet.AngleOfMotion)"
																			}
																		},
																		{
																			"id": "wait",
																			"objectClass": "System",
																			"sid": 788449335589214,
																			"parameters": {
																				"seconds": "body.AnimationFrameCount / body.AnimationSpeed - waitPeriod"
																			}
																		}
																	],
																	"sid": 936133207609971,
																	"children": [
																		{
																			"eventType": "block",
																			"conditions": [
																				{
																					"id": "compare-instance-variable",
																					"objectClass": "player",
																					"sid": 742078490854702,
																					"parameters": {
																						"instance-variable": "currentHealth",
																						"comparison": 4,
																						"value": "0"
																					}
																				},
																				{
																					"id": "evaluate-expression",
																					"objectClass": "System",
																					"sid": 299667508880840,
																					"parameters": {
																						"value": "Functions.isAnimationPlaying(\"block\")"
																					},
																					"isInverted": true
																				},
																				{
																					"id": "evaluate-expression",
																					"objectClass": "System",
																					"sid": 338251291243968,
																					"parameters": {
																						"value": "Functions.isAnimationPlaying(\"hit\")"
																					},
																					"isInverted": true
																				}
																			],
																			"actions": [
																				{
																					"id": "set-enabled",
																					"objectClass": "player",
																					"sid": 546799945386880,
																					"behaviorType": "MoveTo",
																					"parameters": {
																						"enabled": true
																					}
																				},
																				{
																					"id": "set-group-active",
																					"objectClass": "System",
																					"sid": 894746996766361,
																					"parameters": {
																						"group-name": "\"movement and interaction\"",
																						"state": "activated"
																					}
																				},
																				{
																					"id": "set-group-active",
																					"objectClass": "System",
																					"sid": 198919939608791,
																					"parameters": {
																						"group-name": "\"abilities\"",
																						"state": "activated"
																					}
																				},
																				{
																					"id": "set-group-active",
																					"objectClass": "System",
																					"sid": 174729808730409,
																					"parameters": {
																						"group-name": "\"facings\"",
																						"state": "activated"
																					}
																				},
																				{
																					"callFunction": "updateAnimation",
																					"sid": 992208017771673,
																					"parameters": [
																						"\"idle\"",
																						"player.movementSpeed / ANIMATION_DIVISOR",
																						"\"playFromBeginning\""
																					]
																				},
																				{
																					"id": "set-boolean-instvar",
																					"objectClass": "player",
																					"sid": 440150709431596,
																					"parameters": {
																						"instance-variable": "busyCastingAbility",
																						"value": "false"
																					}
																				}
																			],
																			"sid": 829721577298684
																		},
																		{
																			"eventType": "block",
																			"conditions": [
																				{
																					"id": "else",
																					"objectClass": "System",
																					"sid": 971557592141037
																				}
																			],
																			"actions": [
																				{
																					"id": "set-boolean-instvar",
																					"objectClass": "player",
																					"sid": 890180383506253,
																					"parameters": {
																						"instance-variable": "busyCastingAbility",
																						"value": "false"
																					}
																				}
																			],
																			"sid": 673095457181871
																		}
																	]
																}
															]
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "else",
																	"objectClass": "System",
																	"sid": 756131098898561
																}
															],
															"actions": [
																{
																	"id": "set-boolean-instvar",
																	"objectClass": "player",
																	"sid": 368916695785397,
																	"parameters": {
																		"instance-variable": "busyCastingAbility",
																		"value": "false"
																	}
																}
															],
															"sid": 683131791229827
														}
													]
												}
											]
										}
									],
									"sid": 111814043891473
								}
							],
							"sid": 694140029841149
						}
					],
					"sid": 600857244900806
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "animations",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 692409938657133,
									"parameters": {
										"value": "player.X <> player.lastX | player.Y <> player.lastY"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "...if they were not where they were last tick, set their animation appropriately. Using the moveTo 'Is moving' condition causes the player to continue the walking animation when grinding into solids."
								},
								{
									"id": "set-instvar-value",
									"objectClass": "player",
									"sid": 208232200302105,
									"parameters": {
										"instance-variable": "lastX",
										"value": "Self.X"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "player",
									"sid": 127638597976387,
									"parameters": {
										"instance-variable": "lastY",
										"value": "Self.Y"
									}
								}
							],
							"sid": 488064512871359,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 112756392308528,
											"parameters": {
												"value": "Functions.isAnimationPlaying(\"idle\")\n"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "TODO: This won't work if we have an ability we can cancel by moving."
										},
										{
											"type": "comment",
											"text": "if they were idling, start the animation from the beginning"
										},
										{
											"callFunction": "updateAnimation",
											"sid": 578053085308020,
											"parameters": [
												"\"walk\"",
												"player.movementSpeed / ANIMATION_DIVISOR",
												"\"playFromBeginning\""
											]
										}
									],
									"sid": 189926063793734
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 133619502888419
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 840383287387578,
											"parameters": {
												"value": "Functions.isAnimationPlaying(\"walk\")\n"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if they were already walking, play the animation from the current frame"
										},
										{
											"callFunction": "updateAnimation",
											"sid": 936336099945621,
											"parameters": [
												"\"walk\"",
												"player.movementSpeed / ANIMATION_DIVISOR",
												"\"playFromCurrentFrame\""
											]
										}
									],
									"sid": 903812004404733
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 833216857476881
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 507327242231627,
									"parameters": {
										"instance-variable": "currentHealth",
										"comparison": 4,
										"value": "0"
									}
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 761965253308537,
									"parameters": {
										"value": "Functions.isAnimationPlaying(\"walk\")\n"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "If the player isn't moving and not dead, and they were previously walking, make him start idling."
								},
								{
									"callFunction": "updateAnimation",
									"sid": 344445240607023,
									"parameters": [
										"\"idle\"",
										"player.movementSpeed / ANIMATION_DIVISOR",
										"\"playFromBeginning\""
									]
								},
								{
									"id": "reset-eventvar",
									"objectClass": "System",
									"sid": 484329641237898,
									"parameters": {
										"variable": "uidOfClicked"
									}
								}
							],
							"sid": 626061452344026
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "every-tick",
									"objectClass": "System",
									"sid": 279353670384368
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "gear",
									"sid": 732369910470954,
									"parameters": {
										"animation": "body.AnimationName",
										"from": "current-frame"
									}
								},
								{
									"id": "set-animation-frame",
									"objectClass": "gear",
									"sid": 293859831908245,
									"parameters": {
										"frame-number": "body.AnimationFrame"
									}
								},
								{
									"type": "comment",
									"text": "Compensate for floating point math: https://github.com/Scirra/Construct-3-bugs/issues/5895"
								},
								{
									"id": "set-scale",
									"objectClass": "body",
									"sid": 375932065893818,
									"parameters": {
										"scale": "1"
									}
								},
								{
									"id": "set-scale",
									"objectClass": "gear",
									"sid": 454439231883482,
									"parameters": {
										"scale": "1"
									}
								}
							],
							"sid": 560213321966011
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-any-animation-finished",
									"objectClass": "body",
									"sid": 345214054398777
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "See bookmarked comment in Enemy Behaviors for the reason behind using triggers instead of in-line waits."
								}
							],
							"sid": 923030549317447,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 294543707497140,
											"parameters": {
												"value": "Functions.isAnimationPlaying(\"die\")\n"
											}
										}
									],
									"actions": [
										{
											"callFunction": "changeLayout",
											"sid": 615714761735097,
											"disabled": true,
											"parameters": [
												"\"mainMenu\""
											]
										}
									],
									"sid": 379379093595967
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 382961681121119,
											"parameters": {
												"value": "Functions.isAnimationPlaying(\"block\")"
											}
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 797564043698334,
											"parameters": {
												"value": "Functions.isAnimationPlaying(\"hit\")"
											}
										}
									],
									"actions": [],
									"sid": 408650609700262,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "player",
													"sid": 225688108630369,
													"parameters": {
														"instance-variable": "currentHealth",
														"comparison": 4,
														"value": "0"
													}
												}
											],
											"actions": [
												{
													"callFunction": "restorePlayerControl",
													"sid": 216350127234151
												}
											],
											"sid": 213628308730616
										}
									],
									"isOrBlock": true
								}
							]
						},
						{
							"functionName": "channeledAnimation",
							"functionDescription": "Play an animation where the player is uncontrollable.",
							"functionCategory": "player",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "animationName",
									"type": "string",
									"initialValue": "",
									"comment": "The animation to play.",
									"sid": 234166732811254
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "play-at-object-by-name",
									"objectClass": "Audio",
									"sid": 154768264294975,
									"parameters": {
										"folder": "sounds",
										"audio-file-name": "body.ObjectTypeName & \"_\" & animationName",
										"loop": "not-looping",
										"volume": "0",
										"object": "player",
										"inner-angle": "360",
										"outer-angle": "360",
										"outer-gain": "0",
										"tag-optional": "\"\""
									}
								},
								{
									"callFunction": "removePlayerControl",
									"sid": 758299278727292
								},
								{
									"callFunction": "updateAnimation",
									"sid": 459991847509767,
									"parameters": [
										"animationName",
										"player.actionSpeed",
										"\"playFromBeginning\""
									]
								}
							],
							"sid": 317965027202122
						},
						{
							"functionName": "updateAnimation",
							"functionDescription": "Change the player's animation.",
							"functionCategory": "player",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "animationName",
									"type": "string",
									"initialValue": "",
									"comment": "which animation to play",
									"sid": 308447533896746
								},
								{
									"name": "animationSpeed",
									"type": "number",
									"initialValue": "30",
									"comment": "how fast the animation plays",
									"sid": 938843169588506
								},
								{
									"name": "startPoint",
									"type": "string",
									"initialValue": "playFromBeginning",
									"comment": "",
									"sid": 930634823243599
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"type": "comment",
									"text": "startPoint is a string because it needs to get passed from an ability. Only update the animation if the player isn't current blocking or getting hitstunned."
								}
							],
							"sid": 910128125988487,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 393489959159725,
											"parameters": {
												"variable": "startPoint",
												"comparison": 0,
												"value": "\"playFromBeginning\""
											}
										}
									],
									"actions": [],
									"sid": 139271324774243,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-overlapping-another-object",
													"objectClass": "player",
													"sid": 723462591529865,
													"parameters": {
														"object": "nonCombatArea"
													}
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "body",
													"sid": 843331586165991,
													"parameters": {
														"animation": "animationName & \"Unarmed_\" & player.degrees",
														"from": "beginning"
													}
												}
											],
											"sid": 292599464920827
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 499061105001770
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "body",
													"sid": 946758532313313,
													"parameters": {
														"animation": "animationName & \"_\" & player.degrees",
														"from": "beginning"
													}
												}
											],
											"sid": 709765348373749
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 995489158549756
										}
									],
									"actions": [],
									"sid": 967622134338678,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-overlapping-another-object",
													"objectClass": "player",
													"sid": 623837557229785,
													"parameters": {
														"object": "nonCombatArea"
													}
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "body",
													"sid": 183192181446713,
													"parameters": {
														"animation": "animationName & \"Unarmed_\" & player.degrees",
														"from": "current-frame"
													}
												}
											],
											"sid": 602971606622350
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 629140960496298
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "body",
													"sid": 576241052775671,
													"parameters": {
														"animation": "animationName & \"_\" & player.degrees",
														"from": "current-frame"
													}
												}
											],
											"sid": 663776914210048
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"type": "comment",
											"text": "this has to be done after the animation is set, so it goes in a blank event, instead of repeating it"
										},
										{
											"id": "set-animation-speed",
											"objectClass": "body",
											"sid": 340496637210600,
											"parameters": {
												"speed": "animationSpeed"
											}
										}
									],
									"sid": 958593614177243
								}
							]
						},
						{
							"functionName": "isAnimationPlaying",
							"functionDescription": "Whether or not the player's body is currently playing the specified animation.",
							"functionCategory": "player",
							"functionReturnType": "number",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "animationName",
									"type": "string",
									"initialValue": "",
									"comment": "The animation name to check for.",
									"sid": 111044247074623
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-function-return-value",
									"objectClass": "Functions",
									"sid": 534888560537717,
									"parameters": {
										"value": "Functions.contains(body.AnimationName, animationName)"
									}
								}
							],
							"sid": 840288827474922
						}
					],
					"sid": 121151613548917
				},
				{
					"eventType": "comment",
					"text": "When we add other classes, here's what we'll do: make a (basically) empty layout that we go to after the player chooses their class. Don't unhide the loading screen so the player never sees it. There, we spawn the player, default gear, shadows, and play ability icons. Once that all has loaded, we transition to the real first layer. All the aforementioned objects are global, so they'll come over too."
				}
			],
			"sid": 254080374675516
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "overlay",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "ability bar",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-click",
									"objectClass": "mouse",
									"sid": 166153498320785,
									"parameters": {
										"mouse-button": "left",
										"click-type": "clicked"
									}
								},
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 787939671581480,
									"parameters": {
										"object": "abilitySlot"
									},
									"isInverted": true
								},
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 521994085679042,
									"parameters": {
										"object": "statue"
									},
									"isInverted": true
								},
								{
									"id": "layer-is-visible",
									"objectClass": "System",
									"sid": 645893643706577,
									"parameters": {
										"layer": "\"abilitySelector\""
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "close the ability selector if we click anywhere that's not an ability or statue"
								},
								{
									"callFunction": "closeLayer",
									"sid": 266146458793314,
									"parameters": [
										"\"abilitySelector\""
									]
								},
								{
									"callFunction": "setCoverHightlight",
									"sid": 631288369787676,
									"parameters": [
										false
									]
								}
							],
							"sid": 520831656298993
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-button-released",
									"objectClass": "mouse",
									"sid": 230212459618653,
									"parameters": {
										"mouse-button": "left"
									}
								},
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 116681259991173,
									"parameters": {
										"object": "ability"
									}
								},
								{
									"id": "is-animation-playing",
									"objectClass": "ability",
									"sid": 163607170891846,
									"parameters": {
										"animation": "\"none\""
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "when we click an ability that's not set to 'none'..."
								},
								{
									"type": "comment",
									"text": "left mouse released instead of 'on click', so when the ability selector is closed after choosing an ability, the click isn't also registered and moves the player"
								}
							],
							"sid": 888951027546163,
							"children": [
								{
									"eventType": "variable",
									"name": "abilityUID",
									"type": "number",
									"initialValue": "0",
									"comment": "the ability's UID, use solely to set the glow effect",
									"isStatic": true,
									"isConstant": false,
									"sid": 726146004487848
								},
								{
									"eventType": "variable",
									"name": "currentAbility",
									"type": "string",
									"initialValue": "",
									"comment": "the ability that's current chosen for the displayed class of abilities",
									"isStatic": true,
									"isConstant": false,
									"sid": 998769302146377
								},
								{
									"eventType": "variable",
									"name": "selectedAbility",
									"type": "string",
									"initialValue": "",
									"comment": "The ability in the ability selector that was selected",
									"isStatic": true,
									"isConstant": false,
									"sid": 451349966261905
								},
								{
									"eventType": "variable",
									"name": "currentCategory",
									"type": "string",
									"initialValue": "",
									"comment": "the class of abilities that's currently being displayed",
									"isStatic": true,
									"isConstant": false,
									"sid": 672748660792463
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-on-layer",
											"objectClass": "ability",
											"sid": 131501295979639,
											"parameters": {
												"layer": "\"abilityBar\""
											}
										},
										{
											"id": "pick-parent",
											"objectClass": "ability",
											"sid": 528251545987983,
											"parameters": {
												"parent": "abilitySlot",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if it's on the ability bar..."
										}
									],
									"sid": 208998898503068,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "layer-is-visible",
													"objectClass": "System",
													"sid": 925518533361833,
													"parameters": {
														"layer": "\"abilitySelector\""
													}
												},
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 996328531262219,
													"parameters": {
														"variable": "currentCategory",
														"comparison": 0,
														"value": "Functions.arrayLookup(abilitiesArray.ObjectTypeName, ability.AnimationName, \"category\")"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "if the class of the clicked ability is the one that's already being displayed, just close the ability selector"
												},
												{
													"callFunction": "closeLayer",
													"sid": 851728876144982,
													"parameters": [
														"\"abilitySelector\""
													]
												},
												{
													"callFunction": "setCoverHightlight",
													"sid": 386774398821656,
													"parameters": [
														false
													]
												}
											],
											"sid": 816106086978843
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 804338414293539
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "otherwise, open the ability selector and show the relevant abilities"
												},
												{
													"callFunction": "setCoverHightlight",
													"sid": 177523294220788,
													"parameters": [
														true
													]
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 988164220318512,
													"parameters": {
														"variable": "abilityUID",
														"value": "ability.UID"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 605454855294263,
													"parameters": {
														"variable": "currentAbility",
														"value": "ability.AnimationName"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 331646563762280,
													"parameters": {
														"variable": "currentCategory",
														"value": "Functions.arrayLookup(abilitiesArray.ObjectTypeName, ability.AnimationName, \"category\")"
													}
												},
												{
													"callFunction": "openLayer",
													"sid": 671087962683915,
													"parameters": [
														"\"abilitySelector\""
													]
												}
											],
											"sid": 552225060590609,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "for",
															"objectClass": "System",
															"sid": 770594899934171,
															"parameters": {
																"name": "\"\"",
																"start-index": "1",
																"end-index": "abilitiesArray.Height - 1"
															}
														},
														{
															"id": "compare-at-xy",
															"objectClass": "abilitiesArray",
															"sid": 536294436707036,
															"parameters": {
																"x": "Functions.getColumnNumber(abilitiesArray.ObjectTypeName, \"category\")",
																"y": "loopindex",
																"comparison": 0,
																"value": "currentCategory"
															}
														},
														{
															"id": "compare-at-xy",
															"objectClass": "abilitiesArray",
															"sid": 747483695361926,
															"parameters": {
																"x": "Functions.getColumnNumber(abilitiesArray.ObjectTypeName, \"level\")",
																"y": "loopindex",
																"comparison": 3,
																"value": "player.level"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "populate the abilityOptionsArray with abilities that are of the matching class and meet the level requirement"
														},
														{
															"type": "comment",
															"text": "TODO: If the player levels up with the ability selector open, any new abilities won't show up. Is it even possible to level up with the ability selector open? Should we just close the ability selector on level-up?"
														},
														{
															"id": "push",
															"objectClass": "abilityOptionsArray",
															"sid": 257492307908906,
															"parameters": {
																"where": "front",
																"value": "abilitiesArray.At(Functions.getColumnNumber(abilitiesArray.ObjectTypeName, \"simpleName\"), loopindex)",
																"axis": "x"
															}
														}
													],
													"sid": 708255959243154
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-all",
															"objectClass": "System",
															"sid": 982520047288136,
															"parameters": {
																"object": "ability"
															}
														}
													],
													"actions": [],
													"sid": 728722378298061,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "pick-by-comparison",
																	"objectClass": "System",
																	"sid": 926374187397733,
																	"parameters": {
																		"object": "ability",
																		"expression": "ability.LayerName",
																		"comparison": 0,
																		"value": "\"abilitySelector\""
																	}
																},
																{
																	"id": "for-each",
																	"objectClass": "System",
																	"sid": 103986784995558,
																	"parameters": {
																		"object": "ability"
																	}
																}
															],
															"actions": [],
															"sid": 622889163515134,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "is-empty",
																			"objectClass": "abilityOptionsArray",
																			"sid": 218549028970161
																		}
																	],
																	"actions": [
																		{
																			"id": "set-animation",
																			"objectClass": "ability",
																			"sid": 741180166312704,
																			"parameters": {
																				"animation": "\"none\"",
																				"from": "beginning"
																			}
																		}
																	],
																	"sid": 208781154702523
																},
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "else",
																			"objectClass": "System",
																			"sid": 421791918312952
																		}
																	],
																	"actions": [
																		{
																			"id": "set-animation",
																			"objectClass": "ability",
																			"sid": 277887591088732,
																			"parameters": {
																				"animation": "abilityOptionsArray.Back",
																				"from": "beginning"
																			}
																		},
																		{
																			"id": "pop",
																			"objectClass": "abilityOptionsArray",
																			"sid": 771062483134409,
																			"parameters": {
																				"where": "back",
																				"axis": "x"
																			}
																		}
																	],
																	"sid": 704351852125970
																},
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "pick-by-comparison",
																			"objectClass": "System",
																			"sid": 992399196919024,
																			"parameters": {
																				"object": "ability",
																				"expression": "ability.AnimationName",
																				"comparison": 0,
																				"value": "currentAbility"
																			}
																		}
																	],
																	"actions": [
																		{
																			"id": "set-effect-enabled",
																			"objectClass": "ability",
																			"sid": 238085019319847,
																			"parameters": {
																				"mode": "enable",
																				"effect": "\"Grayscale\""
																			}
																		}
																	],
																	"sid": 954936503658220
																},
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "pick-by-comparison",
																			"objectClass": "System",
																			"sid": 148325386910517,
																			"parameters": {
																				"object": "ability",
																				"expression": "ability.AnimationName",
																				"comparison": 1,
																				"value": "currentAbility"
																			}
																		}
																	],
																	"actions": [
																		{
																			"id": "set-effect-enabled",
																			"objectClass": "ability",
																			"sid": 145603175504239,
																			"parameters": {
																				"mode": "disable",
																				"effect": "\"Grayscale\""
																			}
																		}
																	],
																	"sid": 674591081863892
																}
															]
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "pick-by-comparison",
																	"objectClass": "System",
																	"sid": 152656832815296,
																	"parameters": {
																		"object": "ability",
																		"expression": "ability.UID",
																		"comparison": 1,
																		"value": "abilityUID"
																	}
																},
																{
																	"id": "pick-all",
																	"objectClass": "System",
																	"sid": 784947759337350,
																	"parameters": {
																		"object": "abilitySlot"
																	}
																},
																{
																	"id": "pick-parent",
																	"objectClass": "ability",
																	"sid": 323380240398685,
																	"parameters": {
																		"parent": "abilitySlot",
																		"which": "own"
																	}
																}
															],
															"actions": [
																{
																	"callFunction": "setCoverHightlight",
																	"sid": 744253514949944,
																	"parameters": [
																		false
																	]
																}
															],
															"sid": 620014128918085
														}
													]
												}
											]
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 197310871060374
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if we clicked on an ability option..."
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 727347019975754,
											"parameters": {
												"variable": "selectedAbility",
												"value": "ability.AnimationName"
											}
										},
										{
											"callFunction": "setCoverHightlight",
											"sid": 567073269370095,
											"parameters": [
												false
											]
										},
										{
											"callFunction": "closeLayer",
											"sid": 127468865291980,
											"parameters": [
												"\"abilitySelector\""
											]
										}
									],
									"sid": 913381454522330,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-all",
													"objectClass": "System",
													"sid": 855871030350454,
													"parameters": {
														"object": "ability"
													}
												},
												{
													"id": "is-animation-playing",
													"objectClass": "ability",
													"sid": 751269906242521,
													"parameters": {
														"animation": "currentAbility"
													}
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "ability",
													"sid": 741897931232925,
													"parameters": {
														"animation": "selectedAbility",
														"from": "beginning"
													}
												}
											],
											"sid": 923600810680650
										}
									]
								}
							]
						},
						{
							"functionName": "setCoverHightlight",
							"functionDescription": "Turns the highlight of an ability cover on or off",
							"functionCategory": "menus",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "on",
									"type": "boolean",
									"initialValue": "false",
									"comment": "whether to turn the highlight on or off",
									"sid": 629415599733892
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 342338163426331,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 931218441751746,
											"parameters": {
												"variable": "on"
											}
										}
									],
									"actions": [
										{
											"id": "set-effect-enabled",
											"objectClass": "abilitySlot",
											"sid": 654147713762156,
											"parameters": {
												"mode": "enable",
												"effect": "\"Brightness\""
											}
										}
									],
									"sid": 611467681715653
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 294577515846640
										}
									],
									"actions": [
										{
											"id": "set-effect-enabled",
											"objectClass": "abilitySlot",
											"sid": 711173797562710,
											"parameters": {
												"mode": "disable",
												"effect": "\"Brightness\""
											}
										}
									],
									"sid": 902932743069428
								}
							]
						}
					],
					"sid": 600010803561002
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "menus",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "layer-is-visible",
									"objectClass": "System",
									"sid": 982850324259442,
									"parameters": {
										"layer": "inventoryMenuStatue.LayerName"
									}
								},
								{
									"id": "compare-text",
									"objectClass": "coinsTotal",
									"sid": 252604516247867,
									"parameters": {
										"text-to-compare": "str(player.coins)",
										"case-sensitivity": "ignore-case"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Only update the displayed value for coins when the inventory menu is visible, and the current amount isn't accurate."
								},
								{
									"id": "set-text",
									"objectClass": "coinsTotal",
									"sid": 307756311885998,
									"parameters": {
										"text": "player.coins"
									}
								}
							],
							"sid": 939991445799526
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "layer-is-visible",
									"objectClass": "System",
									"sid": 482827758455036,
									"parameters": {
										"layer": "\"characterMenu\""
									}
								}
							],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "maxHealth",
									"sid": 796437786557423,
									"parameters": {
										"text": "player.maxHealth"
									}
								},
								{
									"id": "set-text",
									"objectClass": "healthRegen",
									"sid": 891067517392227,
									"parameters": {
										"text": "player.healthRegen & \"/second\""
									}
								},
								{
									"id": "set-text",
									"objectClass": "actionSpeed",
									"sid": 670237157538332,
									"parameters": {
										"text": "player.actionSpeed"
									}
								},
								{
									"id": "set-text",
									"objectClass": "attackRange",
									"sid": 470649090255748,
									"parameters": {
										"text": "player.attackRange"
									}
								},
								{
									"id": "set-text",
									"objectClass": "pickupRange",
									"sid": 433549745548644,
									"parameters": {
										"text": "player.pickupRange"
									}
								},
								{
									"id": "set-text",
									"objectClass": "movementSpeed",
									"sid": 181346014050731,
									"parameters": {
										"text": "player.movementSpeed"
									}
								},
								{
									"id": "set-text",
									"objectClass": "stunThreshold",
									"sid": 999319739569214,
									"parameters": {
										"text": "player.hitstunThreshold & \"%\""
									}
								},
								{
									"id": "set-text",
									"objectClass": "blockChance",
									"sid": 391527888240095,
									"parameters": {
										"text": "player.blockChance & \"%\""
									}
								},
								{
									"id": "set-text",
									"objectClass": "maxMana",
									"sid": 382263015663459,
									"parameters": {
										"text": "player.maxMana"
									}
								},
								{
									"id": "set-text",
									"objectClass": "manaRegen",
									"sid": 773702094055869,
									"parameters": {
										"text": "player.manaRegen & \"/second\""
									}
								},
								{
									"id": "set-text",
									"objectClass": "physicalResistance",
									"sid": 748330157098833,
									"parameters": {
										"text": "player.physicalResistance  & \"%\""
									}
								},
								{
									"id": "set-text",
									"objectClass": "coldResistance",
									"sid": 238460396253314,
									"parameters": {
										"text": "player.coldResistance  & \"%\""
									}
								},
								{
									"id": "set-text",
									"objectClass": "fireResistance",
									"sid": 127099995750770,
									"parameters": {
										"text": "player.fireResistance & \"%\""
									}
								},
								{
									"id": "set-text",
									"objectClass": "lightningResistance",
									"sid": 875807040171870,
									"parameters": {
										"text": "player.lightningResistance & \"%\""
									}
								},
								{
									"id": "set-text",
									"objectClass": "arcaneResistance",
									"sid": 885663782193657,
									"parameters": {
										"text": "player.arcaneResistance & \"%\""
									}
								},
								{
									"id": "set-text",
									"objectClass": "corruptResistance",
									"sid": 228165600975839,
									"parameters": {
										"text": "player.corruptResistance & \"%\""
									}
								},
								{
									"id": "set-text",
									"objectClass": "slashDamage",
									"sid": 416334094982596,
									"parameters": {
										"text": "player.slashDamage"
									}
								},
								{
									"id": "set-text",
									"objectClass": "smashDamage",
									"sid": 167849782919164,
									"parameters": {
										"text": "player.smashDamage"
									}
								},
								{
									"id": "set-text",
									"objectClass": "stabDamage",
									"sid": 510369319232670,
									"parameters": {
										"text": "player.stabDamage"
									}
								},
								{
									"id": "set-text",
									"objectClass": "coldDamage",
									"sid": 455186547121666,
									"parameters": {
										"text": "player.coldDamage"
									}
								},
								{
									"id": "set-text",
									"objectClass": "fireDamage",
									"sid": 519317805663518,
									"parameters": {
										"text": "player.fireDamage"
									}
								},
								{
									"id": "set-text",
									"objectClass": "lightningDamage",
									"sid": 572268967804158,
									"parameters": {
										"text": "player.lightningDamage"
									}
								},
								{
									"id": "set-text",
									"objectClass": "arcaneDamage",
									"sid": 237068647164323,
									"parameters": {
										"text": "player.arcaneDamage"
									}
								},
								{
									"id": "set-text",
									"objectClass": "holyDamage",
									"sid": 771136631524764,
									"parameters": {
										"text": "player.holyDamage"
									}
								}
							],
							"sid": 320596497522521
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "layer-is-visible",
									"objectClass": "System",
									"sid": 344324233789704,
									"parameters": {
										"layer": "\"settingsMenu\""
									},
									"isInverted": true
								},
								{
									"id": "is-any-playing",
									"objectClass": "statue",
									"sid": 827274792490015,
									"behaviorType": "Tween",
									"isInverted": true
								},
								{
									"id": "is-dragging",
									"objectClass": "statue",
									"sid": 784082423952732,
									"behaviorType": "DragDrop",
									"isInverted": true
								},
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 946373321700564,
									"parameters": {
										"first-value": "statue.PickedCount",
										"comparison": 0,
										"second-value": "statue.Count"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "you can only open regular menus when the settings menu isn't open, you currently aren't rearranging menus, there's no open dialog, and no other menus are currently fading in or out"
								}
							],
							"sid": 589869390653306,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-key-pressed",
											"objectClass": "keyboard",
											"sid": 311596851577209,
											"parameters": {
												"key": 67
											}
										}
									],
									"actions": [
										{
											"callFunction": "ManageMenuWithKey",
											"sid": 558965859470762,
											"parameters": [
												"\"equippedMenu\""
											]
										}
									],
									"sid": 327082099075401,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "layer-is-visible",
													"objectClass": "System",
													"sid": 520281694235723,
													"parameters": {
														"layer": "\"merchantMenu\""
													}
												}
											],
											"actions": [
												{
													"callFunction": "closeLayer",
													"sid": 265640195185106,
													"parameters": [
														"\"merchantMenu\""
													]
												}
											],
											"sid": 258013987645693
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-key-pressed",
											"objectClass": "keyboard",
											"sid": 394983373843370,
											"parameters": {
												"key": 80
											}
										}
									],
									"actions": [
										{
											"callFunction": "ManageMenuWithKey",
											"sid": 131314137611475,
											"parameters": [
												"\"characterMenu\""
											]
										}
									],
									"sid": 533869688280642
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-key-pressed",
											"objectClass": "keyboard",
											"sid": 565494016513724,
											"parameters": {
												"key": 73
											}
										}
									],
									"actions": [
										{
											"callFunction": "ManageMenuWithKey",
											"sid": 303302744057056,
											"parameters": [
												"\"inventoryMenu\""
											]
										}
									],
									"sid": 227300752950169
								},
								{
									"functionName": "ManageMenuWithKey",
									"functionDescription": "Open or close a menu with a key.",
									"functionCategory": "menus",
									"functionReturnType": "none",
									"functionCopyPicked": false,
									"functionIsAsync": false,
									"functionParameters": [
										{
											"name": "menuName",
											"type": "string",
											"initialValue": "",
											"comment": "The name of the menu to manage.",
											"sid": 569434202636859
										}
									],
									"eventType": "function-block",
									"conditions": [],
									"actions": [],
									"sid": 225147883294747,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "layer-is-visible",
													"objectClass": "System",
													"sid": 809733836006153,
													"parameters": {
														"layer": "menuName"
													}
												}
											],
											"actions": [
												{
													"callFunction": "closeLayer",
													"sid": 891183827140848,
													"parameters": [
														"menuName"
													]
												}
											],
											"sid": 921377846773585
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 175315820738506
												}
											],
											"actions": [
												{
													"callFunction": "openLayer",
													"sid": 139365913309534,
													"parameters": [
														"menuName"
													]
												}
											],
											"sid": 950490241656385
										}
									]
								}
							]
						},
						{
							"functionName": "closeLayer",
							"functionDescription": "Close the specified layer",
							"functionCategory": "menus",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "menuName",
									"type": "string",
									"initialValue": "",
									"comment": "The name of the layer to close",
									"sid": 231291736061001
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"type": "comment",
									"text": "Prevent interaction with layer while it fades out. This is crucial to prevent interaction with menus that get closed by the settings menu opening up (and thus preventing exploits where gear/abilities could be managed while the game was paused)"
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 717158898277148,
									"parameters": {
										"layer": "menuName",
										"interactive": false
									}
								},
								{
									"type": "comment",
									"text": "Don't play the menu closing sound effect for the merchant menu, or while talking to an NPC, or while the menu open sound is playing."
								},
								{
									"id": "play-by-name",
									"objectClass": "Audio",
									"sid": 535179798884341,
									"parameters": {
										"folder": "sounds",
										"audio-file-name": "menuName = \"dialog\" | Audio.PlaybackTime(\"menuOpen\") > 0 | menuName = \"merchantMenu\" ? \"\" : \"menuClose\"",
										"loop": "not-looping",
										"volume": "0",
										"stereo-pan": "0",
										"tag-optional": "\"menuClose\""
									}
								}
							],
							"sid": 475860601676582,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 272995996282725,
											"parameters": {
												"object": "statue",
												"expression": "statue.ObjectTypeName",
												"comparison": 0,
												"value": "menuName & \"Statue\""
											}
										}
									],
									"actions": [
										{
											"id": "tween-value",
											"objectClass": "statue",
											"sid": 729768240608127,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "Self.ObjectTypeName & \" \" & Self.UID & \" fade\"",
												"start-value": "100",
												"end-value": "0",
												"time": "MENU_FADE_TIME",
												"ease": "noease",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"id": "wait-for-previous-actions",
											"objectClass": "System",
											"sid": 431281652581235
										},
										{
											"id": "set-layer-visible",
											"objectClass": "System",
											"sid": 423507120488558,
											"parameters": {
												"layer": "menuName",
												"visibility": "invisible"
											}
										}
									],
									"sid": 403434950977723
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 550739162715412
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "This is used by the dialog window which doesn't have a statue"
										},
										{
											"id": "set-layer-visible",
											"objectClass": "System",
											"sid": 857955720578545,
											"parameters": {
												"layer": "menuName",
												"visibility": "invisible"
											}
										}
									],
									"sid": 687146572059198
								}
							]
						},
						{
							"functionName": "openLayer",
							"functionDescription": "Open the specified layer",
							"functionCategory": "menus",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "menuName",
									"type": "string",
									"initialValue": "",
									"comment": "The name of the layer to open",
									"sid": 228302164093831
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 284534014871021,
									"parameters": {
										"layer": "menuName",
										"interactive": true
									}
								},
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 883088108301507,
									"parameters": {
										"layer": "menuName",
										"visibility": "visible"
									}
								},
								{
									"type": "comment",
									"text": "The NPC dialog will play as soon as the dialog window opens, so the menu open sound wouldn't be necessary"
								},
								{
									"id": "play-by-name",
									"objectClass": "Audio",
									"sid": 144655623407699,
									"parameters": {
										"folder": "sounds",
										"audio-file-name": "menuName = \"dialog\" | Audio.PlaybackTime(\"menuOpen\") > 0 | menuName = \"merchantMenu\" ? \"\" : \"menuOpen\"",
										"loop": "not-looping",
										"volume": "0",
										"stereo-pan": "0",
										"tag-optional": "\"menuOpen\""
									}
								}
							],
							"sid": 667271432738870,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 983527644271143,
											"parameters": {
												"object": "statue",
												"expression": "statue.ObjectTypeName",
												"comparison": 0,
												"value": "menuName & \"Statue\""
											}
										}
									],
									"actions": [
										{
											"id": "set-layer-opacity",
											"objectClass": "System",
											"sid": 318882430883252,
											"parameters": {
												"layer": "statue.LayerName",
												"opacity": "0"
											}
										},
										{
											"id": "tween-value",
											"objectClass": "statue",
											"sid": 903982235256939,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "Self.ObjectTypeName & \" \" & Self.UID & \" fade\"",
												"start-value": "0",
												"end-value": "100",
												"time": "MENU_FADE_TIME",
												"ease": "noease",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 660169148266626
								}
							]
						}
					],
					"sid": 121445526787026
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "tooltip",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-dragging",
									"objectClass": "statue",
									"sid": 626771208311706,
									"behaviorType": "DragDrop",
									"isInverted": true
								}
							],
							"actions": [],
							"sid": 862182322119437,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-dragging",
											"objectClass": "item",
											"sid": 905850133767904,
											"behaviorType": "DragDrop",
											"isInverted": true
										},
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 653304222044674,
											"parameters": {
												"first-value": "item.Count",
												"comparison": 0,
												"second-value": "0"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "somehow 'item - is DragDrop is dragging' is neither false nor true when no Items exist"
										}
									],
									"sid": 967900307182128,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "cursor-is-over-object",
													"objectClass": "mouse",
													"sid": 353381965524915,
													"parameters": {
														"object": "item"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "TODO: Make sure this works with rings"
												},
												{
													"callFunction": "updateTooltip",
													"sid": 395853606521323,
													"parameters": [
														false,
														"item.fullName",
														"item.classRestrictions",
														"item.level",
														"item.mods",
														"item.lore",
														"item.value"
													]
												}
											],
											"sid": 447799690088387,
											"children": [
												{
													"eventType": "variable",
													"name": "typeForComparison",
													"type": "string",
													"initialValue": "",
													"comment": "The type of the gear that we want to compare",
													"isStatic": true,
													"isConstant": false,
													"sid": 938654612269956
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-on-layer",
															"objectClass": "item",
															"sid": 579029976926874,
															"parameters": {
																"layer": "\"inventoryMenu\""
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "if the item is in the inventory, compare to the relevant equipped item, if one exists"
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 315906874040765,
															"parameters": {
																"variable": "typeForComparison",
																"value": "item.type"
															}
														}
													],
													"sid": 433911383619124,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "pick-all",
																	"objectClass": "System",
																	"sid": 383413155035686,
																	"parameters": {
																		"object": "item"
																	}
																},
																{
																	"id": "pick-by-comparison",
																	"objectClass": "System",
																	"sid": 347435954906914,
																	"parameters": {
																		"object": "item",
																		"expression": "item.LayerName",
																		"comparison": 0,
																		"value": "\"equippedMenu\""
																	}
																},
																{
																	"id": "pick-by-comparison",
																	"objectClass": "System",
																	"sid": 859133754474563,
																	"parameters": {
																		"object": "item",
																		"expression": "item.type",
																		"comparison": 0,
																		"value": "typeForComparison"
																	}
																}
															],
															"actions": [
																{
																	"callFunction": "updateComparisonTooltip",
																	"sid": 418177036584371,
																	"parameters": [
																		"item.fullName",
																		"item.classRestrictions",
																		"item.level",
																		"item.mods",
																		"item.lore",
																		"item.value"
																	]
																}
															],
															"sid": 614370023859122
														}
													]
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 740320087671390
												},
												{
													"id": "cursor-is-over-object",
													"objectClass": "mouse",
													"sid": 896098241564343,
													"parameters": {
														"object": "loot"
													}
												},
												{
													"id": "is-any-playing",
													"objectClass": "loot",
													"sid": 575473710792372,
													"behaviorType": "Tween",
													"isInverted": true
												},
												{
													"id": "pick-topbottom",
													"objectClass": "loot",
													"sid": 344224226879461,
													"parameters": {
														"which": "top"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "the \"else\" is for if we drag and hold an item over a loot"
												},
												{
													"callFunction": "updateTooltip",
													"sid": 664320364953238,
													"parameters": [
														false,
														"loot.fullName",
														"loot.classRestrictions",
														"loot.level",
														"loot.mods",
														"loot.lore",
														"loot.value"
													]
												}
											],
											"sid": 815525960741839
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 393589949090668
												},
												{
													"id": "cursor-is-over-object",
													"objectClass": "mouse",
													"sid": 968992526353430,
													"parameters": {
														"object": "ability"
													}
												},
												{
													"id": "is-animation-playing",
													"objectClass": "ability",
													"sid": 416804006878313,
													"parameters": {
														"animation": "\"none\""
													},
													"isInverted": true
												}
											],
											"actions": [
												{
													"callFunction": "updateTooltip",
													"sid": 494358489125225,
													"parameters": [
														true,
														"Functions.arrayLookup(abilitiesArray.ObjectTypeName, ability.AnimationName, \"fullName\")",
														"Functions.arrayLookup(abilitiesArray.ObjectTypeName, ability.AnimationName, \"class\")",
														"int(Functions.arrayLookup(abilitiesArray.ObjectTypeName, ability.AnimationName, \"level\"))",
														"Functions.arrayLookup(abilitiesArray.ObjectTypeName, ability.AnimationName, \"description\")",
														"\"\"",
														"0"
													]
												}
											],
											"sid": 888845378678553
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 107996481350656
												},
												{
													"id": "trigger-once-while-true",
													"objectClass": "System",
													"sid": 119241200039992
												}
											],
											"actions": [
												{
													"id": "tween-one-property",
													"objectClass": "tooltip",
													"sid": 343011591349913,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "Self.ObjectTypeName & \" opacity tween\"",
														"property": "offsetOpacity",
														"end-value": "0",
														"time": "MENU_FADE_TIME",
														"ease": "noease",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												},
												{
													"id": "tween-one-property",
													"objectClass": "comparisonTooltip",
													"sid": 991437960706868,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "Self.ObjectTypeName & \" opacity tween\"",
														"property": "offsetOpacity",
														"end-value": "0",
														"time": "MENU_FADE_TIME",
														"ease": "noease",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												}
											],
											"sid": 839419771322734
										}
									],
									"isOrBlock": true
								}
							]
						},
						{
							"eventType": "variable",
							"name": "TOOLTIP_VERTICAL_PADDING",
							"type": "number",
							"initialValue": "20",
							"comment": "How far to vertically pad the tooltip so it comfortably contains all its information, in pixels.",
							"isStatic": false,
							"isConstant": true,
							"sid": 487008030740011
						},
						{
							"eventType": "variable",
							"name": "TOOLTIP_HORIZONTAL_PADDING",
							"type": "number",
							"initialValue": "50",
							"comment": "How far to horizontally pad the tooltip so it comfortably contains all its information, in pixels.",
							"isStatic": false,
							"isConstant": true,
							"sid": 494084332547451
						},
						{
							"eventType": "variable",
							"name": "TOOLTIP_VERTICAL_TEXT_PADDING",
							"type": "number",
							"initialValue": "15",
							"comment": "How far to pad the tooltip description away from the rest of the tooltip info, in pixels.",
							"isStatic": false,
							"isConstant": true,
							"sid": 628934883307504
						},
						{
							"functionName": "updateTooltip",
							"functionDescription": "update and show the tooltip with the specified information",
							"functionCategory": "menus",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "isAbility",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"sid": 644466920870083
								},
								{
									"name": "name",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 655975269993235
								},
								{
									"name": "class",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 945794792643289
								},
								{
									"name": "level",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"sid": 445357807781583
								},
								{
									"name": "text",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 893908292176095
								},
								{
									"name": "lore",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 824750967220550
								},
								{
									"name": "value",
									"type": "number",
									"initialValue": "0",
									"comment": "The value of the object to which for show the tooltip, in coins.",
									"sid": 548489733334983
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "tooltipName",
									"sid": 109238844659995,
									"parameters": {
										"text": "lowercase(name)"
									}
								},
								{
									"id": "set-text",
									"objectClass": "tooltipClass",
									"sid": 522948856064234,
									"parameters": {
										"text": "class"
									}
								},
								{
									"id": "set-text",
									"objectClass": "tooltipValue",
									"sid": 180937092196065,
									"parameters": {
										"text": "value & \" Coins\""
									}
								},
								{
									"id": "set-text",
									"objectClass": "tooltipLevel",
									"sid": 645922994485869,
									"parameters": {
										"text": "\"Level \" & level"
									}
								},
								{
									"id": "set-text",
									"objectClass": "tooltipLore",
									"sid": 752447281676204,
									"parameters": {
										"text": "lore"
									}
								}
							],
							"sid": 759325424482027,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 649898746054398,
											"parameters": {
												"variable": "isAbility"
											}
										}
									],
									"actions": [
										{
											"id": "set-text",
											"objectClass": "tooltipDescription",
											"sid": 169696152975065,
											"parameters": {
												"text": "text"
											}
										},
										{
											"id": "set-font-color",
											"objectClass": "tooltipClass",
											"sid": 508058487582192,
											"parameters": {
												"color": "rgb(235, 223, 164)"
											}
										},
										{
											"id": "set-font-color",
											"objectClass": "tooltipLevel",
											"sid": 562615732621313,
											"parameters": {
												"color": "rgb(235, 223, 164)"
											}
										},
										{
											"id": "set-visible",
											"objectClass": "tooltipValue",
											"sid": 268242035567656,
											"parameters": {
												"visibility": "invisible"
											}
										}
									],
									"sid": 763060192049106,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "for",
													"objectClass": "System",
													"sid": 776102274245743,
													"parameters": {
														"name": "\"\"",
														"start-index": "1",
														"end-index": "tokencount(text, \"{\") - 1"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "Start at 1, to always skip the first token. Subtract 1, to make it 0-based. For each set of curly brackets, multiply the contents of that set by the player level."
												},
												{
													"id": "set-text",
													"objectClass": "tooltipDescription",
													"sid": 932648006707572,
													"parameters": {
														"text": "RegexReplace(Self.Text, \"{([^}]+)}\", \"\", str(float(tokenat(tokenat(text, loopindex, \"{\"), 0, \"}\")) * player.level))"
													}
												}
											],
											"sid": 656560243045374
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 763942990940543
										}
									],
									"actions": [
										{
											"id": "set-text",
											"objectClass": "tooltipDescription",
											"sid": 450876267436261,
											"parameters": {
												"text": "\"\""
											}
										},
										{
											"id": "set-visible",
											"objectClass": "tooltipValue",
											"sid": 538459935507907,
											"parameters": {
												"visibility": "visible"
											}
										}
									],
									"sid": 646781768384696,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "for",
													"objectClass": "System",
													"sid": 401957080157648,
													"parameters": {
														"name": "\"\"",
														"start-index": "0",
														"end-index": "tokencount(text, \";\") - 2"
													}
												}
											],
											"actions": [
												{
													"id": "append-text",
													"objectClass": "tooltipDescription",
													"sid": 406451035312540,
													"parameters": {
														"text": "RegexReplace(tokenat(tokenat(text, loopindex, \";\"), 1, \":\"), \"\\{|}\", \"g\", \"\") & newline "
													}
												}
											],
											"sid": 630356183524025
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 504884740711992,
													"parameters": {
														"value": "Functions.contains(class, body.ObjectTypeName) | Functions.contains(class, ALL_CLASSES_KEYWORD)"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "set the color of the level and class restrictions text box depending if the player can use them. (evaluate with or operator wasn't working)"
												},
												{
													"id": "set-font-color",
													"objectClass": "tooltipClass",
													"sid": 690009318545707,
													"parameters": {
														"color": "rgbEx(0, 100, 0)"
													}
												}
											],
											"sid": 765991964130597,
											"isOrBlock": true
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 813739954778648
												}
											],
											"actions": [
												{
													"id": "set-font-color",
													"objectClass": "tooltipClass",
													"sid": 887313244913320,
													"parameters": {
														"color": "rgbEx(100, 0, 0)"
													}
												}
											],
											"sid": 699456439858615
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 696338830206071,
													"parameters": {
														"first-value": "player.level",
														"comparison": 5,
														"second-value": "level"
													}
												}
											],
											"actions": [
												{
													"id": "set-font-color",
													"objectClass": "tooltipLevel",
													"sid": 309880282157325,
													"parameters": {
														"color": "rgbEx(0, 100, 0)"
													}
												}
											],
											"sid": 794048442218917
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 771110532435994
												}
											],
											"actions": [
												{
													"id": "set-font-color",
													"objectClass": "tooltipLevel",
													"sid": 502447536210441,
													"parameters": {
														"color": "rgbEx(100, 0, 0)"
													}
												}
											],
											"sid": 196249808030852
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"type": "comment",
											"text": "tooltipLore is along the bottom, so it's OK where it's at. Align everything above tooltipDescription, cascading upwards based on position. Subtract values, because we want to go up the Y, not down."
										},
										{
											"id": "set-y",
											"objectClass": "tooltipLevel",
											"sid": 754242804605589,
											"parameters": {
												"y": "tooltipDescription.BBoxBottom - tooltipDescription.TextHeight - TOOLTIP_VERTICAL_TEXT_PADDING"
											}
										},
										{
											"id": "set-y",
											"objectClass": "tooltipClass",
											"sid": 303382449594785,
											"parameters": {
												"y": "tooltipLevel.BBoxTop"
											}
										},
										{
											"id": "set-y",
											"objectClass": "tooltipValue",
											"sid": 252059974546138,
											"parameters": {
												"y": "tooltipClass.BBoxTop"
											}
										},
										{
											"id": "set-y",
											"objectClass": "tooltipName",
											"sid": 153220410089423,
											"parameters": {
												"y": "tooltipValue.BBoxTop"
											}
										},
										{
											"type": "comment",
											"text": "Set the tooltip's height based on the distance between the bottom of the tooltip and the bottom of the tooltipName, plus the tooltipName's textHeight, plus some padding."
										},
										{
											"id": "set-height",
											"objectClass": "tooltip",
											"sid": 522541162903732,
											"parameters": {
												"height": "Self.Y - tooltipName.Y + tooltipName.TextHeight + TOOLTIP_VERTICAL_PADDING"
											}
										},
										{
											"type": "comment",
											"text": "We can't use the anchor behavior due to how this box dynamically resizes, so just set its Y every tick."
										},
										{
											"id": "set-y",
											"objectClass": "tooltip",
											"sid": 535940485689065,
											"parameters": {
												"y": "ViewportBottom(\"overlay\")"
											}
										}
									],
									"sid": 273454201901542,
									"isOrBlock": true
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-highest-lowest-value",
											"objectClass": "System",
											"sid": 346059891579239,
											"parameters": {
												"object": "tooltipText",
												"which": "highest",
												"expression": "tooltipText.TextWidth"
											}
										}
									],
									"actions": [
										{
											"id": "set-width",
											"objectClass": "tooltip",
											"sid": 438374178945166,
											"parameters": {
												"width": "tooltipText.TextWidth + TOOLTIP_HORIZONTAL_PADDING"
											}
										}
									],
									"sid": 330945650350467
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"type": "comment",
											"text": "wait for the text to render. Using layer opacity or visibility will cause a stutter when changing text values"
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 694290287195429,
											"parameters": {
												"seconds": "0"
											}
										},
										{
											"id": "tween-one-property",
											"objectClass": "tooltip",
											"sid": 958066190449578,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "Self.ObjectTypeName & \" opacity tween\"",
												"property": "offsetOpacity",
												"end-value": "100",
												"time": "MENU_FADE_TIME",
												"ease": "noease",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 662762068157903
								}
							]
						},
						{
							"functionName": "updateComparisonTooltip",
							"functionDescription": "update and show the comparison tooltip with the specified information",
							"functionCategory": "menus",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "name",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 910590846581926
								},
								{
									"name": "class",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 591887021608529
								},
								{
									"name": "level",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"sid": 301944540294416
								},
								{
									"name": "text",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 893566839981270
								},
								{
									"name": "lore",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 711926424267286
								},
								{
									"name": "value",
									"type": "number",
									"initialValue": "0",
									"comment": "The value of the object for which to show the comparison tooltip, in coins.",
									"sid": 966010385466510
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"type": "comment",
									"text": "we can't compare abilities, so no boolean parameter for that"
								},
								{
									"id": "set-text",
									"objectClass": "comparisonTooltipName",
									"sid": 721538760050324,
									"parameters": {
										"text": "lowercase(name)"
									}
								},
								{
									"id": "set-text",
									"objectClass": "comparisonTooltipClass",
									"sid": 543527112959690,
									"parameters": {
										"text": "class"
									}
								},
								{
									"id": "set-text",
									"objectClass": "comparisonTooltipValue",
									"sid": 668673812564956,
									"parameters": {
										"text": "value & \" Coins\""
									}
								},
								{
									"id": "set-text",
									"objectClass": "comparisonTooltipLevel",
									"sid": 824938158454118,
									"parameters": {
										"text": "\"Level \" & level"
									}
								},
								{
									"id": "set-text",
									"objectClass": "comparisonTooltipLore",
									"sid": 575354792888595,
									"parameters": {
										"text": "lore"
									}
								},
								{
									"id": "set-text",
									"objectClass": "comparisonTooltipDescription",
									"sid": 399001034140106,
									"parameters": {
										"text": "\"\""
									}
								}
							],
							"sid": 943885777192739,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 829112719816767,
											"parameters": {
												"name": "\"\"",
												"start-index": "0",
												"end-index": "tokencount(text, \";\") - 2"
											}
										}
									],
									"actions": [
										{
											"id": "append-text",
											"objectClass": "comparisonTooltipDescription",
											"sid": 265087721775888,
											"parameters": {
												"text": "RegexReplace(tokenat(tokenat(text, loopindex, \";\"), 1, \":\"), \"\\{|}\", \"g\", \"\") & newline "
											}
										}
									],
									"sid": 166074427221325
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 140927714506009,
											"parameters": {
												"value": "Functions.contains(class, body.ObjectTypeName) | Functions.contains(class, ALL_CLASSES_KEYWORD)"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "set the color of the level and class restrictions text box depending if the player can use them. (evaluate with or operator wasn't working)"
										},
										{
											"id": "set-font-color",
											"objectClass": "comparisonTooltipClass",
											"sid": 983222596540263,
											"parameters": {
												"color": "rgbEx(0, 100, 0)"
											}
										}
									],
									"sid": 928300519864730,
									"isOrBlock": true
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 464183020747268
										}
									],
									"actions": [
										{
											"id": "set-font-color",
											"objectClass": "comparisonTooltipClass",
											"sid": 673913629937480,
											"parameters": {
												"color": "rgbEx(100, 0, 0)"
											}
										}
									],
									"sid": 570480678051004
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 792823110178621,
											"parameters": {
												"first-value": "player.level",
												"comparison": 5,
												"second-value": "level"
											}
										}
									],
									"actions": [
										{
											"id": "set-font-color",
											"objectClass": "comparisonTooltipLevel",
											"sid": 570492528701475,
											"parameters": {
												"color": "rgbEx(0, 100, 0)"
											}
										}
									],
									"sid": 103253862958061
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 246626424806030
										}
									],
									"actions": [
										{
											"id": "set-font-color",
											"objectClass": "comparisonTooltipLevel",
											"sid": 966203662113193,
											"parameters": {
												"color": "rgbEx(100, 0, 0)"
											}
										}
									],
									"sid": 452964067971167
								},
								{
									"eventType": "comment",
									"text": "see comments in the related events for the normal tooltip"
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-y",
											"objectClass": "comparisonTooltip",
											"sid": 671311727852783,
											"parameters": {
												"y": "tooltip.BBoxTop"
											}
										},
										{
											"id": "set-y",
											"objectClass": "comparisonTooltipLevel",
											"sid": 771702357831128,
											"parameters": {
												"y": "comparisonTooltipDescription.BBoxBottom - comparisonTooltipDescription.TextHeight - TOOLTIP_VERTICAL_TEXT_PADDING"
											}
										},
										{
											"id": "set-y",
											"objectClass": "comparisonTooltipClass",
											"sid": 354567237299271,
											"parameters": {
												"y": "comparisonTooltipLevel.BBoxTop"
											}
										},
										{
											"id": "set-y",
											"objectClass": "comparisonTooltipValue",
											"sid": 397947812972779,
											"parameters": {
												"y": "comparisonTooltipClass.BBoxTop"
											}
										},
										{
											"id": "set-y",
											"objectClass": "comparisonTooltipName",
											"sid": 320436660469028,
											"parameters": {
												"y": "comparisonTooltipValue.BBoxTop"
											}
										},
										{
											"id": "set-height",
											"objectClass": "comparisonTooltip",
											"sid": 376178786703762,
											"parameters": {
												"height": "Self.Y - comparisonTooltipName.Y + comparisonTooltipName.TextHeight + TOOLTIP_VERTICAL_PADDING"
											}
										}
									],
									"sid": 233887033264269
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-highest-lowest-value",
											"objectClass": "System",
											"sid": 637439964578507,
											"parameters": {
												"object": "comparisonTooltipText",
												"which": "highest",
												"expression": "comparisonTooltipText.TextWidth"
											}
										}
									],
									"actions": [
										{
											"id": "set-width",
											"objectClass": "comparisonTooltip",
											"sid": 600400404613481,
											"parameters": {
												"width": "comparisonTooltipText.TextWidth + TOOLTIP_HORIZONTAL_PADDING"
											}
										}
									],
									"sid": 758644597798527
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"type": "comment",
											"text": "wait for the text to render. Using layer opacity or visibility will cause a stutter when changing text values"
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 958235739280331,
											"parameters": {
												"seconds": "0"
											}
										},
										{
											"id": "tween-one-property",
											"objectClass": "comparisonTooltip",
											"sid": 627320863589328,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "Self.ObjectTypeName & \" opacity tween\"",
												"property": "offsetOpacity",
												"end-value": "100",
												"time": "MENU_FADE_TIME",
												"ease": "noease",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 345794445703827
								}
							]
						}
					],
					"sid": 534862555037467
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "enemy info",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"functionName": "updateEnemyInfo",
							"functionDescription": "Update an enemy's name, and clear the attributes.",
							"functionCategory": "enemies",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "enemyName",
									"sid": 135045043660059,
									"parameters": {
										"text": "lowercase(enemy.fullName)"
									}
								},
								{
									"id": "set-text",
									"objectClass": "enemyAttributes",
									"sid": 409317286234059,
									"parameters": {
										"text": "\"\""
									}
								}
							],
							"sid": 207514323582349,
							"children": [
								{
									"eventType": "variable",
									"name": "attributes",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 868891487243485
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 964623353041708,
											"parameters": {
												"variable": "attributes",
												"value": "enemy.attributes"
											}
										}
									],
									"sid": 840458797442361
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 317603452927616,
											"parameters": {
												"name": "\"\"",
												"start-index": "0",
												"end-index": "tokencount(attributes, \",\")"
											}
										}
									],
									"actions": [
										{
											"id": "append-text",
											"objectClass": "enemyAttributes",
											"sid": 350219713546243,
											"parameters": {
												"text": "tokenat(attributes, loopindex, \",\") & newline"
											}
										}
									],
									"sid": 613390831560091
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 875991590626014,
											"parameters": {
												"seconds": "0"
											}
										},
										{
											"id": "set-opacity",
											"objectClass": "enemyHealthFrame",
											"sid": 725478292957384,
											"parameters": {
												"opacity": "100"
											}
										}
									],
									"sid": 984462441645642
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 560016983693502,
									"parameters": {
										"object": "enemyBody"
									}
								},
								{
									"id": "pick-topbottom",
									"objectClass": "enemyBody",
									"sid": 941475082877777,
									"parameters": {
										"which": "top"
									}
								},
								{
									"id": "pick-parent",
									"objectClass": "enemyBody",
									"sid": 795137331020642,
									"parameters": {
										"parent": "enemy",
										"which": "own"
									}
								}
							],
							"actions": [],
							"sid": 107491999194856,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "trigger-once-while-true",
											"objectClass": "System",
											"sid": 960441615476776
										}
									],
									"actions": [
										{
											"callFunction": "updateEnemyInfo",
											"sid": 425571750613563
										}
									],
									"sid": 639451042301086
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-text",
											"objectClass": "enemyName",
											"sid": 434210227725965,
											"parameters": {
												"text-to-compare": "enemy.fullName",
												"case-sensitivity": "ignore-case"
											},
											"isInverted": true
										},
										{
											"id": "trigger-once-while-true",
											"objectClass": "System",
											"sid": 957637580777324
										}
									],
									"actions": [
										{
											"callFunction": "updateEnemyInfo",
											"sid": 381983047162617
										}
									],
									"sid": 866235878046209
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 154584809601562,
											"parameters": {
												"first-value": "enemyHealthBar.ImageScaleX",
												"comparison": 1,
												"second-value": "enemy.currentHealth / enemy.maxHealth * 100"
											}
										},
										{
											"id": "trigger-once-while-true",
											"objectClass": "System",
											"sid": 765997918956657
										}
									],
									"actions": [
										{
											"id": "set-image-scale-x",
											"objectClass": "enemyHealthBar",
											"sid": 427298398704366,
											"parameters": {
												"scale-x": "enemy.currentHealth / enemy.maxHealth * 100"
											}
										}
									],
									"sid": 782496995465253
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 879642486780677
								},
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 479992439038144
								}
							],
							"actions": [
								{
									"id": "set-opacity",
									"objectClass": "enemyHealthFrame",
									"sid": 977522645063873,
									"parameters": {
										"opacity": "0"
									}
								}
							],
							"sid": 820060221223573
						}
					],
					"sid": 407220405598445
				}
			],
			"sid": 491413826418283
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "enemies",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "behaviors",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"functionName": "MoveEnemyInDirection",
							"functionDescription": "Move an enemy a certain direction in a certain angle. Already factors in isometry.",
							"functionCategory": "enemies",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "theAngle",
									"type": "number",
									"initialValue": "0",
									"comment": "The angle along which the enemy should move. Already factors in isometry.",
									"sid": 635433825358544
								},
								{
									"name": "theDistance",
									"type": "number",
									"initialValue": "0",
									"comment": "The distance the enemy will travel",
									"sid": 811565187927295
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 467880304318507,
									"parameters": {
										"variable": "theAngle",
										"value": "enemy.MoveTo.MovingAngle - theAngle"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 329786752956033,
									"parameters": {
										"variable": "theDistance",
										"value": "Functions.isometrify(theDistance, theAngle)"
									}
								},
								{
									"id": "move-to-position",
									"objectClass": "enemy",
									"sid": 958789404516592,
									"behaviorType": "MoveTo",
									"parameters": {
										"x": "Self.X + cos(theAngle) * theDistance",
										"y": "Self.Y + sin(theAngle) * theDistance",
										"mode": "direct"
									}
								}
							],
							"sid": 676900663014255
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "every-tick",
									"objectClass": "System",
									"sid": 569034226861118
								}
							],
							"actions": [
								{
									"id": "set-scale",
									"objectClass": "enemyBody",
									"sid": 896972756604135,
									"parameters": {
										"scale": "1"
									}
								}
							],
							"sid": 520308726052412
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-on-screen",
									"objectClass": "enemyBody",
									"sid": 258864942012861
								},
								{
									"id": "pick-parent",
									"objectClass": "enemyBody",
									"sid": 117834460067667,
									"parameters": {
										"parent": "enemy",
										"which": "own"
									}
								}
							],
							"actions": [
								{
									"id": "set-max-speed",
									"objectClass": "enemy",
									"sid": 643289427795543,
									"behaviorType": "MoveTo",
									"parameters": {
										"max-speed": "Functions.isometrify(Self.movementSpeed, Self.MoveTo.MovingAngle)"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "enemy",
									"sid": 277643133966543,
									"parameters": {
										"instance-variable": "currentHealth",
										"value": "clamp(Self.currentHealth, 0,Self.maxHealth)"
									}
								}
							],
							"sid": 786563222722520,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 269274666031105,
											"parameters": {
												"value": "Functions.contains(enemyBody.AnimationName, \"walk\")\n"
											}
										}
									],
									"actions": [],
									"sid": 954751649253547,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-animation-frame",
													"objectClass": "enemyBody",
													"sid": 816092722648360,
													"parameters": {
														"comparison": 0,
														"number": "13"
													}
												},
												{
													"id": "trigger-once-while-true",
													"objectClass": "System",
													"sid": 680416264464975
												}
											],
											"actions": [
												{
													"id": "play-at-object-by-name",
													"objectClass": "Audio",
													"sid": 382318423638994,
													"parameters": {
														"folder": "sounds",
														"audio-file-name": "background.ObjectTypeName & \"Footstep1\"",
														"loop": "not-looping",
														"volume": "0",
														"object": "enemyBody",
														"inner-angle": "360",
														"outer-angle": "360",
														"outer-gain": "0",
														"tag-optional": "\"\""
													}
												}
											],
											"sid": 633622757363681
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-animation-frame",
													"objectClass": "enemyBody",
													"sid": 252274796850433,
													"parameters": {
														"comparison": 0,
														"number": "33"
													}
												},
												{
													"id": "trigger-once-while-true",
													"objectClass": "System",
													"sid": 267080386260004
												}
											],
											"actions": [
												{
													"id": "play-at-object-by-name",
													"objectClass": "Audio",
													"sid": 610048696104273,
													"parameters": {
														"folder": "sounds",
														"audio-file-name": "background.ObjectTypeName & \"Footstep2\"",
														"loop": "not-looping",
														"volume": "0",
														"object": "enemyBody",
														"inner-angle": "360",
														"outer-angle": "360",
														"outer-gain": "0",
														"tag-optional": "\"\""
													}
												}
											],
											"sid": 880617534244316
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-arrived",
											"objectClass": "enemy",
											"sid": 885313538967121,
											"behaviorType": "MoveTo"
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "What happens when the enemy successfully arrives at their destination"
										}
									],
									"sid": 539686458967405,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "enemy",
													"sid": 813637575177879,
													"parameters": {
														"instance-variable": "rerouting",
														"comparison": 0,
														"value": "\"backingUp\""
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "If they successfully backed up, now the enemy will go left"
												},
												{
													"id": "set-instvar-value",
													"objectClass": "enemy",
													"sid": 949129561323151,
													"parameters": {
														"instance-variable": "rerouting",
														"value": "\"goingLeft\""
													}
												},
												{
													"callFunction": "MoveEnemyInDirection",
													"sid": 331024069839006,
													"parameters": [
														"QUARTER_CIRCLE",
														"enemy.Width"
													]
												}
											],
											"sid": 219556820298042
										},
										{
											"eventType": "comment",
											"text": "Can't combine these two blocks because of how 'else' and OR blocks work."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 529751045864272
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "enemy",
													"sid": 122542109248194,
													"parameters": {
														"instance-variable": "rerouting",
														"comparison": 0,
														"value": "\"goingLeft\""
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "If they successfully went left, they're done; they can resume normal behavior"
												},
												{
													"id": "set-instvar-value",
													"objectClass": "enemy",
													"sid": 141230194582417,
													"parameters": {
														"instance-variable": "rerouting",
														"value": "\"no\""
													}
												}
											],
											"sid": 491299688276828
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 758460142996143
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "enemy",
													"sid": 589077654486985,
													"parameters": {
														"instance-variable": "rerouting",
														"comparison": 0,
														"value": "\"goingRight\""
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "If they successfully went right, they're done; they can resume normal behavior"
												},
												{
													"id": "set-instvar-value",
													"objectClass": "enemy",
													"sid": 817594969746132,
													"parameters": {
														"instance-variable": "rerouting",
														"value": "\"no\""
													}
												}
											],
											"sid": 401077608371867
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 742386062979371
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "enemy",
													"sid": 624222872761533,
													"parameters": {
														"instance-variable": "rerouting",
														"comparison": 0,
														"value": "\"backingUpAgain\""
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "If they successfully backed up a second time, try turning left again (no need to record that this would be the 2nd left attempt)"
												},
												{
													"id": "set-instvar-value",
													"objectClass": "enemy",
													"sid": 261693395072376,
													"parameters": {
														"instance-variable": "rerouting",
														"value": "\"goingLeft\""
													}
												},
												{
													"callFunction": "MoveEnemyInDirection",
													"sid": 226386724246306,
													"parameters": [
														"QUARTER_CIRCLE",
														"enemy.Width"
													]
												}
											],
											"sid": 344833862316779
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-hit-solid",
											"objectClass": "enemy",
											"sid": 381212948325406,
											"behaviorType": "MoveTo"
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "If an enemy hit a solid while moving, they need to go somewhere else. They can't stop because they don't have an idle animation."
										}
									],
									"sid": 461383012509278,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "enemy",
													"sid": 874780723319647,
													"parameters": {
														"instance-variable": "rerouting",
														"comparison": 0,
														"value": "\"no\""
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "if the enemy wasn't already rerouting when he hit a solid, begin rerouting by backing up"
												},
												{
													"id": "set-instvar-value",
													"objectClass": "enemy",
													"sid": 272947486602681,
													"parameters": {
														"instance-variable": "rerouting",
														"value": "\"backingUp\""
													}
												},
												{
													"callFunction": "MoveEnemyInDirection",
													"sid": 397790675986807,
													"parameters": [
														"HALF_CIRCLE",
														"enemy.Width"
													]
												}
											],
											"sid": 688258119055863
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 917978582155203
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "enemy",
													"sid": 585789115008813,
													"parameters": {
														"instance-variable": "rerouting",
														"comparison": 0,
														"value": "\"backingUp\""
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "If the enemy hit a solid while backing up, try going left"
												},
												{
													"id": "set-instvar-value",
													"objectClass": "enemy",
													"sid": 611059426906122,
													"parameters": {
														"instance-variable": "rerouting",
														"value": "\"goingLeft\""
													}
												},
												{
													"callFunction": "MoveEnemyInDirection",
													"sid": 147790681472118,
													"parameters": [
														"QUARTER_CIRCLE",
														"enemy.Width"
													]
												}
											],
											"sid": 715543732067525
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 343751899759745
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "enemy",
													"sid": 848018021069342,
													"parameters": {
														"instance-variable": "rerouting",
														"comparison": 0,
														"value": "\"goingLeft\""
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "If the enemy hit a solid while going left, try going right. Go twice as far as normal to prevent loops"
												},
												{
													"id": "set-instvar-value",
													"objectClass": "enemy",
													"sid": 992265290332278,
													"parameters": {
														"instance-variable": "rerouting",
														"value": "\"goingRight\""
													}
												},
												{
													"callFunction": "MoveEnemyInDirection",
													"sid": 323027643467297,
													"parameters": [
														"HALF_CIRCLE",
														"enemy.Width * 2"
													]
												}
											],
											"sid": 235276827078822
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 678975833778988
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "enemy",
													"sid": 172716382363134,
													"parameters": {
														"instance-variable": "rerouting",
														"comparison": 0,
														"value": "\"goingRight\""
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "If the enemy hit a solid while going right, try backing up again"
												},
												{
													"id": "set-instvar-value",
													"objectClass": "enemy",
													"sid": 617137112585858,
													"parameters": {
														"instance-variable": "rerouting",
														"value": "\"backingUpAgain\""
													}
												},
												{
													"callFunction": "MoveEnemyInDirection",
													"sid": 691585567438389,
													"parameters": [
														"QUARTER_CIRCLE",
														"enemy.Width"
													]
												}
											],
											"sid": 724755864938345
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 176386841905804
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "enemy",
													"sid": 234490350697590,
													"parameters": {
														"instance-variable": "rerouting",
														"comparison": 0,
														"value": "\"backingUpAgain\""
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "If the enemy hit a solid while backing up again, they are probably stuck. reset the rerouting process to try again"
												},
												{
													"id": "set-instvar-value",
													"objectClass": "enemy",
													"sid": 991851772114925,
													"parameters": {
														"instance-variable": "rerouting",
														"value": "\"no\""
													}
												}
											],
											"sid": 522391266338360
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-moving",
											"objectClass": "enemy",
											"sid": 261289383252672,
											"behaviorType": "MoveTo"
										},
										{
											"id": "pick-children",
											"objectClass": "enemy",
											"sid": 602911596678790,
											"parameters": {
												"child": "enemyBody",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Extracting this out into a function results in enemies getting each other's angles"
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 491453446374562,
											"parameters": {
												"instance-variable": "degrees",
												"value": "round(Self.MoveTo.MovingAngle / ARC) * ARC = -180 ? 180 : round(Self.MoveTo.MovingAngle / ARC) * ARC"
											}
										},
										{
											"id": "set-boolean-instvar",
											"objectClass": "enemy",
											"sid": 733443498925009,
											"parameters": {
												"instance-variable": "attacking",
												"value": "false"
											}
										},
										{
											"id": "set-animation",
											"objectClass": "enemyBody",
											"sid": 335713613889849,
											"parameters": {
												"animation": "\"walk_\" & enemy.degrees",
												"from": "beginning"
											}
										},
										{
											"id": "set-animation-speed",
											"objectClass": "enemyBody",
											"sid": 196693171531035,
											"parameters": {
												"speed": "enemy.movementSpeed / ANIMATION_DIVISOR"
											}
										}
									],
									"sid": 995911688446923
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "enemy",
											"sid": 412161205939607,
											"parameters": {
												"instance-variable": "rerouting",
												"comparison": 0,
												"value": "\"no\""
											}
										},
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "enemy",
											"sid": 785786954622028,
											"parameters": {
												"instance-variable": "attacking"
											},
											"isInverted": true
										},
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "enemy",
											"sid": 108196162325046,
											"parameters": {
												"instance-variable": "hit"
											},
											"isInverted": true
										},
										{
											"id": "pick-parent",
											"objectClass": "enemyBody",
											"sid": 304773321105288,
											"parameters": {
												"parent": "enemy",
												"which": "own"
											}
										}
									],
									"actions": [],
									"sid": 714853243837445,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 440773945161690,
													"parameters": {
														"object": "enemy",
														"expression": "Functions.isometrify(enemy.attackRange, angle(enemy.X, enemy.Y, player.X, player.Y))",
														"comparison": 5,
														"value": "distance(enemy.X, enemy.Y, player.X, player.Y)"
													}
												},
												{
													"id": "has-los-to-object",
													"objectClass": "enemy",
													"sid": 719865029279614,
													"behaviorType": "LineOfSight",
													"parameters": {
														"object": "player",
														"image-point": "0"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "breaking angle(enemy.x, enemy.y, player.x, player.y) into a local variable doesn't work if we have more than 1 enemy."
												},
												{
													"id": "set-instvar-value",
													"objectClass": "enemy",
													"sid": 571362047098296,
													"parameters": {
														"instance-variable": "degrees",
														"value": "round(angle(enemy.X, enemy.Y, player.X, player.Y) / ARC) * ARC = -180 ? 180 : round(angle(enemy.X, enemy.Y, player.X, player.Y) / ARC) * ARC"
													}
												},
												{
													"id": "set-boolean-instvar",
													"objectClass": "enemy",
													"sid": 780308239052219,
													"parameters": {
														"instance-variable": "attacking",
														"value": "true"
													}
												},
												{
													"id": "call-mapped-function",
													"objectClass": "Functions",
													"sid": 431341891608649,
													"parameters": {
														"name": "\"enemyAbilities\"",
														"string": "enemy.simpleName",
														"forward-params": "0"
													}
												}
											],
											"sid": 697644869671278
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 832417679741642,
													"parameters": {
														"object": "enemy",
														"expression": "Functions.isometrify(enemy.attackRange, angle(enemy.X, enemy.Y, player.X, player.Y))",
														"comparison": 2,
														"value": "distance(enemy.X, enemy.Y, player.X, player.Y)"
													}
												}
											],
											"actions": [
												{
													"id": "move-to-object",
													"objectClass": "enemy",
													"sid": 120430198405655,
													"behaviorType": "MoveTo",
													"parameters": {
														"object": "player",
														"image-point": "0",
														"mode": "direct"
													}
												}
											],
											"sid": 640992658053719
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "enemy",
											"sid": 307474919042484,
											"parameters": {
												"instance-variable": "currentHealth",
												"comparison": 0,
												"value": "0"
											}
										},
										{
											"id": "pick-children",
											"objectClass": "enemy",
											"sid": 342453186762135,
											"parameters": {
												"child": "enemyBody",
												"which": "own"
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 437565890022814,
											"parameters": {
												"object": "enemyBody",
												"expression": "Functions.contains(enemyBody.AnimationName, \"die\")",
												"comparison": 0,
												"value": "0"
											}
										},
										{
											"id": "pick-parent",
											"objectClass": "enemyBody",
											"sid": 292827668140868,
											"parameters": {
												"parent": "enemy",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Pick dead enemies and their bodies. Trim down the selection of enemies to only those who are parents of bodies that aren't playing a 'die' animation."
										},
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 753964957765899,
											"parameters": {
												"instance-variable": "experience",
												"value": "enemy.experience"
											}
										},
										{
											"id": "destroy",
											"objectClass": "enemy",
											"sid": 661455970113275
										},
										{
											"id": "set-animation",
											"objectClass": "enemyBody",
											"sid": 239197059439331,
											"parameters": {
												"animation": "\"die_\" & enemy.degrees",
												"from": "beginning"
											}
										},
										{
											"id": "play-at-object-by-name",
											"objectClass": "Audio",
											"sid": 890087344562307,
											"parameters": {
												"folder": "sounds",
												"audio-file-name": "enemy.type & \"_die_\" & round(random(1))",
												"loop": "not-looping",
												"volume": "0",
												"object": "enemy",
												"inner-angle": "360",
												"outer-angle": "360",
												"outer-gain": "0",
												"tag-optional": "\"\""
											}
										},
										{
											"callFunction": "spawnLoot",
											"sid": 507101027020241,
											"parameters": [
												"enemy.X",
												"enemy.Y",
												"max(enemy.Width, enemy.Height)"
											]
										}
									],
									"sid": 845775673450816
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-on-screen",
									"objectClass": "enemyBody",
									"sid": 127050934763793,
									"isInverted": true
								},
								{
									"id": "pick-parent",
									"objectClass": "enemyBody",
									"sid": 449029605780893,
									"parameters": {
										"parent": "enemy",
										"which": "own"
									}
								}
							],
							"actions": [
								{
									"id": "stop",
									"objectClass": "enemy",
									"sid": 747614533357404,
									"behaviorType": "MoveTo"
								},
								{
									"id": "set-instvar-value",
									"objectClass": "enemy",
									"sid": 865143597318402,
									"parameters": {
										"instance-variable": "rerouting",
										"value": "\"no\""
									}
								}
							],
							"sid": 839354063176527
						},
						{
							"bookmark": true,
							"eventType": "block",
							"conditions": [
								{
									"id": "on-any-animation-finished",
									"objectClass": "enemyBody",
									"sid": 636124233086149
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "We could replace these with in-line waits based on the the length of the animation, but we would effectively lose the ability to change animation speeds while they were played.\n\nScenario: Enemy is currently hitstunned, and playing the hit animation. They get hit with another ability that reduces their action speed.\n\nWith in-line waits: Not possible, post-animation events would fire before the animation finished, resulting in many bugs.\n\nWith `on any animation finished' + find() trigger: post-animation events trigger correctly as they're initiated by a genuine trigger that runs only when an animation finishes."
								}
							],
							"sid": 915717840994810,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-evaluate",
											"objectClass": "System",
											"sid": 404195209412664,
											"parameters": {
												"object": "enemyBody",
												"expression": "Functions.contains(enemyBody.AnimationName, \"die\")"
											}
										}
									],
									"actions": [
										{
											"id": "tween-one-property",
											"objectClass": "enemyBody",
											"sid": 891888202943728,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"\"",
												"property": "offsetOpacity",
												"end-value": "0",
												"time": "1",
												"ease": "noease",
												"destroy-on-complete": "yes",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 305858177061194
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-parent",
											"objectClass": "enemyBody",
											"sid": 829615484125780,
											"parameters": {
												"parent": "enemy",
												"which": "own"
											}
										}
									],
									"actions": [],
									"sid": 938155508642631,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-evaluate",
													"objectClass": "System",
													"sid": 542178547010838,
													"parameters": {
														"object": "enemyBody",
														"expression": "Functions.contains(enemyBody.AnimationName, \"attack\")"
													}
												}
											],
											"actions": [
												{
													"id": "set-boolean-instvar",
													"objectClass": "enemy",
													"sid": 183789396537260,
													"parameters": {
														"instance-variable": "attacking",
														"value": "false"
													}
												}
											],
											"sid": 307056031215417
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-evaluate",
													"objectClass": "System",
													"sid": 391362075254093,
													"parameters": {
														"object": "enemyBody",
														"expression": "Functions.contains(enemyBody.AnimationName, \"hit\")"
													}
												}
											],
											"actions": [
												{
													"id": "set-boolean-instvar",
													"objectClass": "enemy",
													"sid": 971129049528586,
													"parameters": {
														"instance-variable": "attacking",
														"value": "false"
													}
												},
												{
													"id": "set-boolean-instvar",
													"objectClass": "enemy",
													"sid": 972174768371784,
													"parameters": {
														"instance-variable": "hit",
														"value": "false"
													}
												}
											],
											"sid": 521797612596668
										}
									]
								}
							]
						}
					],
					"sid": 346842453318444
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "enemy abilities",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"functionName": "goblinUnderling",
							"functionDescription": "",
							"functionCategory": "enemies",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 429038780345131,
							"children": [
								{
									"eventType": "variable",
									"name": "PROJECTILE_SPEED",
									"type": "number",
									"initialValue": "700",
									"comment": "The speed of the projectile",
									"isStatic": false,
									"isConstant": true,
									"sid": 421665011073282
								},
								{
									"eventType": "variable",
									"name": "MANIFESTATION_FRAME",
									"type": "number",
									"initialValue": "38",
									"comment": "The (0-based) frame in which the projectile should manifest",
									"isStatic": false,
									"isConstant": true,
									"sid": 433125076602187
								},
								{
									"eventType": "variable",
									"name": "SIZE",
									"type": "number",
									"initialValue": "120",
									"comment": "The size of the projectile",
									"isStatic": false,
									"isConstant": true,
									"sid": 968347307715670
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-children",
											"objectClass": "enemy",
											"sid": 798162200338716,
											"parameters": {
												"child": "enemyBody",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"id": "stop",
											"objectClass": "enemy",
											"sid": 773381885453265,
											"behaviorType": "MoveTo"
										},
										{
											"id": "set-moving-angle",
											"objectClass": "enemy",
											"sid": 226507283155307,
											"behaviorType": "MoveTo",
											"parameters": {
												"angle": "angle(Self.X, Self.Y, player.X, player.Y)"
											}
										},
										{
											"id": "set-animation",
											"objectClass": "enemyBody",
											"sid": 240705091466775,
											"parameters": {
												"animation": "\"attack_\" & enemy.degrees",
												"from": "beginning"
											}
										},
										{
											"type": "comment",
											"text": "This is the amount of time between the start of the animation and the manifestation of the projectile."
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 996803575058886,
											"parameters": {
												"seconds": " MANIFESTATION_FRAME / enemyBody.AnimationSpeed"
											}
										}
									],
									"sid": 637095266380560,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "enemy",
													"sid": 697587274698270,
													"parameters": {
														"instance-variable": "currentHealth",
														"comparison": 4,
														"value": "0"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "As long as the enemy didn't die during the windup of its attack..."
												},
												{
													"id": "create-object",
													"objectClass": "System",
													"sid": 817388719670823,
													"parameters": {
														"object-to-create": "projectile",
														"layer": "\"mechanics\"",
														"x": "enemy.X",
														"y": "enemy.Y",
														"create-hierarchy": false,
														"template-name": "\"\""
													}
												},
												{
													"id": "play-at-object-by-name",
													"objectClass": "Audio",
													"sid": 202946848561806,
													"parameters": {
														"folder": "sounds",
														"audio-file-name": "\"basicAttack\" & round(random(1))",
														"loop": "not-looping",
														"volume": "0",
														"object": "enemyBody",
														"inner-angle": "360",
														"outer-angle": "360",
														"outer-gain": "0",
														"tag-optional": "\"\""
													}
												}
											],
											"sid": 690563599813584,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-last-created",
															"objectClass": "System",
															"sid": 311242000947761,
															"parameters": {
																"object": "projectile"
															}
														}
													],
													"actions": [
														{
															"id": "add-child",
															"objectClass": "enemy",
															"sid": 361707589310231,
															"parameters": {
																"child": "projectile",
																"transform-x": false,
																"transform-y": false,
																"transform-w": false,
																"transform-h": false,
																"transform-a": false,
																"transform-o": false,
																"transform-z-elevation": false,
																"transform-visibility": false,
																"destroy-with-parent": true
															}
														},
														{
															"id": "set-boolean-instvar",
															"objectClass": "projectile",
															"sid": 771079488774662,
															"parameters": {
																"instance-variable": "enabled",
																"value": "true"
															}
														},
														{
															"id": "set-boolean-instvar",
															"objectClass": "projectile",
															"sid": 750577455296826,
															"parameters": {
																"instance-variable": "isMelee",
																"value": "true"
															}
														},
														{
															"id": "set-boolean-instvar",
															"objectClass": "projectile",
															"sid": 400758888163180,
															"parameters": {
																"instance-variable": "piercing",
																"value": "true"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "projectile",
															"sid": 244304080656572,
															"parameters": {
																"instance-variable": "slashDamage",
																"value": "enemy.slashDamage"
															}
														},
														{
															"id": "set-width",
															"objectClass": "projectile",
															"sid": 345816853133645,
															"parameters": {
																"width": "SIZE"
															}
														},
														{
															"id": "set-height",
															"objectClass": "projectile",
															"sid": 685217585937059,
															"parameters": {
																"height": "Self.Width / ISOMETRIC_DIVIDER"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "projectile",
															"sid": 403750064909871,
															"parameters": {
																"instance-variable": "range",
																"value": "enemy.attackRange"
															}
														},
														{
															"id": "set-angle-of-motion",
															"objectClass": "projectile",
															"sid": 861009424760644,
															"behaviorType": "Bullet",
															"parameters": {
																"angle": "enemy.MoveTo.MovingAngle"
															}
														},
														{
															"id": "set-speed",
															"objectClass": "projectile",
															"sid": 934788439187272,
															"behaviorType": "Bullet",
															"parameters": {
																"speed": "Functions.isometrify(PROJECTILE_SPEED, Self.Bullet.AngleOfMotion)"
															}
														}
													],
													"sid": 539445401691416
												}
											]
										}
									]
								}
							]
						},
						{
							"functionName": "goblinArcher",
							"functionDescription": "",
							"functionCategory": "enemies",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 266372004783406,
							"children": [
								{
									"eventType": "variable",
									"name": "PROJECTILE_SPEED",
									"type": "number",
									"initialValue": "600",
									"comment": "The speed of the projectile",
									"isStatic": false,
									"isConstant": true,
									"sid": 740015134778544
								},
								{
									"eventType": "variable",
									"name": "MANIFESTATION_POINT",
									"type": "number",
									"initialValue": "80",
									"comment": "The longest possible distance (in pixels) between the enemy origin and where the projectile visual representation should appear. This is when they are facing directly left or right.",
									"isStatic": false,
									"isConstant": true,
									"sid": 694013683657195
								},
								{
									"eventType": "variable",
									"name": "MANIFESTATION_FRAME",
									"type": "number",
									"initialValue": "15",
									"comment": "The (0-based) frame in which the projectile should manifest",
									"isStatic": false,
									"isConstant": true,
									"sid": 163965109939145
								},
								{
									"eventType": "variable",
									"name": "SIZE",
									"type": "number",
									"initialValue": "15",
									"comment": "The size of the projectile",
									"isStatic": false,
									"isConstant": true,
									"sid": 159897247114374
								},
								{
									"eventType": "variable",
									"name": "projectileManifestationTime",
									"type": "number",
									"initialValue": "0",
									"comment": "How long it takes the projectile to get from the enemy's origin to the manifestation point",
									"isStatic": true,
									"isConstant": false,
									"sid": 228220816216230
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-children",
											"objectClass": "enemy",
											"sid": 411494418569165,
											"parameters": {
												"child": "enemyBody",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "The point in time when the projectile should appear differs based on which direction the enemy is facing. (i.e., the distance between the enemy's origin and hand is drastically different if he's facing left, vs. if he's facing up)"
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 564225280416213,
											"parameters": {
												"variable": "projectileManifestationTime",
												"value": "Functions.isometrify(MANIFESTATION_POINT, enemy.degrees) / PROJECTILE_SPEED"
											}
										},
										{
											"id": "stop",
											"objectClass": "enemy",
											"sid": 344316499934358,
											"behaviorType": "MoveTo"
										},
										{
											"id": "set-moving-angle",
											"objectClass": "enemy",
											"sid": 699503730810728,
											"behaviorType": "MoveTo",
											"parameters": {
												"angle": "angle(Self.X, Self.Y, player.X, player.Y)"
											}
										},
										{
											"id": "set-animation",
											"objectClass": "enemyBody",
											"sid": 396083681322291,
											"parameters": {
												"animation": "\"attack_\" & enemy.degrees",
												"from": "beginning"
											}
										},
										{
											"type": "comment",
											"text": "Time the spawning of the projectile so it will pass over the manifestation point during the same frame that the the projectile's visual representation on the enemy disappears."
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 378700698176597,
											"parameters": {
												"seconds": " MANIFESTATION_FRAME / enemyBody.AnimationSpeed - projectileManifestationTime"
											}
										}
									],
									"sid": 927697697940487,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-boolean-instance-variable-set",
													"objectClass": "enemy",
													"sid": 968264553072950,
													"parameters": {
														"instance-variable": "hit"
													},
													"isInverted": true
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "enemy",
													"sid": 164500894897975,
													"parameters": {
														"instance-variable": "currentHealth",
														"comparison": 4,
														"value": "0"
													}
												}
											],
											"actions": [
												{
													"id": "create-object",
													"objectClass": "System",
													"sid": 887652376972684,
													"parameters": {
														"object-to-create": "projectile",
														"layer": "\"mechanics\"",
														"x": "enemy.X",
														"y": "enemy.Y",
														"create-hierarchy": false,
														"template-name": "\"\""
													}
												}
											],
											"sid": 369945013022118,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-last-created",
															"objectClass": "System",
															"sid": 439909279866633,
															"parameters": {
																"object": "projectile"
															}
														}
													],
													"actions": [
														{
															"id": "add-child",
															"objectClass": "enemy",
															"sid": 292455479393073,
															"parameters": {
																"child": "projectile",
																"transform-x": false,
																"transform-y": false,
																"transform-w": false,
																"transform-h": false,
																"transform-a": false,
																"transform-o": false,
																"transform-z-elevation": false,
																"transform-visibility": false,
																"destroy-with-parent": true
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "projectile",
															"sid": 116652104349254,
															"parameters": {
																"instance-variable": "range",
																"value": "enemy.attackRange"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "projectile",
															"sid": 824511082317016,
															"parameters": {
																"instance-variable": "stabDamage",
																"value": "enemy.stabDamage"
															}
														},
														{
															"id": "set-width",
															"objectClass": "projectile",
															"sid": 702266015949138,
															"parameters": {
																"width": "SIZE"
															}
														},
														{
															"id": "set-height",
															"objectClass": "projectile",
															"sid": 730559231798823,
															"parameters": {
																"height": "Self.Width / ISOMETRIC_DIVIDER"
															}
														},
														{
															"type": "comment",
															"text": "Adjust the projectile's speed to account for isometry."
														},
														{
															"type": "comment",
															"text": "If we set the angle before we set the speed, and the speed of the template projectile is 0, this projectile will only flight straight left or right."
														},
														{
															"id": "set-angle-of-motion",
															"objectClass": "projectile",
															"sid": 827573118029758,
															"behaviorType": "Bullet",
															"parameters": {
																"angle": "enemy.MoveTo.MovingAngle"
															}
														},
														{
															"id": "set-speed",
															"objectClass": "projectile",
															"sid": 837456207660489,
															"behaviorType": "Bullet",
															"parameters": {
																"speed": "Functions.isometrify(PROJECTILE_SPEED, Self.Bullet.AngleOfMotion)"
															}
														},
														{
															"id": "wait",
															"objectClass": "System",
															"sid": 246418723989501,
															"parameters": {
																"seconds": "projectileManifestationTime"
															}
														},
														{
															"type": "comment",
															"text": "The projectile is now at the manifestation point. Spawn the projectile's visual representation."
														},
														{
															"id": "create-object",
															"objectClass": "System",
															"sid": 148522850431655,
															"parameters": {
																"object-to-create": "crossbowBolt",
																"layer": "\"main\"",
																"x": "projectile.X",
																"y": "projectile.Y",
																"create-hierarchy": false,
																"template-name": "\"\""
															}
														},
														{
															"id": "set-boolean-instvar",
															"objectClass": "projectile",
															"sid": 703890200324516,
															"parameters": {
																"instance-variable": "enabled",
																"value": "true"
															}
														}
													],
													"sid": 792676751037144,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "pick-last-created",
																	"objectClass": "System",
																	"sid": 487612138188202,
																	"parameters": {
																		"object": "crossbowBolt"
																	}
																}
															],
															"actions": [
																{
																	"id": "set-animation",
																	"objectClass": "crossbowBolt",
																	"sid": 281551004768729,
																	"parameters": {
																		"animation": "str(enemy.degrees)",
																		"from": "beginning"
																	}
																},
																{
																	"id": "add-child",
																	"objectClass": "projectile",
																	"sid": 244179777051147,
																	"parameters": {
																		"child": "crossbowBolt",
																		"transform-x": true,
																		"transform-y": true,
																		"transform-w": false,
																		"transform-h": false,
																		"transform-a": true,
																		"transform-o": true,
																		"transform-z-elevation": true,
																		"transform-visibility": false,
																		"destroy-with-parent": true
																	}
																},
																{
																	"id": "play-at-object",
																	"objectClass": "Audio",
																	"sid": 936442780199264,
																	"parameters": {
																		"audio-file": "arrowShot",
																		"loop": "not-looping",
																		"volume": "0",
																		"object": "crossbowBolt",
																		"inner-angle": "360",
																		"outer-angle": "360",
																		"outer-gain": "0",
																		"tag-optional": "\"\""
																	}
																}
															],
															"sid": 233638538736242
														}
													]
												}
											]
										}
									]
								}
							]
						},
						{
							"functionName": "goblinWarlock",
							"functionDescription": "",
							"functionCategory": "enemies",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 195491233080812,
							"children": [
								{
									"eventType": "variable",
									"name": "PROJECTILE_SPEED",
									"type": "number",
									"initialValue": "600",
									"comment": "The speed of the projectile",
									"isStatic": false,
									"isConstant": true,
									"sid": 369324009696675
								},
								{
									"eventType": "variable",
									"name": "MANIFESTATION_POINT",
									"type": "number",
									"initialValue": "100",
									"comment": "The longest possible distance (in pixels) between the enemy origin and where the projectile visual representation should appear. This is when they are facing directly left or right.",
									"isStatic": false,
									"isConstant": true,
									"sid": 768361143392393
								},
								{
									"eventType": "variable",
									"name": "MANIFESTATION_FRAME",
									"type": "number",
									"initialValue": "10",
									"comment": "The (0-based) frame in which the projectile should manifest",
									"isStatic": false,
									"isConstant": true,
									"sid": 521281225561699
								},
								{
									"eventType": "variable",
									"name": "SIZE",
									"type": "number",
									"initialValue": "30",
									"comment": "The size of the projectile",
									"isStatic": false,
									"isConstant": true,
									"sid": 311141190353756
								},
								{
									"eventType": "variable",
									"name": "projectileManifestationTime",
									"type": "number",
									"initialValue": "0",
									"comment": "How long it takes the projectile to get from the enemy's origin to the manifestation point",
									"isStatic": true,
									"isConstant": false,
									"sid": 135630290224051
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-children",
											"objectClass": "enemy",
											"sid": 398729890238329,
											"parameters": {
												"child": "enemyBody",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 124188989084013,
											"parameters": {
												"variable": "projectileManifestationTime",
												"value": "Functions.isometrify(MANIFESTATION_POINT, enemy.degrees) / PROJECTILE_SPEED"
											}
										},
										{
											"id": "stop",
											"objectClass": "enemy",
											"sid": 504078988693406,
											"behaviorType": "MoveTo"
										},
										{
											"id": "set-moving-angle",
											"objectClass": "enemy",
											"sid": 944841252633778,
											"behaviorType": "MoveTo",
											"parameters": {
												"angle": "angle(Self.X, Self.Y, player.X, player.Y)"
											}
										},
										{
											"id": "set-animation",
											"objectClass": "enemyBody",
											"sid": 579305051478491,
											"parameters": {
												"animation": "\"attack_\" & enemy.degrees",
												"from": "beginning"
											}
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 665976515388519,
											"parameters": {
												"seconds": " MANIFESTATION_FRAME / enemyBody.AnimationSpeed - projectileManifestationTime"
											}
										}
									],
									"sid": 493235774122151,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-boolean-instance-variable-set",
													"objectClass": "enemy",
													"sid": 285805991759328,
													"parameters": {
														"instance-variable": "hit"
													},
													"isInverted": true
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "enemy",
													"sid": 661015354898242,
													"parameters": {
														"instance-variable": "currentHealth",
														"comparison": 4,
														"value": "0"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "If the enemy was hit between the time when the attack started, but before the projectile was generated, cease continuation with the attack."
												},
												{
													"id": "create-object",
													"objectClass": "System",
													"sid": 469502575992036,
													"parameters": {
														"object-to-create": "projectile",
														"layer": "\"mechanics\"",
														"x": "enemy.X",
														"y": "enemy.Y",
														"create-hierarchy": false,
														"template-name": "\"\""
													}
												}
											],
											"sid": 561465114721611,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-last-created",
															"objectClass": "System",
															"sid": 646588341210602,
															"parameters": {
																"object": "projectile"
															}
														}
													],
													"actions": [
														{
															"id": "add-child",
															"objectClass": "enemy",
															"sid": 992349569937384,
															"parameters": {
																"child": "projectile",
																"transform-x": false,
																"transform-y": false,
																"transform-w": false,
																"transform-h": false,
																"transform-a": false,
																"transform-o": false,
																"transform-z-elevation": false,
																"transform-visibility": false,
																"destroy-with-parent": true
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "projectile",
															"sid": 555217025714282,
															"parameters": {
																"instance-variable": "range",
																"value": "enemy.attackRange"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "projectile",
															"sid": 250729036068441,
															"parameters": {
																"instance-variable": "lightningDamage",
																"value": "enemy.lightningDamage"
															}
														},
														{
															"id": "set-width",
															"objectClass": "projectile",
															"sid": 851506649190779,
															"parameters": {
																"width": "SIZE"
															}
														},
														{
															"id": "set-height",
															"objectClass": "projectile",
															"sid": 226605164943253,
															"parameters": {
																"height": "Self.Width / ISOMETRIC_DIVIDER"
															}
														},
														{
															"id": "set-speed",
															"objectClass": "projectile",
															"sid": 906117778687448,
															"behaviorType": "Bullet",
															"parameters": {
																"speed": "Functions.isometrify(PROJECTILE_SPEED, Self.Bullet.AngleOfMotion)"
															}
														},
														{
															"id": "set-angle-of-motion",
															"objectClass": "projectile",
															"sid": 836908037661225,
															"behaviorType": "Bullet",
															"parameters": {
																"angle": "enemy.MoveTo.MovingAngle"
															}
														},
														{
															"id": "wait",
															"objectClass": "System",
															"sid": 782251004938865,
															"parameters": {
																"seconds": "projectileManifestationTime"
															}
														},
														{
															"id": "create-object",
															"objectClass": "System",
															"sid": 162586936319832,
															"parameters": {
																"object-to-create": "lightningOrb",
																"layer": "\"main\"",
																"x": "projectile.X",
																"y": "projectile.Y",
																"create-hierarchy": false,
																"template-name": "\"\""
															}
														},
														{
															"id": "set-boolean-instvar",
															"objectClass": "projectile",
															"sid": 276295156620133,
															"parameters": {
																"instance-variable": "enabled",
																"value": "true"
															}
														}
													],
													"sid": 128093128862648,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "pick-last-created",
																	"objectClass": "System",
																	"sid": 238163367629294,
																	"parameters": {
																		"object": "lightningOrb"
																	}
																}
															],
															"actions": [
																{
																	"id": "add-child",
																	"objectClass": "projectile",
																	"sid": 509425320795648,
																	"parameters": {
																		"child": "lightningOrb",
																		"transform-x": true,
																		"transform-y": true,
																		"transform-w": false,
																		"transform-h": false,
																		"transform-a": true,
																		"transform-o": true,
																		"transform-z-elevation": true,
																		"transform-visibility": false,
																		"destroy-with-parent": true
																	}
																},
																{
																	"id": "play-at-object",
																	"objectClass": "Audio",
																	"sid": 765602987188973,
																	"parameters": {
																		"audio-file": "lightningOrb",
																		"loop": "looping",
																		"volume": "0",
																		"object": "lightningOrb",
																		"inner-angle": "360",
																		"outer-angle": "360",
																		"outer-gain": "0",
																		"tag-optional": "str(projectile.UID)"
																	}
																}
															],
															"sid": 580403643807865
														}
													]
												}
											]
										}
									]
								}
							]
						}
					],
					"sid": 353498742385237
				}
			],
			"sid": 617251843840566
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "shadows",
			"description": "The player's shadows are global because we add them to a layout, check the 'global' checkbox, then delete them from that layout.",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "we tried a lot of different things to get shadows to stay immediately behind their hasShadow. A 'for' loop over the shadows moving them behind their hasShadow didn't work, neither did the Z elevation hierarchy parameter. We just decided to make shadows sortable, that seems to be working."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-parent",
							"objectClass": "shadow",
							"sid": 226383708709643,
							"parameters": {
								"parent": "hasShadow",
								"which": "own"
							}
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "shadow",
							"sid": 627266054647833,
							"parameters": {
								"animation": "hasShadow.AnimationName",
								"from": "current-frame"
							}
						},
						{
							"id": "set-animation-frame",
							"objectClass": "shadow",
							"sid": 282623935223883,
							"parameters": {
								"frame-number": "hasShadow.AnimationFrame"
							}
						}
					],
					"sid": 824913553665963
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-created",
							"objectClass": "hasShadow",
							"sid": 460073097317385
						}
					],
					"actions": [],
					"sid": 559501222679591,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-children",
									"objectClass": "hasShadow",
									"sid": 229157054686219,
									"parameters": {
										"child": "shadow",
										"which": "own"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "If this object already has a shadow, do nothing"
								}
							],
							"sid": 306819096486497
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 710553164941548
								},
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "hasShadow",
									"sid": 331127415234228,
									"parameters": {
										"instance-variable": "createShadow"
									}
								}
							],
							"actions": [
								{
									"id": "create-object-by-name",
									"objectClass": "System",
									"sid": 127793252940447,
									"parameters": {
										"object-name": "hasShadow.ObjectTypeName & \"_shadow\"",
										"layer": "hasShadow.LayerName",
										"x": "hasShadow.X",
										"y": "hasShadow.Y - 1",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								}
							],
							"sid": 922237215237393,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-last-created",
											"objectClass": "System",
											"sid": 738691775554172,
											"parameters": {
												"object": "shadow"
											}
										}
									],
									"actions": [
										{
											"id": "add-child",
											"objectClass": "hasShadow",
											"sid": 741621168246062,
											"parameters": {
												"child": "shadow",
												"transform-x": true,
												"transform-y": true,
												"transform-w": false,
												"transform-h": false,
												"transform-a": true,
												"transform-o": true,
												"transform-z-elevation": true,
												"transform-visibility": true,
												"destroy-with-parent": true
											}
										}
									],
									"sid": 974179425393640
								}
							]
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-created",
							"objectClass": "shadow",
							"sid": 726851021711244
						}
					],
					"actions": [
						{
							"id": "set-opacity",
							"objectClass": "shadow",
							"sid": 168204375862268,
							"parameters": {
								"opacity": "50"
							}
						},
						{
							"id": "set-effect-parameter",
							"objectClass": "shadow",
							"sid": 569611365168761,
							"parameters": {
								"effect": "\"BlurHorizontal\"",
								"parameter-index": "0",
								"value": "75"
							}
						},
						{
							"id": "set-effect-parameter",
							"objectClass": "shadow",
							"sid": 308117943008354,
							"parameters": {
								"effect": "\"BlurVertical\"",
								"parameter-index": "0",
								"value": "75"
							}
						}
					],
					"sid": 784344448043891
				}
			],
			"sid": 538206850780870
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "projectiles",
			"description": "having a projectile object on the main menu in the margin prevents an issue where \"bullet - set angle of motion\" only ever sets the projectile's angle of motion to either 0 or 180. ",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-end-of-layout",
							"objectClass": "System",
							"sid": 628499402402762
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Projectiles are already destroyed when a layout ends because they aren't global. This quote-unquote 'natural' destroy takes place after this event sheet loses authority, so to speak, so the below event doesn't get to run. This event will trigger before we've completely transitioned off of the layout, so projectile audio will properly cease to play."
						},
						{
							"id": "destroy",
							"objectClass": "projectile",
							"sid": 794027424251130
						}
					],
					"sid": 724152661026630
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-destroyed",
							"objectClass": "projectile",
							"sid": 866847254131652
						}
					],
					"actions": [
						{
							"id": "stop",
							"objectClass": "Audio",
							"sid": 158935877118093,
							"parameters": {
								"tag": "str(projectile.UID)"
							}
						}
					],
					"sid": 852865633208779
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "projectile",
							"sid": 398405530236454,
							"parameters": {
								"object": "prop"
							}
						},
						{
							"id": "compare-distance-travelled",
							"objectClass": "projectile",
							"sid": 945441159530041,
							"behaviorType": "Bullet",
							"parameters": {
								"comparison": 5,
								"distance": "Functions.isometrify(Self.range, Self.Bullet.AngleOfMotion)"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "TODO: We want projectiles not to go through props, but this will destroy a projectile even if it lightly grazes a prop, that's not ideal"
						},
						{
							"id": "destroy",
							"objectClass": "projectile",
							"sid": 785391520212267
						}
					],
					"sid": 585039691434774,
					"isOrBlock": true
				},
				{
					"eventType": "comment",
					"text": "TODO: Add all other damage types"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "projectile",
							"sid": 866965572546389,
							"parameters": {
								"instance-variable": "enabled"
							}
						}
					],
					"actions": [],
					"sid": 932202329358705,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-collision-with-another-object",
									"objectClass": "projectile",
									"sid": 703840981642531,
									"parameters": {
										"object": "enemy"
									}
								},
								{
									"id": "pick-parent",
									"objectClass": "projectile",
									"sid": 513615765405988,
									"parameters": {
										"parent": "player",
										"which": "own"
									}
								}
							],
							"actions": [
								{
									"id": "subtract-from-instvar",
									"objectClass": "enemy",
									"sid": 868142860697604,
									"parameters": {
										"instance-variable": "currentHealth",
										"value": "projectile.slashDamage * (1 - Self.physicalResistance)"
									}
								},
								{
									"id": "subtract-from-instvar",
									"objectClass": "enemy",
									"sid": 601406039109145,
									"parameters": {
										"instance-variable": "currentHealth",
										"value": "projectile.smashDamage * (1 - Self.physicalResistance)"
									}
								},
								{
									"id": "set-max-speed",
									"objectClass": "enemy",
									"sid": 429298093959011,
									"behaviorType": "knockback",
									"parameters": {
										"max-speed": "projectile.knockbackSpeed"
									}
								},
								{
									"id": "move-to-position",
									"objectClass": "enemy",
									"sid": 446507994368750,
									"behaviorType": "knockback",
									"parameters": {
										"x": "Self.X + Functions.isometrify(projectile.knockbackDistance, projectile.Bullet.AngleOfMotion) * cos(projectile.Bullet.AngleOfMotion)",
										"y": "Self.Y + Functions.isometrify(projectile.knockbackDistance, projectile.Bullet.AngleOfMotion) * sin(projectile.Bullet.AngleOfMotion)",
										"mode": "direct"
									}
								}
							],
							"sid": 673936274587997,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 539581589833663,
											"parameters": {
												"value": "Functions.contains(enemy.attributes, \"Unflinching\")"
											},
											"isInverted": true
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "enemy",
											"sid": 907670062657075,
											"parameters": {
												"instance-variable": "currentHealth",
												"comparison": 4,
												"value": "0"
											}
										},
										{
											"id": "pick-children",
											"objectClass": "enemy",
											"sid": 381198098849893,
											"parameters": {
												"child": "enemyBody",
												"which": "own"
											}
										},
										{
											"id": "pick-parent",
											"objectClass": "enemyBody",
											"sid": 837310322782666,
											"parameters": {
												"parent": "enemy",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Hitstun the enemy, as long as they aren't Unflinching and the projectile didn't kill them."
										},
										{
											"type": "comment",
											"text": "TODO: Can enemies get stunlocked?"
										},
										{
											"id": "stop",
											"objectClass": "enemy",
											"sid": 258415481730862,
											"behaviorType": "MoveTo"
										},
										{
											"id": "set-boolean-instvar",
											"objectClass": "enemy",
											"sid": 804180954135793,
											"parameters": {
												"instance-variable": "hit",
												"value": "true"
											}
										},
										{
											"id": "set-animation",
											"objectClass": "enemyBody",
											"sid": 922100931737719,
											"parameters": {
												"animation": "\"hit_\" & enemy.degrees",
												"from": "beginning"
											}
										},
										{
											"id": "play-at-object-by-name",
											"objectClass": "Audio",
											"sid": 564235910684039,
											"parameters": {
												"folder": "sounds",
												"audio-file-name": "enemy.type & \"_hit\"",
												"loop": "not-looping",
												"volume": "0",
												"object": "enemy",
												"inner-angle": "360",
												"outer-angle": "360",
												"outer-gain": "0",
												"tag-optional": "\"\""
											}
										}
									],
									"sid": 305641316456038,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-all",
													"objectClass": "System",
													"sid": 519966984263376,
													"parameters": {
														"object": "projectile"
													}
												},
												{
													"id": "pick-children",
													"objectClass": "enemy",
													"sid": 387006315558891,
													"parameters": {
														"child": "projectile",
														"which": "own"
													}
												}
											],
											"actions": [],
											"sid": 813950715761836,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-boolean-instance-variable-set",
															"objectClass": "projectile",
															"sid": 532359483178596,
															"parameters": {
																"instance-variable": "enabled"
															},
															"isInverted": true
														},
														{
															"id": "is-boolean-instance-variable-set",
															"objectClass": "projectile",
															"sid": 949208087040951,
															"parameters": {
																"instance-variable": "isMelee"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "destroy ranged projectiles owned by this enemy that: haven't been enabled (visually generated) yet, or are melee projectiles"
														},
														{
															"id": "destroy",
															"objectClass": "projectile",
															"sid": 690045203004240
														}
													],
													"sid": 953439831951762,
													"isOrBlock": true
												}
											]
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "projectile",
											"sid": 930689339639153,
											"parameters": {
												"instance-variable": "piercing"
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "destroy",
											"objectClass": "projectile",
											"sid": 712906424152491
										}
									],
									"sid": 647399467179630
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-collision-with-another-object",
									"objectClass": "projectile",
									"sid": 921224045921521,
									"parameters": {
										"object": "player"
									}
								},
								{
									"id": "pick-parent",
									"objectClass": "projectile",
									"sid": 353666848228170,
									"parameters": {
										"parent": "enemy",
										"which": "own"
									}
								}
							],
							"actions": [],
							"sid": 591454218470020,
							"children": [
								{
									"eventType": "variable",
									"name": "playerHealthBeforeImpact",
									"type": "number",
									"initialValue": "0",
									"comment": "The player's health before the projectile hit them.",
									"isStatic": true,
									"isConstant": false,
									"sid": 386149964426580
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 899474723743372,
											"parameters": {
												"value": "Functions.isAnimationPlaying(\"block\")"
											},
											"isInverted": true
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 307817542790347,
											"parameters": {
												"value": "Functions.isAnimationPlaying(\"hit\")"
											},
											"isInverted": true
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "player",
											"sid": 662190681012854,
											"parameters": {
												"instance-variable": "currentHealth",
												"comparison": 4,
												"value": "0"
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 590785792254548,
											"parameters": {
												"object": "gear",
												"expression": "gear.type",
												"comparison": 0,
												"value": "\"offHand\""
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "player",
											"sid": 304888180753921,
											"parameters": {
												"instance-variable": "blockChance",
												"comparison": 5,
												"value": "floor(random(1, 100))"
											}
										},
										{
											"id": "is-overlapping-another-object",
											"objectClass": "player",
											"sid": 602935734342984,
											"parameters": {
												"object": "nonCombatArea"
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "If the player is alive, isn't in a non-combat area, has an offHand item equipped, isn't currently blocking or getting hit, and successfully blocks the attack, play the block animation, then we're done."
										},
										{
											"callFunction": "channeledAnimation",
											"sid": 837860087589841,
											"parameters": [
												"\"block\""
											]
										}
									],
									"sid": 661315679644106,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-all",
													"objectClass": "System",
													"sid": 309486188386674,
													"parameters": {
														"object": "projectile"
													}
												},
												{
													"id": "pick-children",
													"objectClass": "player",
													"sid": 232602649743126,
													"parameters": {
														"child": "projectile",
														"which": "own"
													}
												}
											],
											"actions": [
												{
													"id": "destroy",
													"objectClass": "projectile",
													"sid": 922785036681924
												}
											],
											"sid": 162273133516722,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-boolean-instance-variable-set",
															"objectClass": "projectile",
															"sid": 907979179229907,
															"parameters": {
																"instance-variable": "enabled"
															},
															"isInverted": true
														},
														{
															"id": "is-boolean-instance-variable-set",
															"objectClass": "projectile",
															"sid": 186493852144732,
															"parameters": {
																"instance-variable": "isMelee"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "destroy ranged projectiles owned by the player that: haven't been enabled (visually generated) yet, or are melee projectiles"
														},
														{
															"id": "destroy",
															"objectClass": "projectile",
															"sid": 266194346335621
														}
													],
													"sid": 727704609425814,
													"isOrBlock": true
												}
											]
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 212609481973178
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "If the projectile didn't get blocked..."
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 705146640200271,
											"parameters": {
												"variable": "playerHealthBeforeImpact",
												"value": "player.currentHealth"
											}
										},
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 893185114435343,
											"parameters": {
												"instance-variable": "currentHealth",
												"value": "projectile.lightningDamage * (1 - Self.lightningResistance)"
											}
										},
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 132008705769330,
											"parameters": {
												"instance-variable": "currentHealth",
												"value": "projectile.stabDamage * (1 - Self.physicalResistance)"
											}
										},
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 226885000296688,
											"parameters": {
												"instance-variable": "currentHealth",
												"value": "projectile.slashDamage * (1 - Self.physicalResistance)"
											}
										}
									],
									"sid": 680787690708581,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 393642768034833,
													"parameters": {
														"value": "Functions.isAnimationPlaying(\"block\")"
													},
													"isInverted": true
												},
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 274847762388388,
													"parameters": {
														"value": "Functions.isAnimationPlaying(\"hit\")"
													},
													"isInverted": true
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "player",
													"sid": 353087544354699,
													"parameters": {
														"instance-variable": "currentHealth",
														"comparison": 2,
														"value": "playerHealthBeforeImpact - Self.maxHealth * Self.hitstunThreshold"
													}
												},
												{
													"id": "is-overlapping-another-object",
													"objectClass": "player",
													"sid": 406192656726866,
													"parameters": {
														"object": "nonCombatArea"
													},
													"isInverted": true
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "player",
													"sid": 884911017862546,
													"parameters": {
														"instance-variable": "currentHealth",
														"comparison": 4,
														"value": "0"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "If the player isn't currently blocking or getting hit, isn't in a non-combat area, and takes a hit that doesn't kill him, and that hit is bigger than the hitstun threshold, the player gets hitstunned"
												},
												{
													"type": "comment",
													"text": "TODO: Attributes for the player (can they be unflinching?)"
												},
												{
													"callFunction": "channeledAnimation",
													"sid": 623891007101868,
													"parameters": [
														"\"hit\""
													]
												}
											],
											"sid": 181406029233488,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-all",
															"objectClass": "System",
															"sid": 832696051238529,
															"parameters": {
																"object": "projectile"
															}
														},
														{
															"id": "pick-children",
															"objectClass": "player",
															"sid": 298756473891858,
															"parameters": {
																"child": "projectile",
																"which": "own"
															}
														}
													],
													"actions": [
														{
															"id": "destroy",
															"objectClass": "projectile",
															"sid": 582753969205622
														}
													],
													"sid": 535985135308689,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "is-boolean-instance-variable-set",
																	"objectClass": "projectile",
																	"sid": 560527795339996,
																	"parameters": {
																		"instance-variable": "enabled"
																	},
																	"isInverted": true
																},
																{
																	"id": "is-boolean-instance-variable-set",
																	"objectClass": "projectile",
																	"sid": 683487282486522,
																	"parameters": {
																		"instance-variable": "isMelee"
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "destroy ranged projectiles owned by the player that: haven't been enabled (visually generated) yet, or are melee projectiles"
																},
																{
																	"id": "destroy",
																	"objectClass": "projectile",
																	"sid": 655951994131290
																}
															],
															"sid": 990020247873838,
															"isOrBlock": true
														}
													]
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-boolean-instance-variable-set",
													"objectClass": "projectile",
													"sid": 558866989360890,
													"parameters": {
														"instance-variable": "piercing"
													},
													"isInverted": true
												}
											],
											"actions": [
												{
													"id": "destroy",
													"objectClass": "projectile",
													"sid": 887800632849253
												}
											],
											"sid": 944725340629196
										}
									]
								}
							]
						}
					]
				}
			],
			"sid": 725204103231325
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "data management",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"functionName": "arrayLookup",
					"functionDescription": "look up a value in an array",
					"functionCategory": "data",
					"functionReturnType": "string",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "array",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 138615066068748
						},
						{
							"name": "simpleName",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 918344827624248
						},
						{
							"name": "targetColumn",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 291672800255140
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 787369920357309,
							"parameters": {
								"object": "queriedArrays",
								"expression": "queriedArrays.ObjectTypeName",
								"comparison": 0,
								"value": "array"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "pick the array that was passed (the calling event might not pick it, so we can't use \"copy picked\")"
						}
					],
					"sid": 643674845440053,
					"children": [
						{
							"eventType": "variable",
							"name": "targetColumnNumber",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": true,
							"isConstant": false,
							"sid": 559595863195308
						},
						{
							"eventType": "variable",
							"name": "simpleNameColumnNumber",
							"type": "number",
							"initialValue": "0",
							"comment": "simpleName is always the first column",
							"isStatic": false,
							"isConstant": true,
							"sid": 959500024424395
						},
						{
							"eventType": "variable",
							"name": "returnValue",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"isStatic": true,
							"isConstant": false,
							"sid": 148176261089754
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each-element",
									"objectClass": "queriedArrays",
									"sid": 165803417552242,
									"parameters": {
										"axes": "x"
									}
								},
								{
									"id": "compare-current-value",
									"objectClass": "queriedArrays",
									"sid": 156802794488655,
									"parameters": {
										"comparison": 0,
										"value": "targetColumn"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "loop through the column headers to find the columns we want"
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 878163469440177,
									"parameters": {
										"variable": "targetColumnNumber",
										"value": "queriedArrays.CurX"
									}
								}
							],
							"sid": 946216334824181
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 572601404125749,
									"parameters": {
										"name": "\"\"",
										"start-index": "1",
										"end-index": "queriedArrays.Height"
									}
								},
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 628104764048334,
									"parameters": {
										"first-value": "queriedArrays.At(simpleNameColumnNumber, loopindex)",
										"comparison": 0,
										"second-value": "simpleName"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "loop through the cells of just that column to find the value we want, skipping the header row. Once we find it, set returnValue to the value of the cell located in that row but column of targetColumnNumber"
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 134057885551602,
									"parameters": {
										"variable": "returnValue",
										"value": "queriedArrays.At(targetColumnNumber, loopindex)"
									}
								}
							],
							"sid": 895434417246662,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 956672283334857,
											"parameters": {
												"first-value": "returnValue",
												"comparison": 1,
												"second-value": "\"\""
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "once we have a return value, stop the loop (we're not sure if setting a return value also ends the function)"
										},
										{
											"id": "stop-loop",
											"objectClass": "System",
											"sid": 596610162597647
										},
										{
											"id": "set-function-return-value",
											"objectClass": "Functions",
											"sid": 211056130340703,
											"parameters": {
												"value": "returnValue"
											}
										}
									],
									"sid": 721602884260980
								}
							]
						}
					]
				},
				{
					"functionName": "getColumnNumber",
					"functionDescription": "Find the column number of a column by its name",
					"functionCategory": "data",
					"functionReturnType": "number",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "array",
							"type": "string",
							"initialValue": "",
							"comment": "The array in which to find the column name and number",
							"sid": 417535318627685
						},
						{
							"name": "columnName",
							"type": "string",
							"initialValue": "",
							"comment": "The column name for which the number is needed",
							"sid": 535319316146738
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 969157735323348,
							"parameters": {
								"object": "queriedArrays",
								"expression": "queriedArrays.ObjectTypeName",
								"comparison": 0,
								"value": "array"
							}
						},
						{
							"id": "for-each-element",
							"objectClass": "queriedArrays",
							"sid": 809142578541249,
							"parameters": {
								"axes": "x"
							}
						},
						{
							"id": "compare-current-value",
							"objectClass": "queriedArrays",
							"sid": 807903728824992,
							"parameters": {
								"comparison": 0,
								"value": "columnName"
							}
						}
					],
					"actions": [
						{
							"id": "set-function-return-value",
							"objectClass": "Functions",
							"sid": 874778872234686,
							"parameters": {
								"value": "queriedArrays.CurX"
							}
						}
					],
					"sid": 454046452601444
				},
				{
					"functionName": "getSheetNumber",
					"functionDescription": "Find the number of a sheet by its name",
					"functionCategory": "data",
					"functionReturnType": "number",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "nameArray",
							"type": "string",
							"initialValue": "",
							"comment": "The array which contains the names of the sheets",
							"sid": 698802982475783
						},
						{
							"name": "value",
							"type": "string",
							"initialValue": "",
							"comment": "The value that we want the sheet of",
							"sid": 219389862100279
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 435052508819299,
							"parameters": {
								"object": "queriedArrays",
								"expression": "queriedArrays.ObjectTypeName",
								"comparison": 0,
								"value": "nameArray"
							}
						},
						{
							"id": "for-each-element",
							"objectClass": "queriedArrays",
							"sid": 587115061092778,
							"parameters": {
								"axes": "xy"
							}
						},
						{
							"id": "compare-current-value",
							"objectClass": "queriedArrays",
							"sid": 480528147530679,
							"parameters": {
								"comparison": 0,
								"value": "value"
							}
						}
					],
					"actions": [
						{
							"id": "set-function-return-value",
							"objectClass": "Functions",
							"sid": 166673294832581,
							"parameters": {
								"value": "queriedArrays.CurY"
							}
						}
					],
					"sid": 850952352225054
				},
				{
					"functionName": "contains",
					"functionDescription": "Whether or not a string contains another string.",
					"functionCategory": "data",
					"functionReturnType": "number",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "text",
							"type": "string",
							"initialValue": "",
							"comment": "Text to be searched.",
							"sid": 349128528220351
						},
						{
							"name": "findText",
							"type": "string",
							"initialValue": "",
							"comment": "Text to search for.",
							"sid": 335367374834632
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-function-return-value",
							"objectClass": "Functions",
							"sid": 931450356339835,
							"parameters": {
								"value": "find(text, findText) = -1 ? 0 : 1"
							}
						}
					],
					"sid": 997592836136537
				}
			],
			"sid": 864124535956996
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "mods",
			"description": "We can't pass boolean parameters between functions, so we have to evaluate the boolean parameter is events, and call the next function accordingly. The string \"true\" takes up 3x more memory than a boolean, so using strings as an alternative might be less performant. There's a good chance an update will eventually be released that allows passing a boolean.",
			"isActiveOnStart": true,
			"children": [
				{
					"functionName": "manageMods",
					"functionDescription": "activate or deactivate the mods of an item to the player",
					"functionCategory": "mods",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "active",
							"type": "boolean",
							"initialValue": "false",
							"comment": "whether or not to activate or deactivate this mod",
							"sid": 608758543573668
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 502769143658461,
					"children": [
						{
							"eventType": "variable",
							"name": "mod",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"isStatic": true,
							"isConstant": false,
							"sid": 675202259414484
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 195257844547582,
									"parameters": {
										"name": "\"\"",
										"start-index": "0",
										"end-index": "tokencount(item.mods, \";\") - 2"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 144624815497568,
									"parameters": {
										"variable": "mod",
										"value": "tokenat(item.mods, loopindex, \";\")"
									}
								}
							],
							"sid": 867779511144806,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 468135131817932,
											"parameters": {
												"variable": "active"
											}
										}
									],
									"actions": [
										{
											"callFunction": "modCaller",
											"sid": 828874850314975,
											"parameters": [
												true,
												"tokenat(mod, 1, \":\")",
												"tokenat(mod, 0, \":\")"
											]
										}
									],
									"sid": 931958845924383
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 797626541149464
										}
									],
									"actions": [
										{
											"callFunction": "modCaller",
											"sid": 735049010108810,
											"parameters": [
												false,
												"tokenat(mod, 1, \":\")",
												"tokenat(mod, 0, \":\")"
											]
										}
									],
									"sid": 218511279335757
								}
							]
						}
					]
				},
				{
					"functionName": "modCaller",
					"functionDescription": "Intermediary function to call a mod function.",
					"functionCategory": "mods",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "active",
							"type": "boolean",
							"initialValue": "false",
							"comment": "",
							"sid": 185032068040398
						},
						{
							"name": "modDescription",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 668551496321785
						},
						{
							"name": "ModName",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 563496748576604
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "call-mapped-function",
							"objectClass": "Functions",
							"sid": 314460352638117,
							"parameters": {
								"name": "\"equipmentMods\"",
								"string": "modName",
								"forward-params": "0"
							}
						}
					],
					"sid": 899772844374345
				},
				{
					"functionName": "getValueFromMod",
					"functionDescription": "returns the Nth text value found inside the specified mod description",
					"functionCategory": "mods",
					"functionReturnType": "any",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "mod",
							"type": "string",
							"initialValue": "",
							"comment": "the mod description from which to extract the string",
							"sid": 615512659832660
						},
						{
							"name": "index",
							"type": "number",
							"initialValue": "0",
							"comment": "the index of the value to extract",
							"sid": 799799702803442
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-function-return-value",
							"objectClass": "Functions",
							"sid": 231109643138954,
							"parameters": {
								"value": "RegexReplace(RegexMatchAt(mod, \"\\{.*?\\}\", \"g\", index), \"\\{|}\", \"g\", \"\")"
							}
						}
					],
					"sid": 320744027056050
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "mod functions",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"functionName": "flatHealth",
							"functionDescription": "",
							"functionCategory": "mods",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "active",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"sid": 570253738943713
								},
								{
									"name": "modDescription",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 307511183096554
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 444193088646752,
							"children": [
								{
									"eventType": "variable",
									"name": "value",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 263274720117195
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 695155855001729,
											"parameters": {
												"variable": "value",
												"value": "Functions.getValueFromMod(modDescription, 0)"
											}
										}
									],
									"sid": 534777214177807
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 259894643029231,
											"parameters": {
												"variable": "active"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 197132544744124,
											"parameters": {
												"instance-variable": "maxHealth",
												"value": "value"
											}
										},
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 778544303269221,
											"parameters": {
												"instance-variable": "currentHealth",
												"value": "value"
											}
										}
									],
									"sid": 942509778023512
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 465894261465579
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "prevent removing this mod from killing the player"
										},
										{
											"id": "set-instvar-value",
											"objectClass": "player",
											"sid": 234393131366957,
											"parameters": {
												"instance-variable": "currentHealth",
												"value": "clamp(Self.currentHealth - value, 1, Self.maxHealth)"
											}
										},
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 429082425325855,
											"parameters": {
												"instance-variable": "maxHealth",
												"value": "value"
											}
										}
									],
									"sid": 122281662245358
								}
							]
						},
						{
							"functionName": "flatSlash",
							"functionDescription": "",
							"functionCategory": "mods",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "active",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"sid": 902260859033184
								},
								{
									"name": "modDescription",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 824779299585551
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 485337182466415,
							"children": [
								{
									"eventType": "variable",
									"name": "value",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 114515034340047
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 363740006116352,
											"parameters": {
												"variable": "value",
												"value": "Functions.getValueFromMod(modDescription, 0)"
											}
										}
									],
									"sid": 777594694730042
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 594579713986562,
											"parameters": {
												"variable": "active"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 284955818513996,
											"parameters": {
												"instance-variable": "slashDamage",
												"value": "value"
											}
										}
									],
									"sid": 100630951832736
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 578322709621714
										}
									],
									"actions": [
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 860832872719684,
											"parameters": {
												"instance-variable": "slashDamage",
												"value": "value"
											}
										}
									],
									"sid": 843155040696154
								}
							]
						},
						{
							"functionName": "flatStab",
							"functionDescription": "",
							"functionCategory": "mods",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "active",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"sid": 795247527844535
								},
								{
									"name": "modDescription",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 195992795428678
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 428722222280473,
							"children": [
								{
									"eventType": "variable",
									"name": "value",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 134117444559985
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 966143064087912,
											"parameters": {
												"variable": "value",
												"value": "Functions.getValueFromMod(modDescription, 0)"
											}
										}
									],
									"sid": 836654181109835
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 124294150702013,
											"parameters": {
												"variable": "active"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 299665220624183,
											"parameters": {
												"instance-variable": "stabDamage",
												"value": "value"
											}
										}
									],
									"sid": 310036445399785
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 588054324025359
										}
									],
									"actions": [
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 110376256430086,
											"parameters": {
												"instance-variable": "stabDamage",
												"value": "value"
											}
										}
									],
									"sid": 915180563061296
								}
							]
						},
						{
							"functionName": "flatSlashAndStab",
							"functionDescription": "",
							"functionCategory": "mods",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "active",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"sid": 486814130079463
								},
								{
									"name": "modDescription",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 113661033345682
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 856050339528452,
							"children": [
								{
									"eventType": "variable",
									"name": "value",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 810736970502754
								},
								{
									"eventType": "variable",
									"name": "value2",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 472590266064672
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 595553801627760,
											"parameters": {
												"variable": "value",
												"value": "Functions.getValueFromMod(modDescription, 0)"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 485531725133262,
											"parameters": {
												"variable": "value2",
												"value": "Functions.getValueFromMod(modDescription, 1)"
											}
										}
									],
									"sid": 257923106845929
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 509733711440273,
											"parameters": {
												"variable": "active"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 953003764567580,
											"parameters": {
												"instance-variable": "slashDamage",
												"value": "value"
											}
										},
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 182117520102904,
											"parameters": {
												"instance-variable": "stabDamage",
												"value": "value2"
											}
										}
									],
									"sid": 333950422080430
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 789420711930422
										}
									],
									"actions": [
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 380230977470890,
											"parameters": {
												"instance-variable": "slashDamage",
												"value": "value"
											}
										},
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 625265836678152,
											"parameters": {
												"instance-variable": "stabDamage",
												"value": "value2"
											}
										}
									],
									"sid": 163550454082777
								}
							]
						},
						{
							"functionName": "flatSmash",
							"functionDescription": "",
							"functionCategory": "mods",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "active",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"sid": 677819658597203
								},
								{
									"name": "modDescription",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 412305460215976
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 233218428812949,
							"children": [
								{
									"eventType": "variable",
									"name": "value",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 190596318771045
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 862743270532982,
											"parameters": {
												"variable": "value",
												"value": "Functions.getValueFromMod(modDescription, 0)"
											}
										}
									],
									"sid": 415952678182173
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 437744311338199,
											"parameters": {
												"variable": "active"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 125990175741193,
											"parameters": {
												"instance-variable": "smashDamage",
												"value": "value"
											}
										}
									],
									"sid": 192060783652640
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 518410678394064
										}
									],
									"actions": [
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 863032040703286,
											"parameters": {
												"instance-variable": "smashDamage",
												"value": "value"
											}
										}
									],
									"sid": 672711044894469
								}
							]
						},
						{
							"functionName": "flatBlockChance",
							"functionDescription": "",
							"functionCategory": "mods",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "active",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"sid": 442129090983909
								},
								{
									"name": "modDescription",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 892096715698480
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 346081716829858,
							"children": [
								{
									"eventType": "variable",
									"name": "value",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 342503026746160
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 665873668250678,
											"parameters": {
												"variable": "value",
												"value": "Functions.getValueFromMod(modDescription, 0)"
											}
										}
									],
									"sid": 504155363810469
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 593334773718544,
											"parameters": {
												"variable": "active"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 250993466607563,
											"parameters": {
												"instance-variable": "blockChance",
												"value": "value"
											}
										}
									],
									"sid": 366342256423378
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 537242814208340
										}
									],
									"actions": [
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 513624251503529,
											"parameters": {
												"instance-variable": "blockChance",
												"value": "value"
											}
										}
									],
									"sid": 717615008279974
								}
							]
						},
						{
							"functionName": "flatManaRegen",
							"functionDescription": "",
							"functionCategory": "mods",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "active",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"sid": 620809625623140
								},
								{
									"name": "modDescription",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 771057121423808
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 618432132660579,
							"children": [
								{
									"eventType": "variable",
									"name": "value",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 379334632151382
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 843414371578072,
											"parameters": {
												"variable": "value",
												"value": "Functions.getValueFromMod(modDescription, 0)"
											}
										}
									],
									"sid": 109070798439151
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 150944168713245,
											"parameters": {
												"variable": "active"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 311392191049775,
											"parameters": {
												"instance-variable": "manaRegen",
												"value": "value"
											}
										}
									],
									"sid": 968321874689214
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 437016688859259
										}
									],
									"actions": [
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 715372430908789,
											"parameters": {
												"instance-variable": "manaRegen",
												"value": "value"
											}
										}
									],
									"sid": 143811748396171
								}
							]
						},
						{
							"functionName": "flatPhysical",
							"functionDescription": "",
							"functionCategory": "mods",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "active",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"sid": 499944774915861
								},
								{
									"name": "modDescription",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 989673922363299
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 402192560156812,
							"children": [
								{
									"eventType": "variable",
									"name": "damageType",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 313882942019148
								},
								{
									"eventType": "variable",
									"name": "amount",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 506829206640632
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 957382791527811,
											"parameters": {
												"variable": "active"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 178928919487212,
											"parameters": {
												"variable": "amount",
												"value": "Functions.getValueFromMod(modDescription, 0)"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 716939391397843,
											"parameters": {
												"variable": "damageType",
												"value": "Functions.getValueFromMod(modDescription, 1)"
											}
										}
									],
									"sid": 460177480565386,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 647009878134427,
													"parameters": {
														"variable": "damageType",
														"comparison": 0,
														"value": "\"Slash\""
													}
												}
											],
											"actions": [
												{
													"id": "add-to-instvar",
													"objectClass": "player",
													"sid": 307075666247828,
													"parameters": {
														"instance-variable": "slashDamage",
														"value": "amount"
													}
												}
											],
											"sid": 899029722355018
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 516156131856547,
													"parameters": {
														"variable": "damageType",
														"comparison": 0,
														"value": "\"Smash\""
													}
												}
											],
											"actions": [
												{
													"id": "add-to-instvar",
													"objectClass": "player",
													"sid": 674040280899441,
													"parameters": {
														"instance-variable": "smashDamage",
														"value": "amount"
													}
												}
											],
											"sid": 605145294202577
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 148266729061949,
													"parameters": {
														"variable": "damageType",
														"comparison": 0,
														"value": "\"Stab\""
													}
												}
											],
											"actions": [
												{
													"id": "add-to-instvar",
													"objectClass": "player",
													"sid": 640283016435828,
													"parameters": {
														"instance-variable": "stabDamage",
														"value": "amount"
													}
												}
											],
											"sid": 469788707024177
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 121694386698797
										}
									],
									"actions": [],
									"sid": 869658595429510,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 649960748686757,
													"parameters": {
														"variable": "damageType",
														"comparison": 0,
														"value": "\"Slash\""
													}
												}
											],
											"actions": [
												{
													"id": "subtract-from-instvar",
													"objectClass": "player",
													"sid": 418488349775888,
													"parameters": {
														"instance-variable": "slashDamage",
														"value": "amount"
													}
												}
											],
											"sid": 158186614004615
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 637874891029247,
													"parameters": {
														"variable": "damageType",
														"comparison": 0,
														"value": "\"Smash\""
													}
												}
											],
											"actions": [
												{
													"id": "subtract-from-instvar",
													"objectClass": "player",
													"sid": 723880095772861,
													"parameters": {
														"instance-variable": "smashDamage",
														"value": "amount"
													}
												}
											],
											"sid": 735778638523005
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 347103955837597,
													"parameters": {
														"variable": "damageType",
														"comparison": 0,
														"value": "\"Stab\""
													}
												}
											],
											"actions": [
												{
													"id": "subtract-from-instvar",
													"objectClass": "player",
													"sid": 844156788201573,
													"parameters": {
														"instance-variable": "stabDamage",
														"value": "amount"
													}
												}
											],
											"sid": 171575061019100
										}
									]
								}
							]
						}
					],
					"sid": 640233763055874
				}
			],
			"sid": 368443066853777
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "environment",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-created",
							"objectClass": "lootChest",
							"sid": 403693177470265
						}
					],
					"actions": [
						{
							"id": "stop-animation",
							"objectClass": "lootChest",
							"sid": 379990486114989
						}
					],
					"sid": 460757171617526
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "cursor-is-over-object",
							"objectClass": "mouse",
							"sid": 574164498899305,
							"parameters": {
								"object": "lootChest"
							}
						},
						{
							"id": "compare-animation-frame",
							"objectClass": "lootChest",
							"sid": 664955286726473,
							"parameters": {
								"comparison": 0,
								"number": "0"
							}
						}
					],
					"actions": [
						{
							"id": "set-effect-parameter",
							"objectClass": "lootChest",
							"sid": 281152541001834,
							"parameters": {
								"effect": "\"Brightness\"",
								"parameter-index": "0",
								"value": "105"
							}
						},
						{
							"id": "set-effect-enabled",
							"objectClass": "lootChest",
							"sid": 257696905455289,
							"parameters": {
								"mode": "enable",
								"effect": "\"GlowHorizontal\""
							}
						},
						{
							"id": "set-effect-enabled",
							"objectClass": "lootChest",
							"sid": 567118041233534,
							"parameters": {
								"mode": "enable",
								"effect": "\"GlowVertical\""
							}
						}
					],
					"sid": 611239875723425
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "cursor-is-over-object",
							"objectClass": "mouse",
							"sid": 487414290256294,
							"parameters": {
								"object": "lootChest"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-effect-parameter",
							"objectClass": "lootChest",
							"sid": 390519698793083,
							"parameters": {
								"effect": "\"Brightness\"",
								"parameter-index": "0",
								"value": "100"
							}
						},
						{
							"id": "set-effect-enabled",
							"objectClass": "lootChest",
							"sid": 637437226544868,
							"parameters": {
								"mode": "disable",
								"effect": "\"GlowHorizontal\""
							}
						},
						{
							"id": "set-effect-enabled",
							"objectClass": "lootChest",
							"sid": 837401881113407,
							"parameters": {
								"mode": "disable",
								"effect": "\"GlowVertical\""
							}
						}
					],
					"sid": 605986589568019
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-created",
							"objectClass": "door",
							"sid": 956882454928944
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "save the bbox of the door on it's first frame, to be used to detect when the mouse is over it"
						},
						{
							"id": "set-instvar-value",
							"objectClass": "door",
							"sid": 909009362550791,
							"parameters": {
								"instance-variable": "bottombbox",
								"value": "Self.BBoxBottom"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "door",
							"sid": 493247108868290,
							"parameters": {
								"instance-variable": "rightbbox",
								"value": "Self.BBoxRight"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "door",
							"sid": 925254730512657,
							"parameters": {
								"instance-variable": "leftbbox",
								"value": "Self.BBoxLeft"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "door",
							"sid": 835394361289990,
							"parameters": {
								"instance-variable": "topbbox",
								"value": "Self.BBoxTop"
							}
						}
					],
					"sid": 579636236717138
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "door",
							"sid": 148369945134594,
							"parameters": {
								"instance-variable": "leftbbox",
								"comparison": 3,
								"value": "mouse.X"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "door",
							"sid": 367136965090945,
							"parameters": {
								"instance-variable": "rightbbox",
								"comparison": 5,
								"value": "mouse.X"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "door",
							"sid": 686628689504263,
							"parameters": {
								"instance-variable": "topbbox",
								"comparison": 3,
								"value": "mouse.Y"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "door",
							"sid": 709902257674375,
							"parameters": {
								"instance-variable": "bottombbox",
								"comparison": 5,
								"value": "mouse.Y"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Check that the mouse is within a box that's the shape of the door on the door's first frame. This prevents a graphical issue where the door would open enough so that the mouse would no longer be over the door, so the door would start to shut, thus being under the mouse again, repeat ad infinitum (and every tick)"
						},
						{
							"id": "set-animation-speed",
							"objectClass": "door",
							"sid": 933752701328386,
							"parameters": {
								"speed": "Self.OriginalAnimationSpeed"
							}
						},
						{
							"id": "set-animation",
							"objectClass": "door",
							"sid": 541313291022842,
							"parameters": {
								"animation": "Self.AnimationName",
								"from": "current-frame"
							}
						},
						{
							"id": "set-effect-parameter",
							"objectClass": "door",
							"sid": 158957851345472,
							"parameters": {
								"effect": "\"Brightness\"",
								"parameter-index": "0",
								"value": "105"
							}
						},
						{
							"id": "set-effect-enabled",
							"objectClass": "door",
							"sid": 101629265069819,
							"parameters": {
								"mode": "enable",
								"effect": "\"GlowHorizontal\""
							}
						},
						{
							"id": "set-effect-enabled",
							"objectClass": "door",
							"sid": 132631010688828,
							"parameters": {
								"mode": "enable",
								"effect": "\"GlowVertical\""
							}
						}
					],
					"sid": 642436103875474,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-tag-playing",
									"objectClass": "Audio",
									"sid": 648410643035809,
									"parameters": {
										"tag": "door.ObjectTypeName"
									},
									"isInverted": true
								},
								{
									"id": "compare-animation-frame",
									"objectClass": "door",
									"sid": 542240625155166,
									"parameters": {
										"comparison": 0,
										"number": "0"
									}
								}
							],
							"actions": [
								{
									"id": "play-at-object-by-name",
									"objectClass": "Audio",
									"sid": 898042260607143,
									"parameters": {
										"folder": "sounds",
										"audio-file-name": "door.ObjectTypeName",
										"loop": "not-looping",
										"volume": "0",
										"object": "door",
										"inner-angle": "360",
										"outer-angle": "360",
										"outer-gain": "0",
										"tag-optional": "door.ObjectTypeName"
									}
								}
							],
							"sid": 243907011904060
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 588369458426358
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "If we mouse over two different doors very quickly, the animations might get messed up since this is an 'else', not sure"
						},
						{
							"id": "set-animation-speed",
							"objectClass": "door",
							"sid": 761190167429150,
							"parameters": {
								"speed": "-Self.OriginalAnimationSpeed"
							}
						},
						{
							"id": "set-animation",
							"objectClass": "door",
							"sid": 320003253420886,
							"parameters": {
								"animation": "Self.AnimationName",
								"from": "current-frame"
							}
						},
						{
							"id": "set-effect-parameter",
							"objectClass": "door",
							"sid": 197037995400365,
							"parameters": {
								"effect": "\"Brightness\"",
								"parameter-index": "0",
								"value": "100"
							}
						},
						{
							"id": "set-effect-enabled",
							"objectClass": "door",
							"sid": 861807936677556,
							"parameters": {
								"mode": "disable",
								"effect": "\"GlowHorizontal\""
							}
						},
						{
							"id": "set-effect-enabled",
							"objectClass": "door",
							"sid": 148024402444128,
							"parameters": {
								"mode": "disable",
								"effect": "\"GlowVertical\""
							}
						}
					],
					"sid": 374910180747516
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-on-screen",
							"objectClass": "door",
							"sid": 346476188900140
						},
						{
							"id": "pick-parent",
							"objectClass": "door",
							"sid": 521705764688664,
							"parameters": {
								"parent": "sortable",
								"which": "own"
							}
						}
					],
					"actions": [
						{
							"id": "move-to-object",
							"objectClass": "door",
							"sid": 631990991231225,
							"parameters": {
								"where": "in-front",
								"object": "sortable"
							}
						}
					],
					"sid": 235939344330391
				}
			],
			"sid": 992252066588856
		},
		{
			"eventType": "comment",
			"text": "Refactors that would be cool to do, but probably wouldn't provide much benefit and might introduce some nasty bugs:\n\n1. Split the slot object into other objects so it's not so all-encompassing. https://github.com/Laserwolve-Games/DaggerQuest/issues/8\n2. Have items and loot lookup their static values from the array instead of reading them off themselves. This might be faster, it might be slower... might be confusing that some equipment properties have to be looked up, and some are stored directly on the object\n3. Move lots of variables from local/global space, onto the player.... uidOfClicked and a lot of the item re-arranging variables probably should/could get scoped onto the player"
		}
	],
	"sid": 318845921999986
}