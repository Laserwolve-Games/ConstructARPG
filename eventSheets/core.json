{
	"name": "core",
	"events": [
		{
			"eventType": "include",
			"includeSheet": "global"
		},
		{
			"eventType": "variable",
			"name": "INTERACT_COOLDOWN",
			"type": "number",
			"initialValue": "0.3",
			"comment": "How frequently (in seconds) to let the player interact with things.",
			"isStatic": false,
			"isConstant": true,
			"sid": 319367684950517
		},
		{
			"eventType": "variable",
			"name": "ANIMATION_DIVISOR",
			"type": "number",
			"initialValue": "7",
			"comment": "number by which to divide the movement speed to obtain the animation speed",
			"isStatic": false,
			"isConstant": true,
			"sid": 274670126082924
		},
		{
			"eventType": "variable",
			"name": "TICKS_PER_SECOND",
			"type": "number",
			"initialValue": "60",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 884640693658179
		},
		{
			"eventType": "variable",
			"name": "ARC",
			"type": "number",
			"initialValue": "22.5",
			"comment": "The number of degrees in a circle divided by the number of angles our assets have.",
			"isStatic": false,
			"isConstant": true,
			"sid": 363141446243930
		},
		{
			"eventType": "variable",
			"name": "QUARTER_CIRCLE",
			"type": "number",
			"initialValue": "90",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 883872539904860
		},
		{
			"eventType": "variable",
			"name": "HALF_CIRCLE",
			"type": "number",
			"initialValue": "180",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 192320948206579
		},
		{
			"eventType": "variable",
			"name": "ISOMETRIC_DIVIDER",
			"type": "number",
			"initialValue": "3",
			"comment": "The number by which to divide projectile's and character's height to be properly isometric",
			"isStatic": false,
			"isConstant": true,
			"sid": 449892706850942
		},
		{
			"eventType": "variable",
			"name": "PERCENTAGE_DIVIDER",
			"type": "number",
			"initialValue": "100",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 444792278907568
		},
		{
			"eventType": "variable",
			"name": "nextAvailableIdentifier",
			"type": "number",
			"initialValue": "5",
			"comment": "Stores the next available identifier, to be assigned to equipment",
			"isStatic": false,
			"isConstant": false,
			"sid": 995721705060518
		},
		{
			"eventType": "variable",
			"name": "uidOfClicked",
			"type": "number",
			"initialValue": "0",
			"comment": "the UID of the object that was clicked",
			"isStatic": false,
			"isConstant": false,
			"sid": 849112042530215
		},
		{
			"eventType": "variable",
			"name": "previousLayout",
			"type": "string",
			"initialValue": "none",
			"comment": "The layout we were on, before this one.",
			"isStatic": false,
			"isConstant": false,
			"sid": 241570996019166
		},
		{
			"eventType": "variable",
			"name": "isOnInteractCooldown",
			"type": "boolean",
			"initialValue": "false",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 822176132467234
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "npc",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "variable",
					"name": "dialogOpen",
					"type": "boolean",
					"initialValue": "false",
					"comment": "Whether or not the player is talking to an NPC",
					"isStatic": true,
					"isConstant": false,
					"sid": 716778298221880
				},
				{
					"eventType": "variable",
					"name": "PORTRAIT_POSITION",
					"type": "number",
					"initialValue": "1280",
					"comment": "The position on the X axis of where the portrait should spawn",
					"isStatic": false,
					"isConstant": true,
					"sid": 795195881715473
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "mouse-button-is-down",
							"objectClass": "mouse",
							"sid": 919419578550358,
							"parameters": {
								"mouse-button": "left"
							}
						},
						{
							"id": "mouse-button-is-down",
							"objectClass": "mouse",
							"sid": 647126079709070,
							"parameters": {
								"mouse-button": "right"
							}
						},
						{
							"id": "on-any-key-pressed",
							"objectClass": "keyboard",
							"sid": 480959912190824
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "TODO: Make sure that the key that was pressed to close the dialog isn't whatever key we decide to use to skip through dialog. Also when we add merchant NPCs, we need to permit mouse usage."
						}
					],
					"sid": 607267948456563,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 671569229951174,
									"parameters": {
										"object": "npcBody"
									},
									"isInverted": true
								},
								{
									"id": "is-playing",
									"objectClass": "portrait",
									"sid": 256641828168431,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"fadeOut\""
									},
									"isInverted": true
								},
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 849051413122214,
									"parameters": {
										"first-value": "portrait.Count",
										"comparison": 1,
										"second-value": "0"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "if we click anywhere that's not an NPC, and there's a portrait up (that's not currently fading out), close the dialog"
								},
								{
									"callFunction": "closeDialog",
									"sid": 797106228050498
								}
							],
							"sid": 507640600485547
						}
					],
					"isOrBlock": true
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 669647297717125,
							"parameters": {
								"object": "npc",
								"expression": "npc.UID",
								"comparison": 0,
								"value": "uidOfClicked"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "npc",
							"sid": 540272031370500,
							"parameters": {
								"instance-variable": "interactRange",
								"comparison": 5,
								"value": "distance(Self.X, Self.Y, player.X, player.Y)"
							}
						},
						{
							"id": "pick-children",
							"objectClass": "npc",
							"sid": 547596792009158,
							"parameters": {
								"child": "npcBody",
								"which": "own"
							}
						}
					],
					"actions": [
						{
							"id": "stop",
							"objectClass": "player",
							"sid": 995148384126742,
							"behaviorType": "MoveTo"
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 139133966391319,
							"parameters": {
								"variable": "uidOfClicked",
								"value": "0"
							}
						}
					],
					"sid": 421647053250642,
					"children": [
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "npc",
									"sid": 672567292116154,
									"parameters": {
										"instance-variable": "degrees",
										"value": "round(angle(Self.X, Self.Y, player.X, player.Y) / ARC) * ARC"
									}
								},
								{
									"id": "set-text",
									"objectClass": "dialogNpcName",
									"sid": 623015538201956,
									"parameters": {
										"text": "lowercase(npc.fullName)"
									}
								},
								{
									"id": "set-text",
									"objectClass": "dialogText",
									"sid": 983615769116275,
									"parameters": {
										"text": "Functions.arrayLookup(npcDialogArray.ObjectTypeName, \"npc\", npc.simpleName, \"message\")"
									}
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 169684764025575,
									"parameters": {
										"seconds": "0"
									}
								},
								{
									"callFunction": "openLayer",
									"sid": 998129604283940,
									"parameters": [
										"\"dialog\""
									]
								}
							],
							"sid": 417477370892388,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "npc",
											"sid": 973170998418364,
											"parameters": {
												"instance-variable": "degrees",
												"comparison": 0,
												"value": "-HALF_CIRCLE"
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "npc",
											"sid": 187806332354271,
											"parameters": {
												"instance-variable": "degrees",
												"value": "HALF_CIRCLE"
											}
										}
									],
									"sid": 108561176223195
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-animation",
											"objectClass": "npcBody",
											"sid": 399604877450603,
											"parameters": {
												"animation": "\"idle_\" & npc.degrees",
												"from": "current-frame"
											}
										},
										{
											"callFunction": "updateFacing",
											"sid": 262392189082691,
											"parameters": [
												"npc.X",
												"npc.Y"
											]
										},
										{
											"callFunction": "updateAnimations",
											"sid": 394541616736890,
											"parameters": [
												"\"idle\"",
												"player.movementSpeed / ANIMATION_DIVISOR",
												"\"playFromBeginning\""
											]
										}
									],
									"sid": 481803048668382
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 603290908201890,
											"parameters": {
												"object": "portrait",
												"expression": "portrait.ObjectTypeName",
												"comparison": 0,
												"value": "npc.simpleName & \"_portrait\""
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "...if a portrait for it already exists, do nothing"
										}
									],
									"sid": 883759055452889
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 645696004310006
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "…otherwise, destroy all portraits, and spawn a portrait for this NPC"
										},
										{
											"id": "destroy",
											"objectClass": "portrait",
											"sid": 829592231566676
										},
										{
											"id": "unload-object-images",
											"objectClass": "System",
											"sid": 185891587069654,
											"parameters": {
												"object": "portrait"
											}
										},
										{
											"id": "create-object-by-name",
											"objectClass": "System",
											"sid": 774114215263902,
											"parameters": {
												"object-name": "npc.simpleName & \"_portrait\"",
												"layer": "\"portraits\"",
												"x": "PORTRAIT_POSITION",
												"y": "ViewportBottom(\"portraits\")",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										}
									],
									"sid": 652814247398785,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-last-created",
													"objectClass": "System",
													"sid": 555011027746852,
													"parameters": {
														"object": "portrait"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "parent it to the mana cover so it resizes correctly. We would use anchor, but we can't set its parameters during the runtime"
												},
												{
													"id": "add-child",
													"objectClass": "manaCover",
													"sid": 132401957377044,
													"parameters": {
														"child": "portrait",
														"transform-x": true,
														"transform-y": true,
														"transform-w": false,
														"transform-h": false,
														"transform-a": false,
														"transform-o": false,
														"transform-z-elevation": false,
														"transform-visibility": false,
														"destroy-with-parent": false
													}
												},
												{
													"type": "comment",
													"text": "override the global timescale so we can still fade out on pause"
												},
												{
													"id": "set-object-time-scale",
													"objectClass": "System",
													"sid": 360251454789608,
													"parameters": {
														"object": "portrait",
														"time-scale": "1.0"
													}
												},
												{
													"id": "set-opacity",
													"objectClass": "portrait",
													"sid": 765430493810951,
													"parameters": {
														"opacity": "0"
													}
												},
												{
													"id": "tween-one-property",
													"objectClass": "portrait",
													"sid": 784007058105138,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"\"",
														"property": "offsetOpacity",
														"end-value": "100",
														"time": ".2",
														"ease": "noease",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												}
											],
											"sid": 943916627642006
										}
									]
								}
							]
						}
					]
				},
				{
					"functionName": "closeDialog",
					"functionDescription": "End dialog with an NPC.",
					"functionCategory": "world",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "tween-one-property",
							"objectClass": "portrait",
							"sid": 167889325032600,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"fadeOut\"",
								"property": "offsetOpacity",
								"end-value": "0",
								"time": ".2",
								"ease": "noease",
								"destroy-on-complete": "yes",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 342685698941577
						},
						{
							"callFunction": "closeLayer",
							"sid": 452768771181338,
							"parameters": [
								"\"dialog\""
							]
						},
						{
							"id": "unload-object-images",
							"objectClass": "System",
							"sid": 659778460881200,
							"parameters": {
								"object": "portrait"
							}
						}
					],
					"sid": 396375011211115
				}
			],
			"sid": 217312584951758
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "equipment",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "variable",
					"name": "swapID",
					"type": "number",
					"initialValue": "0",
					"comment": "the identifier of the equipped item, so we can swap it",
					"isStatic": true,
					"isConstant": false,
					"sid": 841899330934363
				},
				{
					"eventType": "variable",
					"name": "swapSlotUID",
					"type": "number",
					"initialValue": "0",
					"comment": "the UID of the original slot in a swap",
					"isStatic": true,
					"isConstant": false,
					"sid": 592861658035522
				},
				{
					"eventType": "variable",
					"name": "draggedOriginSlotUID",
					"type": "number",
					"initialValue": "0",
					"comment": "the UID of the slot the drag originated from",
					"isStatic": true,
					"isConstant": false,
					"sid": 201307089918324
				},
				{
					"eventType": "variable",
					"name": "dragCacheItemUID",
					"type": "number",
					"initialValue": "0",
					"comment": "the UID of the item we're dragging",
					"isStatic": true,
					"isConstant": false,
					"sid": 298078267734463
				},
				{
					"eventType": "variable",
					"name": "dragCacheSlotUID",
					"type": "number",
					"initialValue": "0",
					"comment": "the UID of the slot we dropped on",
					"isStatic": true,
					"isConstant": false,
					"sid": 422173916162530
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "loot",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "keyboard",
									"sid": 144933746826998,
									"parameters": {
										"key": 83
									}
								},
								{
									"id": "is-in-preview",
									"objectClass": "System",
									"sid": 316513976740974
								}
							],
							"actions": [
								{
									"callFunction": "spawnLoot",
									"sid": 538939051809675,
									"parameters": [
										"player.X",
										"player.Y",
										"max(player.Width, player.Height)"
									]
								}
							],
							"sid": 349355571470231
						},
						{
							"functionName": "pickUpLoot",
							"functionDescription": "Picking up loot and turning it into an item",
							"functionCategory": "equipment",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 369764335379107,
									"parameters": {
										"variable": "isOnInteractCooldown",
										"value": "true"
									}
								}
							],
							"sid": 653257849123262,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-animation-playing",
											"objectClass": "autoEquip",
											"sid": 488279947558139,
											"parameters": {
												"animation": "\"checked\""
											}
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 132160082475010,
											"parameters": {
												"value": "find(loot.classRestrictions, player.class) <> -1 | findCase(loot.classRestrictions, \"All Classes\") <> - 1"
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "player",
											"sid": 730282754581605,
											"parameters": {
												"instance-variable": "level",
												"comparison": 5,
												"value": "loot.level"
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 664728702172861,
											"parameters": {
												"object": "slot",
												"expression": "slot.type",
												"comparison": 0,
												"value": "loot.type"
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 492799500541261,
											"parameters": {
												"object": "slot",
												"expression": "slot.identifier",
												"comparison": 0,
												"value": "0"
											}
										},
										{
											"id": "pick-nth-instance",
											"objectClass": "System",
											"sid": 452173619109154,
											"parameters": {
												"object": "slot",
												"instance": "0"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if auto equip is enabled, and the player's class matches the loot's restrictions, pick the first empty slot matching the loot's type, and spawn the item there"
										},
										{
											"id": "create-object-by-name",
											"objectClass": "System",
											"sid": 339502509864802,
											"parameters": {
												"object-name": "loot.simpleName & \"_item\"",
												"layer": "\"equippedMenu\"",
												"x": "slot.X",
												"y": "slot.Y",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										}
									],
									"sid": 417026782949109,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-last-created",
													"objectClass": "System",
													"sid": 958412799812861,
													"parameters": {
														"object": "item"
													}
												}
											],
											"actions": [
												{
													"callFunction": "setItemVariables",
													"sid": 578892715081229
												},
												{
													"callFunction": "queueGearManagement",
													"sid": 389861615475309
												},
												{
													"callFunction": "manageMods",
													"sid": 975152866924711,
													"parameters": [
														true
													]
												}
											],
											"sid": 323602104316470
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 341369713051807
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 740204793762600,
											"parameters": {
												"object": "slot",
												"expression": "slot.type",
												"comparison": 0,
												"value": "\"none\""
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 772858798512530,
											"parameters": {
												"object": "slot",
												"expression": "slot.identifier",
												"comparison": 0,
												"value": "0"
											}
										},
										{
											"id": "pick-nth-instance",
											"objectClass": "System",
											"sid": 196356171794867,
											"parameters": {
												"object": "slot",
												"instance": "0"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if auto equip is disabled, or there's no empty slots matching the item's type, spawn the item in the first empty inventory slot."
										},
										{
											"id": "create-object-by-name",
											"objectClass": "System",
											"sid": 885272990136247,
											"parameters": {
												"object-name": "loot.simpleName & \"_item\"",
												"layer": "\"inventoryMenu\"",
												"x": "slot.X",
												"y": "slot.Y",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										}
									],
									"sid": 658192619640202,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-last-created",
													"objectClass": "System",
													"sid": 483526905581318,
													"parameters": {
														"object": "item"
													}
												}
											],
											"actions": [
												{
													"callFunction": "setItemVariables",
													"sid": 356730110629027
												}
											],
											"sid": 319164556849852
										}
									]
								}
							]
						},
						{
							"functionName": "setItemVariables",
							"functionDescription": "set the variables on an item, from its loot",
							"functionCategory": "equipment",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 695618123166718,
									"parameters": {
										"instance-variable": "identifier",
										"value": "loot.identifier"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 894947352405585,
									"parameters": {
										"instance-variable": "simpleName",
										"value": "loot.simpleName"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 682567391690132,
									"parameters": {
										"instance-variable": "fullName",
										"value": "loot.fullName"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 112068630443208,
									"parameters": {
										"instance-variable": "type",
										"value": "loot.type"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 728841582247601,
									"parameters": {
										"instance-variable": "lore",
										"value": "loot.lore"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 358574228575891,
									"parameters": {
										"instance-variable": "level",
										"value": "loot.level"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 904449258452233,
									"parameters": {
										"instance-variable": "mods",
										"value": "loot.mods"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 968287328115240,
									"parameters": {
										"instance-variable": "classRestrictions",
										"value": "loot.classRestrictions"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "item",
									"sid": 701634170777121,
									"parameters": {
										"instance-variable": "modTable",
										"value": "loot.modTable"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "slot",
									"sid": 818920739961129,
									"parameters": {
										"instance-variable": "identifier",
										"value": "item.identifier"
									}
								},
								{
									"id": "add-child",
									"objectClass": "slot",
									"sid": 418593601200365,
									"parameters": {
										"child": "item",
										"transform-x": true,
										"transform-y": true,
										"transform-w": false,
										"transform-h": false,
										"transform-a": false,
										"transform-o": false,
										"transform-z-elevation": false,
										"transform-visibility": false,
										"destroy-with-parent": true
									}
								},
								{
									"id": "destroy",
									"objectClass": "loot",
									"sid": 354827222227349
								}
							],
							"sid": 441193875115599,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-overlapping-point",
											"objectClass": "System",
											"sid": 666223508174307,
											"parameters": {
												"object": "placeholder",
												"x": "item.X",
												"y": "item.Y"
											}
										}
									],
									"actions": [
										{
											"id": "set-visible",
											"objectClass": "placeholder",
											"sid": 168572126852132,
											"parameters": {
												"visibility": "invisible"
											}
										}
									],
									"sid": 581771949495265
								}
							]
						},
						{
							"eventType": "variable",
							"name": "TRAVEL_TIME",
							"type": "number",
							"initialValue": "0.5",
							"comment": "The amount of time it takes loot to get to its destination.",
							"isStatic": false,
							"isConstant": true,
							"sid": 853578934190498
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-tweens-finished",
									"objectClass": "loot",
									"sid": 778561935894008,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"ascension\""
									}
								}
							],
							"actions": [
								{
									"id": "tween-one-property",
									"objectClass": "loot",
									"sid": 235375886758818,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"\"",
										"property": "offsetY",
										"end-value": "Self.destinationY",
										"time": "TRAVEL_TIME / 2",
										"ease": "easeinsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 629339917694708
						},
						{
							"functionName": "spawnLoot",
							"functionDescription": "spawn loot at the specified location",
							"functionCategory": "equipment",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "x",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"sid": 839401055522675
								},
								{
									"name": "y",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"sid": 508129132310762
								},
								{
									"name": "lootDistance",
									"type": "number",
									"initialValue": "0",
									"comment": "How far away from the object to spawn loot.",
									"sid": 245277320896905
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "create-object-by-name",
									"objectClass": "System",
									"sid": 210734168625939,
									"parameters": {
										"object-name": "advancedRandom.WeightedByName(\"equipment\") & \"_loot\"",
										"layer": "\"background\"",
										"x": "x",
										"y": "y",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								},
								{
									"type": "comment",
									"text": "TODO: lootDistance should be the smallest isometric circle (oval) that completely encompasses the object that spawned the loot."
								}
							],
							"sid": 144578606465063,
							"children": [
								{
									"eventType": "variable",
									"name": "theAngle",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 326422520929617
								},
								{
									"eventType": "variable",
									"name": "isometrifiedDistance",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 542239830488062
								},
								{
									"eventType": "variable",
									"name": "LOOT_ALTITUDE",
									"type": "number",
									"initialValue": "100",
									"comment": "How high the loot should fly up into the air after it spawns.",
									"isStatic": false,
									"isConstant": true,
									"sid": 586249255052912
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-last-created",
											"objectClass": "System",
											"sid": 608751264424369,
											"parameters": {
												"object": "loot"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "https://github.com/Laserwolve-Games/DaggerQuest/issues/38"
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 974018068570534,
											"parameters": {
												"variable": "theAngle",
												"value": "random(-HALF_CIRCLE, HALF_CIRCLE)"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 112883245426002,
											"parameters": {
												"variable": "isometrifiedDistance",
												"value": "Functions.isometrify(lootDistance + max(loot.Width, loot.Height), theAngle)"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 244398877909043,
											"parameters": {
												"instance-variable": "destinationX",
												"value": "x + isometrifiedDistance * cos(theAngle)"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 328334205073985,
											"parameters": {
												"instance-variable": "destinationY",
												"value": "y + isometrifiedDistance * sin(theAngle)"
											}
										},
										{
											"id": "set-scale",
											"objectClass": "loot",
											"sid": 285100696477771,
											"parameters": {
												"scale": ".5"
											}
										},
										{
											"id": "tween-two-properties",
											"objectClass": "loot",
											"sid": 426061561589021,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"\"",
												"property": "scale",
												"end-x": "1",
												"end-y": "1",
												"time": "TRAVEL_TIME",
												"ease": "noease",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"id": "tween-one-property",
											"objectClass": "loot",
											"sid": 906550384634452,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"\"",
												"property": "offsetX",
												"end-value": "Self.destinationX",
												"time": "TRAVEL_TIME",
												"ease": "noease",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"id": "tween-one-property",
											"objectClass": "loot",
											"sid": 908264258762765,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"ascension\"",
												"property": "offsetY",
												"end-value": "Self.destinationY - Functions.isometrify(LOOT_ALTITUDE, theAngle)",
												"time": "TRAVEL_TIME / 2",
												"ease": "easeoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"id": "set-animation",
											"objectClass": "loot",
											"sid": 874150850325430,
											"parameters": {
												"animation": "\"static_\" & (floor(random(1, 17)) * ARC) - HALF_CIRCLE",
												"from": "beginning"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 500570871920815,
											"parameters": {
												"instance-variable": "identifier",
												"value": "nextAvailableIdentifier"
											}
										},
										{
											"id": "add-to-eventvar",
											"objectClass": "System",
											"sid": 292727294235481,
											"parameters": {
												"variable": "nextAvailableIdentifier",
												"value": "1"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 937896836624100,
											"parameters": {
												"instance-variable": "simpleName",
												"value": "tokenat(loot.ObjectTypeName, 0, \"_\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 387156835177166,
											"parameters": {
												"instance-variable": "fullName",
												"value": "Functions.arrayLookup(equipmentArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"fullName\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 740584911958729,
											"parameters": {
												"instance-variable": "type",
												"value": "Functions.arrayLookup(equipmentArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"type\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 360927318720871,
											"parameters": {
												"instance-variable": "lore",
												"value": "Functions.arrayLookup(equipmentArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"lore\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 992658870893090,
											"parameters": {
												"instance-variable": "level",
												"value": "Functions.arrayLookup(equipmentArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"level\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 431466943186454,
											"parameters": {
												"instance-variable": "classRestrictions",
												"value": "Functions.arrayLookup(equipmentArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"classRestrictions\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "loot",
											"sid": 181518222104383,
											"parameters": {
												"instance-variable": "modTable",
												"value": "Functions.arrayLookup(equipmentArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"modTable\")"
											}
										}
									],
									"sid": 365625576088734,
									"children": [
										{
											"eventType": "variable",
											"name": "mod",
											"type": "string",
											"initialValue": "",
											"comment": "",
											"isStatic": true,
											"isConstant": false,
											"sid": 246965271765553
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "repeat",
													"objectClass": "System",
													"sid": 448899714769576,
													"parameters": {
														"count": "round(random(1,4))"
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 446693176521729,
													"parameters": {
														"variable": "mod",
														"value": "advancedRandom.WeightedByName(loot.modTable)"
													}
												},
												{
													"id": "add-to-instvar",
													"objectClass": "loot",
													"sid": 696283491550463,
													"parameters": {
														"instance-variable": "mods",
														"value": "mod &  \":\" & Functions.arrayLookup(modsArray.ObjectTypeName, \"simpleName\", mod, \"description\") & \";\""
													}
												}
											],
											"sid": 375380483704702
										},
										{
											"eventType": "variable",
											"name": "modValueRegex",
											"type": "string",
											"initialValue": "\\[.*?\\]",
											"comment": "the regex that will return the first mod value",
											"isStatic": true,
											"isConstant": true,
											"sid": 168471026558236
										},
										{
											"eventType": "variable",
											"name": "modValue",
											"type": "string",
											"initialValue": "",
											"comment": "The text inside the brackets of a given mod",
											"isStatic": true,
											"isConstant": false,
											"sid": 675449617154846
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "for",
													"objectClass": "System",
													"sid": 114331841409558,
													"parameters": {
														"name": "\"\"",
														"start-index": "1",
														"end-index": "RegexMatchCount(loot.mods, modValueRegex, \"g\")"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "for each set of square brackets in this loot's mods"
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 809453843635835,
													"parameters": {
														"variable": "modValue",
														"value": "RegexReplace(RegexMatchAt(loot.mods, modValueRegex, \"\", 0), \"\\[|]\", \"g\", \"\")"
													}
												}
											],
											"sid": 668230999384246,
											"children": [
												{
													"eventType": "variable",
													"name": "lowerLimit",
													"type": "number",
													"initialValue": "0",
													"comment": "the lowest number that this mod can roll",
													"isStatic": true,
													"isConstant": false,
													"sid": 694917693599524
												},
												{
													"eventType": "variable",
													"name": "upperLimit",
													"type": "number",
													"initialValue": "0",
													"comment": "the highest number that this mod can roll",
													"isStatic": true,
													"isConstant": false,
													"sid": 136852260606726
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 221351255110008,
															"parameters": {
																"first-value": "find(modValue, \"-\")",
																"comparison": 1,
																"second-value": "-1"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "if this particular value contains a dash, it's a numeric value"
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 461581557850035,
															"parameters": {
																"variable": "lowerLimit",
																"value": "int(tokenat(modValue, 0, \"-\")) * loot.level"
															}
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 841670533825303,
															"parameters": {
																"variable": "upperLimit",
																"value": "int(tokenat(modValue, 1, \"-\")) * loot.level"
															}
														},
														{
															"id": "setProbabilityTable",
															"objectClass": "advancedRandom",
															"sid": 264346351548282,
															"parameters": {
																"name": "\"modValues\""
															}
														}
													],
													"sid": 878549987436267,
													"children": [
														{
															"eventType": "comment",
															"text": "Set a numeric mod's value to a random number between the lower and upper limit. Higher numbers are rarer. The rarity of higher numbers diminishingly scales with the loot level."
														},
														{
															"eventType": "comment",
															"text": "TODO: Negative values - should lower numbers be better? or worse?",
															"background-color": [
																0.984313725490196,
																1,
																0,
																1
															]
														},
														{
															"eventType": "variable",
															"name": "total",
															"type": "number",
															"initialValue": "0",
															"comment": "the total weight of all possible mod values, unconverted",
															"isStatic": true,
															"isConstant": false,
															"sid": 275844986849541
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "for",
																	"objectClass": "System",
																	"sid": 219774906891118,
																	"parameters": {
																		"name": "\"\"",
																		"start-index": "lowerLimit",
																		"end-index": "upperLimit"
																	}
																}
															],
															"actions": [
																{
																	"id": "add-to-eventvar",
																	"objectClass": "System",
																	"sid": 213474108009376,
																	"parameters": {
																		"variable": "total",
																		"value": "Functions.standardizeModValue(lowerLimit, upperLimit, loopindex)"
																	}
																}
															],
															"sid": 231459355083010
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "for",
																	"objectClass": "System",
																	"sid": 584623522244621,
																	"parameters": {
																		"name": "\"\"",
																		"start-index": "lowerLimit",
																		"end-index": "upperLimit"
																	}
																}
															],
															"actions": [
																{
																	"id": "addProbabilityEntry",
																	"objectClass": "advancedRandom",
																	"sid": 526391445067413,
																	"parameters": {
																		"value": "loopindex * (.1 ^ RegexMatchCount(modValue, \"x\", \"g\"))",
																		"weight": "Functions.standardizeModValue(lowerLimit, upperLimit, loopindex) / total"
																	}
																},
																{
																	"type": "comment",
																	"text": "the number of Xs in the mod value is the number of decimal places to shift the result. We have to do it this way because of floating point math problems"
																}
															],
															"sid": 455988557394103
														},
														{
															"eventType": "block",
															"conditions": [],
															"actions": [
																{
																	"id": "set-instvar-value",
																	"objectClass": "loot",
																	"sid": 461098221041892,
																	"parameters": {
																		"instance-variable": "mods",
																		"value": "RegexReplace(Self.mods, modValueRegex, \"\", \"{\" & advancedRandom.Weighted & \"}\")"
																	}
																},
																{
																	"id": "set-eventvar-value",
																	"objectClass": "System",
																	"sid": 161370364305718,
																	"parameters": {
																		"variable": "total",
																		"value": "0"
																	}
																}
															],
															"sid": 424302104263233
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "for",
																	"objectClass": "System",
																	"sid": 887803499960340,
																	"parameters": {
																		"name": "\"\"",
																		"start-index": "lowerLimit",
																		"end-index": "upperLimit"
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "We can remove an entire mod table, so remove the entries the same way we added them"
																},
																{
																	"id": "removeProbabilityEntry",
																	"objectClass": "advancedRandom",
																	"sid": 235462776396470,
																	"parameters": {
																		"value": "loopindex * (.1 ^ RegexMatchCount(modValue, \"x\", \"g\"))",
																		"weight": "0"
																	}
																}
															],
															"sid": 533866735890312
														}
													]
												},
												{
													"eventType": "comment",
													"text": "For text mod values, select a choice at random"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 834396030101558
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "if it doesn't, it should contain a dollar sign, which means it's a text value"
														},
														{
															"id": "set-instvar-value",
															"objectClass": "loot",
															"sid": 835948514084487,
															"parameters": {
																"instance-variable": "mods",
																"value": "RegexReplace(Self.mods, modValueRegex, \"\", \"{\" & tokenat(modValue, floor(random(tokencount(modValue, \"$\"))), \"$\") & \"}\")"
															}
														}
													],
													"sid": 734276999010657
												}
											]
										}
									]
								}
							]
						},
						{
							"functionName": "standardizeModValue",
							"functionDescription": "Standardize the possible value of a mod to a uniform range",
							"functionCategory": "mods",
							"functionReturnType": "number",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "lowerLimit",
									"type": "number",
									"initialValue": "0",
									"comment": "the lowest number that this mod can roll",
									"sid": 165700446124118
								},
								{
									"name": "upperLimit",
									"type": "number",
									"initialValue": "0",
									"comment": "the highest number that this mod can roll",
									"sid": 140901520535839
								},
								{
									"name": "currentLoopindex",
									"type": "number",
									"initialValue": "0",
									"comment": "the loopindex of the current loop over possible mod values",
									"sid": 762366194120232
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-function-return-value",
									"objectClass": "Functions",
									"sid": 237729906977959,
									"parameters": {
										"value": "lerp(loot.level, 1, unlerp(lowerLimit, upperLimit, currentLoopindex))"
									}
								}
							],
							"sid": 949225567251958
						}
					],
					"sid": 258106155275995
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "items",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-object-clicked",
									"objectClass": "mouse",
									"sid": 935398605095828,
									"parameters": {
										"mouse-button": "right",
										"click-type": "clicked",
										"object-clicked": "item"
									}
								},
								{
									"id": "layer-is-interactive",
									"objectClass": "System",
									"sid": 431089794413979,
									"parameters": {
										"layer": "\"equippedMenu\""
									}
								},
								{
									"id": "layer-is-interactive",
									"objectClass": "System",
									"sid": 771285086035772,
									"parameters": {
										"layer": "\"inventoryMenu\""
									}
								},
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 560608246182680,
									"parameters": {
										"object": "slot",
										"expression": "slot.identifier",
										"comparison": 0,
										"value": "item.identifier"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "if an item is right clicked, and both the inventory and character menus are open, pick the slot the item is in"
								}
							],
							"sid": 437401110381303,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "slot",
											"sid": 610832630764773,
											"parameters": {
												"instance-variable": "type",
												"comparison": 0,
												"value": "item.type"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if the item is in the character menu"
										}
									],
									"sid": 550305845027586,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-all",
													"objectClass": "System",
													"sid": 484307946857076,
													"parameters": {
														"object": "slot"
													}
												},
												{
													"id": "pick-by-evaluate",
													"objectClass": "System",
													"sid": 604194622057872,
													"parameters": {
														"object": "slot",
														"expression": "slot.type = \"none\" & slot.identifier = 0"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "check to see if there's any empty inventory slots the item can go into"
												}
											],
											"sid": 220568365792590,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-all",
															"objectClass": "System",
															"sid": 469443065346884,
															"parameters": {
																"object": "slot"
															}
														},
														{
															"id": "pick-by-comparison",
															"objectClass": "System",
															"sid": 352754287175001,
															"parameters": {
																"object": "slot",
																"expression": "slot.identifier",
																"comparison": 0,
																"value": "item.identifier"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "if there are, detach the item from its current slot"
														},
														{
															"callFunction": "detachItem",
															"sid": 835207460693215
														},
														{
															"callFunction": "queueGearManagement",
															"sid": 609886070905927
														},
														{
															"callFunction": "manageMods",
															"sid": 136639627650351,
															"parameters": [
																false
															]
														}
													],
													"sid": 152222844229358,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "pick-all",
																	"objectClass": "System",
																	"sid": 828249338222470,
																	"parameters": {
																		"object": "slot"
																	}
																},
																{
																	"id": "pick-by-evaluate",
																	"objectClass": "System",
																	"sid": 248233827646714,
																	"parameters": {
																		"object": "slot",
																		"expression": "slot.type = \"none\" & slot.identifier = 0"
																	}
																},
																{
																	"id": "pick-nth-instance",
																	"objectClass": "System",
																	"sid": 480399471336736,
																	"parameters": {
																		"object": "slot",
																		"instance": "0"
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "then attach it to the first empty inventory slot"
																},
																{
																	"callFunction": "attachItem",
																	"sid": 113775732412119
																}
															],
															"sid": 800622303427423
														}
													]
												}
											]
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 441782255501353
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 341490887870542,
											"parameters": {
												"value": "find(item.classRestrictions, player.class) <> -1 | findCase(item.classRestrictions, \"All Classes\") <> - 1"
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "player",
											"sid": 610017096337653,
											"parameters": {
												"instance-variable": "level",
												"comparison": 5,
												"value": "item.level"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if the item is in the inventory menu, and can be equipped"
										}
									],
									"sid": 469557265898529,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-all",
													"objectClass": "System",
													"sid": 561748002048200,
													"parameters": {
														"object": "slot"
													}
												},
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 821642348770305,
													"parameters": {
														"object": "slot",
														"expression": "slot.type",
														"comparison": 0,
														"value": "item.type"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "pick the slots that match the item's type"
												}
											],
											"sid": 373573424048934,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-by-comparison",
															"objectClass": "System",
															"sid": 980800715661354,
															"parameters": {
																"object": "slot",
																"expression": "slot.identifier",
																"comparison": 0,
																"value": "0"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "of those slots, check if any are empty"
														}
													],
													"sid": 141790148535618,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "pick-all",
																	"objectClass": "System",
																	"sid": 127707970504769,
																	"parameters": {
																		"object": "slot"
																	}
																},
																{
																	"id": "pick-by-comparison",
																	"objectClass": "System",
																	"sid": 916325906161856,
																	"parameters": {
																		"object": "slot",
																		"expression": "slot.identifier",
																		"comparison": 0,
																		"value": "item.identifier"
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "now that we know there's an empty character slot for this item, go back to the slot holding our item, and detach"
																},
																{
																	"callFunction": "detachItem",
																	"sid": 214449577715308
																}
															],
															"sid": 887468038183702,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "pick-all",
																			"objectClass": "System",
																			"sid": 354047122038983,
																			"parameters": {
																				"object": "slot"
																			}
																		},
																		{
																			"id": "pick-by-evaluate",
																			"objectClass": "System",
																			"sid": 301471495040907,
																			"parameters": {
																				"object": "slot",
																				"expression": "slot.type = item.type & slot.identifier = 0"
																			}
																		},
																		{
																			"id": "pick-nth-instance",
																			"objectClass": "System",
																			"sid": 318274835792837,
																			"parameters": {
																				"object": "slot",
																				"instance": "0"
																			}
																		}
																	],
																	"actions": [
																		{
																			"type": "comment",
																			"text": "re-pick the first empty character slot that matches the item's type, and attach to it"
																		},
																		{
																			"callFunction": "attachItem",
																			"sid": 383335703408057
																		},
																		{
																			"callFunction": "queueGearManagement",
																			"sid": 530233516824490
																		},
																		{
																			"callFunction": "manageMods",
																			"sid": 759946137376178,
																			"parameters": [
																				true
																			]
																		}
																	],
																	"sid": 919076443516843
																}
															]
														}
													]
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 796533398948327
														},
														{
															"id": "pick-nth-instance",
															"objectClass": "System",
															"sid": 577614967156832,
															"parameters": {
																"object": "slot",
																"instance": "0"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "if no slots are empty, start the *swap*: pick the first slot and store its identifier, which is also the identifier of the item in it"
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 526168207309239,
															"parameters": {
																"variable": "swapID",
																"value": "slot.identifier"
															}
														}
													],
													"sid": 499823969870056,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "pick-all",
																	"objectClass": "System",
																	"sid": 263997570996260,
																	"parameters": {
																		"object": "slot"
																	}
																},
																{
																	"id": "pick-by-comparison",
																	"objectClass": "System",
																	"sid": 725741161718299,
																	"parameters": {
																		"object": "slot",
																		"expression": "slot.identifier",
																		"comparison": 0,
																		"value": "item.identifier"
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "go back to the slot holding our item, and detach. save this slots UID so we know where to put the other item"
																},
																{
																	"id": "set-eventvar-value",
																	"objectClass": "System",
																	"sid": 834702856921462,
																	"parameters": {
																		"variable": "swapSlotUID",
																		"value": "slot.UID"
																	}
																},
																{
																	"type": "comment",
																	"text": "for some reason this isn't a function and I'm too scared to change it to one"
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "slot",
																	"sid": 718669814539874,
																	"parameters": {
																		"instance-variable": "identifier",
																		"value": "0"
																	}
																},
																{
																	"id": "remove-from-parent",
																	"objectClass": "item",
																	"sid": 295226669901879
																}
															],
															"sid": 240232231168794,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "pick-all",
																			"objectClass": "System",
																			"sid": 836733709612203,
																			"parameters": {
																				"object": "slot"
																			}
																		},
																		{
																			"id": "pick-by-comparison",
																			"objectClass": "System",
																			"sid": 330368232721342,
																			"parameters": {
																				"object": "slot",
																				"expression": "slot.type",
																				"comparison": 0,
																				"value": "item.type"
																			}
																		},
																		{
																			"id": "pick-nth-instance",
																			"objectClass": "System",
																			"sid": 555943012192629,
																			"parameters": {
																				"object": "slot",
																				"instance": "0"
																			}
																		}
																	],
																	"actions": [
																		{
																			"type": "comment",
																			"text": "re-pick the first character slot that matches the item's type, and attach to it, even though it has an different item in it"
																		},
																		{
																			"callFunction": "attachItem",
																			"sid": 937442492661944
																		},
																		{
																			"callFunction": "queueGearManagement",
																			"sid": 950011551312166
																		},
																		{
																			"callFunction": "manageMods",
																			"sid": 274669631608298,
																			"parameters": [
																				true
																			]
																		}
																	],
																	"sid": 933613637577582,
																	"children": [
																		{
																			"eventType": "block",
																			"conditions": [
																				{
																					"id": "pick-all",
																					"objectClass": "System",
																					"sid": 231628781161458,
																					"parameters": {
																						"object": "item"
																					}
																				},
																				{
																					"id": "pick-by-comparison",
																					"objectClass": "System",
																					"sid": 193745971658093,
																					"parameters": {
																						"object": "item",
																						"expression": "item.identifier",
																						"comparison": 0,
																						"value": "swapID"
																					}
																				},
																				{
																					"id": "pick-all",
																					"objectClass": "System",
																					"sid": 408955921587844,
																					"parameters": {
																						"object": "slot"
																					}
																				},
																				{
																					"id": "pick-by-comparison",
																					"objectClass": "System",
																					"sid": 408279037831258,
																					"parameters": {
																						"object": "slot",
																						"expression": "slot.UID",
																						"comparison": 0,
																						"value": "swapSlotUID"
																					}
																				}
																			],
																			"actions": [
																				{
																					"type": "comment",
																					"text": "now we have both items in the same slot. we'll detach the item that shouldn't be there, picking it with swapID. We don't need to clear the identifier value because it was already set correctly in the previous event"
																				},
																				{
																					"id": "remove-from-parent",
																					"objectClass": "item",
																					"sid": 507288274410844
																				},
																				{
																					"callFunction": "manageMods",
																					"sid": 573056621137338,
																					"parameters": [
																						false
																					]
																				},
																				{
																					"type": "comment",
																					"text": "it'll go where the other item left, which we have saved in previousLocationUID"
																				},
																				{
																					"callFunction": "attachItem",
																					"sid": 672428174704793
																				}
																			],
																			"sid": 404133702259918
																		}
																	]
																}
															]
														}
													]
												}
											]
										}
									]
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-drag-start",
									"objectClass": "item",
									"sid": 171542721559928,
									"behaviorType": "DragDrop"
								},
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 102305348394096,
									"parameters": {
										"object": "slot",
										"expression": "slot.identifier",
										"comparison": 0,
										"value": "item.identifier"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "when an item starts being dragged, record where it came from, set dragging to true, and detach it"
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 886968429260276,
									"parameters": {
										"variable": "draggedOriginSlotUID",
										"value": "slot.UID"
									}
								},
								{
									"callFunction": "detachItem",
									"sid": 266807440365284
								},
								{
									"type": "comment",
									"text": "This ensures whatever is being dragged is always on top"
								},
								{
									"id": "move-to-layer",
									"objectClass": "item",
									"sid": 988977807503661,
									"parameters": {
										"layer": "\"overlay\""
									}
								}
							],
							"sid": 827535395163321,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "slot",
											"sid": 379527898253552,
											"parameters": {
												"instance-variable": "type",
												"comparison": 1,
												"value": "\"none\""
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if it came from a character slot, manage the gear appropriately"
										},
										{
											"callFunction": "queueGearManagement",
											"sid": 927556251758834
										},
										{
											"callFunction": "manageMods",
											"sid": 735611209322461,
											"parameters": [
												false
											]
										}
									],
									"sid": 653685186723326
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-drop",
									"objectClass": "item",
									"sid": 940330704376401,
									"behaviorType": "DragDrop"
								}
							],
							"actions": [],
							"sid": 399701785813219,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "cursor-is-over-object",
											"objectClass": "mouse",
											"sid": 695387306087932,
											"parameters": {
												"object": "slot"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if the cursor was over a slot"
										}
									],
									"sid": 741566376291973,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 670569213014739,
													"parameters": {
														"value": "slot.type <> item.type & slot.type <> \"none\" "
													}
												},
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 685936448807156,
													"parameters": {
														"value": "findCase(item.classRestrictions, \"All Classes\") = - 1 & find(item.classRestrictions, body.ObjectTypeName) = -1 & slot.type <> \"none\""
													}
												},
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 247968772606905,
													"parameters": {
														"value": "item.level > player.level & slot.type <> \"none\""
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "and the item can't go into that slot, because of one of the following reasons:"
												},
												{
													"type": "comment",
													"text": "that slot's type doesn't match the item's type, and that slot's type is also not \"none\""
												},
												{
													"type": "comment",
													"text": "that item's class doesn't match the player's class, and the item's class is not \"All Classes\", and that slot's type is not \"none\""
												},
												{
													"type": "comment",
													"text": "that item's level is higher than the player's level, and that slot's type is not \"none\""
												},
												{
													"type": "comment",
													"text": "extracting \"slot.type <> \"none\"\" to a parent event doesn't allow the 'else' event to properly fire, if none of these conditions are met",
													"text-color": [
														0,
														0,
														0,
														1
													],
													"background-color": [
														1,
														1,
														0,
														1
													]
												}
											],
											"sid": 354664591457687,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-all",
															"objectClass": "System",
															"sid": 588064325410315,
															"parameters": {
																"object": "slot"
															}
														},
														{
															"id": "pick-by-comparison",
															"objectClass": "System",
															"sid": 920546490074711,
															"parameters": {
																"object": "slot",
																"expression": "slot.UID",
																"comparison": 0,
																"value": "draggedOriginSlotUID"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "send the item back to the slot it came from"
														},
														{
															"callFunction": "attachItem",
															"sid": 695133067571701
														}
													],
													"sid": 947341262946449,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-two-values",
																	"objectClass": "System",
																	"sid": 645834984413462,
																	"parameters": {
																		"first-value": "slot.type",
																		"comparison": 1,
																		"second-value": "\"none\""
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "if it came from a character slot, manage the gear and mods appropriately"
																},
																{
																	"callFunction": "queueGearManagement",
																	"sid": 335358865412951
																},
																{
																	"callFunction": "manageMods",
																	"sid": 448788296221639,
																	"parameters": [
																		true
																	]
																}
															],
															"sid": 223805058340345
														}
													]
												}
											],
											"isOrBlock": true
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 608914029557085
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "and that slot was a character slot that matches the item's type, or is \"none\""
												}
											],
											"sid": 562006739050960,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 597140209712336,
															"parameters": {
																"first-value": "slot.identifier",
																"comparison": 0,
																"second-value": "0"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "and that slot is empty, attach the item to it"
														},
														{
															"callFunction": "attachItem",
															"sid": 596960974351479
														}
													],
													"sid": 870440945063066,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-two-values",
																	"objectClass": "System",
																	"sid": 484854148540705,
																	"parameters": {
																		"first-value": "slot.type",
																		"comparison": 1,
																		"second-value": "\"none\""
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "if it came from a character slot, manage the gear and mods appropriately"
																},
																{
																	"callFunction": "queueGearManagement",
																	"sid": 249194179735476
																},
																{
																	"callFunction": "manageMods",
																	"sid": 102792447386736,
																	"parameters": [
																		true
																	]
																}
															],
															"sid": 194707231346571
														}
													]
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 187631772142266
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "and that slot is not empty, save its identifier (which is also its item's identifier) so we can overwrite it"
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 771700832397227,
															"parameters": {
																"variable": "swapID",
																"value": "slot.identifier"
															}
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 546789526977430,
															"parameters": {
																"variable": "dragCacheItemUID",
																"value": "item.UID"
															}
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 307351783282285,
															"parameters": {
																"variable": "dragCacheSlotUID",
																"value": "slot.UID"
															}
														}
													],
													"sid": 925008931677699,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "pick-all",
																	"objectClass": "System",
																	"sid": 553011608764114,
																	"parameters": {
																		"object": "item"
																	}
																},
																{
																	"id": "pick-by-comparison",
																	"objectClass": "System",
																	"sid": 844624818434821,
																	"parameters": {
																		"object": "item",
																		"expression": "item.identifier",
																		"comparison": 0,
																		"value": "swapID"
																	}
																},
																{
																	"id": "pick-all",
																	"objectClass": "System",
																	"sid": 293651261702794,
																	"parameters": {
																		"object": "slot"
																	}
																},
																{
																	"id": "pick-by-comparison",
																	"objectClass": "System",
																	"sid": 885275044218798,
																	"parameters": {
																		"object": "slot",
																		"expression": "slot.UID",
																		"comparison": 0,
																		"value": "draggedOriginSlotUID"
																	}
																},
																{
																	"id": "evaluate-expression",
																	"objectClass": "System",
																	"sid": 480143029988135,
																	"parameters": {
																		"value": "slot.type = item.type | slot.type = \"none\""
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "check if the item can go back to the origin slot"
																}
															],
															"sid": 464026553237280,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "pick-all",
																			"objectClass": "System",
																			"sid": 689549450637590,
																			"parameters": {
																				"object": "item"
																			}
																		},
																		{
																			"id": "pick-by-comparison",
																			"objectClass": "System",
																			"sid": 337029179692317,
																			"parameters": {
																				"object": "item",
																				"expression": "item.UID",
																				"comparison": 0,
																				"value": "dragCacheItemUID"
																			}
																		},
																		{
																			"id": "pick-all",
																			"objectClass": "System",
																			"sid": 637546061687633,
																			"parameters": {
																				"object": "slot"
																			}
																		},
																		{
																			"id": "pick-by-comparison",
																			"objectClass": "System",
																			"sid": 155336612958381,
																			"parameters": {
																				"object": "slot",
																				"expression": "slot.UID",
																				"comparison": 0,
																				"value": "dragCacheSlotUID"
																			}
																		}
																	],
																	"actions": [
																		{
																			"type": "comment",
																			"text": "if it can, re-pick the item being dragged, and the slot we dropped it on, and attach them"
																		},
																		{
																			"callFunction": "attachItem",
																			"sid": 678899096500546
																		}
																	],
																	"sid": 212308422475292,
																	"children": [
																		{
																			"eventType": "block",
																			"conditions": [
																				{
																					"id": "compare-two-values",
																					"objectClass": "System",
																					"sid": 838789578714350,
																					"parameters": {
																						"first-value": "slot.type",
																						"comparison": 1,
																						"second-value": "\"none\""
																					}
																				}
																			],
																			"actions": [
																				{
																					"type": "comment",
																					"text": "if it came from a character slot, manage the gear and mods appropriately"
																				},
																				{
																					"callFunction": "queueGearManagement",
																					"sid": 421687173483183
																				},
																				{
																					"callFunction": "manageMods",
																					"sid": 922397242824812,
																					"parameters": [
																						true
																					]
																				}
																			],
																			"sid": 676092927805364
																		},
																		{
																			"eventType": "block",
																			"conditions": [
																				{
																					"id": "pick-all",
																					"objectClass": "System",
																					"sid": 312271844596524,
																					"parameters": {
																						"object": "item"
																					}
																				},
																				{
																					"id": "pick-by-comparison",
																					"objectClass": "System",
																					"sid": 553159868067061,
																					"parameters": {
																						"object": "item",
																						"expression": "item.identifier",
																						"comparison": 0,
																						"value": "swapID"
																					}
																				},
																				{
																					"id": "pick-all",
																					"objectClass": "System",
																					"sid": 428620782307139,
																					"parameters": {
																						"object": "slot"
																					}
																				},
																				{
																					"id": "pick-by-comparison",
																					"objectClass": "System",
																					"sid": 248876190255851,
																					"parameters": {
																						"object": "slot",
																						"expression": "slot.UID",
																						"comparison": 0,
																						"value": "draggedOriginSlotUID"
																					}
																				}
																			],
																			"actions": [
																				{
																					"type": "comment",
																					"text": "now pick and detach the overlapped item that shouldn't be there (but the slot's identifier is OK), and pick the origin slot, and attach the two"
																				},
																				{
																					"id": "remove-from-parent",
																					"objectClass": "item",
																					"sid": 992757793937793
																				},
																				{
																					"callFunction": "manageMods",
																					"sid": 589077264734930,
																					"parameters": [
																						false
																					]
																				},
																				{
																					"callFunction": "attachItem",
																					"sid": 589004778395882
																				}
																			],
																			"sid": 762906856022523,
																			"children": [
																				{
																					"eventType": "block",
																					"conditions": [
																						{
																							"id": "compare-two-values",
																							"objectClass": "System",
																							"sid": 829910294078159,
																							"parameters": {
																								"first-value": "slot.type",
																								"comparison": 1,
																								"second-value": "\"none\""
																							}
																						}
																					],
																					"actions": [
																						{
																							"type": "comment",
																							"text": "if it came from a character slot, manage the gear and mods appropriately"
																						},
																						{
																							"callFunction": "queueGearManagement",
																							"sid": 610304706525411
																						},
																						{
																							"callFunction": "manageMods",
																							"sid": 689374442970799,
																							"parameters": [
																								true
																							]
																						}
																					],
																					"sid": 142763226872703
																				}
																			]
																		}
																	]
																}
															]
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "else",
																	"objectClass": "System",
																	"sid": 213136981060223
																},
																{
																	"id": "pick-all",
																	"objectClass": "System",
																	"sid": 367739148944933,
																	"parameters": {
																		"object": "slot"
																	}
																},
																{
																	"id": "pick-by-comparison",
																	"objectClass": "System",
																	"sid": 356724652666509,
																	"parameters": {
																		"object": "slot",
																		"expression": "slot.UID",
																		"comparison": 0,
																		"value": "draggedOriginSlotUID"
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "if it can't, don't swap, and send the item being dragged back to the origin slot"
																},
																{
																	"callFunction": "attachItem",
																	"sid": 208792725258952
																}
															],
															"sid": 328654190933021,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "compare-two-values",
																			"objectClass": "System",
																			"sid": 630410726847750,
																			"parameters": {
																				"first-value": "slot.type",
																				"comparison": 1,
																				"second-value": "\"none\""
																			}
																		}
																	],
																	"actions": [
																		{
																			"type": "comment",
																			"text": "if it came from a character slot, manage the gear and mods appropriately"
																		},
																		{
																			"callFunction": "queueGearManagement",
																			"sid": 432156743268246
																		},
																		{
																			"callFunction": "manageMods",
																			"sid": 313335070956290,
																			"parameters": [
																				true
																			]
																		}
																	],
																	"sid": 813365229432282
																}
															]
														}
													]
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [],
											"actions": [],
											"sid": 320051214841384
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 430044180804925
										},
										{
											"id": "cursor-is-over-object",
											"objectClass": "mouse",
											"sid": 754410337887077,
											"parameters": {
												"object": "invalidLocation"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if the cursor was over an invalid location, send the item back to the slot it came from"
										},
										{
											"callFunction": "returnItem",
											"sid": 830932401995178
										}
									],
									"sid": 173613641132192
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 807845078693595
										},
										{
											"id": "cursor-is-over-object",
											"objectClass": "mouse",
											"sid": 848638687292153,
											"parameters": {
												"object": "prop"
											}
										}
									],
									"actions": [
										{
											"callFunction": "returnItem",
											"sid": 188046764195015
										}
									],
									"sid": 681043468436456
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 351119690702053
										},
										{
											"id": "cursor-is-over-object",
											"objectClass": "mouse",
											"sid": 142829702532871,
											"parameters": {
												"object": "9PatchInvalidLocations"
											}
										}
									],
									"actions": [
										{
											"callFunction": "returnItem",
											"sid": 760097941165216
										}
									],
									"sid": 655650270015638
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 746631595027754
										},
										{
											"id": "cursor-is-over-object",
											"objectClass": "mouse",
											"sid": 219299045904732,
											"parameters": {
												"object": "background"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if the cursor was over the game world background, spawn its loot"
										},
										{
											"id": "create-object-by-name",
											"objectClass": "System",
											"sid": 627793945948014,
											"parameters": {
												"object-name": "item.simpleName & \"_loot\"",
												"layer": "\"background\"",
												"x": "mouse.X",
												"y": "mouse.Y",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										}
									],
									"sid": 556251734949061,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-last-created",
													"objectClass": "System",
													"sid": 719006855336677,
													"parameters": {
														"object": "loot"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "transfer data from item to loot, then destroy the item"
												},
												{
													"id": "set-animation",
													"objectClass": "loot",
													"sid": 500499623414376,
													"parameters": {
														"animation": "\"static_\" & (floor(random(1, 17)) * ARC) - HALF_CIRCLE",
														"from": "beginning"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "loot",
													"sid": 981668832353211,
													"parameters": {
														"instance-variable": "identifier",
														"value": "item.identifier"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "loot",
													"sid": 959227679172870,
													"parameters": {
														"instance-variable": "simpleName",
														"value": "item.simpleName"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "loot",
													"sid": 388357061755415,
													"parameters": {
														"instance-variable": "fullName",
														"value": "item.fullName"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "loot",
													"sid": 914179442486360,
													"parameters": {
														"instance-variable": "type",
														"value": "item.type"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "loot",
													"sid": 902484779634297,
													"parameters": {
														"instance-variable": "lore",
														"value": "item.lore"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "loot",
													"sid": 362669929305554,
													"parameters": {
														"instance-variable": "level",
														"value": "item.level"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "loot",
													"sid": 571714791507665,
													"parameters": {
														"instance-variable": "mods",
														"value": "item.mods"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "loot",
													"sid": 212656048331637,
													"parameters": {
														"instance-variable": "classRestrictions",
														"value": "item.classRestrictions"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "loot",
													"sid": 855866223536522,
													"parameters": {
														"instance-variable": "modTable",
														"value": "item.modTable"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "loot",
													"sid": 701101953006039,
													"parameters": {
														"instance-variable": "verticalHeight",
														"value": "0"
													}
												},
												{
													"id": "destroy",
													"objectClass": "item",
													"sid": 197838163977498
												}
											],
											"sid": 496856218332598
										}
									]
								}
							]
						},
						{
							"functionName": "attachItem",
							"functionDescription": "attaches an item to a slot",
							"functionCategory": "equipment",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-position",
									"objectClass": "item",
									"sid": 775239099829963,
									"parameters": {
										"x": "slot.X",
										"y": "slot.Y"
									}
								},
								{
									"id": "move-to-layer",
									"objectClass": "item",
									"sid": 282712149404009,
									"parameters": {
										"layer": "slot.LayerName"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "slot",
									"sid": 815964194354236,
									"parameters": {
										"instance-variable": "identifier",
										"value": "item.identifier"
									}
								},
								{
									"id": "add-child",
									"objectClass": "slot",
									"sid": 829487362594103,
									"parameters": {
										"child": "item",
										"transform-x": true,
										"transform-y": true,
										"transform-w": false,
										"transform-h": false,
										"transform-a": false,
										"transform-o": false,
										"transform-z-elevation": false,
										"transform-visibility": false,
										"destroy-with-parent": true
									}
								}
							],
							"sid": 437730535233655,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-overlapping-point",
											"objectClass": "System",
											"sid": 776138648900020,
											"parameters": {
												"object": "placeholder",
												"x": "item.X",
												"y": "item.Y"
											}
										}
									],
									"actions": [
										{
											"id": "set-visible",
											"objectClass": "placeholder",
											"sid": 422365193427941,
											"parameters": {
												"visibility": "invisible"
											}
										}
									],
									"sid": 554238670862256
								}
							]
						},
						{
							"functionName": "detachItem",
							"functionDescription": "detaches an item from a slot",
							"functionCategory": "equipment",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "slot",
									"sid": 714493473542525,
									"parameters": {
										"instance-variable": "identifier",
										"value": "0"
									}
								},
								{
									"id": "remove-from-parent",
									"objectClass": "item",
									"sid": 226225276438894
								}
							],
							"sid": 881944124391655,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-overlapping-point",
											"objectClass": "System",
											"sid": 140983841569789,
											"parameters": {
												"object": "placeholder",
												"x": "item.X",
												"y": "item.Y"
											}
										}
									],
									"actions": [
										{
											"id": "set-visible",
											"objectClass": "placeholder",
											"sid": 174570673259630,
											"parameters": {
												"visibility": "visible"
											}
										}
									],
									"sid": 417363291653191
								}
							]
						},
						{
							"functionName": "returnItem",
							"functionDescription": "Send an item back to whatever it came from, if it was dropped in an ineligible location.",
							"functionCategory": "equipment",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 790003971076737,
									"parameters": {
										"object": "slot",
										"expression": "slot.UID",
										"comparison": 0,
										"value": "draggedOriginSlotUID"
									}
								}
							],
							"actions": [
								{
									"callFunction": "attachItem",
									"sid": 257549238666092
								}
							],
							"sid": 669193285438587,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "slot",
											"sid": 947465263058252,
											"parameters": {
												"instance-variable": "type",
												"comparison": 1,
												"value": "\"\""
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if it came from a character slot, manage the gear and mods appropriately"
										},
										{
											"callFunction": "queueGearManagement",
											"sid": 860603048097230
										},
										{
											"callFunction": "manageMods",
											"sid": 470642327753329,
											"parameters": [
												true
											]
										}
									],
									"sid": 137910405971042
								}
							]
						}
					],
					"sid": 645635025486599
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "gear",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"functionName": "queueGearManagement",
							"functionDescription": "Add a request to manage gear to the queue",
							"functionCategory": "equipment",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 767810941640445,
									"parameters": {
										"value": "slot.type <> \"neck\" | slot.type <> \"ring\""
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "as long as the slot's type is not neck or ring..."
								},
								{
									"id": "stop",
									"objectClass": "player",
									"sid": 333546965849144,
									"behaviorType": "MoveTo"
								}
							],
							"sid": 143517779829659,
							"children": [
								{
									"eventType": "variable",
									"name": "gearToSpawn",
									"type": "string",
									"initialValue": "",
									"comment": "the name of the gear to spawn",
									"isStatic": true,
									"isConstant": false,
									"sid": 938653276395709
								},
								{
									"eventType": "variable",
									"name": "gearToDestroy",
									"type": "string",
									"initialValue": "",
									"comment": "the name of the gear to destroy",
									"isStatic": true,
									"isConstant": false,
									"sid": 315233675903767
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 750864827470843,
											"parameters": {
												"variable": "gearToDestroy",
												"value": "\"\""
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 792604619998542,
											"parameters": {
												"variable": "gearToSpawn",
												"value": "\"\""
											}
										}
									],
									"sid": 864449927295706,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 733529455292175,
													"parameters": {
														"object": "item",
														"expression": "item.identifier",
														"comparison": 0,
														"value": "slot.identifier"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "If there's an item in the slot, pick it"
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 463122126400987,
													"parameters": {
														"variable": "gearToSpawn",
														"value": "body.ObjectTypeName & \"_\" & item.simpleName & \"_gear\""
													}
												}
											],
											"sid": 798054236445145,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-by-comparison",
															"objectClass": "System",
															"sid": 536054554774859,
															"parameters": {
																"object": "gear",
																"expression": "gear.type",
																"comparison": 0,
																"value": "slot.type"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "destroy the existing gear that correlates with the slot's type, if it exists"
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 226553544784084,
															"parameters": {
																"variable": "gearToDestroy",
																"value": "gear.ObjectTypeName"
															}
														}
													],
													"sid": 897665467316869
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 808572905801557
												},
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 336486002163595,
													"parameters": {
														"object": "gear",
														"expression": "gear.type",
														"comparison": 0,
														"value": "slot.type"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "if it's empty, pick the gear that correlates with the slot's type"
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 742406507880472,
													"parameters": {
														"variable": "gearToDestroy",
														"value": "gear.ObjectTypeName"
													}
												}
											],
											"sid": 107601362739452,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "evaluate-expression",
															"objectClass": "System",
															"sid": 387471262503872,
															"parameters": {
																"value": "slot.type = \"chest\" & player.class <> \"man\""
															}
														},
														{
															"id": "compare-instance-variable",
															"objectClass": "slot",
															"sid": 941149303741347,
															"parameters": {
																"instance-variable": "type",
																"comparison": 0,
																"value": "\"legs\""
															}
														},
														{
															"id": "compare-instance-variable",
															"objectClass": "slot",
															"sid": 665422498431433,
															"parameters": {
																"instance-variable": "type",
																"comparison": 0,
																"value": "\"head\""
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "if it's legs or head, or chest and not a man, (the slots with visual representation that have default gear), load the default gear"
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 582735098207625,
															"parameters": {
																"variable": "gearToSpawn",
																"value": "body.ObjectTypeName & \"_\" & slot.type & \"Default_gear\""
															}
														}
													],
													"sid": 141514422046280,
													"isOrBlock": true
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 615218491138260
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "if there's no gear or item, that means the game has just started, and we just need to spawn default gear"
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 871569503498455,
													"parameters": {
														"variable": "gearToSpawn",
														"value": "body.ObjectTypeName & \"_\" & slot.type & \"Default_gear\""
													}
												}
											],
											"sid": 247128631608848
										},
										{
											"eventType": "comment",
											"text": "Destroying the old gear before creating the new one prevents memory spikes, but means the character's naked body appears briefly. The other way around doesn't necessarily mitigate the issue however; we'd hypothetically have to add a hardcoded wait (which would be unreliable across different hardware) since we don't have a way to guarantee that the new gear is actually on screen."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 830974591164619,
													"parameters": {
														"variable": "gearToDestroy",
														"comparison": 1,
														"value": "\"\""
													}
												},
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 704289878977751,
													"parameters": {
														"object": "gear",
														"expression": "gearToDestroy",
														"comparison": 0,
														"value": "gear.ObjectTypeName"
													}
												}
											],
											"actions": [
												{
													"id": "destroy",
													"objectClass": "gear",
													"sid": 775515642211963
												},
												{
													"id": "wait",
													"objectClass": "System",
													"sid": 163737558733592,
													"parameters": {
														"seconds": "0"
													}
												},
												{
													"id": "unload-object-images",
													"objectClass": "System",
													"sid": 445309866644666,
													"parameters": {
														"object": "gear"
													}
												}
											],
											"sid": 743099863364870
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 459710861052111,
													"parameters": {
														"variable": "gearToSpawn",
														"comparison": 1,
														"value": "\"\""
													}
												}
											],
											"actions": [
												{
													"id": "create-object-by-name",
													"objectClass": "System",
													"sid": 528314706109549,
													"parameters": {
														"object-name": "gearToSpawn",
														"layer": "\"main\"",
														"x": "player.X",
														"y": "player.Y",
														"create-hierarchy": false,
														"template-name": "\"\""
													}
												}
											],
											"sid": 668469683500758,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-last-created",
															"objectClass": "System",
															"sid": 323850980706364,
															"parameters": {
																"object": "gear"
															}
														}
													],
													"actions": [
														{
															"id": "set-instvar-value",
															"objectClass": "gear",
															"sid": 899922761122527,
															"parameters": {
																"instance-variable": "type",
																"value": "slot.type"
															}
														},
														{
															"id": "add-child",
															"objectClass": "body",
															"sid": 884095161917805,
															"parameters": {
																"child": "gear",
																"transform-x": true,
																"transform-y": true,
																"transform-w": false,
																"transform-h": false,
																"transform-a": false,
																"transform-o": false,
																"transform-z-elevation": false,
																"transform-visibility": false,
																"destroy-with-parent": true
															}
														}
													],
													"sid": 922032984733372
												}
											]
										}
									]
								}
							]
						}
					],
					"sid": 976456797084060
				}
			],
			"sid": 156017693834822
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "isometry",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-on-screen",
							"objectClass": "sortable",
							"sid": 365385957978388
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "This event needs to be above the sorting group to prevent a graphical glitch"
						},
						{
							"id": "set-instvar-value",
							"objectClass": "sortable",
							"sid": 337150276514592,
							"parameters": {
								"instance-variable": "yValue",
								"value": "Self.Y"
							}
						},
						{
							"id": "sort-z-order",
							"objectClass": "System",
							"sid": 480855599480174,
							"parameters": {
								"object": "sortable",
								"instance-variable": {
									"name": "yValue",
									"objectClass": "sortable"
								}
							}
						}
					],
					"sid": 868041002995505
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-on-layer",
							"objectClass": "loot",
							"sid": 209328512396284,
							"parameters": {
								"layer": "\"main\""
							}
						},
						{
							"id": "pick-parent",
							"objectClass": "loot",
							"sid": 830738639695161,
							"parameters": {
								"parent": "prop",
								"which": "own"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "This event must be below the above event, or else the loot will flash when the z order of its parent prop changes."
						},
						{
							"type": "comment",
							"text": "If a piece of loot is on the 'main' layer, it's part of the environment, and needs to be moved in front of whatever it's 'on', i.e., the prop that is its parent."
						},
						{
							"id": "move-to-object",
							"objectClass": "loot",
							"sid": 220340964144110,
							"parameters": {
								"where": "in-front",
								"object": "prop"
							}
						}
					],
					"sid": 489056358912797
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "sorting",
					"description": "Check for edge cases to indicate utilization of a custom sorting order, otherwise use the default.",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-animation-playing",
									"objectClass": "man_simpleSword_gear",
									"sid": 755476965331208,
									"parameters": {
										"animation": "\"idle_157.5\""
									}
								}
							],
							"actions": [
								{
									"id": "move-to-object",
									"objectClass": "offHand",
									"sid": 702532448346007,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "head",
									"sid": 390173758568011,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "chest",
									"sid": 883275433593183,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "mainHand",
									"sid": 564538742535919,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "feet",
									"sid": 788751064850888,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "legs",
									"sid": 942548275877263,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "hands",
									"sid": 445366415603596,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								}
							],
							"sid": 348299811569005
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 503835850935764
								},
								{
									"id": "is-between-values",
									"objectClass": "System",
									"sid": 611856887479244,
									"parameters": {
										"value": "player.degrees",
										"lower-bound": "-67.5",
										"upper-bound": "22.5"
									}
								}
							],
							"actions": [
								{
									"id": "move-to-object",
									"objectClass": "mainHand",
									"sid": 901435269026737,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "offHand",
									"sid": 172207901148276,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "head",
									"sid": 290903160034197,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "chest",
									"sid": 186295098346742,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "feet",
									"sid": 979459098737440,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "legs",
									"sid": 287088795551390,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "hands",
									"sid": 701638109081111,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								}
							],
							"sid": 701987836742656
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 875563291302660
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "The normal sorting order."
								},
								{
									"id": "move-to-object",
									"objectClass": "offHand",
									"sid": 938400889925313,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "head",
									"sid": 988530964135385,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "mainHand",
									"sid": 651222762711156,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "chest",
									"sid": 547581038454800,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "feet",
									"sid": 882564343136704,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "legs",
									"sid": 597937028052401,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "hands",
									"sid": 167383299477802,
									"parameters": {
										"where": "in-front",
										"object": "body"
									}
								}
							],
							"sid": 603941084953152
						}
					],
					"sid": 621826706568727
				}
			],
			"sid": 937100591006447
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "player",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "levels",
					"description": "handle the player leveling up",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 802049655454701,
									"parameters": {
										"instance-variable": "experience",
										"comparison": 5,
										"value": "Self.level * 100"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "player",
									"sid": 627464003735100,
									"parameters": {
										"instance-variable": "experience",
										"value": "0"
									}
								},
								{
									"id": "add-to-instvar",
									"objectClass": "player",
									"sid": 338763583582706,
									"parameters": {
										"instance-variable": "level",
										"value": "1"
									}
								}
							],
							"sid": 208608154238341
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-parent",
									"objectClass": "ability",
									"sid": 953424379950288,
									"parameters": {
										"parent": "abilitySlot",
										"which": "own"
									}
								},
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 602434934367432,
									"parameters": {
										"object": "abilitySlot",
										"expression": "abilitySlot.unlockLevel",
										"comparison": 0,
										"value": "player.level"
									}
								},
								{
									"id": "pick-children",
									"objectClass": "abilitySlot",
									"sid": 424632925588933,
									"parameters": {
										"child": "ability",
										"which": "own"
									}
								}
							],
							"actions": [],
							"sid": 820140174345689,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "player",
											"sid": 524494304015622,
											"parameters": {
												"instance-variable": "level",
												"comparison": 0,
												"value": "2"
											}
										},
										{
											"id": "trigger-once-while-true",
											"objectClass": "System",
											"sid": 781076181273254
										}
									],
									"actions": [
										{
											"id": "set-animation",
											"objectClass": "ability",
											"sid": 342264984411336,
											"parameters": {
												"animation": "\"heroicStrike\"",
												"from": "beginning"
											}
										}
									],
									"sid": 570054714230054
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "player",
											"sid": 771211897507310,
											"parameters": {
												"instance-variable": "level",
												"comparison": 0,
												"value": "3"
											}
										},
										{
											"id": "trigger-once-while-true",
											"objectClass": "System",
											"sid": 408855644204187
										}
									],
									"actions": [
										{
											"id": "set-animation",
											"objectClass": "ability",
											"sid": 279989319670224,
											"parameters": {
												"animation": "\"kick\"",
												"from": "beginning"
											}
										}
									],
									"sid": 123881620713685
								}
							]
						}
					],
					"sid": 221630090189973
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "camera",
					"description": "",
					"isActiveOnStart": true,
					"children": [],
					"sid": 437386535914416
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "facings",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 226847805408058,
									"parameters": {
										"instance-variable": "currentHealth",
										"comparison": 4,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"callFunction": "updateFacing",
									"sid": 457704822269483,
									"parameters": [
										"-1",
										"-1"
									]
								}
							],
							"sid": 774150289546542
						},
						{
							"functionName": "updateFacing",
							"functionDescription": "Update the facing of the player.",
							"functionCategory": "player",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "x",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"sid": 941295715930551
								},
								{
									"name": "y",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"sid": 915092038699125
								}
							],
							"eventType": "function-block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 942919002777203,
									"parameters": {
										"first-value": "timescale",
										"comparison": 1,
										"second-value": "0"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "this is a function so it can be called in the middle of an ability function"
								}
							],
							"sid": 564814853184454,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 218107748119510,
											"parameters": {
												"variable": "x",
												"comparison": 1,
												"value": "-1"
											}
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 400230555700600,
											"parameters": {
												"variable": "y",
												"comparison": 1,
												"value": "-1"
											}
										}
									],
									"actions": [
										{
											"id": "set-moving-angle",
											"objectClass": "player",
											"sid": 379297991393983,
											"behaviorType": "MoveTo",
											"parameters": {
												"angle": "angle(Self.X, Self.Y, x, y)"
											}
										}
									],
									"sid": 601663005552594
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "player",
											"sid": 537515292230777,
											"parameters": {
												"instance-variable": "degrees",
												"value": "round(Self.MoveTo.MovingAngle / ARC) * ARC"
											}
										}
									],
									"sid": 472815315459873
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "player",
											"sid": 864370576953620,
											"parameters": {
												"instance-variable": "degrees",
												"comparison": 0,
												"value": "-HALF_CIRCLE"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "both -180 and 180 are possible outcomes, so compensate for the one that doesn't have an animation"
										},
										{
											"id": "set-instvar-value",
											"objectClass": "player",
											"sid": 474728216387351,
											"parameters": {
												"instance-variable": "degrees",
												"value": "HALF_CIRCLE"
											}
										}
									],
									"sid": 481218350912265
								}
							]
						}
					],
					"sid": 528071924570554
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "health and mana",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "every-tick",
									"objectClass": "System",
									"sid": 413143904177773
								}
							],
							"actions": [
								{
									"id": "set-height",
									"objectClass": "healthOrb",
									"sid": 378778446921463,
									"parameters": {
										"height": "clamp(player.currentHealth / player.maxHealth * self.ImageHeight, 0, Self.ImageHeight)"
									}
								},
								{
									"id": "set-height",
									"objectClass": "manaOrb",
									"sid": 356871380388085,
									"parameters": {
										"height": "clamp(player.currentMana / player.maxMana * Self.ImageHeight, 0, Self.ImageHeight)"
									}
								}
							],
							"sid": 154905051816206
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 930777219360607,
									"parameters": {
										"instance-variable": "currentHealth",
										"comparison": 4,
										"value": "player.maxHealth"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "player",
									"sid": 948005510207791,
									"parameters": {
										"instance-variable": "currentHealth",
										"value": "Self.maxHealth"
									}
								}
							],
							"sid": 626822929654135
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 347193666593438,
									"parameters": {
										"instance-variable": "currentHealth",
										"comparison": 2,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "player",
									"sid": 568140490164365,
									"parameters": {
										"instance-variable": "currentHealth",
										"value": "0"
									}
								}
							],
							"sid": 284450252978099
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 927297459158316,
									"parameters": {
										"instance-variable": "currentMana",
										"comparison": 4,
										"value": "player.maxMana"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "player",
									"sid": 206021598300202,
									"parameters": {
										"instance-variable": "currentMana",
										"value": "Self.maxMana"
									}
								}
							],
							"sid": 596737171205302
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 414329790171110,
									"parameters": {
										"instance-variable": "currentMana",
										"comparison": 2,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "player",
									"sid": 883040235264336,
									"parameters": {
										"instance-variable": "currentMana",
										"value": "0"
									}
								}
							],
							"sid": 793873407046539
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 918004471777489,
									"parameters": {
										"instance-variable": "currentHealth",
										"comparison": 4,
										"value": "0"
									}
								},
								{
									"id": "every-x-seconds",
									"objectClass": "System",
									"sid": 945005244314587,
									"parameters": {
										"interval-seconds": "1.0"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Regenerate health and mana while not at the maximum values."
								}
							],
							"sid": 668684290774718,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "player",
											"sid": 854256445918559,
											"parameters": {
												"instance-variable": "currentHealth",
												"comparison": 2,
												"value": "Self.maxHealth"
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "player",
											"sid": 362708406627703,
											"parameters": {
												"instance-variable": "currentHealth",
												"comparison": 1,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Regenerate health only when alive."
										},
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 230359381703937,
											"parameters": {
												"instance-variable": "currentHealth",
												"value": "Self.healthRegen"
											}
										}
									],
									"sid": 675573875826434
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "player",
											"sid": 463626831502173,
											"parameters": {
												"instance-variable": "currentMana",
												"comparison": 2,
												"value": "Self.maxMana"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 678430866172172,
											"parameters": {
												"instance-variable": "currentMana",
												"value": "Self.ManaRegen"
											}
										}
									],
									"sid": 510763216032454
								}
							]
						}
					],
					"sid": 382578483115015
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "movement and interaction",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 125995727596137,
									"parameters": {
										"instance-variable": "currentHealth",
										"comparison": 4,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "isometrically correct movement"
								},
								{
									"id": "set-max-speed",
									"objectClass": "player",
									"sid": 256885482061283,
									"behaviorType": "MoveTo",
									"parameters": {
										"max-speed": "Functions.isometrify(Self.movementSpeed, Self.MoveTo.MovingAngle)"
									}
								}
							],
							"sid": 245583672645296,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 120982026255155,
											"parameters": {
												"variable": "isOnInteractCooldown"
											}
										},
										{
											"id": "trigger-once-while-true",
											"objectClass": "System",
											"sid": 585721311405905
										}
									],
									"actions": [
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 944013668078549,
											"parameters": {
												"seconds": "INTERACT_COOLDOWN"
											}
										},
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 625124061650027,
											"parameters": {
												"variable": "isOnInteractCooldown",
												"value": "false"
											}
										}
									],
									"sid": 406589245541801
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "layer-is-visible",
											"objectClass": "System",
											"sid": 844520078268042,
											"parameters": {
												"layer": "\"settingsMenu\""
											},
											"isInverted": true
										},
										{
											"id": "cursor-is-over-object",
											"objectClass": "mouse",
											"sid": 128899916492898,
											"parameters": {
												"object": "item"
											},
											"isInverted": true
										},
										{
											"id": "cursor-is-over-object",
											"objectClass": "mouse",
											"sid": 876584298511895,
											"parameters": {
												"object": "invalidLocation"
											},
											"isInverted": true
										},
										{
											"id": "cursor-is-over-object",
											"objectClass": "mouse",
											"sid": 886180726251542,
											"parameters": {
												"object": "9PatchInvalidLocations"
											},
											"isInverted": true
										}
									],
									"actions": [],
									"sid": 596268564767458,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "on-object-clicked",
													"objectClass": "mouse",
													"sid": 581983855282056,
													"parameters": {
														"mouse-button": "left",
														"click-type": "clicked",
														"object-clicked": "npcBody"
													}
												},
												{
													"id": "pick-parent",
													"objectClass": "npcBody",
													"sid": 500343006491042,
													"parameters": {
														"parent": "npc",
														"which": "own"
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 981260177954875,
													"parameters": {
														"variable": "uidOfClicked",
														"value": "npc.UID"
													}
												},
												{
													"callFunction": "moveToLocation",
													"sid": 602829088753991,
													"parameters": [
														"npc.X",
														"npc.y"
													]
												}
											],
											"sid": 746307798420541
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "on-object-clicked",
													"objectClass": "mouse",
													"sid": 763879713843625,
													"parameters": {
														"mouse-button": "left",
														"click-type": "clicked",
														"object-clicked": "loot"
													}
												},
												{
													"id": "pick-topbottom",
													"objectClass": "loot",
													"sid": 435457045204375,
													"parameters": {
														"which": "top"
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 640378117880726,
													"parameters": {
														"variable": "uidOfClicked",
														"value": "loot.UID"
													}
												},
												{
													"callFunction": "moveToLocation",
													"sid": 236035510369624,
													"parameters": [
														"loot.X",
														"loot.y"
													]
												}
											],
											"sid": 422837792051483
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "on-object-clicked",
													"objectClass": "mouse",
													"sid": 845886336656501,
													"parameters": {
														"mouse-button": "left",
														"click-type": "clicked",
														"object-clicked": "door"
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 886877031292798,
													"parameters": {
														"variable": "uidOfClicked",
														"value": "door.UID"
													}
												},
												{
													"callFunction": "moveToLocation",
													"sid": 579219826557585,
													"parameters": [
														"door.ImagePointX(1)",
														"door.ImagePointY(1)"
													]
												}
											],
											"sid": 398884856732755
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "on-object-clicked",
													"objectClass": "mouse",
													"sid": 217418460362889,
													"parameters": {
														"mouse-button": "left",
														"click-type": "clicked",
														"object-clicked": "lootChest"
													}
												},
												{
													"id": "compare-animation-frame",
													"objectClass": "lootChest",
													"sid": 340108756894294,
													"parameters": {
														"comparison": 0,
														"number": "0"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "We can only interact with loot chests that haven't been opened"
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 299063216853020,
													"parameters": {
														"variable": "uidOfClicked",
														"value": "lootChest.UID"
													}
												},
												{
													"callFunction": "moveToLocation",
													"sid": 626940978577513,
													"parameters": [
														"lootChest.ImagePointX(1)",
														"lootChest.ImagePointY(1)"
													]
												}
											],
											"sid": 585061498189976
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "cursor-is-over-object",
													"objectClass": "mouse",
													"sid": 455872059231958,
													"parameters": {
														"object": "player"
													},
													"isInverted": true
												}
											],
											"actions": [],
											"sid": 568416994144019,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "mouse-button-is-down",
															"objectClass": "mouse",
															"sid": 886023708674629,
															"parameters": {
																"mouse-button": "right"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "if the mouse isn't over any of the specified, reset uidOfClicked and walk there normally"
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 798933237432196,
															"parameters": {
																"variable": "uidOfClicked",
																"value": "0"
															}
														},
														{
															"callFunction": "moveToLocation",
															"sid": 853024230693833,
															"parameters": [
																"mouse.X",
																"mouse.Y"
															]
														}
													],
													"sid": 616090096106922
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "mouse-button-is-down",
															"objectClass": "mouse",
															"sid": 392493237748483,
															"parameters": {
																"mouse-button": "left"
															}
														}
													],
													"actions": [],
													"sid": 562650531510635,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "cursor-is-over-object",
																	"objectClass": "mouse",
																	"sid": 730658468748834,
																	"parameters": {
																		"object": "npcBody"
																	},
																	"isInverted": true
																},
																{
																	"id": "cursor-is-over-object",
																	"objectClass": "mouse",
																	"sid": 222773159887017,
																	"parameters": {
																		"object": "enemyBody"
																	},
																	"isInverted": true
																},
																{
																	"id": "cursor-is-over-object",
																	"objectClass": "mouse",
																	"sid": 659138964629686,
																	"parameters": {
																		"object": "loot"
																	},
																	"isInverted": true
																},
																{
																	"id": "cursor-is-over-object",
																	"objectClass": "mouse",
																	"sid": 887722893563606,
																	"parameters": {
																		"object": "door"
																	},
																	"isInverted": true
																},
																{
																	"id": "cursor-is-over-object",
																	"objectClass": "mouse",
																	"sid": 630283028114606,
																	"parameters": {
																		"object": "lootChest"
																	},
																	"isInverted": true
																}
															],
															"actions": [
																{
																	"id": "set-eventvar-value",
																	"objectClass": "System",
																	"sid": 412136936476001,
																	"parameters": {
																		"variable": "uidOfClicked",
																		"value": "0"
																	}
																},
																{
																	"callFunction": "moveToLocation",
																	"sid": 122469423883515,
																	"parameters": [
																		"mouse.X",
																		"mouse.Y"
																	]
																}
															],
															"sid": 112537948417270
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-boolean-eventvar",
																	"objectClass": "System",
																	"sid": 110680587794995,
																	"parameters": {
																		"variable": "isOnInteractCooldown"
																	},
																	"isInverted": true
																},
																{
																	"id": "cursor-is-over-object",
																	"objectClass": "mouse",
																	"sid": 898126592540758,
																	"parameters": {
																		"object": "enemyBody"
																	}
																},
																{
																	"id": "pick-topbottom",
																	"objectClass": "enemyBody",
																	"sid": 526049155049224,
																	"parameters": {
																		"which": "top"
																	}
																},
																{
																	"id": "pick-parent",
																	"objectClass": "enemyBody",
																	"sid": 194969037014112,
																	"parameters": {
																		"parent": "enemy",
																		"which": "own"
																	}
																}
															],
															"actions": [
																{
																	"id": "set-eventvar-value",
																	"objectClass": "System",
																	"sid": 701185362739958,
																	"parameters": {
																		"variable": "uidOfClicked",
																		"value": "enemy.UID"
																	}
																},
																{
																	"callFunction": "moveToLocation",
																	"sid": 307701980469008,
																	"parameters": [
																		"enemy.X",
																		"enemy.y"
																	]
																}
															],
															"sid": 251943983229445
														}
													]
												}
											]
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 430217294903986,
											"parameters": {
												"object": "enemy",
												"expression": "uidOfClicked",
												"comparison": 0,
												"value": "enemy.UID"
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 446143722805513,
											"parameters": {
												"object": "gear",
												"expression": "gear.type",
												"comparison": 0,
												"value": "\"mainHand\""
											}
										},
										{
											"id": "is-overlapping-another-object",
											"objectClass": "player",
											"sid": 539468882333294,
											"parameters": {
												"object": "nonCombatArea"
											},
											"isInverted": true
										},
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 504025445902873,
											"parameters": {
												"first-value": "Functions.isometrify(player.attackRange, angle(player.X, player.Y, enemy.X, enemy.Y))",
												"comparison": 5,
												"second-value": "distance(player.X, player.Y, enemy.X, enemy.Y)"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "As soon as the enemy comes in range, stop moving and attack it. We must verify we're in a non-combat area and have a weapon equipped before we get to the basicAttack function."
										},
										{
											"id": "stop",
											"objectClass": "player",
											"sid": 797725622384593,
											"behaviorType": "MoveTo"
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 641852746905644,
											"parameters": {
												"variable": "uidOfClicked",
												"value": "0"
											}
										},
										{
											"id": "call-mapped-function",
											"objectClass": "Functions",
											"sid": 701899096196063,
											"parameters": {
												"name": "\"playerAbilities\"",
												"string": "\"basicAttack\"",
												"forward-params": "0"
											}
										}
									],
									"sid": 388352296582573
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 721662282054252,
											"parameters": {
												"object": "loot",
												"expression": "loot.UID",
												"comparison": 0,
												"value": "uidOfClicked"
											}
										},
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 566842914011511,
											"parameters": {
												"first-value": "Functions.isometrify(player.pickupRange, angle(player.X, player.Y, loot.X, loot.Y))",
												"comparison": 5,
												"second-value": "distance(player.X, player.Y, loot.X, loot.Y) - max(loot.Width, loot.Height) - loot.verticalHeight"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "loot gets a bonus to its pick up range based on its size, and an additional bonus if it has a vertical height"
										},
										{
											"id": "stop",
											"objectClass": "player",
											"sid": 961332417052704,
											"behaviorType": "MoveTo"
										},
										{
											"callFunction": "pickUpLoot",
											"sid": 728141715517524
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 114187256365570,
											"parameters": {
												"variable": "uidOfClicked",
												"value": "0"
											}
										}
									],
									"sid": 781964436868869
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 289372584768611,
											"parameters": {
												"object": "door",
												"expression": "uidOfClicked",
												"comparison": 0,
												"value": "door.UID"
											}
										},
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 351145895360370,
											"parameters": {
												"first-value": "Functions.isometrify(player.pickupRange, angle(player.X, player.Y, door.ImagePointX(1), door.ImagePointY(1)))",
												"comparison": 5,
												"second-value": "distance(player.X, player.Y, door.ImagePointX(1), door.ImagePointY(1)) - max(door.Width, door.Height)"
											}
										}
									],
									"actions": [
										{
											"id": "stop",
											"objectClass": "player",
											"sid": 728178816355344,
											"behaviorType": "MoveTo"
										},
										{
											"callFunction": "buildingTransition",
											"sid": 894351674578264
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 394862477378289,
											"parameters": {
												"variable": "uidOfClicked",
												"value": "0"
											}
										}
									],
									"sid": 133416707150565
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 820788770937825,
											"parameters": {
												"object": "lootChest",
												"expression": "uidOfClicked",
												"comparison": 0,
												"value": "lootChest.UID"
											}
										},
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 435066524308366,
											"parameters": {
												"first-value": "Functions.isometrify(player.pickupRange, angle(player.X, player.Y, lootChest.ImagePointX(1), lootChest.ImagePointY(1)))",
												"comparison": 5,
												"second-value": "distance(player.X, player.Y, lootChest.ImagePointX(1), lootChest.ImagePointY(1)) - max(lootChest.Width, lootChest.Height)"
											}
										}
									],
									"actions": [
										{
											"id": "stop",
											"objectClass": "player",
											"sid": 837229197482044,
											"behaviorType": "MoveTo"
										},
										{
											"id": "start-animation",
											"objectClass": "lootChest",
											"sid": 717015876556937,
											"parameters": {
												"from": "current-frame"
											}
										},
										{
											"callFunction": "spawnLoot",
											"sid": 109958418072795,
											"parameters": [
												"lootChest.ImagePointX(1)",
												"lootChest.ImagePointY(1)",
												"max(lootChest.Width, lootChest.Height)"
											]
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 474106579705788,
											"parameters": {
												"variable": "uidOfClicked",
												"value": "0"
											}
										}
									],
									"sid": 571517915827350
								}
							]
						},
						{
							"functionName": "moveToLocation",
							"functionDescription": "Move to a location, specifying a distance away from that location to arrive at",
							"functionCategory": "player",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "x",
									"type": "number",
									"initialValue": "0",
									"comment": "The coordinate on the X axis to move the player to",
									"sid": 476477426097131
								},
								{
									"name": "y",
									"type": "number",
									"initialValue": "0",
									"comment": "The coordinate on the Y axis to move the player to",
									"sid": 381101153777112
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "move-to-position",
									"objectClass": "player",
									"sid": 796317504405257,
									"behaviorType": "MoveTo",
									"parameters": {
										"x": "x",
										"y": "y",
										"mode": "direct"
									}
								}
							],
							"sid": 736875311258128
						}
					],
					"sid": 914713205483917
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "abilities",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 233008741584371,
									"parameters": {
										"object": "abilityKeybinder"
									}
								},
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 489042878713620,
									"parameters": {
										"object": "abilitySlot",
										"expression": "abilitySlot.abilityNumber",
										"comparison": 0,
										"value": "abilityKeybinder.abilityNumber"
									}
								}
							],
							"actions": [],
							"sid": 736239834560724,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "layer-is-visible",
											"objectClass": "System",
											"sid": 476102035725788,
											"parameters": {
												"layer": "\"settingsMenu\""
											},
											"isInverted": true
										},
										{
											"id": "is-overlapping-another-object",
											"objectClass": "player",
											"sid": 796894004493449,
											"parameters": {
												"object": "nonCombatArea"
											},
											"isInverted": true
										},
										{
											"id": "key-code-is-down",
											"objectClass": "keyboard",
											"sid": 355683040841919,
											"parameters": {
												"keycode": "abilityKeybinder.keycode"
											}
										},
										{
											"id": "pick-children",
											"objectClass": "abilitySlot",
											"sid": 421688755344860,
											"parameters": {
												"child": "ability",
												"which": "own"
											}
										},
										{
											"id": "is-animation-playing",
											"objectClass": "ability",
											"sid": 864877497299719,
											"parameters": {
												"animation": "\"none\""
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "If we're not paused or in a non-combat area, check if the keycode for each abilityKeybinder is pressed, and if it is, find the correlating abilitySlot, and ability. Use that ability to call the right player ability function."
										},
										{
											"id": "call-mapped-function",
											"objectClass": "Functions",
											"sid": 804480240916256,
											"parameters": {
												"name": "\"playerAbilities\"",
												"string": "ability.AnimationName",
												"forward-params": "0"
											}
										}
									],
									"sid": 544531612741889
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-children",
											"objectClass": "abilitySlot",
											"sid": 442615408199941,
											"parameters": {
												"child": "abilityKey",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "This doesn't need to be done every tick, however, we are already looping over all abilities and keybinders."
										},
										{
											"id": "set-text",
											"objectClass": "abilityKey",
											"sid": 927448971753271,
											"parameters": {
												"text": "\"[outline=#000000][lineThickness=1.5]\" & abilityKeybinder.PlainText & \"[/outline][/lineThickness]\""
											}
										}
									],
									"sid": 982787989841126
								}
							]
						},
						{
							"eventType": "group",
							"disabled": false,
							"title": "Man abilities",
							"description": "",
							"isActiveOnStart": true,
							"children": [
								{
									"functionName": "basicAttack",
									"functionDescription": "",
									"functionCategory": "abilities",
									"functionReturnType": "none",
									"functionCopyPicked": true,
									"functionIsAsync": false,
									"functionParameters": [],
									"eventType": "function-block",
									"conditions": [],
									"actions": [],
									"sid": 158426868239317,
									"children": [
										{
											"eventType": "variable",
											"name": "PROJECTILE_SPEED",
											"type": "number",
											"initialValue": "650",
											"comment": "The speed of the projectile",
											"isStatic": false,
											"isConstant": true,
											"sid": 156558711699493
										},
										{
											"eventType": "variable",
											"name": "MANIFESTATION_FRAME",
											"type": "number",
											"initialValue": "9",
											"comment": "The (0-based) frame in which the projectile should manifest",
											"isStatic": false,
											"isConstant": true,
											"sid": 121473222003241
										},
										{
											"eventType": "variable",
											"name": "SIZE",
											"type": "number",
											"initialValue": "99",
											"comment": "The size of the projectile",
											"isStatic": false,
											"isConstant": true,
											"sid": 790544221819240
										},
										{
											"eventType": "variable",
											"name": "RANGE",
											"type": "number",
											"initialValue": "150",
											"comment": "",
											"isStatic": false,
											"isConstant": true,
											"sid": 793422426728493
										},
										{
											"eventType": "variable",
											"name": "waitPeriod",
											"type": "number",
											"initialValue": "0",
											"comment": "How long to wait (in seconds) after the start of the animation before generating the projectile",
											"isStatic": true,
											"isConstant": false,
											"sid": 811409691689556
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 278688677374685,
													"parameters": {
														"object": "gear",
														"expression": "gear.type",
														"comparison": 0,
														"value": "\"mainHand\""
													}
												},
												{
													"id": "is-boolean-instance-variable-set",
													"objectClass": "player",
													"sid": 683430194194704,
													"parameters": {
														"instance-variable": "busyCastingAbility"
													},
													"isInverted": true
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "must have a weapon equipped"
												},
												{
													"id": "set-boolean-instvar",
													"objectClass": "player",
													"sid": 268592444140870,
													"parameters": {
														"instance-variable": "busyCastingAbility",
														"value": "true"
													}
												},
												{
													"id": "stop",
													"objectClass": "player",
													"sid": 421576152101335,
													"behaviorType": "MoveTo"
												},
												{
													"callFunction": "updateFacing",
													"sid": 993737162214670,
													"parameters": [
														"enemy.X",
														"enemy.Y"
													]
												},
												{
													"type": "comment",
													"text": "Don't set uidOfClicked to 0 here, because we might have clicked on an enemy"
												},
												{
													"id": "set-enabled",
													"objectClass": "player",
													"sid": 713584135408421,
													"behaviorType": "MoveTo",
													"parameters": {
														"enabled": false
													}
												},
												{
													"id": "set-group-active",
													"objectClass": "System",
													"sid": 958732250103579,
													"parameters": {
														"group-name": "\"movement and interaction\"",
														"state": "deactivated"
													}
												},
												{
													"id": "set-group-active",
													"objectClass": "System",
													"sid": 641368460762310,
													"parameters": {
														"group-name": "\"abilities\"",
														"state": "deactivated"
													}
												},
												{
													"id": "set-group-active",
													"objectClass": "System",
													"sid": 379811782309110,
													"parameters": {
														"group-name": "\"facings\"",
														"state": "deactivated"
													}
												},
												{
													"id": "set-animation",
													"objectClass": "body",
													"sid": 522019572370559,
													"parameters": {
														"animation": "\"downwardSlash_\" & player.degrees",
														"from": "beginning"
													}
												},
												{
													"id": "set-animation-speed",
													"objectClass": "body",
													"sid": 105262697902128,
													"parameters": {
														"speed": "player.actionSpeed"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 510844565494314,
													"parameters": {
														"variable": "waitPeriod",
														"value": "TICKS_PER_SECOND / body.AnimationSpeed *  MANIFESTATION_FRAME / TICKS_PER_SECOND"
													}
												},
												{
													"id": "wait",
													"objectClass": "System",
													"sid": 882465482479987,
													"parameters": {
														"seconds": "waitPeriod"
													}
												}
											],
											"sid": 949182900975683,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 390178444282015,
															"parameters": {
																"first-value": "find(body.AnimationName, \"block\")",
																"comparison": 0,
																"second-value": "-1"
															}
														},
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 984621577754448,
															"parameters": {
																"first-value": "find(body.AnimationName, \"hit\")",
																"comparison": 0,
																"second-value": "-1"
															}
														}
													],
													"actions": [
														{
															"id": "create-object",
															"objectClass": "System",
															"sid": 829712781422488,
															"parameters": {
																"object-to-create": "projectile",
																"layer": "\"mechanics\"",
																"x": "player.X",
																"y": "player.Y",
																"create-hierarchy": false,
																"template-name": "\"\""
															}
														}
													],
													"sid": 377324707522107,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "pick-last-created",
																	"objectClass": "System",
																	"sid": 737881721802579,
																	"parameters": {
																		"object": "projectile"
																	}
																}
															],
															"actions": [
																{
																	"id": "add-child",
																	"objectClass": "player",
																	"sid": 336079578843816,
																	"parameters": {
																		"child": "projectile",
																		"transform-x": false,
																		"transform-y": false,
																		"transform-w": false,
																		"transform-h": false,
																		"transform-a": false,
																		"transform-o": false,
																		"transform-z-elevation": false,
																		"transform-visibility": false,
																		"destroy-with-parent": true
																	}
																},
																{
																	"id": "set-boolean-instvar",
																	"objectClass": "projectile",
																	"sid": 823540080021214,
																	"parameters": {
																		"instance-variable": "isMelee",
																		"value": "true"
																	}
																},
																{
																	"id": "set-boolean-instvar",
																	"objectClass": "projectile",
																	"sid": 509130563600094,
																	"parameters": {
																		"instance-variable": "piercing",
																		"value": "true"
																	}
																},
																{
																	"id": "set-boolean-instvar",
																	"objectClass": "projectile",
																	"sid": 558007381404184,
																	"parameters": {
																		"instance-variable": "enabled",
																		"value": "true"
																	}
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "projectile",
																	"sid": 720573241762007,
																	"parameters": {
																		"instance-variable": "range",
																		"value": "RANGE"
																	}
																},
																{
																	"type": "comment",
																	"text": "Extract the multiplier from the description in the abilities table"
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "projectile",
																	"sid": 559789118489019,
																	"parameters": {
																		"instance-variable": "slashDamage",
																		"value": "player.slashDamage"
																	}
																},
																{
																	"id": "set-width",
																	"objectClass": "projectile",
																	"sid": 435284263769723,
																	"parameters": {
																		"width": "SIZE"
																	}
																},
																{
																	"id": "set-height",
																	"objectClass": "projectile",
																	"sid": 604917826088803,
																	"parameters": {
																		"height": "Self.Width / ISOMETRIC_DIVIDER"
																	}
																},
																{
																	"id": "set-angle-of-motion",
																	"objectClass": "projectile",
																	"sid": 833682932926595,
																	"behaviorType": "Bullet",
																	"parameters": {
																		"angle": "player.MoveTo.MovingAngle"
																	}
																},
																{
																	"id": "set-speed",
																	"objectClass": "projectile",
																	"sid": 369236965623612,
																	"behaviorType": "Bullet",
																	"parameters": {
																		"speed": "Functions.isometrify(PROJECTILE_SPEED, Self.Bullet.AngleOfMotion)"
																	}
																},
																{
																	"id": "wait",
																	"objectClass": "System",
																	"sid": 487195628824758,
																	"parameters": {
																		"seconds": "body.AnimationFrameCount / body.AnimationSpeed - waitPeriod"
																	}
																}
															],
															"sid": 394935553441831,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "compare-instance-variable",
																			"objectClass": "player",
																			"sid": 781625263513465,
																			"parameters": {
																				"instance-variable": "currentHealth",
																				"comparison": 4,
																				"value": "0"
																			}
																		},
																		{
																			"id": "compare-two-values",
																			"objectClass": "System",
																			"sid": 122939174557161,
																			"parameters": {
																				"first-value": "find(body.AnimationName, \"block\")",
																				"comparison": 0,
																				"second-value": "-1"
																			}
																		},
																		{
																			"id": "compare-two-values",
																			"objectClass": "System",
																			"sid": 956372389820870,
																			"parameters": {
																				"first-value": "find(body.AnimationName, \"hit\")",
																				"comparison": 0,
																				"second-value": "-1"
																			}
																		}
																	],
																	"actions": [
																		{
																			"id": "set-enabled",
																			"objectClass": "player",
																			"sid": 512375326021978,
																			"behaviorType": "MoveTo",
																			"parameters": {
																				"enabled": true
																			}
																		},
																		{
																			"id": "set-group-active",
																			"objectClass": "System",
																			"sid": 714641369749673,
																			"parameters": {
																				"group-name": "\"movement and interaction\"",
																				"state": "activated"
																			}
																		},
																		{
																			"id": "set-group-active",
																			"objectClass": "System",
																			"sid": 534174698977239,
																			"parameters": {
																				"group-name": "\"facings\"",
																				"state": "activated"
																			}
																		},
																		{
																			"id": "set-group-active",
																			"objectClass": "System",
																			"sid": 337289797770092,
																			"parameters": {
																				"group-name": "\"abilities\"",
																				"state": "activated"
																			}
																		},
																		{
																			"callFunction": "updateAnimations",
																			"sid": 650550032251601,
																			"parameters": [
																				"\"idle\"",
																				"player.movementSpeed / ANIMATION_DIVISOR",
																				"\"playFromBeginning\""
																			]
																		},
																		{
																			"id": "set-boolean-instvar",
																			"objectClass": "player",
																			"sid": 850712728101052,
																			"parameters": {
																				"instance-variable": "busyCastingAbility",
																				"value": "false"
																			}
																		}
																	],
																	"sid": 426327952259254
																}
															]
														}
													]
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 980609902682346
														}
													],
													"actions": [
														{
															"id": "set-boolean-instvar",
															"objectClass": "player",
															"sid": 563624903062597,
															"parameters": {
																"instance-variable": "busyCastingAbility",
																"value": "false"
															}
														}
													],
													"sid": 110498160475754
												}
											]
										}
									]
								},
								{
									"functionName": "heroicStrike",
									"functionDescription": "",
									"functionCategory": "abilities",
									"functionReturnType": "none",
									"functionCopyPicked": false,
									"functionIsAsync": false,
									"functionParameters": [],
									"eventType": "function-block",
									"conditions": [],
									"actions": [],
									"sid": 839839600918941,
									"children": [
										{
											"eventType": "variable",
											"name": "MANA_COST",
											"type": "number",
											"initialValue": "10",
											"comment": "",
											"isStatic": false,
											"isConstant": true,
											"sid": 417560487113981
										},
										{
											"eventType": "variable",
											"name": "PROJECTILE_SPEED",
											"type": "number",
											"initialValue": "700",
											"comment": "The speed of the projectile",
											"isStatic": false,
											"isConstant": true,
											"sid": 533709240996136
										},
										{
											"eventType": "variable",
											"name": "MANIFESTATION_FRAME",
											"type": "number",
											"initialValue": "4",
											"comment": "The (0-based) frame in which the projectile should manifest",
											"isStatic": false,
											"isConstant": true,
											"sid": 198117948289843
										},
										{
											"eventType": "variable",
											"name": "SIZE",
											"type": "number",
											"initialValue": "126",
											"comment": "The size of the projectile",
											"isStatic": false,
											"isConstant": true,
											"sid": 350014471127298
										},
										{
											"eventType": "variable",
											"name": "RANGE",
											"type": "number",
											"initialValue": "150",
											"comment": "",
											"isStatic": false,
											"isConstant": true,
											"sid": 160173397656657
										},
										{
											"eventType": "variable",
											"name": "waitPeriod",
											"type": "number",
											"initialValue": "0",
											"comment": "How long to wait (in seconds) after the start of the animation before generating the projectile",
											"isStatic": true,
											"isConstant": false,
											"sid": 572448180230308
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 108778444465957,
													"parameters": {
														"object": "gear",
														"expression": "gear.type",
														"comparison": 0,
														"value": "\"mainHand\""
													}
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "player",
													"sid": 153876308713924,
													"parameters": {
														"instance-variable": "currentMana",
														"comparison": 5,
														"value": "MANA_COST"
													}
												},
												{
													"id": "is-boolean-instance-variable-set",
													"objectClass": "player",
													"sid": 972926207054938,
													"parameters": {
														"instance-variable": "busyCastingAbility"
													},
													"isInverted": true
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "must have a weapon equipped and enough mana"
												},
												{
													"id": "set-boolean-instvar",
													"objectClass": "player",
													"sid": 825458347812084,
													"parameters": {
														"instance-variable": "busyCastingAbility",
														"value": "true"
													}
												},
												{
													"id": "subtract-from-instvar",
													"objectClass": "player",
													"sid": 708904478501512,
													"parameters": {
														"instance-variable": "currentMana",
														"value": "MANA_COST"
													}
												},
												{
													"id": "stop",
													"objectClass": "player",
													"sid": 862574879045827,
													"behaviorType": "MoveTo"
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 554829003786200,
													"parameters": {
														"variable": "uidOfClicked",
														"value": "0"
													}
												},
												{
													"callFunction": "updateFacing",
													"sid": 737373599081057,
													"parameters": [
														"mouse.X",
														"mouse.Y"
													]
												},
												{
													"id": "set-enabled",
													"objectClass": "player",
													"sid": 129460372581941,
													"behaviorType": "MoveTo",
													"parameters": {
														"enabled": false
													}
												},
												{
													"id": "set-group-active",
													"objectClass": "System",
													"sid": 836864039443408,
													"parameters": {
														"group-name": "\"movement and interaction\"",
														"state": "deactivated"
													}
												},
												{
													"id": "set-group-active",
													"objectClass": "System",
													"sid": 710736552891004,
													"parameters": {
														"group-name": "\"abilities\"",
														"state": "deactivated"
													}
												},
												{
													"id": "set-group-active",
													"objectClass": "System",
													"sid": 546480801579905,
													"parameters": {
														"group-name": "\"facings\"",
														"state": "deactivated"
													}
												},
												{
													"id": "set-animation",
													"objectClass": "body",
													"sid": 452672347087041,
													"parameters": {
														"animation": "\"upwardSlash_\" & player.degrees",
														"from": "beginning"
													}
												},
												{
													"id": "set-animation-speed",
													"objectClass": "body",
													"sid": 238405076457835,
													"parameters": {
														"speed": "player.actionSpeed"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 134787444557260,
													"parameters": {
														"variable": "waitPeriod",
														"value": "TICKS_PER_SECOND / body.AnimationSpeed *  MANIFESTATION_FRAME / TICKS_PER_SECOND"
													}
												},
												{
													"id": "wait",
													"objectClass": "System",
													"sid": 927289292114547,
													"parameters": {
														"seconds": "waitPeriod"
													}
												}
											],
											"sid": 711031212314139,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 891751039898942,
															"parameters": {
																"first-value": "find(body.AnimationName, \"block\")",
																"comparison": 0,
																"second-value": "-1"
															}
														},
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 848916538980387,
															"parameters": {
																"first-value": "find(body.AnimationName, \"hit\")",
																"comparison": 0,
																"second-value": "-1"
															}
														}
													],
													"actions": [
														{
															"id": "create-object",
															"objectClass": "System",
															"sid": 761497784678296,
															"parameters": {
																"object-to-create": "projectile",
																"layer": "\"mechanics\"",
																"x": "player.X",
																"y": "player.Y",
																"create-hierarchy": false,
																"template-name": "\"\""
															}
														}
													],
													"sid": 463987865802505,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "pick-last-created",
																	"objectClass": "System",
																	"sid": 227725923844003,
																	"parameters": {
																		"object": "projectile"
																	}
																}
															],
															"actions": [
																{
																	"id": "add-child",
																	"objectClass": "player",
																	"sid": 489669451948715,
																	"parameters": {
																		"child": "projectile",
																		"transform-x": false,
																		"transform-y": false,
																		"transform-w": false,
																		"transform-h": false,
																		"transform-a": false,
																		"transform-o": false,
																		"transform-z-elevation": false,
																		"transform-visibility": false,
																		"destroy-with-parent": true
																	}
																},
																{
																	"id": "set-boolean-instvar",
																	"objectClass": "projectile",
																	"sid": 152686214009573,
																	"parameters": {
																		"instance-variable": "isMelee",
																		"value": "true"
																	}
																},
																{
																	"id": "set-boolean-instvar",
																	"objectClass": "projectile",
																	"sid": 389349178458477,
																	"parameters": {
																		"instance-variable": "piercing",
																		"value": "true"
																	}
																},
																{
																	"id": "set-boolean-instvar",
																	"objectClass": "projectile",
																	"sid": 964847651942894,
																	"parameters": {
																		"instance-variable": "enabled",
																		"value": "true"
																	}
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "projectile",
																	"sid": 214752957415208,
																	"parameters": {
																		"instance-variable": "range",
																		"value": "RANGE"
																	}
																},
																{
																	"type": "comment",
																	"text": "Extract the multiplier from the description in the abilities table"
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "projectile",
																	"sid": 174392996248881,
																	"parameters": {
																		"instance-variable": "slashDamage",
																		"value": "player.slashDamage + (player.slashDamage * int(tokenat(tokenat(Functions.arrayLookup(abilitiesArray.ObjectTypeName, \"simpleName\", ability.AnimationName, \"description\"), 1, \"{\"), 0, \"}\")) / PERCENTAGE_DIVIDER)"
																	}
																},
																{
																	"id": "set-width",
																	"objectClass": "projectile",
																	"sid": 266386413045689,
																	"parameters": {
																		"width": "SIZE"
																	}
																},
																{
																	"id": "set-height",
																	"objectClass": "projectile",
																	"sid": 302181917105168,
																	"parameters": {
																		"height": "Self.Width / ISOMETRIC_DIVIDER"
																	}
																},
																{
																	"id": "set-angle-of-motion",
																	"objectClass": "projectile",
																	"sid": 385832113125164,
																	"behaviorType": "Bullet",
																	"parameters": {
																		"angle": "player.MoveTo.MovingAngle"
																	}
																},
																{
																	"id": "set-speed",
																	"objectClass": "projectile",
																	"sid": 593637970753442,
																	"behaviorType": "Bullet",
																	"parameters": {
																		"speed": "Functions.isometrify(PROJECTILE_SPEED, Self.Bullet.AngleOfMotion)"
																	}
																},
																{
																	"id": "wait",
																	"objectClass": "System",
																	"sid": 978801191091309,
																	"parameters": {
																		"seconds": "body.AnimationFrameCount / body.AnimationSpeed - waitPeriod"
																	}
																}
															],
															"sid": 705143088288770,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "compare-instance-variable",
																			"objectClass": "player",
																			"sid": 734886104295358,
																			"parameters": {
																				"instance-variable": "currentHealth",
																				"comparison": 4,
																				"value": "0"
																			}
																		},
																		{
																			"id": "compare-two-values",
																			"objectClass": "System",
																			"sid": 886312055961515,
																			"parameters": {
																				"first-value": "find(body.AnimationName, \"block\")",
																				"comparison": 0,
																				"second-value": "-1"
																			}
																		},
																		{
																			"id": "compare-two-values",
																			"objectClass": "System",
																			"sid": 528722522048136,
																			"parameters": {
																				"first-value": "find(body.AnimationName, \"hit\")",
																				"comparison": 0,
																				"second-value": "-1"
																			}
																		}
																	],
																	"actions": [
																		{
																			"id": "set-enabled",
																			"objectClass": "player",
																			"sid": 846549629876075,
																			"behaviorType": "MoveTo",
																			"parameters": {
																				"enabled": true
																			}
																		},
																		{
																			"id": "set-group-active",
																			"objectClass": "System",
																			"sid": 589837458190491,
																			"parameters": {
																				"group-name": "\"movement and interaction\"",
																				"state": "activated"
																			}
																		},
																		{
																			"id": "set-group-active",
																			"objectClass": "System",
																			"sid": 880786918367777,
																			"parameters": {
																				"group-name": "\"facings\"",
																				"state": "activated"
																			}
																		},
																		{
																			"id": "set-group-active",
																			"objectClass": "System",
																			"sid": 665019712197841,
																			"parameters": {
																				"group-name": "\"abilities\"",
																				"state": "activated"
																			}
																		},
																		{
																			"callFunction": "updateAnimations",
																			"sid": 605119858749567,
																			"parameters": [
																				"\"idle\"",
																				"player.movementSpeed / ANIMATION_DIVISOR",
																				"\"playFromBeginning\""
																			]
																		},
																		{
																			"id": "set-boolean-instvar",
																			"objectClass": "player",
																			"sid": 202861126385566,
																			"parameters": {
																				"instance-variable": "busyCastingAbility",
																				"value": "false"
																			}
																		}
																	],
																	"sid": 542652828917541
																}
															]
														}
													]
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 462826839181658
														}
													],
													"actions": [
														{
															"id": "set-boolean-instvar",
															"objectClass": "player",
															"sid": 379492682735694,
															"parameters": {
																"instance-variable": "busyCastingAbility",
																"value": "false"
															}
														}
													],
													"sid": 377655415586831
												}
											]
										}
									]
								},
								{
									"functionName": "kick",
									"functionDescription": "",
									"functionCategory": "abilities",
									"functionReturnType": "none",
									"functionCopyPicked": false,
									"functionIsAsync": false,
									"functionParameters": [],
									"eventType": "function-block",
									"conditions": [],
									"actions": [],
									"sid": 290580718640533,
									"children": [
										{
											"eventType": "variable",
											"name": "MANA_COST",
											"type": "number",
											"initialValue": "15",
											"comment": "",
											"isStatic": false,
											"isConstant": true,
											"sid": 805583856394294
										},
										{
											"eventType": "variable",
											"name": "PROJECTILE_SPEED",
											"type": "number",
											"initialValue": "750",
											"comment": "The speed of the projectile",
											"isStatic": false,
											"isConstant": true,
											"sid": 942361250198733
										},
										{
											"eventType": "variable",
											"name": "MANIFESTATION_FRAME",
											"type": "number",
											"initialValue": "11",
											"comment": "The (0-based) frame in which the projectile should manifest",
											"isStatic": false,
											"isConstant": true,
											"sid": 391823997414929
										},
										{
											"eventType": "variable",
											"name": "SIZE",
											"type": "number",
											"initialValue": "81",
											"comment": "The size of the projectile",
											"isStatic": false,
											"isConstant": true,
											"sid": 116879530591196
										},
										{
											"eventType": "variable",
											"name": "RANGE",
											"type": "number",
											"initialValue": "140",
											"comment": "",
											"isStatic": false,
											"isConstant": true,
											"sid": 497218368664766
										},
										{
											"eventType": "variable",
											"name": "waitPeriod",
											"type": "number",
											"initialValue": "0",
											"comment": "How long to wait (in seconds) after the start of the animation before generating the projectile",
											"isStatic": true,
											"isConstant": false,
											"sid": 614747833636651
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "player",
													"sid": 597348949560689,
													"parameters": {
														"instance-variable": "currentMana",
														"comparison": 5,
														"value": "MANA_COST"
													}
												},
												{
													"id": "is-boolean-instance-variable-set",
													"objectClass": "player",
													"sid": 486915479202624,
													"parameters": {
														"instance-variable": "busyCastingAbility"
													},
													"isInverted": true
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "must have enough mana"
												},
												{
													"id": "set-boolean-instvar",
													"objectClass": "player",
													"sid": 654561502785642,
													"parameters": {
														"instance-variable": "busyCastingAbility",
														"value": "true"
													}
												},
												{
													"id": "subtract-from-instvar",
													"objectClass": "player",
													"sid": 528358559109335,
													"parameters": {
														"instance-variable": "currentMana",
														"value": "MANA_COST"
													}
												},
												{
													"id": "stop",
													"objectClass": "player",
													"sid": 839605841853783,
													"behaviorType": "MoveTo"
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 750017637587517,
													"parameters": {
														"variable": "uidOfClicked",
														"value": "0"
													}
												},
												{
													"callFunction": "updateFacing",
													"sid": 165179622562217,
													"parameters": [
														"mouse.X",
														"mouse.Y"
													]
												},
												{
													"id": "set-enabled",
													"objectClass": "player",
													"sid": 403439420572667,
													"behaviorType": "MoveTo",
													"parameters": {
														"enabled": false
													}
												},
												{
													"id": "set-group-active",
													"objectClass": "System",
													"sid": 296921487201208,
													"parameters": {
														"group-name": "\"movement and interaction\"",
														"state": "deactivated"
													}
												},
												{
													"id": "set-group-active",
													"objectClass": "System",
													"sid": 485259643737557,
													"parameters": {
														"group-name": "\"abilities\"",
														"state": "deactivated"
													}
												},
												{
													"id": "set-group-active",
													"objectClass": "System",
													"sid": 133725184714588,
													"parameters": {
														"group-name": "\"facings\"",
														"state": "deactivated"
													}
												},
												{
													"id": "set-animation",
													"objectClass": "body",
													"sid": 860271895096737,
													"parameters": {
														"animation": "\"kick_\" & player.degrees",
														"from": "beginning"
													}
												},
												{
													"id": "set-animation-speed",
													"objectClass": "body",
													"sid": 719433091172841,
													"parameters": {
														"speed": "player.actionSpeed"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 818473485472813,
													"parameters": {
														"variable": "waitPeriod",
														"value": "TICKS_PER_SECOND / body.AnimationSpeed *  MANIFESTATION_FRAME / TICKS_PER_SECOND"
													}
												},
												{
													"id": "wait",
													"objectClass": "System",
													"sid": 137666847375384,
													"parameters": {
														"seconds": "waitPeriod"
													}
												},
												{
													"id": "create-object",
													"objectClass": "System",
													"sid": 821691894303339,
													"parameters": {
														"object-to-create": "projectile",
														"layer": "\"mechanics\"",
														"x": "player.X",
														"y": "player.Y",
														"create-hierarchy": false,
														"template-name": "\"\""
													}
												}
											],
											"sid": 342398433737835,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 311495190409771,
															"parameters": {
																"first-value": "find(body.AnimationName, \"block\")",
																"comparison": 0,
																"second-value": "-1"
															}
														},
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 536236850707619,
															"parameters": {
																"first-value": "find(body.AnimationName, \"hit\")",
																"comparison": 0,
																"second-value": "-1"
															}
														}
													],
													"actions": [
														{
															"id": "create-object",
															"objectClass": "System",
															"sid": 288216207449581,
															"parameters": {
																"object-to-create": "projectile",
																"layer": "\"mechanics\"",
																"x": "player.X",
																"y": "player.Y",
																"create-hierarchy": false,
																"template-name": "\"\""
															}
														}
													],
													"sid": 443727182418930,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "pick-last-created",
																	"objectClass": "System",
																	"sid": 108733119191583,
																	"parameters": {
																		"object": "projectile"
																	}
																}
															],
															"actions": [
																{
																	"id": "add-child",
																	"objectClass": "player",
																	"sid": 662534463327716,
																	"parameters": {
																		"child": "projectile",
																		"transform-x": false,
																		"transform-y": false,
																		"transform-w": false,
																		"transform-h": false,
																		"transform-a": false,
																		"transform-o": false,
																		"transform-z-elevation": false,
																		"transform-visibility": false,
																		"destroy-with-parent": true
																	}
																},
																{
																	"id": "set-boolean-instvar",
																	"objectClass": "projectile",
																	"sid": 866678401266402,
																	"parameters": {
																		"instance-variable": "isMelee",
																		"value": "true"
																	}
																},
																{
																	"id": "set-boolean-instvar",
																	"objectClass": "projectile",
																	"sid": 462562445361387,
																	"parameters": {
																		"instance-variable": "piercing",
																		"value": "true"
																	}
																},
																{
																	"id": "set-boolean-instvar",
																	"objectClass": "projectile",
																	"sid": 310892559263199,
																	"parameters": {
																		"instance-variable": "enabled",
																		"value": "true"
																	}
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "projectile",
																	"sid": 603039735227228,
																	"parameters": {
																		"instance-variable": "range",
																		"value": "RANGE"
																	}
																},
																{
																	"type": "comment",
																	"text": "Extract the multiplier from the description in the abilities table"
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "projectile",
																	"sid": 456799936644380,
																	"parameters": {
																		"instance-variable": "smashDamage",
																		"value": "player.smashDamage"
																	}
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "projectile",
																	"sid": 332260829710652,
																	"parameters": {
																		"instance-variable": "knockbackDistance",
																		"value": "100"
																	}
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "projectile",
																	"sid": 686401110382199,
																	"parameters": {
																		"instance-variable": "knockbackSpeed",
																		"value": "500"
																	}
																},
																{
																	"id": "set-width",
																	"objectClass": "projectile",
																	"sid": 201311051585835,
																	"parameters": {
																		"width": "SIZE"
																	}
																},
																{
																	"id": "set-height",
																	"objectClass": "projectile",
																	"sid": 198640981987399,
																	"parameters": {
																		"height": "Self.Width / ISOMETRIC_DIVIDER"
																	}
																},
																{
																	"id": "set-angle-of-motion",
																	"objectClass": "projectile",
																	"sid": 596375785757622,
																	"behaviorType": "Bullet",
																	"parameters": {
																		"angle": "player.MoveTo.MovingAngle"
																	}
																},
																{
																	"id": "set-speed",
																	"objectClass": "projectile",
																	"sid": 843308953579633,
																	"behaviorType": "Bullet",
																	"parameters": {
																		"speed": "Functions.isometrify(PROJECTILE_SPEED, Self.Bullet.AngleOfMotion)"
																	}
																},
																{
																	"id": "wait",
																	"objectClass": "System",
																	"sid": 938758012836775,
																	"parameters": {
																		"seconds": "body.AnimationFrameCount / body.AnimationSpeed - waitPeriod"
																	}
																}
															],
															"sid": 706091598479485,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "compare-instance-variable",
																			"objectClass": "player",
																			"sid": 474034525297726,
																			"parameters": {
																				"instance-variable": "currentHealth",
																				"comparison": 4,
																				"value": "0"
																			}
																		},
																		{
																			"id": "compare-two-values",
																			"objectClass": "System",
																			"sid": 590517178184237,
																			"parameters": {
																				"first-value": "find(body.AnimationName, \"block\")",
																				"comparison": 0,
																				"second-value": "-1"
																			}
																		},
																		{
																			"id": "compare-two-values",
																			"objectClass": "System",
																			"sid": 957196768453497,
																			"parameters": {
																				"first-value": "find(body.AnimationName, \"hit\")",
																				"comparison": 0,
																				"second-value": "-1"
																			}
																		}
																	],
																	"actions": [
																		{
																			"id": "set-enabled",
																			"objectClass": "player",
																			"sid": 574420836429051,
																			"behaviorType": "MoveTo",
																			"parameters": {
																				"enabled": true
																			}
																		},
																		{
																			"id": "set-group-active",
																			"objectClass": "System",
																			"sid": 731771689464359,
																			"parameters": {
																				"group-name": "\"movement and interaction\"",
																				"state": "activated"
																			}
																		},
																		{
																			"id": "set-group-active",
																			"objectClass": "System",
																			"sid": 766002163642362,
																			"parameters": {
																				"group-name": "\"facings\"",
																				"state": "activated"
																			}
																		},
																		{
																			"id": "set-group-active",
																			"objectClass": "System",
																			"sid": 334824975174625,
																			"parameters": {
																				"group-name": "\"abilities\"",
																				"state": "activated"
																			}
																		},
																		{
																			"callFunction": "updateAnimations",
																			"sid": 620348401939089,
																			"parameters": [
																				"\"idle\"",
																				"player.movementSpeed / ANIMATION_DIVISOR",
																				"\"playFromBeginning\""
																			]
																		},
																		{
																			"id": "set-boolean-instvar",
																			"objectClass": "player",
																			"sid": 687922885209015,
																			"parameters": {
																				"instance-variable": "busyCastingAbility",
																				"value": "false"
																			}
																		}
																	],
																	"sid": 610616680550048
																}
															]
														}
													]
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 947115914077457
														}
													],
													"actions": [
														{
															"id": "set-boolean-instvar",
															"objectClass": "player",
															"sid": 337989355345392,
															"parameters": {
																"instance-variable": "busyCastingAbility",
																"value": "false"
															}
														}
													],
													"sid": 237112727427605
												}
											]
										}
									]
								}
							],
							"sid": 893967530718635
						}
					],
					"sid": 600857244900806
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "animations",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 692409938657133,
									"parameters": {
										"value": "player.X <> player.lastX | player.Y <> player.lastY"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "...if they were not where they were last tick, set their animation appropriately. Using the moveTo 'Is moving' condition causes the player to continue the walking animation when grinding into solids."
								},
								{
									"id": "set-instvar-value",
									"objectClass": "player",
									"sid": 208232200302105,
									"parameters": {
										"instance-variable": "lastX",
										"value": "Self.X"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "player",
									"sid": 127638597976387,
									"parameters": {
										"instance-variable": "lastY",
										"value": "Self.Y"
									}
								}
							],
							"sid": 488064512871359,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 259989733408022,
											"parameters": {
												"first-value": "find(body.AnimationName, \"idle\")\n",
												"comparison": 1,
												"second-value": "-1"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "TODO: This won't work if we have an ability we can cancel by moving."
										},
										{
											"type": "comment",
											"text": "if they were idling, start the animation from the beginning"
										},
										{
											"callFunction": "updateAnimations",
											"sid": 578053085308020,
											"parameters": [
												"\"walk\"",
												"player.movementSpeed / ANIMATION_DIVISOR",
												"\"playFromBeginning\""
											]
										}
									],
									"sid": 189926063793734
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 133619502888419
										},
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 319503109138007,
											"parameters": {
												"first-value": "find(body.AnimationName, \"walk\")\n",
												"comparison": 1,
												"second-value": "-1"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if they were already walking, play the animation from the current frame"
										},
										{
											"callFunction": "updateAnimations",
											"sid": 936336099945621,
											"parameters": [
												"\"walk\"",
												"player.movementSpeed / ANIMATION_DIVISOR",
												"\"playFromCurrentFrame\""
											]
										}
									],
									"sid": 903812004404733
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 833216857476881
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 507327242231627,
									"parameters": {
										"instance-variable": "currentHealth",
										"comparison": 4,
										"value": "0"
									}
								},
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 303510606567446,
									"parameters": {
										"first-value": "find(body.AnimationName, \"walk\")",
										"comparison": 1,
										"second-value": "-1"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "If the player isn't moving and not dead, and they were previously walking, make him start idling."
								},
								{
									"callFunction": "updateAnimations",
									"sid": 344445240607023,
									"parameters": [
										"\"idle\"",
										"player.movementSpeed / ANIMATION_DIVISOR",
										"\"playFromBeginning\""
									]
								}
							],
							"sid": 626061452344026
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "gear",
									"sid": 918420809278874,
									"parameters": {
										"animation": "body.AnimationName",
										"from": "current-frame"
									}
								},
								{
									"id": "set-animation-frame",
									"objectClass": "gear",
									"sid": 985026365790824,
									"parameters": {
										"frame-number": "body.AnimationFrame"
									}
								}
							],
							"sid": 568021042849555
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 649110140556211,
									"parameters": {
										"instance-variable": "currentHealth",
										"comparison": 3,
										"value": "0"
									}
								},
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 853324147301031
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "'Destroy with parent' is true for projectiles that are children of the player, so we don't need to destroy them here"
								},
								{
									"id": "destroy",
									"objectClass": "player",
									"sid": 903194414252356
								},
								{
									"type": "comment",
									"text": "It's not true for the body however, so it and the gear can stick around to play the die animation after the player dies."
								},
								{
									"callFunction": "updateAnimations",
									"sid": 977255149789450,
									"parameters": [
										"\"die\"",
										"player.movementSpeed / ANIMATION_DIVISOR",
										"\"playFromBeginning\""
									]
								}
							],
							"sid": 835072886302918
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-animation-frame-changed",
									"objectClass": "body",
									"sid": 409557183449858
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "To completely get rid of the incorrect height and width values, we need to have this run every tick, however, there's no actual different outcome"
								},
								{
									"type": "comment",
									"text": "https://github.com/Scirra/Construct-3-bugs/issues/5895",
									"text-color": [
										0,
										0,
										1,
										1
									],
									"background-color": [
										1,
										1,
										1,
										1
									]
								},
								{
									"id": "set-scale",
									"objectClass": "body",
									"sid": 375932065893818,
									"parameters": {
										"scale": "1"
									}
								},
								{
									"id": "set-scale",
									"objectClass": "gear",
									"sid": 454439231883482,
									"parameters": {
										"scale": "1"
									}
								}
							],
							"sid": 560213321966011
						},
						{
							"functionName": "updateAnimations",
							"functionDescription": "Change the player's animation.",
							"functionCategory": "player",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "animationName",
									"type": "string",
									"initialValue": "",
									"comment": "which animation to play",
									"sid": 308447533896746
								},
								{
									"name": "animationSpeed",
									"type": "number",
									"initialValue": "10",
									"comment": "how fast the animation plays",
									"sid": 938843169588506
								},
								{
									"name": "startPoint",
									"type": "string",
									"initialValue": "playFromBeginning",
									"comment": "",
									"sid": 930634823243599
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"type": "comment",
									"text": "startPoint is a string because it needs to get passed from an ability. Only update the animation if the player isn't current blocking or getting hitstunned."
								}
							],
							"sid": 910128125988487,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 393489959159725,
											"parameters": {
												"variable": "startPoint",
												"comparison": 0,
												"value": "\"playFromBeginning\""
											}
										}
									],
									"actions": [],
									"sid": 139271324774243,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-overlapping-another-object",
													"objectClass": "player",
													"sid": 723462591529865,
													"parameters": {
														"object": "nonCombatArea"
													}
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "body",
													"sid": 843331586165991,
													"parameters": {
														"animation": "animationName & \"Unarmed_\" & player.degrees",
														"from": "beginning"
													}
												}
											],
											"sid": 292599464920827
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 499061105001770
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "body",
													"sid": 946758532313313,
													"parameters": {
														"animation": "animationName & \"_\" & player.degrees",
														"from": "beginning"
													}
												}
											],
											"sid": 709765348373749
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 995489158549756
										}
									],
									"actions": [],
									"sid": 967622134338678,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-overlapping-another-object",
													"objectClass": "player",
													"sid": 623837557229785,
													"parameters": {
														"object": "nonCombatArea"
													}
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "body",
													"sid": 183192181446713,
													"parameters": {
														"animation": "animationName & \"Unarmed_\" & player.degrees",
														"from": "current-frame"
													}
												}
											],
											"sid": 602971606622350
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 629140960496298
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "body",
													"sid": 576241052775671,
													"parameters": {
														"animation": "animationName & \"_\" & player.degrees",
														"from": "current-frame"
													}
												}
											],
											"sid": 663776914210048
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"type": "comment",
											"text": "this has to be done after the animation is set, so it goes in a blank event, instead of repeating it"
										},
										{
											"id": "set-animation-speed",
											"objectClass": "body",
											"sid": 340496637210600,
											"parameters": {
												"speed": "animationSpeed"
											}
										}
									],
									"sid": 958593614177243
								}
							]
						},
						{
							"functionName": "channeledAnimation",
							"functionDescription": "Play an animation where the player is uncontrollable.",
							"functionCategory": "player",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "animationName",
									"type": "string",
									"initialValue": "",
									"comment": "The animation to play.",
									"sid": 234166732811254
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"callFunction": "updateAnimations",
									"sid": 592922038118624,
									"parameters": [
										"animationName",
										"body.OriginalAnimationSpeed",
										"\"playFromBeginning\""
									]
								},
								{
									"id": "set-enabled",
									"objectClass": "player",
									"sid": 771670356722238,
									"behaviorType": "MoveTo",
									"parameters": {
										"enabled": false
									}
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 919458007647707,
									"parameters": {
										"group-name": "\"movement and interaction\"",
										"state": "deactivated"
									}
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 172655499978699,
									"parameters": {
										"group-name": "\"abilities\"",
										"state": "deactivated"
									}
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 769600853195239,
									"parameters": {
										"group-name": "\"facings\"",
										"state": "deactivated"
									}
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 579412279696937,
									"parameters": {
										"seconds": "body.AnimationFrameCount / body.AnimationSpeed"
									}
								}
							],
							"sid": 241724089671820,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "player",
											"sid": 467862910692250,
											"parameters": {
												"instance-variable": "currentHealth",
												"comparison": 4,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"id": "set-enabled",
											"objectClass": "player",
											"sid": 530208565746666,
											"behaviorType": "MoveTo",
											"parameters": {
												"enabled": true
											}
										},
										{
											"id": "set-group-active",
											"objectClass": "System",
											"sid": 506463150459759,
											"parameters": {
												"group-name": "\"movement and interaction\"",
												"state": "activated"
											}
										},
										{
											"id": "set-group-active",
											"objectClass": "System",
											"sid": 488457024164462,
											"parameters": {
												"group-name": "\"facings\"",
												"state": "activated"
											}
										},
										{
											"id": "set-group-active",
											"objectClass": "System",
											"sid": 393557170403171,
											"parameters": {
												"group-name": "\"abilities\"",
												"state": "activated"
											}
										},
										{
											"callFunction": "updateAnimations",
											"sid": 233085607499440,
											"parameters": [
												"\"idle\"",
												"player.movementSpeed / ANIMATION_DIVISOR",
												"\"playFromBeginning\""
											]
										}
									],
									"sid": 484133570002695
								}
							]
						}
					],
					"sid": 121151613548917
				}
			],
			"sid": 254080374675516
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "overlay",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "settings",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-object-clicked",
									"objectClass": "mouse",
									"sid": 746906379460318,
									"parameters": {
										"mouse-button": "left",
										"click-type": "clicked",
										"object-clicked": "shadows"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "TODO: If this checkbox gets spammed, it might cause problems"
								}
							],
							"sid": 244022475371789,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-animation-playing",
											"objectClass": "shadows",
											"sid": 197983694177942,
											"parameters": {
												"animation": "\"checked\""
											}
										},
										{
											"id": "for-each",
											"objectClass": "System",
											"sid": 447832580895870,
											"parameters": {
												"object": "hasShadow"
											}
										}
									],
									"actions": [
										{
											"callFunction": "spawnShadows",
											"sid": 836230612106996
										}
									],
									"sid": 151709082605452
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-animation-playing",
											"objectClass": "shadows",
											"sid": 410173119622418,
											"parameters": {
												"animation": "\"unchecked\""
											}
										}
									],
									"actions": [
										{
											"id": "destroy",
											"objectClass": "shadow",
											"sid": 920179466175367
										},
										{
											"type": "comment",
											"text": "a wait 0 here being the official recommended way to unload images after destroying them, according to the manual"
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 183045845632500,
											"parameters": {
												"seconds": "0"
											}
										},
										{
											"id": "unload-object-images",
											"objectClass": "System",
											"sid": 111126715296548,
											"parameters": {
												"object": "shadow"
											}
										}
									],
									"sid": 606708545399068
								}
							]
						}
					],
					"sid": 594124344109029
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "ability bar",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-click",
									"objectClass": "mouse",
									"sid": 166153498320785,
									"parameters": {
										"mouse-button": "left",
										"click-type": "clicked"
									}
								},
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 787939671581480,
									"parameters": {
										"object": "abilitySlot"
									},
									"isInverted": true
								},
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 521994085679042,
									"parameters": {
										"object": "statue"
									},
									"isInverted": true
								},
								{
									"id": "layer-is-visible",
									"objectClass": "System",
									"sid": 645893643706577,
									"parameters": {
										"layer": "\"abilitySelector\""
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "close the ability selector if we click anywhere that's not an ability or statue"
								},
								{
									"callFunction": "closeLayer",
									"sid": 266146458793314,
									"parameters": [
										"\"abilitySelector\""
									]
								},
								{
									"callFunction": "setCoverHightlight",
									"sid": 631288369787676,
									"parameters": [
										false
									]
								}
							],
							"sid": 520831656298993
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-button-released",
									"objectClass": "mouse",
									"sid": 230212459618653,
									"parameters": {
										"mouse-button": "left"
									}
								},
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 116681259991173,
									"parameters": {
										"object": "ability"
									}
								},
								{
									"id": "is-animation-playing",
									"objectClass": "ability",
									"sid": 163607170891846,
									"parameters": {
										"animation": "\"none\""
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "when we click an ability that's not set to 'none'..."
								},
								{
									"type": "comment",
									"text": "left mouse released instead of 'on click', so when the ability selector is closed after choosing an ability, the click isn't also registered and moves the player"
								}
							],
							"sid": 888951027546163,
							"children": [
								{
									"eventType": "variable",
									"name": "abilityUID",
									"type": "number",
									"initialValue": "0",
									"comment": "the ability's UID, use solely to set the glow effect",
									"isStatic": true,
									"isConstant": false,
									"sid": 726146004487848
								},
								{
									"eventType": "variable",
									"name": "currentAbility",
									"type": "string",
									"initialValue": "",
									"comment": "the ability that's current chosen for the displayed class of abilities",
									"isStatic": true,
									"isConstant": false,
									"sid": 998769302146377
								},
								{
									"eventType": "variable",
									"name": "selectedAbility",
									"type": "string",
									"initialValue": "",
									"comment": "The ability in the ability selector that was selected",
									"isStatic": true,
									"isConstant": false,
									"sid": 451349966261905
								},
								{
									"eventType": "variable",
									"name": "currentCategory",
									"type": "string",
									"initialValue": "",
									"comment": "the class of abilities that's currently being displayed",
									"isStatic": true,
									"isConstant": false,
									"sid": 672748660792463
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-on-layer",
											"objectClass": "ability",
											"sid": 131501295979639,
											"parameters": {
												"layer": "\"abilityBar\""
											}
										},
										{
											"id": "pick-parent",
											"objectClass": "ability",
											"sid": 528251545987983,
											"parameters": {
												"parent": "abilitySlot",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if it's on the ability bar..."
										}
									],
									"sid": 208998898503068,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "layer-is-visible",
													"objectClass": "System",
													"sid": 925518533361833,
													"parameters": {
														"layer": "\"abilitySelector\""
													}
												},
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 996328531262219,
													"parameters": {
														"variable": "currentCategory",
														"comparison": 0,
														"value": "Functions.arrayLookup(abilitiesArray.ObjectTypeName, \"simpleName\", ability.AnimationName, \"category\")"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "if the class of the clicked ability is the one that's already being displayed, just close the ability selector"
												},
												{
													"callFunction": "closeLayer",
													"sid": 851728876144982,
													"parameters": [
														"\"abilitySelector\""
													]
												},
												{
													"callFunction": "setCoverHightlight",
													"sid": 386774398821656,
													"parameters": [
														false
													]
												}
											],
											"sid": 816106086978843
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 804338414293539
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "otherwise, open the ability selector and show the relevant abilities"
												},
												{
													"callFunction": "setCoverHightlight",
													"sid": 177523294220788,
													"parameters": [
														true
													]
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 988164220318512,
													"parameters": {
														"variable": "abilityUID",
														"value": "ability.UID"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 605454855294263,
													"parameters": {
														"variable": "currentAbility",
														"value": "ability.AnimationName"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 331646563762280,
													"parameters": {
														"variable": "currentCategory",
														"value": "Functions.arrayLookup(abilitiesArray.ObjectTypeName, \"simpleName\", ability.AnimationName, \"category\")"
													}
												},
												{
													"callFunction": "openLayer",
													"sid": 671087962683915,
													"parameters": [
														"\"abilitySelector\""
													]
												}
											],
											"sid": 552225060590609,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "for",
															"objectClass": "System",
															"sid": 770594899934171,
															"parameters": {
																"name": "\"\"",
																"start-index": "1",
																"end-index": "abilitiesArray.Height - 1"
															}
														},
														{
															"id": "compare-at-xy",
															"objectClass": "abilitiesArray",
															"sid": 536294436707036,
															"parameters": {
																"x": "Functions.getColumnNumber(abilitiesArray.ObjectTypeName, \"category\")",
																"y": "loopindex",
																"comparison": 0,
																"value": "currentCategory"
															}
														},
														{
															"id": "compare-at-xy",
															"objectClass": "abilitiesArray",
															"sid": 747483695361926,
															"parameters": {
																"x": "Functions.getColumnNumber(abilitiesArray.ObjectTypeName, \"level\")",
																"y": "loopindex",
																"comparison": 3,
																"value": "player.level"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "populate the abilityOptionsArray with abilities that are of the matching class and meet the level requirement"
														},
														{
															"type": "comment",
															"text": "TODO: If the player levels up with the ability selector open, any new abilities won't show up. Is it even possible to level up with the ability selector open? Should we just close the ability selector on level-up?"
														},
														{
															"id": "push",
															"objectClass": "abilityOptionsArray",
															"sid": 257492307908906,
															"parameters": {
																"where": "front",
																"value": "abilitiesArray.At(Functions.getColumnNumber(abilitiesArray.ObjectTypeName, \"simpleName\"), loopindex)",
																"axis": "x"
															}
														}
													],
													"sid": 708255959243154
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-all",
															"objectClass": "System",
															"sid": 982520047288136,
															"parameters": {
																"object": "ability"
															}
														}
													],
													"actions": [],
													"sid": 728722378298061,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "pick-by-comparison",
																	"objectClass": "System",
																	"sid": 926374187397733,
																	"parameters": {
																		"object": "ability",
																		"expression": "ability.LayerName",
																		"comparison": 0,
																		"value": "\"abilitySelector\""
																	}
																},
																{
																	"id": "for-each",
																	"objectClass": "System",
																	"sid": 103986784995558,
																	"parameters": {
																		"object": "ability"
																	}
																}
															],
															"actions": [],
															"sid": 622889163515134,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "is-empty",
																			"objectClass": "abilityOptionsArray",
																			"sid": 218549028970161
																		}
																	],
																	"actions": [
																		{
																			"id": "set-animation",
																			"objectClass": "ability",
																			"sid": 741180166312704,
																			"parameters": {
																				"animation": "\"none\"",
																				"from": "beginning"
																			}
																		}
																	],
																	"sid": 208781154702523
																},
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "else",
																			"objectClass": "System",
																			"sid": 421791918312952
																		}
																	],
																	"actions": [
																		{
																			"id": "set-animation",
																			"objectClass": "ability",
																			"sid": 277887591088732,
																			"parameters": {
																				"animation": "abilityOptionsArray.Back",
																				"from": "beginning"
																			}
																		},
																		{
																			"id": "pop",
																			"objectClass": "abilityOptionsArray",
																			"sid": 771062483134409,
																			"parameters": {
																				"where": "back",
																				"axis": "x"
																			}
																		}
																	],
																	"sid": 704351852125970
																},
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "pick-by-comparison",
																			"objectClass": "System",
																			"sid": 992399196919024,
																			"parameters": {
																				"object": "ability",
																				"expression": "ability.AnimationName",
																				"comparison": 0,
																				"value": "currentAbility"
																			}
																		}
																	],
																	"actions": [
																		{
																			"id": "set-effect-enabled",
																			"objectClass": "ability",
																			"sid": 238085019319847,
																			"parameters": {
																				"mode": "enable",
																				"effect": "\"Grayscale\""
																			}
																		}
																	],
																	"sid": 954936503658220
																},
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "pick-by-comparison",
																			"objectClass": "System",
																			"sid": 148325386910517,
																			"parameters": {
																				"object": "ability",
																				"expression": "ability.AnimationName",
																				"comparison": 1,
																				"value": "currentAbility"
																			}
																		}
																	],
																	"actions": [
																		{
																			"id": "set-effect-enabled",
																			"objectClass": "ability",
																			"sid": 145603175504239,
																			"parameters": {
																				"mode": "disable",
																				"effect": "\"Grayscale\""
																			}
																		}
																	],
																	"sid": 674591081863892
																}
															]
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "pick-by-comparison",
																	"objectClass": "System",
																	"sid": 152656832815296,
																	"parameters": {
																		"object": "ability",
																		"expression": "ability.UID",
																		"comparison": 1,
																		"value": "abilityUID"
																	}
																},
																{
																	"id": "pick-all",
																	"objectClass": "System",
																	"sid": 784947759337350,
																	"parameters": {
																		"object": "abilitySlot"
																	}
																},
																{
																	"id": "pick-parent",
																	"objectClass": "ability",
																	"sid": 323380240398685,
																	"parameters": {
																		"parent": "abilitySlot",
																		"which": "own"
																	}
																}
															],
															"actions": [
																{
																	"callFunction": "setCoverHightlight",
																	"sid": 744253514949944,
																	"parameters": [
																		false
																	]
																}
															],
															"sid": 620014128918085
														}
													]
												}
											]
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 197310871060374
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if we clicked on an ability option..."
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 727347019975754,
											"parameters": {
												"variable": "selectedAbility",
												"value": "ability.AnimationName"
											}
										},
										{
											"callFunction": "setCoverHightlight",
											"sid": 567073269370095,
											"parameters": [
												false
											]
										},
										{
											"callFunction": "closeLayer",
											"sid": 127468865291980,
											"parameters": [
												"\"abilitySelector\""
											]
										}
									],
									"sid": 913381454522330,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-all",
													"objectClass": "System",
													"sid": 855871030350454,
													"parameters": {
														"object": "ability"
													}
												},
												{
													"id": "is-animation-playing",
													"objectClass": "ability",
													"sid": 751269906242521,
													"parameters": {
														"animation": "currentAbility"
													}
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "ability",
													"sid": 741897931232925,
													"parameters": {
														"animation": "selectedAbility",
														"from": "beginning"
													}
												}
											],
											"sid": 923600810680650
										}
									]
								}
							]
						},
						{
							"functionName": "setCoverHightlight",
							"functionDescription": "Turns the highlight of an ability cover on or off",
							"functionCategory": "menus",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "on",
									"type": "boolean",
									"initialValue": "false",
									"comment": "whether to turn the highlight on or off",
									"sid": 629415599733892
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 342338163426331,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 931218441751746,
											"parameters": {
												"variable": "on"
											}
										}
									],
									"actions": [
										{
											"id": "set-effect-enabled",
											"objectClass": "abilitySlot",
											"sid": 654147713762156,
											"parameters": {
												"mode": "enable",
												"effect": "\"Brightness\""
											}
										}
									],
									"sid": 611467681715653
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 294577515846640
										}
									],
									"actions": [
										{
											"id": "set-effect-enabled",
											"objectClass": "abilitySlot",
											"sid": 711173797562710,
											"parameters": {
												"mode": "disable",
												"effect": "\"Brightness\""
											}
										}
									],
									"sid": 902932743069428
								}
							]
						}
					],
					"sid": 600010803561002
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "menus",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "layer-is-visible",
									"objectClass": "System",
									"sid": 482827758455036,
									"parameters": {
										"layer": "\"characterMenu\""
									}
								}
							],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "maxHealth",
									"sid": 796437786557423,
									"parameters": {
										"text": "player.maxHealth"
									}
								},
								{
									"id": "set-text",
									"objectClass": "healthRegen",
									"sid": 891067517392227,
									"parameters": {
										"text": "player.healthRegen & \"/second\""
									}
								},
								{
									"id": "set-text",
									"objectClass": "actionSpeed",
									"sid": 670237157538332,
									"parameters": {
										"text": "player.actionSpeed"
									}
								},
								{
									"id": "set-text",
									"objectClass": "attackRange",
									"sid": 470649090255748,
									"parameters": {
										"text": "player.attackRange"
									}
								},
								{
									"id": "set-text",
									"objectClass": "pickupRange",
									"sid": 433549745548644,
									"parameters": {
										"text": "player.pickupRange"
									}
								},
								{
									"id": "set-text",
									"objectClass": "movementSpeed",
									"sid": 181346014050731,
									"parameters": {
										"text": "player.movementSpeed"
									}
								},
								{
									"id": "set-text",
									"objectClass": "stunThreshold",
									"sid": 999319739569214,
									"parameters": {
										"text": "player.hitstunThreshold & \"%\""
									}
								},
								{
									"id": "set-text",
									"objectClass": "blockChance",
									"sid": 391527888240095,
									"parameters": {
										"text": "player.blockChance & \"%\""
									}
								},
								{
									"id": "set-text",
									"objectClass": "maxMana",
									"sid": 382263015663459,
									"parameters": {
										"text": "player.maxMana"
									}
								},
								{
									"id": "set-text",
									"objectClass": "manaRegen",
									"sid": 773702094055869,
									"parameters": {
										"text": "player.manaRegen & \"/second\""
									}
								},
								{
									"id": "set-text",
									"objectClass": "physicalResistance",
									"sid": 748330157098833,
									"parameters": {
										"text": "player.physicalResistance  & \"%\""
									}
								},
								{
									"id": "set-text",
									"objectClass": "coldResistance",
									"sid": 238460396253314,
									"parameters": {
										"text": "player.coldResistance  & \"%\""
									}
								},
								{
									"id": "set-text",
									"objectClass": "fireResistance",
									"sid": 127099995750770,
									"parameters": {
										"text": "player.fireResistance & \"%\""
									}
								},
								{
									"id": "set-text",
									"objectClass": "lightningResistance",
									"sid": 875807040171870,
									"parameters": {
										"text": "player.lightningResistance & \"%\""
									}
								},
								{
									"id": "set-text",
									"objectClass": "arcaneResistance",
									"sid": 885663782193657,
									"parameters": {
										"text": "player.arcaneResistance & \"%\""
									}
								},
								{
									"id": "set-text",
									"objectClass": "corruptResistance",
									"sid": 228165600975839,
									"parameters": {
										"text": "player.corruptResistance & \"%\""
									}
								},
								{
									"id": "set-text",
									"objectClass": "slashDamage",
									"sid": 416334094982596,
									"parameters": {
										"text": "player.slashDamage"
									}
								},
								{
									"id": "set-text",
									"objectClass": "smashDamage",
									"sid": 167849782919164,
									"parameters": {
										"text": "player.smashDamage"
									}
								},
								{
									"id": "set-text",
									"objectClass": "stabDamage",
									"sid": 510369319232670,
									"parameters": {
										"text": "player.stabDamage"
									}
								},
								{
									"id": "set-text",
									"objectClass": "coldDamage",
									"sid": 455186547121666,
									"parameters": {
										"text": "player.coldDamage"
									}
								},
								{
									"id": "set-text",
									"objectClass": "fireDamage",
									"sid": 519317805663518,
									"parameters": {
										"text": "player.fireDamage"
									}
								},
								{
									"id": "set-text",
									"objectClass": "lightningDamage",
									"sid": 572268967804158,
									"parameters": {
										"text": "player.lightningDamage"
									}
								},
								{
									"id": "set-text",
									"objectClass": "arcaneDamage",
									"sid": 237068647164323,
									"parameters": {
										"text": "player.arcaneDamage"
									}
								},
								{
									"id": "set-text",
									"objectClass": "holyDamage",
									"sid": 771136631524764,
									"parameters": {
										"text": "player.holyDamage"
									}
								}
							],
							"sid": 320596497522521
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "layer-is-visible",
									"objectClass": "System",
									"sid": 344324233789704,
									"parameters": {
										"layer": "\"settingsMenu\""
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "you can only open game menus when the game isn't paused"
								}
							],
							"sid": 589869390653306,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-key-pressed",
											"objectClass": "keyboard",
											"sid": 136702131059482,
											"parameters": {
												"key": 67
											}
										}
									],
									"actions": [
										{
											"callFunction": "ManageMenuWithKey",
											"sid": 734090742914611,
											"parameters": [
												"\"equippedMenu\""
											]
										}
									],
									"sid": 178878258421278
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-key-pressed",
											"objectClass": "keyboard",
											"sid": 589371201187572,
											"parameters": {
												"key": 80
											}
										}
									],
									"actions": [
										{
											"callFunction": "ManageMenuWithKey",
											"sid": 460215475667850,
											"parameters": [
												"\"characterMenu\""
											]
										}
									],
									"sid": 380635994569706
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-key-pressed",
											"objectClass": "keyboard",
											"sid": 400102098344263,
											"parameters": {
												"key": 73
											}
										}
									],
									"actions": [
										{
											"callFunction": "ManageMenuWithKey",
											"sid": 830898005880020,
											"parameters": [
												"\"inventoryMenu\""
											]
										}
									],
									"sid": 220547132814557
								},
								{
									"functionName": "ManageMenuWithKey",
									"functionDescription": "Open or close a menu with a key.",
									"functionCategory": "menus",
									"functionReturnType": "none",
									"functionCopyPicked": false,
									"functionIsAsync": false,
									"functionParameters": [
										{
											"name": "menu",
											"type": "string",
											"initialValue": "",
											"comment": "The name of the menu to manage.",
											"sid": 569434202636859
										}
									],
									"eventType": "function-block",
									"conditions": [],
									"actions": [],
									"sid": 225147883294747,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "layer-is-visible",
													"objectClass": "System",
													"sid": 820066369499391,
													"parameters": {
														"layer": "menu"
													}
												}
											],
											"actions": [
												{
													"callFunction": "closeLayer",
													"sid": 891183827140848,
													"parameters": [
														"menu"
													]
												}
											],
											"sid": 921377846773585
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 273346581959658
												}
											],
											"actions": [
												{
													"callFunction": "openLayer",
													"sid": 139365913309534,
													"parameters": [
														"menu"
													]
												}
											],
											"sid": 950490241656385
										}
									]
								}
							]
						},
						{
							"functionName": "closeLayer",
							"functionDescription": "Close the specified layer",
							"functionCategory": "menus",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "menuName",
									"type": "string",
									"initialValue": "",
									"comment": "The name of the layer to close",
									"sid": 231291736061001
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 882411785524150,
									"parameters": {
										"layer": "menuName",
										"interactive": false
									}
								},
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 170936119734949,
									"parameters": {
										"layer": "menuName",
										"visibility": "invisible"
									}
								}
							],
							"sid": 475860601676582
						},
						{
							"functionName": "openLayer",
							"functionDescription": "Open the specified layer",
							"functionCategory": "menus",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "menuName",
									"type": "string",
									"initialValue": "",
									"comment": "The name of the layer to open",
									"sid": 228302164093831
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 561058418895223,
									"parameters": {
										"layer": "menuName",
										"interactive": true
									}
								},
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 667878201713297,
									"parameters": {
										"layer": "menuName",
										"visibility": "visible"
									}
								}
							],
							"sid": 667271432738870
						}
					],
					"sid": 121445526787026
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "tooltip",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 981186403162279,
									"parameters": {
										"object": "item"
									}
								},
								{
									"id": "is-dragging",
									"objectClass": "item",
									"sid": 661446268155956,
									"behaviorType": "DragDrop",
									"isInverted": true
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "TODO: Make sure this works with rings"
								},
								{
									"callFunction": "updateTooltip",
									"sid": 492511576570162,
									"parameters": [
										false,
										"item.fullName",
										"item.classRestrictions",
										"item.level",
										"item.mods",
										"item.lore"
									]
								}
							],
							"sid": 790194075805752,
							"children": [
								{
									"eventType": "variable",
									"name": "typeForComparison",
									"type": "string",
									"initialValue": "",
									"comment": "The type of the gear that we want to compare",
									"isStatic": true,
									"isConstant": false,
									"sid": 601592912280583
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-on-layer",
											"objectClass": "item",
											"sid": 144692810035873,
											"parameters": {
												"layer": "\"inventoryMenu\""
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "if the item is in the inventory, compare to the relevant equipped item, if one exists"
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 900795861844406,
											"parameters": {
												"variable": "typeForComparison",
												"value": "item.type"
											}
										}
									],
									"sid": 605206569134355,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-all",
													"objectClass": "System",
													"sid": 501700459756974,
													"parameters": {
														"object": "item"
													}
												},
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 700003521201403,
													"parameters": {
														"object": "item",
														"expression": "item.LayerName",
														"comparison": 0,
														"value": "\"equippedMenu\""
													}
												},
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 568491989334633,
													"parameters": {
														"object": "item",
														"expression": "item.type",
														"comparison": 0,
														"value": "typeForComparison"
													}
												}
											],
											"actions": [
												{
													"callFunction": "updateComparisonTooltip",
													"sid": 987586995886080,
													"parameters": [
														"item.fullName",
														"item.classRestrictions",
														"item.level",
														"item.mods",
														"item.lore"
													]
												}
											],
											"sid": 919484608171964
										}
									]
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 581155306246120
								},
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 792740501012082,
									"parameters": {
										"object": "loot"
									}
								},
								{
									"id": "pick-topbottom",
									"objectClass": "loot",
									"sid": 313560641429212,
									"parameters": {
										"which": "top"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "the \"else\" is for if we drag and hold an item over a loot"
								},
								{
									"callFunction": "updateTooltip",
									"sid": 761579158674167,
									"parameters": [
										false,
										"loot.fullName",
										"loot.classRestrictions",
										"loot.level",
										"loot.mods",
										"loot.lore"
									]
								}
							],
							"sid": 147156728149685
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 589066293736765
								},
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 508854908562343,
									"parameters": {
										"object": "ability"
									}
								},
								{
									"id": "is-animation-playing",
									"objectClass": "ability",
									"sid": 741682250451677,
									"parameters": {
										"animation": "\"none\""
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"callFunction": "updateTooltip",
									"sid": 783253863576001,
									"parameters": [
										true,
										"Functions.arrayLookup(abilitiesArray.ObjectTypeName, \"simpleName\", ability.AnimationName, \"fullName\")",
										"Functions.arrayLookup(abilitiesArray.ObjectTypeName, \"simpleName\", ability.AnimationName, \"class\")",
										"int(Functions.arrayLookup(abilitiesArray.ObjectTypeName, \"simpleName\", ability.AnimationName, \"level\"))",
										"Functions.arrayLookup(abilitiesArray.ObjectTypeName, \"simpleName\", ability.AnimationName, \"description\")",
										"\"\""
									]
								}
							],
							"sid": 363981334138353
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 321286857234222
								},
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 796967080551416
								}
							],
							"actions": [
								{
									"id": "set-opacity",
									"objectClass": "tooltip",
									"sid": 798114110205421,
									"parameters": {
										"opacity": "0"
									}
								},
								{
									"id": "set-opacity",
									"objectClass": "comparisonTooltip",
									"sid": 735608559975432,
									"parameters": {
										"opacity": "0"
									}
								}
							],
							"sid": 736478380255083
						},
						{
							"functionName": "updateTooltip",
							"functionDescription": "update and show the tooltip with the specified information",
							"functionCategory": "menus",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "isAbility",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"sid": 644466920870083
								},
								{
									"name": "name",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 655975269993235
								},
								{
									"name": "class",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 945794792643289
								},
								{
									"name": "level",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"sid": 445357807781583
								},
								{
									"name": "text",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 893908292176095
								},
								{
									"name": "lore",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 824750967220550
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "tooltipName",
									"sid": 534517625800845,
									"parameters": {
										"text": "name"
									}
								},
								{
									"id": "set-text",
									"objectClass": "tooltipClass",
									"sid": 522948856064234,
									"parameters": {
										"text": "class"
									}
								},
								{
									"id": "set-text",
									"objectClass": "tooltipLevel",
									"sid": 645922994485869,
									"parameters": {
										"text": "\"Level \" & level"
									}
								},
								{
									"id": "set-text",
									"objectClass": "tooltipLore",
									"sid": 752447281676204,
									"parameters": {
										"text": "lore"
									}
								}
							],
							"sid": 759325424482027,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 649898746054398,
											"parameters": {
												"variable": "isAbility"
											}
										}
									],
									"actions": [
										{
											"id": "set-text",
											"objectClass": "tooltipDescription",
											"sid": 169696152975065,
											"parameters": {
												"text": "text"
											}
										},
										{
											"id": "set-font-color",
											"objectClass": "tooltipClass",
											"sid": 508058487582192,
											"parameters": {
												"color": "rgb(235, 223, 164)"
											}
										},
										{
											"id": "set-font-color",
											"objectClass": "tooltipLevel",
											"sid": 562615732621313,
											"parameters": {
												"color": "rgb(235, 223, 164)"
											}
										}
									],
									"sid": 763060192049106,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "for",
													"objectClass": "System",
													"sid": 776102274245743,
													"parameters": {
														"name": "\"\"",
														"start-index": "1",
														"end-index": "tokencount(text, \"{\") - 1"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "Start at 1, to always skip the first token. Subtract 1, to make it 0-based. For each set of curly brackets, multiply the contents of that set by the player level."
												},
												{
													"id": "set-text",
													"objectClass": "tooltipDescription",
													"sid": 932648006707572,
													"parameters": {
														"text": "RegexReplace(Self.Text, \"{([^}]+)}\", \"\", str(float(tokenat(tokenat(text, loopindex, \"{\"), 0, \"}\")) * player.level))"
													}
												}
											],
											"sid": 656560243045374
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 763942990940543
										}
									],
									"actions": [
										{
											"id": "set-text",
											"objectClass": "tooltipDescription",
											"sid": 450876267436261,
											"parameters": {
												"text": "\"\""
											}
										}
									],
									"sid": 646781768384696,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "for",
													"objectClass": "System",
													"sid": 401957080157648,
													"parameters": {
														"name": "\"\"",
														"start-index": "0",
														"end-index": "tokencount(text, \";\") - 2"
													}
												}
											],
											"actions": [
												{
													"id": "append-text",
													"objectClass": "tooltipDescription",
													"sid": 406451035312540,
													"parameters": {
														"text": "RegexReplace(tokenat(tokenat(text, loopindex, \";\"), 1, \":\"), \"\\{|}\", \"g\", \"\") & newline "
													}
												}
											],
											"sid": 630356183524025
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 734959368484984,
													"parameters": {
														"value": "find(class, body.ObjectTypeName) <> -1 | findCase(class, \"All Classes\") <> - 1"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "set the color of the level and class restrictions text box depending if the player can use them. (evaluate with or operator wasn't working)"
												},
												{
													"id": "set-font-color",
													"objectClass": "tooltipClass",
													"sid": 690009318545707,
													"parameters": {
														"color": "rgbEx(0, 100, 0)"
													}
												}
											],
											"sid": 765991964130597,
											"isOrBlock": true
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 813739954778648
												}
											],
											"actions": [
												{
													"id": "set-font-color",
													"objectClass": "tooltipClass",
													"sid": 887313244913320,
													"parameters": {
														"color": "rgbEx(100, 0, 0)"
													}
												}
											],
											"sid": 699456439858615
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 696338830206071,
													"parameters": {
														"first-value": "player.level",
														"comparison": 5,
														"second-value": "level"
													}
												}
											],
											"actions": [
												{
													"id": "set-font-color",
													"objectClass": "tooltipLevel",
													"sid": 309880282157325,
													"parameters": {
														"color": "rgbEx(0, 100, 0)"
													}
												}
											],
											"sid": 794048442218917
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 771110532435994
												}
											],
											"actions": [
												{
													"id": "set-font-color",
													"objectClass": "tooltipLevel",
													"sid": 502447536210441,
													"parameters": {
														"color": "rgbEx(100, 0, 0)"
													}
												}
											],
											"sid": 196249808030852
										}
									]
								},
								{
									"eventType": "comment",
									"text": "tooltipLore is along the bottom, so it's OK where it's at. The bottom of tooltipDescription has been aligned with the top of tooltipLore, in the editor."
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"type": "comment",
											"text": "Align everything above tooltipDescription, cascading upwards based on position. Subtract values, because we want to go up the Y, not down."
										},
										{
											"id": "set-y",
											"objectClass": "tooltipLevel",
											"sid": 985401344682367,
											"parameters": {
												"y": "tooltipDescription.BBoxBottom - tooltipDescription.TextHeight - 15"
											}
										},
										{
											"id": "set-y",
											"objectClass": "tooltipClass",
											"sid": 996569943533462,
											"parameters": {
												"y": "tooltipLevel.BBoxTop"
											}
										},
										{
											"id": "set-y",
											"objectClass": "tooltipName",
											"sid": 436680755485236,
											"parameters": {
												"y": "tooltipClass.BBoxTop"
											}
										},
										{
											"type": "comment",
											"text": "Set the tooltip's height based on the distance between the bottom of the tooltip and the bottom of the tooltipName, plus the tooltipName's textHeight, plus some padding."
										},
										{
											"id": "set-height",
											"objectClass": "tooltip",
											"sid": 932319951334630,
											"parameters": {
												"height": "Self.Y - tooltipName.Y + tooltipName.TextHeight + 20"
											}
										},
										{
											"type": "comment",
											"text": "If tooltip wasn't anchored, I think just setting the height would be enough. Since it is, we need to set it's Y every time we show it."
										},
										{
											"id": "set-y",
											"objectClass": "tooltip",
											"sid": 535940485689065,
											"parameters": {
												"y": "ViewportBottom(\"overlay\")"
											}
										}
									],
									"sid": 273454201901542
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-highest-lowest-value",
											"objectClass": "System",
											"sid": 346059891579239,
											"parameters": {
												"object": "tooltipText",
												"which": "highest",
												"expression": "tooltipText.TextWidth"
											}
										}
									],
									"actions": [
										{
											"id": "set-width",
											"objectClass": "tooltip",
											"sid": 712796239397574,
											"parameters": {
												"width": "tooltipText.TextWidth + 50"
											}
										}
									],
									"sid": 330945650350467
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"type": "comment",
											"text": "wait for the text to render. Using layer opacity or visibility will cause a stutter when changing text values"
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 694290287195429,
											"parameters": {
												"seconds": "0"
											}
										},
										{
											"id": "set-opacity",
											"objectClass": "tooltip",
											"sid": 306451052549903,
											"parameters": {
												"opacity": "100"
											}
										}
									],
									"sid": 662762068157903
								}
							]
						},
						{
							"functionName": "updateComparisonTooltip",
							"functionDescription": "update and show the comparison tooltip with the specified information",
							"functionCategory": "menus",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "name",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 910590846581926
								},
								{
									"name": "class",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 591887021608529
								},
								{
									"name": "level",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"sid": 301944540294416
								},
								{
									"name": "text",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 893566839981270
								},
								{
									"name": "lore",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 711926424267286
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"type": "comment",
									"text": "we can't compare abilities, so no boolean parameter for that"
								},
								{
									"id": "set-text",
									"objectClass": "comparisonTooltipName",
									"sid": 824814775616819,
									"parameters": {
										"text": "name"
									}
								},
								{
									"id": "set-text",
									"objectClass": "comparisonTooltipClass",
									"sid": 543527112959690,
									"parameters": {
										"text": "class"
									}
								},
								{
									"id": "set-text",
									"objectClass": "comparisonTooltipLevel",
									"sid": 824938158454118,
									"parameters": {
										"text": "\"Level \" & level"
									}
								},
								{
									"id": "set-text",
									"objectClass": "comparisonTooltipLore",
									"sid": 575354792888595,
									"parameters": {
										"text": "lore"
									}
								},
								{
									"id": "set-text",
									"objectClass": "comparisonTooltipDescription",
									"sid": 399001034140106,
									"parameters": {
										"text": "\"\""
									}
								}
							],
							"sid": 943885777192739,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 829112719816767,
											"parameters": {
												"name": "\"\"",
												"start-index": "0",
												"end-index": "tokencount(text, \";\") - 2"
											}
										}
									],
									"actions": [
										{
											"id": "append-text",
											"objectClass": "comparisonTooltipDescription",
											"sid": 265087721775888,
											"parameters": {
												"text": "RegexReplace(tokenat(tokenat(text, loopindex, \";\"), 1, \":\"), \"\\{|}\", \"g\", \"\") & newline "
											}
										}
									],
									"sid": 166074427221325
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 134440797018304,
											"parameters": {
												"value": "find(class, body.ObjectTypeName) <> -1 | findCase(class, \"All Classes\") <> - 1"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "set the color of the level and class restrictions text box depending if the player can use them. (evaluate with or operator wasn't working)"
										},
										{
											"id": "set-font-color",
											"objectClass": "comparisonTooltipClass",
											"sid": 983222596540263,
											"parameters": {
												"color": "rgbEx(0, 100, 0)"
											}
										}
									],
									"sid": 928300519864730,
									"isOrBlock": true
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 464183020747268
										}
									],
									"actions": [
										{
											"id": "set-font-color",
											"objectClass": "comparisonTooltipClass",
											"sid": 673913629937480,
											"parameters": {
												"color": "rgbEx(100, 0, 0)"
											}
										}
									],
									"sid": 570480678051004
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 792823110178621,
											"parameters": {
												"first-value": "player.level",
												"comparison": 5,
												"second-value": "level"
											}
										}
									],
									"actions": [
										{
											"id": "set-font-color",
											"objectClass": "comparisonTooltipLevel",
											"sid": 570492528701475,
											"parameters": {
												"color": "rgbEx(0, 100, 0)"
											}
										}
									],
									"sid": 103253862958061
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 246626424806030
										}
									],
									"actions": [
										{
											"id": "set-font-color",
											"objectClass": "comparisonTooltipLevel",
											"sid": 966203662113193,
											"parameters": {
												"color": "rgbEx(100, 0, 0)"
											}
										}
									],
									"sid": 452964067971167
								},
								{
									"eventType": "comment",
									"text": "see comments in the related events for the normal tooltip"
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-y",
											"objectClass": "comparisonTooltip",
											"sid": 671311727852783,
											"parameters": {
												"y": "tooltip.BBoxTop"
											}
										},
										{
											"id": "set-y",
											"objectClass": "comparisonTooltipLevel",
											"sid": 728337224561583,
											"parameters": {
												"y": "comparisonTooltipDescription.BBoxBottom - comparisonTooltipDescription.TextHeight - 15"
											}
										},
										{
											"id": "set-y",
											"objectClass": "comparisonTooltipClass",
											"sid": 121561601808493,
											"parameters": {
												"y": "comparisonTooltipLevel.BBoxTop"
											}
										},
										{
											"id": "set-y",
											"objectClass": "comparisonTooltipName",
											"sid": 886399482367159,
											"parameters": {
												"y": "comparisonTooltipClass.BBoxTop"
											}
										},
										{
											"id": "set-height",
											"objectClass": "comparisonTooltip",
											"sid": 401237268836532,
											"parameters": {
												"height": "Self.Y - comparisonTooltipName.Y + comparisonTooltipName.TextHeight + 20"
											}
										}
									],
									"sid": 233887033264269
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-highest-lowest-value",
											"objectClass": "System",
											"sid": 637439964578507,
											"parameters": {
												"object": "comparisonTooltipText",
												"which": "highest",
												"expression": "comparisonTooltipText.TextWidth"
											}
										}
									],
									"actions": [
										{
											"id": "set-width",
											"objectClass": "comparisonTooltip",
											"sid": 115456399313237,
											"parameters": {
												"width": "comparisonTooltipText.TextWidth + 50"
											}
										}
									],
									"sid": 758644597798527
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"type": "comment",
											"text": "wait for the text to render. Using layer opacity or visibility will cause a stutter when changing text values"
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 958235739280331,
											"parameters": {
												"seconds": "0"
											}
										},
										{
											"id": "set-opacity",
											"objectClass": "comparisonTooltip",
											"sid": 665808019213538,
											"parameters": {
												"opacity": "100"
											}
										}
									],
									"sid": 345794445703827
								}
							]
						}
					],
					"sid": 534862555037467
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "enemy info",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"functionName": "updateEnemyInfo",
							"functionDescription": "Update an enemy's name, and clear the attributes.",
							"functionCategory": "enemies",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "enemyName",
									"sid": 141033310620679,
									"parameters": {
										"text": "enemy.fullName"
									}
								},
								{
									"id": "set-text",
									"objectClass": "enemyAttributes",
									"sid": 409317286234059,
									"parameters": {
										"text": "\"\""
									}
								}
							],
							"sid": 207514323582349,
							"children": [
								{
									"eventType": "variable",
									"name": "attributes",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 868891487243485
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 282617316485548,
											"parameters": {
												"variable": "attributes",
												"value": "Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", enemy.simpleName, \"attributes\")"
											}
										}
									],
									"sid": 840458797442361
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 317603452927616,
											"parameters": {
												"name": "\"\"",
												"start-index": "0",
												"end-index": "tokencount(attributes, \",\")"
											}
										}
									],
									"actions": [
										{
											"id": "append-text",
											"objectClass": "enemyAttributes",
											"sid": 350219713546243,
											"parameters": {
												"text": "tokenat(attributes, loopindex, \",\") & newline"
											}
										}
									],
									"sid": 613390831560091
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 875991590626014,
											"parameters": {
												"seconds": "0"
											}
										},
										{
											"id": "set-opacity",
											"objectClass": "enemyHealthFrame",
											"sid": 725478292957384,
											"parameters": {
												"opacity": "100"
											}
										}
									],
									"sid": 984462441645642
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "cursor-is-over-object",
									"objectClass": "mouse",
									"sid": 560016983693502,
									"parameters": {
										"object": "enemyBody"
									}
								},
								{
									"id": "pick-topbottom",
									"objectClass": "enemyBody",
									"sid": 941475082877777,
									"parameters": {
										"which": "top"
									}
								},
								{
									"id": "pick-parent",
									"objectClass": "enemyBody",
									"sid": 795137331020642,
									"parameters": {
										"parent": "enemy",
										"which": "own"
									}
								}
							],
							"actions": [],
							"sid": 107491999194856,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "trigger-once-while-true",
											"objectClass": "System",
											"sid": 960441615476776
										}
									],
									"actions": [
										{
											"callFunction": "updateEnemyInfo",
											"sid": 425571750613563
										}
									],
									"sid": 639451042301086
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-text",
											"objectClass": "enemyName",
											"sid": 434210227725965,
											"parameters": {
												"text-to-compare": "enemy.fullName",
												"case-sensitivity": "ignore-case"
											},
											"isInverted": true
										},
										{
											"id": "trigger-once-while-true",
											"objectClass": "System",
											"sid": 957637580777324
										}
									],
									"actions": [
										{
											"callFunction": "updateEnemyInfo",
											"sid": 381983047162617
										}
									],
									"sid": 866235878046209
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 154584809601562,
											"parameters": {
												"first-value": "enemyHealthBar.ImageScaleX",
												"comparison": 1,
												"second-value": "enemy.currentHealth / enemy.maxHealth * 100"
											}
										},
										{
											"id": "trigger-once-while-true",
											"objectClass": "System",
											"sid": 765997918956657
										}
									],
									"actions": [
										{
											"id": "set-image-scale-x",
											"objectClass": "enemyHealthBar",
											"sid": 427298398704366,
											"parameters": {
												"scale-x": "enemy.currentHealth / enemy.maxHealth * 100"
											}
										}
									],
									"sid": 782496995465253
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 879642486780677
								},
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 479992439038144
								}
							],
							"actions": [
								{
									"id": "set-opacity",
									"objectClass": "enemyHealthFrame",
									"sid": 977522645063873,
									"parameters": {
										"opacity": "0"
									}
								}
							],
							"sid": 820060221223573
						}
					],
					"sid": 407220405598445
				}
			],
			"sid": 491413826418283
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "enemies",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "behaviors",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"functionName": "MoveEnemyInDirection",
							"functionDescription": "Move an enemy a certain direction in a certain angle. Already factors in isometry.",
							"functionCategory": "enemies",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "theAngle",
									"type": "number",
									"initialValue": "0",
									"comment": "The angle along which the enemy should move. Already factors in isometry.",
									"sid": 635433825358544
								},
								{
									"name": "theDistance",
									"type": "number",
									"initialValue": "0",
									"comment": "The distance the enemy will travel",
									"sid": 811565187927295
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 598975375465378,
									"parameters": {
										"variable": "theAngle",
										"value": "enemy.MoveTo.MovingAngle - theAngle"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 758273438453279,
									"parameters": {
										"variable": "theDistance",
										"value": "Functions.isometrify(theDistance, theAngle)"
									}
								},
								{
									"id": "move-to-position",
									"objectClass": "enemy",
									"sid": 586175186732044,
									"behaviorType": "MoveTo",
									"parameters": {
										"x": "Self.X + cos(theAngle) * theDistance",
										"y": "Self.Y + sin(theAngle) * theDistance",
										"mode": "direct"
									}
								}
							],
							"sid": 483896032909382
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-on-screen",
									"objectClass": "enemyBody",
									"sid": 258864942012861
								},
								{
									"id": "pick-parent",
									"objectClass": "enemyBody",
									"sid": 117834460067667,
									"parameters": {
										"parent": "enemy",
										"which": "own"
									}
								}
							],
							"actions": [
								{
									"id": "set-max-speed",
									"objectClass": "enemy",
									"sid": 643289427795543,
									"behaviorType": "MoveTo",
									"parameters": {
										"max-speed": "Functions.isometrify(Self.movementSpeed, Self.MoveTo.MovingAngle)"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "enemy",
									"sid": 277643133966543,
									"parameters": {
										"instance-variable": "currentHealth",
										"value": "clamp(Self.currentHealth, 0,Self.maxHealth)"
									}
								}
							],
							"sid": 786563222722520,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-arrived",
											"objectClass": "enemy",
											"sid": 885313538967121,
											"behaviorType": "MoveTo"
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "What happens when the enemy successfully arrives at their destination"
										}
									],
									"sid": 539686458967405,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "enemy",
													"sid": 813637575177879,
													"parameters": {
														"instance-variable": "rerouting",
														"comparison": 0,
														"value": "\"backingUp\""
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "If they successfully backed up, now the enemy will go left"
												},
												{
													"id": "set-instvar-value",
													"objectClass": "enemy",
													"sid": 949129561323151,
													"parameters": {
														"instance-variable": "rerouting",
														"value": "\"goingLeft\""
													}
												},
												{
													"callFunction": "MoveEnemyInDirection",
													"sid": 331024069839006,
													"parameters": [
														"QUARTER_CIRCLE",
														"enemy.Width"
													]
												}
											],
											"sid": 219556820298042
										},
										{
											"eventType": "comment",
											"text": "Can't combine these two blocks because of how 'else' and OR blocks work."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 529751045864272
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "enemy",
													"sid": 122542109248194,
													"parameters": {
														"instance-variable": "rerouting",
														"comparison": 0,
														"value": "\"goingLeft\""
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "If they successfully went left, they're done; they can resume normal behavior"
												},
												{
													"id": "set-instvar-value",
													"objectClass": "enemy",
													"sid": 141230194582417,
													"parameters": {
														"instance-variable": "rerouting",
														"value": "\"no\""
													}
												}
											],
											"sid": 491299688276828
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 758460142996143
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "enemy",
													"sid": 589077654486985,
													"parameters": {
														"instance-variable": "rerouting",
														"comparison": 0,
														"value": "\"goingRight\""
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "If they successfully went right, they're done; they can resume normal behavior"
												},
												{
													"id": "set-instvar-value",
													"objectClass": "enemy",
													"sid": 817594969746132,
													"parameters": {
														"instance-variable": "rerouting",
														"value": "\"no\""
													}
												}
											],
											"sid": 401077608371867
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 742386062979371
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "enemy",
													"sid": 624222872761533,
													"parameters": {
														"instance-variable": "rerouting",
														"comparison": 0,
														"value": "\"backingUpAgain\""
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "If they successfully backed up a second time, try turning left again (no need to record that this would be the 2nd left attempt)"
												},
												{
													"id": "set-instvar-value",
													"objectClass": "enemy",
													"sid": 261693395072376,
													"parameters": {
														"instance-variable": "rerouting",
														"value": "\"goingLeft\""
													}
												},
												{
													"callFunction": "MoveEnemyInDirection",
													"sid": 226386724246306,
													"parameters": [
														"QUARTER_CIRCLE",
														"enemy.Width"
													]
												}
											],
											"sid": 344833862316779
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-hit-solid",
											"objectClass": "enemy",
											"sid": 381212948325406,
											"behaviorType": "MoveTo"
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "If an enemy hit a solid while moving, they need to go somewhere else. They can't stop because they don't have an idle animation."
										}
									],
									"sid": 461383012509278,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "enemy",
													"sid": 874780723319647,
													"parameters": {
														"instance-variable": "rerouting",
														"comparison": 0,
														"value": "\"no\""
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "if the enemy wasn't already rerouting when he hit a solid, begin rerouting by backing up"
												},
												{
													"id": "set-instvar-value",
													"objectClass": "enemy",
													"sid": 272947486602681,
													"parameters": {
														"instance-variable": "rerouting",
														"value": "\"backingUp\""
													}
												},
												{
													"callFunction": "MoveEnemyInDirection",
													"sid": 397790675986807,
													"parameters": [
														"HALF_CIRCLE",
														"enemy.Width"
													]
												}
											],
											"sid": 688258119055863
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 917978582155203
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "enemy",
													"sid": 585789115008813,
													"parameters": {
														"instance-variable": "rerouting",
														"comparison": 0,
														"value": "\"backingUp\""
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "If the enemy hit a solid while backing up, try going left"
												},
												{
													"id": "set-instvar-value",
													"objectClass": "enemy",
													"sid": 611059426906122,
													"parameters": {
														"instance-variable": "rerouting",
														"value": "\"goingLeft\""
													}
												},
												{
													"callFunction": "MoveEnemyInDirection",
													"sid": 147790681472118,
													"parameters": [
														"QUARTER_CIRCLE",
														"enemy.Width"
													]
												}
											],
											"sid": 715543732067525
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 343751899759745
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "enemy",
													"sid": 848018021069342,
													"parameters": {
														"instance-variable": "rerouting",
														"comparison": 0,
														"value": "\"goingLeft\""
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "If the enemy hit a solid while going left, try going right. Go twice as far as normal to prevent loops"
												},
												{
													"id": "set-instvar-value",
													"objectClass": "enemy",
													"sid": 992265290332278,
													"parameters": {
														"instance-variable": "rerouting",
														"value": "\"goingRight\""
													}
												},
												{
													"callFunction": "MoveEnemyInDirection",
													"sid": 323027643467297,
													"parameters": [
														"HALF_CIRCLE",
														"enemy.Width * 2"
													]
												}
											],
											"sid": 235276827078822
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 678975833778988
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "enemy",
													"sid": 172716382363134,
													"parameters": {
														"instance-variable": "rerouting",
														"comparison": 0,
														"value": "\"goingRight\""
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "If the enemy hit a solid while going right, try backing up again"
												},
												{
													"id": "set-instvar-value",
													"objectClass": "enemy",
													"sid": 617137112585858,
													"parameters": {
														"instance-variable": "rerouting",
														"value": "\"backingUpAgain\""
													}
												},
												{
													"callFunction": "MoveEnemyInDirection",
													"sid": 691585567438389,
													"parameters": [
														"QUARTER_CIRCLE",
														"enemy.Width"
													]
												}
											],
											"sid": 724755864938345
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 176386841905804
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "enemy",
													"sid": 234490350697590,
													"parameters": {
														"instance-variable": "rerouting",
														"comparison": 0,
														"value": "\"backingUpAgain\""
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "If the enemy hit a solid while backing up again, they are probably stuck. reset the rerouting process to try again"
												},
												{
													"id": "set-instvar-value",
													"objectClass": "enemy",
													"sid": 991851772114925,
													"parameters": {
														"instance-variable": "rerouting",
														"value": "\"no\""
													}
												}
											],
											"sid": 522391266338360
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-moving",
											"objectClass": "enemy",
											"sid": 261289383252672,
											"behaviorType": "MoveTo"
										},
										{
											"id": "pick-children",
											"objectClass": "enemy",
											"sid": 602911596678790,
											"parameters": {
												"child": "enemyBody",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Extracting this out into a function results in enemies getting each other's angles"
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 491453446374562,
											"parameters": {
												"instance-variable": "degrees",
												"value": "round(Self.MoveTo.MovingAngle / ARC) * ARC = -180 ? 180 : round(Self.MoveTo.MovingAngle / ARC) * ARC"
											}
										},
										{
											"id": "set-boolean-instvar",
											"objectClass": "enemy",
											"sid": 733443498925009,
											"parameters": {
												"instance-variable": "attacking",
												"value": "false"
											}
										},
										{
											"id": "set-animation",
											"objectClass": "enemyBody",
											"sid": 335713613889849,
											"parameters": {
												"animation": "\"walk_\" & enemy.degrees",
												"from": "beginning"
											}
										},
										{
											"id": "set-animation-speed",
											"objectClass": "enemyBody",
											"sid": 196693171531035,
											"parameters": {
												"speed": "enemy.movementSpeed / ANIMATION_DIVISOR"
											}
										}
									],
									"sid": 995911688446923
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "enemy",
											"sid": 412161205939607,
											"parameters": {
												"instance-variable": "rerouting",
												"comparison": 0,
												"value": "\"no\""
											}
										},
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "enemy",
											"sid": 785786954622028,
											"parameters": {
												"instance-variable": "attacking"
											},
											"isInverted": true
										},
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "enemy",
											"sid": 108196162325046,
											"parameters": {
												"instance-variable": "hit"
											},
											"isInverted": true
										},
										{
											"id": "pick-parent",
											"objectClass": "enemyBody",
											"sid": 304773321105288,
											"parameters": {
												"parent": "enemy",
												"which": "own"
											}
										}
									],
									"actions": [],
									"sid": 714853243837445,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 440773945161690,
													"parameters": {
														"object": "enemy",
														"expression": "Functions.isometrify(enemy.attackRange, angle(enemy.X, enemy.Y, player.X, player.Y))",
														"comparison": 5,
														"value": "distance(enemy.X, enemy.Y, player.X, player.Y)"
													}
												},
												{
													"id": "has-los-to-object",
													"objectClass": "enemy",
													"sid": 719865029279614,
													"behaviorType": "LineOfSight",
													"parameters": {
														"object": "player",
														"image-point": "0"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "breaking angle(enemy.x, enemy.y, player.x, player.y) into a local variable doesn't work if we have more than 1 enemy."
												},
												{
													"id": "set-instvar-value",
													"objectClass": "enemy",
													"sid": 571362047098296,
													"parameters": {
														"instance-variable": "degrees",
														"value": "round(angle(enemy.X, enemy.Y, player.X, player.Y) / ARC) * ARC = -180 ? 180 : round(angle(enemy.X, enemy.Y, player.X, player.Y) / ARC) * ARC"
													}
												},
												{
													"id": "set-boolean-instvar",
													"objectClass": "enemy",
													"sid": 780308239052219,
													"parameters": {
														"instance-variable": "attacking",
														"value": "true"
													}
												},
												{
													"id": "call-mapped-function",
													"objectClass": "Functions",
													"sid": 431341891608649,
													"parameters": {
														"name": "\"enemyAbilities\"",
														"string": "enemy.simpleName",
														"forward-params": "0"
													}
												}
											],
											"sid": 697644869671278
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 832417679741642,
													"parameters": {
														"object": "enemy",
														"expression": "Functions.isometrify(enemy.attackRange, angle(enemy.X, enemy.Y, player.X, player.Y))",
														"comparison": 2,
														"value": "distance(enemy.X, enemy.Y, player.X, player.Y)"
													}
												}
											],
											"actions": [
												{
													"id": "move-to-object",
													"objectClass": "enemy",
													"sid": 120430198405655,
													"behaviorType": "MoveTo",
													"parameters": {
														"object": "player",
														"image-point": "0",
														"mode": "direct"
													}
												}
											],
											"sid": 640992658053719
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "enemy",
											"sid": 307474919042484,
											"parameters": {
												"instance-variable": "currentHealth",
												"comparison": 0,
												"value": "0"
											}
										},
										{
											"id": "pick-children",
											"objectClass": "enemy",
											"sid": 342453186762135,
											"parameters": {
												"child": "enemyBody",
												"which": "own"
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 973811280389585,
											"parameters": {
												"object": "enemyBody",
												"expression": "find(enemyBody.AnimationName, \"die\")",
												"comparison": 0,
												"value": "-1"
											}
										},
										{
											"id": "pick-parent",
											"objectClass": "enemyBody",
											"sid": 292827668140868,
											"parameters": {
												"parent": "enemy",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Pick dead enemies and their bodies. Trim down the selection of enemies to only those who are parents of bodies that aren't playing a 'die' animation."
										},
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 753964957765899,
											"parameters": {
												"instance-variable": "experience",
												"value": "enemy.experience"
											}
										},
										{
											"id": "destroy",
											"objectClass": "enemy",
											"sid": 661455970113275
										},
										{
											"id": "set-animation",
											"objectClass": "enemyBody",
											"sid": 239197059439331,
											"parameters": {
												"animation": "\"die_\" & enemy.degrees",
												"from": "beginning"
											}
										},
										{
											"callFunction": "spawnLoot",
											"sid": 507101027020241,
											"parameters": [
												"enemy.X",
												"enemy.Y",
												"max(enemy.Width, enemy.Height)"
											]
										}
									],
									"sid": 845775673450816
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-on-screen",
									"objectClass": "enemyBody",
									"sid": 127050934763793,
									"isInverted": true
								},
								{
									"id": "pick-parent",
									"objectClass": "enemyBody",
									"sid": 449029605780893,
									"parameters": {
										"parent": "enemy",
										"which": "own"
									}
								}
							],
							"actions": [
								{
									"id": "stop",
									"objectClass": "enemy",
									"sid": 747614533357404,
									"behaviorType": "MoveTo"
								},
								{
									"id": "set-instvar-value",
									"objectClass": "enemy",
									"sid": 865143597318402,
									"parameters": {
										"instance-variable": "rerouting",
										"value": "\"no\""
									}
								}
							],
							"sid": 839354063176527
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-any-animation-finished",
									"objectClass": "enemyBody",
									"sid": 636124233086149
								}
							],
							"actions": [],
							"sid": 915717840994810,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 161727676964695,
											"parameters": {
												"object": "enemyBody",
												"expression": "find(enemyBody.AnimationName, \"die\")",
												"comparison": 1,
												"value": "-1"
											}
										}
									],
									"actions": [
										{
											"id": "tween-one-property",
											"objectClass": "enemyBody",
											"sid": 891888202943728,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"\"",
												"property": "offsetOpacity",
												"end-value": "0",
												"time": "1",
												"ease": "noease",
												"destroy-on-complete": "yes",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 305858177061194
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-parent",
											"objectClass": "enemyBody",
											"sid": 829615484125780,
											"parameters": {
												"parent": "enemy",
												"which": "own"
											}
										}
									],
									"actions": [],
									"sid": 938155508642631,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 553330171954123,
													"parameters": {
														"object": "enemyBody",
														"expression": "find(enemyBody.AnimationName, \"attack\")",
														"comparison": 1,
														"value": "-1"
													}
												}
											],
											"actions": [
												{
													"id": "set-boolean-instvar",
													"objectClass": "enemy",
													"sid": 183789396537260,
													"parameters": {
														"instance-variable": "attacking",
														"value": "false"
													}
												}
											],
											"sid": 307056031215417
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 998780592175427,
													"parameters": {
														"object": "enemyBody",
														"expression": "find(enemyBody.AnimationName, \"hit\")",
														"comparison": 1,
														"value": "-1"
													}
												}
											],
											"actions": [
												{
													"id": "set-boolean-instvar",
													"objectClass": "enemy",
													"sid": 971129049528586,
													"parameters": {
														"instance-variable": "attacking",
														"value": "false"
													}
												},
												{
													"id": "set-boolean-instvar",
													"objectClass": "enemy",
													"sid": 972174768371784,
													"parameters": {
														"instance-variable": "hit",
														"value": "false"
													}
												}
											],
											"sid": 521797612596668
										}
									]
								}
							]
						}
					],
					"sid": 346842453318444
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "enemy abilities",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"functionName": "goblinUnderling",
							"functionDescription": "",
							"functionCategory": "enemies",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 429038780345131,
							"children": [
								{
									"eventType": "variable",
									"name": "PROJECTILE_SPEED",
									"type": "number",
									"initialValue": "700",
									"comment": "The speed of the projectile",
									"isStatic": false,
									"isConstant": true,
									"sid": 421665011073282
								},
								{
									"eventType": "variable",
									"name": "MANIFESTATION_FRAME",
									"type": "number",
									"initialValue": "38",
									"comment": "The (0-based) frame in which the projectile should manifest",
									"isStatic": false,
									"isConstant": true,
									"sid": 433125076602187
								},
								{
									"eventType": "variable",
									"name": "SIZE",
									"type": "number",
									"initialValue": "120",
									"comment": "The size of the projectile",
									"isStatic": false,
									"isConstant": true,
									"sid": 968347307715670
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-children",
											"objectClass": "enemy",
											"sid": 798162200338716,
											"parameters": {
												"child": "enemyBody",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"id": "stop",
											"objectClass": "enemy",
											"sid": 773381885453265,
											"behaviorType": "MoveTo"
										},
										{
											"id": "set-moving-angle",
											"objectClass": "enemy",
											"sid": 226507283155307,
											"behaviorType": "MoveTo",
											"parameters": {
												"angle": "angle(Self.X, Self.Y, player.X, player.Y)"
											}
										},
										{
											"id": "set-animation",
											"objectClass": "enemyBody",
											"sid": 240705091466775,
											"parameters": {
												"animation": "\"attack_\" & enemy.degrees",
												"from": "beginning"
											}
										},
										{
											"type": "comment",
											"text": "This is the amount of time between the start of the animation and the manifestation of the projectile."
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 661077253537304,
											"parameters": {
												"seconds": "TICKS_PER_SECOND / enemyBody.AnimationSpeed *  MANIFESTATION_FRAME / TICKS_PER_SECOND"
											}
										},
										{
											"id": "create-object",
											"objectClass": "System",
											"sid": 407330687199050,
											"parameters": {
												"object-to-create": "projectile",
												"layer": "\"mechanics\"",
												"x": "enemy.X",
												"y": "enemy.Y",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										}
									],
									"sid": 637095266380560,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-last-created",
													"objectClass": "System",
													"sid": 306169381692502,
													"parameters": {
														"object": "projectile"
													}
												}
											],
											"actions": [
												{
													"id": "add-child",
													"objectClass": "enemy",
													"sid": 754811897098689,
													"parameters": {
														"child": "projectile",
														"transform-x": false,
														"transform-y": false,
														"transform-w": false,
														"transform-h": false,
														"transform-a": false,
														"transform-o": false,
														"transform-z-elevation": false,
														"transform-visibility": false,
														"destroy-with-parent": true
													}
												},
												{
													"id": "set-boolean-instvar",
													"objectClass": "projectile",
													"sid": 777565137465121,
													"parameters": {
														"instance-variable": "enabled",
														"value": "true"
													}
												},
												{
													"id": "set-boolean-instvar",
													"objectClass": "projectile",
													"sid": 443135731365143,
													"parameters": {
														"instance-variable": "isMelee",
														"value": "true"
													}
												},
												{
													"id": "set-boolean-instvar",
													"objectClass": "projectile",
													"sid": 642441044173211,
													"parameters": {
														"instance-variable": "piercing",
														"value": "true"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "projectile",
													"sid": 625256602482310,
													"parameters": {
														"instance-variable": "slashDamage",
														"value": "enemy.slashDamage"
													}
												},
												{
													"id": "set-width",
													"objectClass": "projectile",
													"sid": 406621780057284,
													"parameters": {
														"width": "SIZE"
													}
												},
												{
													"id": "set-height",
													"objectClass": "projectile",
													"sid": 297419088255885,
													"parameters": {
														"height": "Self.Width / ISOMETRIC_DIVIDER"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "projectile",
													"sid": 499067580773091,
													"parameters": {
														"instance-variable": "range",
														"value": "enemy.attackRange"
													}
												},
												{
													"id": "set-angle-of-motion",
													"objectClass": "projectile",
													"sid": 559036733576339,
													"behaviorType": "Bullet",
													"parameters": {
														"angle": "enemy.MoveTo.MovingAngle"
													}
												},
												{
													"id": "set-speed",
													"objectClass": "projectile",
													"sid": 612650861946859,
													"behaviorType": "Bullet",
													"parameters": {
														"speed": "Functions.isometrify(PROJECTILE_SPEED, Self.Bullet.AngleOfMotion)"
													}
												}
											],
											"sid": 977939820763027
										}
									]
								}
							]
						},
						{
							"functionName": "goblinArcher",
							"functionDescription": "",
							"functionCategory": "enemies",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 266372004783406,
							"children": [
								{
									"eventType": "variable",
									"name": "PROJECTILE_SPEED",
									"type": "number",
									"initialValue": "600",
									"comment": "The speed of the projectile",
									"isStatic": false,
									"isConstant": true,
									"sid": 740015134778544
								},
								{
									"eventType": "variable",
									"name": "MANIFESTATION_POINT",
									"type": "number",
									"initialValue": "80",
									"comment": "The longest possible distance (in pixels) between the enemy origin and where the projectile visual representation should appear. This is when they are facing directly left or right.",
									"isStatic": false,
									"isConstant": true,
									"sid": 694013683657195
								},
								{
									"eventType": "variable",
									"name": "MANIFESTATION_FRAME",
									"type": "number",
									"initialValue": "15",
									"comment": "The (0-based) frame in which the projectile should manifest",
									"isStatic": false,
									"isConstant": true,
									"sid": 163965109939145
								},
								{
									"eventType": "variable",
									"name": "SIZE",
									"type": "number",
									"initialValue": "15",
									"comment": "The size of the projectile",
									"isStatic": false,
									"isConstant": true,
									"sid": 159897247114374
								},
								{
									"eventType": "variable",
									"name": "projectileManifestationTime",
									"type": "number",
									"initialValue": "0",
									"comment": "How long it takes the projectile to get from the enemy's origin to the manifestation point",
									"isStatic": true,
									"isConstant": false,
									"sid": 228220816216230
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-children",
											"objectClass": "enemy",
											"sid": 411494418569165,
											"parameters": {
												"child": "enemyBody",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "The point in time when the projectile should appear differs based on which direction the enemy is facing. (i.e., the distance between the enemy's origin and hand is drastically different if he's facing left, vs. if he's facing up)"
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 564225280416213,
											"parameters": {
												"variable": "projectileManifestationTime",
												"value": "Functions.isometrify(MANIFESTATION_POINT, enemy.degrees) / PROJECTILE_SPEED"
											}
										},
										{
											"id": "stop",
											"objectClass": "enemy",
											"sid": 344316499934358,
											"behaviorType": "MoveTo"
										},
										{
											"id": "set-moving-angle",
											"objectClass": "enemy",
											"sid": 699503730810728,
											"behaviorType": "MoveTo",
											"parameters": {
												"angle": "angle(Self.X, Self.Y, player.X, player.Y)"
											}
										},
										{
											"id": "set-animation",
											"objectClass": "enemyBody",
											"sid": 396083681322291,
											"parameters": {
												"animation": "\"attack_\" & enemy.degrees",
												"from": "beginning"
											}
										},
										{
											"type": "comment",
											"text": "Time the spawning of the projectile so it will pass over the manifestation point during the same frame that the the projectile's visual representation on the enemy disappears."
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 922785798570809,
											"parameters": {
												"seconds": "TICKS_PER_SECOND / enemyBody.AnimationSpeed *  MANIFESTATION_FRAME / TICKS_PER_SECOND - projectileManifestationTime"
											}
										}
									],
									"sid": 927697697940487,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-boolean-instance-variable-set",
													"objectClass": "enemy",
													"sid": 968264553072950,
													"parameters": {
														"instance-variable": "hit"
													},
													"isInverted": true
												}
											],
											"actions": [
												{
													"id": "create-object",
													"objectClass": "System",
													"sid": 887652376972684,
													"parameters": {
														"object-to-create": "projectile",
														"layer": "\"mechanics\"",
														"x": "enemy.X",
														"y": "enemy.Y",
														"create-hierarchy": false,
														"template-name": "\"\""
													}
												}
											],
											"sid": 369945013022118,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-last-created",
															"objectClass": "System",
															"sid": 439909279866633,
															"parameters": {
																"object": "projectile"
															}
														}
													],
													"actions": [
														{
															"id": "add-child",
															"objectClass": "enemy",
															"sid": 292455479393073,
															"parameters": {
																"child": "projectile",
																"transform-x": false,
																"transform-y": false,
																"transform-w": false,
																"transform-h": false,
																"transform-a": false,
																"transform-o": false,
																"transform-z-elevation": false,
																"transform-visibility": false,
																"destroy-with-parent": true
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "projectile",
															"sid": 116652104349254,
															"parameters": {
																"instance-variable": "range",
																"value": "enemy.attackRange"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "projectile",
															"sid": 824511082317016,
															"parameters": {
																"instance-variable": "stabDamage",
																"value": "enemy.stabDamage"
															}
														},
														{
															"id": "set-width",
															"objectClass": "projectile",
															"sid": 702266015949138,
															"parameters": {
																"width": "SIZE"
															}
														},
														{
															"id": "set-height",
															"objectClass": "projectile",
															"sid": 730559231798823,
															"parameters": {
																"height": "Self.Width / ISOMETRIC_DIVIDER"
															}
														},
														{
															"type": "comment",
															"text": "Adjust the projectile's speed to account for isometry."
														},
														{
															"type": "comment",
															"text": "If we set the angle before we set the speed, and the speed of the template projectile is 0, this projectile will only flight straight left or right."
														},
														{
															"id": "set-angle-of-motion",
															"objectClass": "projectile",
															"sid": 827573118029758,
															"behaviorType": "Bullet",
															"parameters": {
																"angle": "enemy.MoveTo.MovingAngle"
															}
														},
														{
															"id": "set-speed",
															"objectClass": "projectile",
															"sid": 837456207660489,
															"behaviorType": "Bullet",
															"parameters": {
																"speed": "Functions.isometrify(PROJECTILE_SPEED, Self.Bullet.AngleOfMotion)"
															}
														},
														{
															"id": "wait",
															"objectClass": "System",
															"sid": 246418723989501,
															"parameters": {
																"seconds": "projectileManifestationTime"
															}
														},
														{
															"type": "comment",
															"text": "The projectile is now at the manifestation point. Spawn the projectile's visual representation."
														},
														{
															"id": "create-object",
															"objectClass": "System",
															"sid": 148522850431655,
															"parameters": {
																"object-to-create": "crossbowBolt",
																"layer": "\"main\"",
																"x": "projectile.X",
																"y": "projectile.Y",
																"create-hierarchy": false,
																"template-name": "\"\""
															}
														},
														{
															"id": "set-boolean-instvar",
															"objectClass": "projectile",
															"sid": 703890200324516,
															"parameters": {
																"instance-variable": "enabled",
																"value": "true"
															}
														}
													],
													"sid": 792676751037144,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "pick-last-created",
																	"objectClass": "System",
																	"sid": 487612138188202,
																	"parameters": {
																		"object": "crossbowBolt"
																	}
																}
															],
															"actions": [
																{
																	"id": "set-animation",
																	"objectClass": "crossbowBolt",
																	"sid": 281551004768729,
																	"parameters": {
																		"animation": "str(enemy.degrees)",
																		"from": "beginning"
																	}
																},
																{
																	"id": "add-child",
																	"objectClass": "projectile",
																	"sid": 244179777051147,
																	"parameters": {
																		"child": "crossbowBolt",
																		"transform-x": true,
																		"transform-y": true,
																		"transform-w": false,
																		"transform-h": false,
																		"transform-a": true,
																		"transform-o": true,
																		"transform-z-elevation": true,
																		"transform-visibility": false,
																		"destroy-with-parent": true
																	}
																}
															],
															"sid": 233638538736242
														}
													]
												}
											]
										}
									]
								}
							]
						},
						{
							"functionName": "goblinWarlock",
							"functionDescription": "",
							"functionCategory": "enemies",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 195491233080812,
							"children": [
								{
									"eventType": "variable",
									"name": "PROJECTILE_SPEED",
									"type": "number",
									"initialValue": "600",
									"comment": "The speed of the projectile",
									"isStatic": false,
									"isConstant": true,
									"sid": 369324009696675
								},
								{
									"eventType": "variable",
									"name": "MANIFESTATION_POINT",
									"type": "number",
									"initialValue": "100",
									"comment": "The longest possible distance (in pixels) between the enemy origin and where the projectile visual representation should appear. This is when they are facing directly left or right.",
									"isStatic": false,
									"isConstant": true,
									"sid": 768361143392393
								},
								{
									"eventType": "variable",
									"name": "MANIFESTATION_FRAME",
									"type": "number",
									"initialValue": "10",
									"comment": "The (0-based) frame in which the projectile should manifest",
									"isStatic": false,
									"isConstant": true,
									"sid": 521281225561699
								},
								{
									"eventType": "variable",
									"name": "SIZE",
									"type": "number",
									"initialValue": "30",
									"comment": "The size of the projectile",
									"isStatic": false,
									"isConstant": true,
									"sid": 311141190353756
								},
								{
									"eventType": "variable",
									"name": "projectileManifestationTime",
									"type": "number",
									"initialValue": "0",
									"comment": "How long it takes the projectile to get from the enemy's origin to the manifestation point",
									"isStatic": true,
									"isConstant": false,
									"sid": 135630290224051
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-children",
											"objectClass": "enemy",
											"sid": 398729890238329,
											"parameters": {
												"child": "enemyBody",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 124188989084013,
											"parameters": {
												"variable": "projectileManifestationTime",
												"value": "Functions.isometrify(MANIFESTATION_POINT, enemy.degrees) / PROJECTILE_SPEED"
											}
										},
										{
											"id": "stop",
											"objectClass": "enemy",
											"sid": 504078988693406,
											"behaviorType": "MoveTo"
										},
										{
											"id": "set-moving-angle",
											"objectClass": "enemy",
											"sid": 944841252633778,
											"behaviorType": "MoveTo",
											"parameters": {
												"angle": "angle(Self.X, Self.Y, player.X, player.Y)"
											}
										},
										{
											"id": "set-animation",
											"objectClass": "enemyBody",
											"sid": 579305051478491,
											"parameters": {
												"animation": "\"attack_\" & enemy.degrees",
												"from": "beginning"
											}
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 342374240170874,
											"parameters": {
												"seconds": "TICKS_PER_SECOND / enemyBody.AnimationSpeed *  MANIFESTATION_FRAME / TICKS_PER_SECOND - projectileManifestationTime"
											}
										}
									],
									"sid": 493235774122151,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-boolean-instance-variable-set",
													"objectClass": "enemy",
													"sid": 285805991759328,
													"parameters": {
														"instance-variable": "hit"
													},
													"isInverted": true
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "If the enemy was hit between the time when the attack started, but before the projectile was generated, cease continuation with the attack."
												},
												{
													"id": "create-object",
													"objectClass": "System",
													"sid": 469502575992036,
													"parameters": {
														"object-to-create": "projectile",
														"layer": "\"mechanics\"",
														"x": "enemy.X",
														"y": "enemy.Y",
														"create-hierarchy": false,
														"template-name": "\"\""
													}
												}
											],
											"sid": 561465114721611,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-last-created",
															"objectClass": "System",
															"sid": 646588341210602,
															"parameters": {
																"object": "projectile"
															}
														}
													],
													"actions": [
														{
															"id": "add-child",
															"objectClass": "enemy",
															"sid": 992349569937384,
															"parameters": {
																"child": "projectile",
																"transform-x": false,
																"transform-y": false,
																"transform-w": false,
																"transform-h": false,
																"transform-a": false,
																"transform-o": false,
																"transform-z-elevation": false,
																"transform-visibility": false,
																"destroy-with-parent": true
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "projectile",
															"sid": 555217025714282,
															"parameters": {
																"instance-variable": "range",
																"value": "enemy.attackRange"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "projectile",
															"sid": 250729036068441,
															"parameters": {
																"instance-variable": "lightningDamage",
																"value": "enemy.lightningDamage"
															}
														},
														{
															"id": "set-width",
															"objectClass": "projectile",
															"sid": 851506649190779,
															"parameters": {
																"width": "SIZE"
															}
														},
														{
															"id": "set-height",
															"objectClass": "projectile",
															"sid": 226605164943253,
															"parameters": {
																"height": "Self.Width / ISOMETRIC_DIVIDER"
															}
														},
														{
															"id": "set-angle-of-motion",
															"objectClass": "projectile",
															"sid": 836908037661225,
															"behaviorType": "Bullet",
															"parameters": {
																"angle": "enemy.MoveTo.MovingAngle"
															}
														},
														{
															"id": "set-speed",
															"objectClass": "projectile",
															"sid": 199188507633963,
															"behaviorType": "Bullet",
															"parameters": {
																"speed": "Functions.isometrify(PROJECTILE_SPEED, Self.Bullet.AngleOfMotion)"
															}
														},
														{
															"id": "wait",
															"objectClass": "System",
															"sid": 782251004938865,
															"parameters": {
																"seconds": "projectileManifestationTime"
															}
														},
														{
															"id": "create-object",
															"objectClass": "System",
															"sid": 162586936319832,
															"parameters": {
																"object-to-create": "lightningOrb",
																"layer": "\"main\"",
																"x": "projectile.X",
																"y": "projectile.Y",
																"create-hierarchy": false,
																"template-name": "\"\""
															}
														},
														{
															"id": "set-boolean-instvar",
															"objectClass": "projectile",
															"sid": 276295156620133,
															"parameters": {
																"instance-variable": "enabled",
																"value": "true"
															}
														}
													],
													"sid": 128093128862648,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "pick-last-created",
																	"objectClass": "System",
																	"sid": 238163367629294,
																	"parameters": {
																		"object": "lightningOrb"
																	}
																}
															],
															"actions": [
																{
																	"id": "add-child",
																	"objectClass": "projectile",
																	"sid": 509425320795648,
																	"parameters": {
																		"child": "lightningOrb",
																		"transform-x": true,
																		"transform-y": true,
																		"transform-w": false,
																		"transform-h": false,
																		"transform-a": true,
																		"transform-o": true,
																		"transform-z-elevation": true,
																		"transform-visibility": false,
																		"destroy-with-parent": true
																	}
																}
															],
															"sid": 580403643807865
														}
													]
												}
											]
										}
									]
								}
							]
						}
					],
					"sid": 353498742385237
				}
			],
			"sid": 617251843840566
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "shadows",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "we tried a lot of different things to get shadows to stay immediately behind their hasShadow. A 'for' loop over the shadows moving them behind their hasShadow didn't work, neither did the Z elevation hierarchy parameter. We just decided to make shadows sortable, that seems to be working."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-parent",
							"objectClass": "shadow",
							"sid": 226383708709643,
							"parameters": {
								"parent": "hasShadow",
								"which": "own"
							}
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "shadow",
							"sid": 627266054647833,
							"parameters": {
								"animation": "hasShadow.AnimationName",
								"from": "current-frame"
							}
						},
						{
							"id": "set-animation-frame",
							"objectClass": "shadow",
							"sid": 282623935223883,
							"parameters": {
								"frame-number": "hasShadow.AnimationFrame"
							}
						}
					],
					"sid": 824913553665963
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-created",
							"objectClass": "hasShadow",
							"sid": 460073097317385
						},
						{
							"id": "is-animation-playing",
							"objectClass": "shadows",
							"sid": 686604742716400,
							"parameters": {
								"animation": "\"checked\""
							}
						}
					],
					"actions": [
						{
							"callFunction": "spawnShadows",
							"sid": 861273562752085
						}
					],
					"sid": 559501222679591
				},
				{
					"functionName": "spawnShadows",
					"functionDescription": "Spawn the shadow of an object.",
					"functionCategory": "world",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "load-object-images-by-name",
							"objectClass": "System",
							"sid": 484150809102070,
							"parameters": {
								"object": "hasShadow.ObjectTypeName & \"_shadow\""
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 643821352284372
						},
						{
							"id": "create-object-by-name",
							"objectClass": "System",
							"sid": 831182460755693,
							"parameters": {
								"object-name": "hasShadow.ObjectTypeName & \"_shadow\"",
								"layer": "hasShadow.LayerName",
								"x": "hasShadow.X",
								"y": "hasShadow.Y - 1",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						}
					],
					"sid": 231167600570761,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-last-created",
									"objectClass": "System",
									"sid": 358212810680298,
									"parameters": {
										"object": "shadow"
									}
								}
							],
							"actions": [
								{
									"id": "add-child",
									"objectClass": "hasShadow",
									"sid": 274144026742843,
									"parameters": {
										"child": "shadow",
										"transform-x": true,
										"transform-y": true,
										"transform-w": false,
										"transform-h": false,
										"transform-a": true,
										"transform-o": true,
										"transform-z-elevation": true,
										"transform-visibility": true,
										"destroy-with-parent": true
									}
								},
								{
									"id": "set-opacity",
									"objectClass": "shadow",
									"sid": 259654835352672,
									"parameters": {
										"opacity": "50"
									}
								},
								{
									"id": "set-effect-parameter",
									"objectClass": "shadow",
									"sid": 703459349485662,
									"parameters": {
										"effect": "\"BlurHorizontal\"",
										"parameter-index": "0",
										"value": "75"
									}
								},
								{
									"id": "set-effect-parameter",
									"objectClass": "shadow",
									"sid": 627909877455943,
									"parameters": {
										"effect": "\"BlurVertical\"",
										"parameter-index": "0",
										"value": "75"
									}
								}
							],
							"sid": 418516007527361
						}
					]
				}
			],
			"sid": 538206850780870
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "projectiles",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "projectile",
							"sid": 398405530236454,
							"parameters": {
								"object": "prop"
							}
						},
						{
							"id": "compare-distance-travelled",
							"objectClass": "projectile",
							"sid": 945441159530041,
							"behaviorType": "Bullet",
							"parameters": {
								"comparison": 5,
								"distance": "Functions.isometrify(Self.range, Self.Bullet.AngleOfMotion)"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "TODO: We want projectiles not to go through props, but this will destroy a projectile even if it lightly grazes a prop, that's not ideal"
						},
						{
							"id": "destroy",
							"objectClass": "projectile",
							"sid": 785391520212267
						}
					],
					"sid": 585039691434774,
					"isOrBlock": true
				},
				{
					"eventType": "comment",
					"text": "TODO: Add all other damage types"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "projectile",
							"sid": 866965572546389,
							"parameters": {
								"instance-variable": "enabled"
							}
						}
					],
					"actions": [],
					"sid": 932202329358705,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-collision-with-another-object",
									"objectClass": "projectile",
									"sid": 703840981642531,
									"parameters": {
										"object": "enemy"
									}
								},
								{
									"id": "pick-parent",
									"objectClass": "projectile",
									"sid": 513615765405988,
									"parameters": {
										"parent": "player",
										"which": "own"
									}
								}
							],
							"actions": [
								{
									"id": "subtract-from-instvar",
									"objectClass": "enemy",
									"sid": 868142860697604,
									"parameters": {
										"instance-variable": "currentHealth",
										"value": "projectile.slashDamage * (1 - Self.physicalResistance)"
									}
								},
								{
									"id": "subtract-from-instvar",
									"objectClass": "enemy",
									"sid": 601406039109145,
									"parameters": {
										"instance-variable": "currentHealth",
										"value": "projectile.smashDamage * (1 - Self.physicalResistance)"
									}
								},
								{
									"id": "set-max-speed",
									"objectClass": "enemy",
									"sid": 429298093959011,
									"behaviorType": "knockback",
									"parameters": {
										"max-speed": "projectile.knockbackSpeed"
									}
								},
								{
									"id": "move-to-position",
									"objectClass": "enemy",
									"sid": 446507994368750,
									"behaviorType": "knockback",
									"parameters": {
										"x": "Self.X + Functions.isometrify(projectile.knockbackDistance, projectile.Bullet.AngleOfMotion) * cos(projectile.Bullet.AngleOfMotion)",
										"y": "Self.Y + Functions.isometrify(projectile.knockbackDistance, projectile.Bullet.AngleOfMotion) * sin(projectile.Bullet.AngleOfMotion)",
										"mode": "direct"
									}
								}
							],
							"sid": 673936274587997,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 976552647994036,
											"parameters": {
												"first-value": "find(enemy.attributes, \"Unflinching\")",
												"comparison": 0,
												"second-value": "-1"
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "enemy",
											"sid": 907670062657075,
											"parameters": {
												"instance-variable": "currentHealth",
												"comparison": 4,
												"value": "0"
											}
										},
										{
											"id": "pick-children",
											"objectClass": "enemy",
											"sid": 381198098849893,
											"parameters": {
												"child": "enemyBody",
												"which": "own"
											}
										},
										{
											"id": "pick-parent",
											"objectClass": "enemyBody",
											"sid": 837310322782666,
											"parameters": {
												"parent": "enemy",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Hitstun the enemy, as long as they aren't Unflinching and the projectile didn't kill them."
										},
										{
											"id": "stop",
											"objectClass": "enemy",
											"sid": 258415481730862,
											"behaviorType": "MoveTo"
										},
										{
											"id": "set-boolean-instvar",
											"objectClass": "enemy",
											"sid": 804180954135793,
											"parameters": {
												"instance-variable": "hit",
												"value": "true"
											}
										},
										{
											"id": "set-animation",
											"objectClass": "enemyBody",
											"sid": 922100931737719,
											"parameters": {
												"animation": "\"hit_\" & enemy.degrees",
												"from": "beginning"
											}
										}
									],
									"sid": 305641316456038,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-all",
													"objectClass": "System",
													"sid": 519966984263376,
													"parameters": {
														"object": "projectile"
													}
												},
												{
													"id": "pick-children",
													"objectClass": "enemy",
													"sid": 387006315558891,
													"parameters": {
														"child": "projectile",
														"which": "own"
													}
												}
											],
											"actions": [],
											"sid": 813950715761836,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-boolean-instance-variable-set",
															"objectClass": "projectile",
															"sid": 532359483178596,
															"parameters": {
																"instance-variable": "enabled"
															},
															"isInverted": true
														},
														{
															"id": "is-boolean-instance-variable-set",
															"objectClass": "projectile",
															"sid": 949208087040951,
															"parameters": {
																"instance-variable": "isMelee"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "destroy ranged projectiles owned by this enemy that: haven't been enabled (visually generated) yet, or are melee projectiles"
														},
														{
															"id": "destroy",
															"objectClass": "projectile",
															"sid": 690045203004240
														}
													],
													"sid": 953439831951762,
													"isOrBlock": true
												}
											]
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "projectile",
											"sid": 930689339639153,
											"parameters": {
												"instance-variable": "piercing"
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "destroy",
											"objectClass": "projectile",
											"sid": 712906424152491
										}
									],
									"sid": 647399467179630
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-collision-with-another-object",
									"objectClass": "projectile",
									"sid": 921224045921521,
									"parameters": {
										"object": "player"
									}
								},
								{
									"id": "pick-parent",
									"objectClass": "projectile",
									"sid": 353666848228170,
									"parameters": {
										"parent": "enemy",
										"which": "own"
									}
								}
							],
							"actions": [],
							"sid": 591454218470020,
							"children": [
								{
									"eventType": "variable",
									"name": "playerHealthBeforeImpact",
									"type": "number",
									"initialValue": "0",
									"comment": "The player's health before the projectile hit them.",
									"isStatic": true,
									"isConstant": false,
									"sid": 386149964426580
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 138232826867717,
											"parameters": {
												"first-value": "find(body.AnimationName, \"block\")",
												"comparison": 0,
												"second-value": "-1"
											}
										},
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 821194918248458,
											"parameters": {
												"first-value": "find(body.AnimationName, \"hit\")",
												"comparison": 0,
												"second-value": "-1"
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "player",
											"sid": 662190681012854,
											"parameters": {
												"instance-variable": "currentHealth",
												"comparison": 4,
												"value": "0"
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 590785792254548,
											"parameters": {
												"object": "gear",
												"expression": "gear.type",
												"comparison": 0,
												"value": "\"offHand\""
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "player",
											"sid": 304888180753921,
											"parameters": {
												"instance-variable": "blockChance",
												"comparison": 5,
												"value": "floor(random(1, 100))"
											}
										},
										{
											"id": "is-overlapping-another-object",
											"objectClass": "player",
											"sid": 602935734342984,
											"parameters": {
												"object": "nonCombatArea"
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "If the player is alive, isn't in a non-combat area, has an offHand item equipped, isn't currently blocking or getting hit, and successfully blocks the attack, play the block animation, then we're done."
										},
										{
											"callFunction": "channeledAnimation",
											"sid": 837860087589841,
											"parameters": [
												"\"block\""
											]
										}
									],
									"sid": 661315679644106,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-all",
													"objectClass": "System",
													"sid": 309486188386674,
													"parameters": {
														"object": "projectile"
													}
												},
												{
													"id": "pick-children",
													"objectClass": "player",
													"sid": 232602649743126,
													"parameters": {
														"child": "projectile",
														"which": "own"
													}
												}
											],
											"actions": [
												{
													"id": "destroy",
													"objectClass": "projectile",
													"sid": 922785036681924
												}
											],
											"sid": 162273133516722,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-boolean-instance-variable-set",
															"objectClass": "projectile",
															"sid": 907979179229907,
															"parameters": {
																"instance-variable": "enabled"
															},
															"isInverted": true
														},
														{
															"id": "is-boolean-instance-variable-set",
															"objectClass": "projectile",
															"sid": 186493852144732,
															"parameters": {
																"instance-variable": "isMelee"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "destroy ranged projectiles owned by the player that: haven't been enabled (visually generated) yet, or are melee projectiles"
														},
														{
															"id": "destroy",
															"objectClass": "projectile",
															"sid": 266194346335621
														}
													],
													"sid": 727704609425814,
													"isOrBlock": true
												}
											]
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 212609481973178
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "If the projectile didn't get blocked..."
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 705146640200271,
											"parameters": {
												"variable": "playerHealthBeforeImpact",
												"value": "player.currentHealth"
											}
										},
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 893185114435343,
											"parameters": {
												"instance-variable": "currentHealth",
												"value": "projectile.lightningDamage * (1 - Self.lightningResistance)"
											}
										},
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 132008705769330,
											"parameters": {
												"instance-variable": "currentHealth",
												"value": "projectile.stabDamage * (1 - Self.physicalResistance)"
											}
										},
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 226885000296688,
											"parameters": {
												"instance-variable": "currentHealth",
												"value": "projectile.slashDamage * (1 - Self.physicalResistance)"
											}
										}
									],
									"sid": 680787690708581,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 933157675135104,
													"parameters": {
														"first-value": "find(body.AnimationName, \"block\")",
														"comparison": 0,
														"second-value": "-1"
													}
												},
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 627883077623352,
													"parameters": {
														"first-value": "find(body.AnimationName, \"hit\")",
														"comparison": 0,
														"second-value": "-1"
													}
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "player",
													"sid": 353087544354699,
													"parameters": {
														"instance-variable": "currentHealth",
														"comparison": 2,
														"value": "playerHealthBeforeImpact - Self.maxHealth * Self.hitstunThreshold"
													}
												},
												{
													"id": "is-overlapping-another-object",
													"objectClass": "player",
													"sid": 406192656726866,
													"parameters": {
														"object": "nonCombatArea"
													},
													"isInverted": true
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "player",
													"sid": 884911017862546,
													"parameters": {
														"instance-variable": "currentHealth",
														"comparison": 4,
														"value": "0"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "If the player isn't currently blocking or getting hit, isn't in a non-combat area, and takes a hit that doesn't kill him, and that hit is bigger than the hitstun threshold, the player gets hitstunned"
												},
												{
													"type": "comment",
													"text": "TODO: Attributes for the player (can they be unflinching?)"
												},
												{
													"callFunction": "channeledAnimation",
													"sid": 623891007101868,
													"parameters": [
														"\"hit\""
													]
												}
											],
											"sid": 181406029233488,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-all",
															"objectClass": "System",
															"sid": 832696051238529,
															"parameters": {
																"object": "projectile"
															}
														},
														{
															"id": "pick-children",
															"objectClass": "player",
															"sid": 298756473891858,
															"parameters": {
																"child": "projectile",
																"which": "own"
															}
														}
													],
													"actions": [
														{
															"id": "destroy",
															"objectClass": "projectile",
															"sid": 582753969205622
														}
													],
													"sid": 535985135308689,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "is-boolean-instance-variable-set",
																	"objectClass": "projectile",
																	"sid": 560527795339996,
																	"parameters": {
																		"instance-variable": "enabled"
																	},
																	"isInverted": true
																},
																{
																	"id": "is-boolean-instance-variable-set",
																	"objectClass": "projectile",
																	"sid": 683487282486522,
																	"parameters": {
																		"instance-variable": "isMelee"
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "destroy ranged projectiles owned by the player that: haven't been enabled (visually generated) yet, or are melee projectiles"
																},
																{
																	"id": "destroy",
																	"objectClass": "projectile",
																	"sid": 655951994131290
																}
															],
															"sid": 990020247873838,
															"isOrBlock": true
														}
													]
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-boolean-instance-variable-set",
													"objectClass": "projectile",
													"sid": 558866989360890,
													"parameters": {
														"instance-variable": "piercing"
													},
													"isInverted": true
												}
											],
											"actions": [
												{
													"id": "destroy",
													"objectClass": "projectile",
													"sid": 887800632849253
												}
											],
											"sid": 944725340629196
										}
									]
								}
							]
						}
					]
				}
			],
			"sid": 725204103231325
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "misc",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"functionName": "isometrify",
					"functionDescription": "Modify a value based on an angle, to make it isometrically correct.",
					"functionCategory": "Isometry",
					"functionReturnType": "number",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "value",
							"type": "number",
							"initialValue": "0",
							"comment": "The value, which will be modified by the specified angle.",
							"sid": 686725352825470
						},
						{
							"name": "theAngle",
							"type": "number",
							"initialValue": "0",
							"comment": "The angle, which will be used to modify the specified value.",
							"sid": 539771032584735
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "\"theAngle\" because \"angle\" is a reserved keyword."
						},
						{
							"id": "set-function-return-value",
							"objectClass": "Functions",
							"sid": 410065321337001,
							"parameters": {
								"value": "value * lerp(.5, 1, abs(abs(theAngle) - QUARTER_CIRCLE) / QUARTER_CIRCLE)"
							}
						}
					],
					"sid": 230942831711372
				},
				{
					"functionName": "arrayLookup",
					"functionDescription": "look up a value in an array",
					"functionCategory": "data",
					"functionReturnType": "string",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "array",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 138615066068748
						},
						{
							"name": "sourceColumn",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 749816088821036
						},
						{
							"name": "valueToFind",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 918344827624248
						},
						{
							"name": "targetColumn",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 291672800255140
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 787369920357309,
							"parameters": {
								"object": "queriedArrays",
								"expression": "queriedArrays.ObjectTypeName",
								"comparison": 0,
								"value": "array"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "pick the array that was passed (the calling event might not pick it, so we can't use \"copy picked\")"
						}
					],
					"sid": 643674845440053,
					"children": [
						{
							"eventType": "variable",
							"name": "targetColumnNumber",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": true,
							"isConstant": false,
							"sid": 559595863195308
						},
						{
							"eventType": "variable",
							"name": "sourceColumnNumber",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": true,
							"isConstant": false,
							"sid": 959500024424395
						},
						{
							"eventType": "variable",
							"name": "returnValue",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"isStatic": true,
							"isConstant": false,
							"sid": 148176261089754
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each-element",
									"objectClass": "queriedArrays",
									"sid": 165803417552242,
									"parameters": {
										"axes": "x"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "loop through the column headers to find the columns we want"
								},
								{
									"type": "comment",
									"text": "\"stop loop\" doesn't work with the array loops. using a standard loop with arrays.width wasn't working either for some reason"
								}
							],
							"sid": 946216334824181,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-current-value",
											"objectClass": "queriedArrays",
											"sid": 540675478633314,
											"parameters": {
												"comparison": 0,
												"value": "sourceColumn"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "this line cannot be combined into the previous line"
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 870520498246570,
											"parameters": {
												"variable": "sourceColumnNumber",
												"value": "queriedArrays.CurX"
											}
										}
									],
									"sid": 660086940294346
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-current-value",
											"objectClass": "queriedArrays",
											"sid": 265769457322804,
											"parameters": {
												"comparison": 0,
												"value": "targetColumn"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 148872933326070,
											"parameters": {
												"variable": "targetColumnNumber",
												"value": "queriedArrays.CurX"
											}
										}
									],
									"sid": 567741713139032
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 572601404125749,
									"parameters": {
										"name": "\"\"",
										"start-index": "1",
										"end-index": "queriedArrays.Height"
									}
								},
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 628104764048334,
									"parameters": {
										"first-value": "queriedArrays.At(sourceColumnNumber, loopindex)",
										"comparison": 0,
										"second-value": "valueToFind"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "loop through the cells of just that column to find the value we want, skipping the header row. Once we find it, set returnValue to the value of the cell located in that row but column of targetColumnNumber"
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 134057885551602,
									"parameters": {
										"variable": "returnValue",
										"value": "queriedArrays.At(targetColumnNumber, loopindex)"
									}
								}
							],
							"sid": 895434417246662,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 956672283334857,
											"parameters": {
												"first-value": "returnValue",
												"comparison": 1,
												"second-value": "\"\""
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "once we have a return value, stop the loop (we're not sure if setting a return value also ends the function)"
										},
										{
											"id": "stop-loop",
											"objectClass": "System",
											"sid": 596610162597647
										},
										{
											"id": "set-function-return-value",
											"objectClass": "Functions",
											"sid": 211056130340703,
											"parameters": {
												"value": "returnValue"
											}
										}
									],
									"sid": 721602884260980
								}
							]
						}
					]
				},
				{
					"functionName": "getColumnNumber",
					"functionDescription": "Find the column number of a column by its name",
					"functionCategory": "data",
					"functionReturnType": "number",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "array",
							"type": "string",
							"initialValue": "",
							"comment": "The array in which to find the column name and number",
							"sid": 417535318627685
						},
						{
							"name": "columnName",
							"type": "string",
							"initialValue": "",
							"comment": "The column name for which the number is needed",
							"sid": 535319316146738
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 969157735323348,
							"parameters": {
								"object": "queriedArrays",
								"expression": "queriedArrays.ObjectTypeName",
								"comparison": 0,
								"value": "array"
							}
						},
						{
							"id": "for-each-element",
							"objectClass": "queriedArrays",
							"sid": 809142578541249,
							"parameters": {
								"axes": "x"
							}
						},
						{
							"id": "compare-current-value",
							"objectClass": "queriedArrays",
							"sid": 807903728824992,
							"parameters": {
								"comparison": 0,
								"value": "columnName"
							}
						}
					],
					"actions": [
						{
							"id": "set-function-return-value",
							"objectClass": "Functions",
							"sid": 874778872234686,
							"parameters": {
								"value": "queriedArrays.CurX"
							}
						}
					],
					"sid": 454046452601444
				},
				{
					"functionName": "getSheetNumber",
					"functionDescription": "Find the number of a sheet by its name",
					"functionCategory": "data",
					"functionReturnType": "number",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "nameArray",
							"type": "string",
							"initialValue": "",
							"comment": "The array which contains the names of the sheets",
							"sid": 698802982475783
						},
						{
							"name": "value",
							"type": "string",
							"initialValue": "",
							"comment": "The value that we want the sheet of",
							"sid": 219389862100279
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 435052508819299,
							"parameters": {
								"object": "queriedArrays",
								"expression": "queriedArrays.ObjectTypeName",
								"comparison": 0,
								"value": "nameArray"
							}
						},
						{
							"id": "for-each-element",
							"objectClass": "queriedArrays",
							"sid": 587115061092778,
							"parameters": {
								"axes": "xy"
							}
						},
						{
							"id": "compare-current-value",
							"objectClass": "queriedArrays",
							"sid": 480528147530679,
							"parameters": {
								"comparison": 0,
								"value": "value"
							}
						}
					],
					"actions": [
						{
							"id": "set-function-return-value",
							"objectClass": "Functions",
							"sid": 166673294832581,
							"parameters": {
								"value": "queriedArrays.CurY"
							}
						}
					],
					"sid": 850952352225054
				}
			],
			"sid": 864124535956996
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "initialization",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 736058761957064,
							"parameters": {
								"first-value": "hasShadow.Count",
								"comparison": 0,
								"second-value": "shadow.Count"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "This runs every tick because we haven't found a way to implement what we actually need, \"trigger once while true per layout\""
						},
						{
							"id": "signal",
							"objectClass": "System",
							"sid": 426367471979244,
							"parameters": {
								"tag": "\"shadows have loaded\""
							}
						}
					],
					"sid": 609487433870841
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 262069484413518
						}
					],
					"actions": [],
					"sid": 803419978161680,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-in-preview",
									"objectClass": "System",
									"sid": 793697092263258
								}
							],
							"actions": [
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 852802601552517,
									"parameters": {
										"layer": "\"mechanics\"",
										"visibility": "visible"
									}
								},
								{
									"type": "comment",
									"text": "'areas' is a separate layer only for editor QoL"
								},
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 736136585495760,
									"parameters": {
										"layer": "\"areas\"",
										"visibility": "visible"
									}
								}
							],
							"sid": 700099437768094
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 201477378188011,
									"parameters": {
										"instance-variable": "relocateToX",
										"comparison": 1,
										"value": "0"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "player",
									"sid": 162468941575852,
									"parameters": {
										"instance-variable": "relocateToY",
										"comparison": 1,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "set-position",
									"objectClass": "player",
									"sid": 933631110075681,
									"parameters": {
										"x": "Self.relocateToX",
										"y": "Self.relocateToY"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "player",
									"sid": 685636843515890,
									"parameters": {
										"instance-variable": "relocateToX",
										"value": "0"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "player",
									"sid": 179115945325969,
									"parameters": {
										"instance-variable": "relocateToY",
										"value": "0"
									}
								}
							],
							"sid": 529554076428700
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 420537721796360,
									"parameters": {
										"first-value": "LayoutName",
										"comparison": 0,
										"second-value": "\"farm\""
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 497581204284210,
									"parameters": {
										"variable": "previousLayout",
										"comparison": 0,
										"value": "\"mainMenu\""
									}
								}
							],
							"actions": [
								{
									"callFunction": "load",
									"sid": 979628700487817
								},
								{
									"id": "wait-for-previous-actions",
									"objectClass": "System",
									"sid": 889391003347667
								},
								{
									"callFunction": "finishLoading1",
									"sid": 752999035541916
								}
							],
							"sid": 313423866928618
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 334121896153780
								}
							],
							"actions": [
								{
									"callFunction": "createEnemiesAndNPCs",
									"sid": 958279232482598
								},
								{
									"id": "wait-for-previous-actions",
									"objectClass": "System",
									"sid": 872046942878014
								},
								{
									"callFunction": "finishLoading1",
									"sid": 416041549484519
								}
							],
							"sid": 231295528850279
						}
					]
				},
				{
					"functionName": "finishLoading1",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 560596547835359,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-animation-playing",
									"objectClass": "shadows",
									"sid": 990450802376433,
									"parameters": {
										"animation": "\"checked\""
									}
								}
							],
							"actions": [
								{
									"id": "wait-for-signal",
									"objectClass": "System",
									"sid": 714350059363085,
									"parameters": {
										"tag": "\"shadows have loaded\""
									}
								},
								{
									"callFunction": "finishLoading2",
									"sid": 302017078913490
								}
							],
							"sid": 510864506818469
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 354976304445481
								}
							],
							"actions": [
								{
									"callFunction": "finishLoading2",
									"sid": 788146386989759
								}
							],
							"sid": 276390569487426
						}
					]
				},
				{
					"functionName": "finishLoading2",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-visible",
							"objectClass": "loadingScreen",
							"sid": 828212369123037,
							"parameters": {
								"visibility": "invisible"
							}
						},
						{
							"id": "set-layer-interactive",
							"objectClass": "System",
							"sid": 813618367214729,
							"parameters": {
								"layer": "\"main\"",
								"interactive": true
							}
						},
						{
							"id": "set-layer-interactive",
							"objectClass": "System",
							"sid": 641200977947370,
							"parameters": {
								"layer": "\"background\"",
								"interactive": true
							}
						},
						{
							"id": "set-layer-interactive",
							"objectClass": "System",
							"sid": 146762918365601,
							"parameters": {
								"layer": "\"abilityBar\"",
								"interactive": true
							}
						},
						{
							"id": "set-layer-interactive",
							"objectClass": "System",
							"sid": 555322228575380,
							"parameters": {
								"layer": "\"orbs\"",
								"interactive": true
							}
						},
						{
							"id": "set-layer-interactive",
							"objectClass": "System",
							"sid": 992097775003463,
							"parameters": {
								"layer": "\"mechanics\"",
								"interactive": true
							}
						},
						{
							"id": "fade-volume",
							"objectClass": "Audio",
							"sid": 294061638666512,
							"parameters": {
								"tag": "\"main\"",
								"db": "-100",
								"duration": "3",
								"ending": "stop"
							}
						}
					],
					"sid": 321107227740248
				},
				{
					"functionName": "load",
					"functionDescription": "Loads the game.",
					"functionCategory": "data",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": true,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "load and parse out data"
						},
						{
							"id": "request-project-file",
							"objectClass": "AJAX",
							"sid": 188103700214701,
							"parameters": {
								"tag": "\"dialog\"",
								"file": "npcDialog.json"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 851738624449654
						},
						{
							"id": "load",
							"objectClass": "npcDialogArray",
							"sid": 361903270282151,
							"parameters": {
								"json": "AJAX.LastData"
							}
						},
						{
							"id": "request-project-file",
							"objectClass": "AJAX",
							"sid": 695306524223199,
							"parameters": {
								"tag": "\"abilities\"",
								"file": "abilities.json"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 441102160954335
						},
						{
							"id": "load",
							"objectClass": "abilitiesArray",
							"sid": 458846179139460,
							"parameters": {
								"json": "AJAX.LastData"
							}
						},
						{
							"id": "request-project-file",
							"objectClass": "AJAX",
							"sid": 321885046798283,
							"parameters": {
								"tag": "\"enemies\"",
								"file": "enemies.json"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 305805820247339
						},
						{
							"id": "load",
							"objectClass": "enemiesArray",
							"sid": 187927351931252,
							"parameters": {
								"json": "AJAX.LastData"
							}
						},
						{
							"id": "createProbabilityTable",
							"objectClass": "advancedRandom",
							"sid": 125481344982735,
							"parameters": {
								"name": "\"enemies\""
							}
						},
						{
							"id": "request-project-file",
							"objectClass": "AJAX",
							"sid": 416116910033583,
							"parameters": {
								"tag": "\"equipment\"",
								"file": "equipment.json"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 978380059215073
						},
						{
							"id": "load",
							"objectClass": "equipmentArray",
							"sid": 981825842670829,
							"parameters": {
								"json": "AJAX.LastData"
							}
						},
						{
							"id": "createProbabilityTable",
							"objectClass": "advancedRandom",
							"sid": 328437321876711,
							"parameters": {
								"name": "\"equipment\""
							}
						},
						{
							"id": "request-project-file",
							"objectClass": "AJAX",
							"sid": 772788185482311,
							"parameters": {
								"tag": "\"mods\"",
								"file": "mods.json"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 900094526896274
						},
						{
							"id": "load",
							"objectClass": "modsArray",
							"sid": 574042038688160,
							"parameters": {
								"json": "AJAX.LastData"
							}
						},
						{
							"id": "request-project-file",
							"objectClass": "AJAX",
							"sid": 199724212336240,
							"parameters": {
								"tag": "\"modRelationships\"",
								"file": "modRelationships.json"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 752107183786302
						},
						{
							"id": "load",
							"objectClass": "modRelationshipsArray",
							"sid": 693355519272666,
							"parameters": {
								"json": "AJAX.LastData"
							}
						},
						{
							"id": "createProbabilityTable",
							"objectClass": "advancedRandom",
							"sid": 381900368398311,
							"parameters": {
								"name": "\"modValues\""
							}
						},
						{
							"type": "comment",
							"text": "map function mods - equipment mods"
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 113163440621889,
							"parameters": {
								"name": "\"equipmentMods\"",
								"string": "\"flatHealth\"",
								"function": "flatHealth"
							}
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 412755709204861,
							"parameters": {
								"name": "\"equipmentMods\"",
								"string": "\"flatSlash\"",
								"function": "flatSlash"
							}
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 798406420673277,
							"parameters": {
								"name": "\"equipmentMods\"",
								"string": "\"flatStab\"",
								"function": "flatStab"
							}
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 465805472564373,
							"parameters": {
								"name": "\"equipmentMods\"",
								"string": "\"flatSmash\"",
								"function": "flatSmash"
							}
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 407950191053006,
							"parameters": {
								"name": "\"equipmentMods\"",
								"string": "\"flatBlockChance\"",
								"function": "flatBlockChance"
							}
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 820921972163401,
							"parameters": {
								"name": "\"equipmentMods\"",
								"string": "\"flatManaRegen\"",
								"function": "flatManaRegen"
							}
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 588496283355576,
							"parameters": {
								"name": "\"equipmentMods\"",
								"string": "\"flatSlashAndStab\"",
								"function": "flatSlashAndStab"
							}
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 724996761106564,
							"parameters": {
								"name": "\"equipmentMods\"",
								"string": "\"flatPhysical\"",
								"function": "flatPhysical"
							}
						},
						{
							"type": "comment",
							"text": "map function mods - player abilities"
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 712921950323233,
							"parameters": {
								"name": "\"playerAbilities\"",
								"string": "\"basicAttack\"",
								"function": "basicAttack"
							}
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 623102210397069,
							"parameters": {
								"name": "\"playerAbilities\"",
								"string": "\"heroicStrike\"",
								"function": "heroicStrike"
							}
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 165582652801540,
							"parameters": {
								"name": "\"playerAbilities\"",
								"string": "\"kick\"",
								"function": "kick"
							}
						},
						{
							"type": "comment",
							"text": "map function mods - enemy abilities"
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 645488078155445,
							"parameters": {
								"name": "\"enemyAbilities\"",
								"string": "\"goblinUnderling\"",
								"function": "goblinUnderling"
							}
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 756573863445253,
							"parameters": {
								"name": "\"enemyAbilities\"",
								"string": "\"goblinWarlock\"",
								"function": "goblinWarlock"
							}
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 998015725141503,
							"parameters": {
								"name": "\"enemyAbilities\"",
								"string": "\"goblinArcher\"",
								"function": "goblinArcher"
							}
						},
						{
							"id": "set-moving-angle",
							"objectClass": "player",
							"sid": 449219917559174,
							"behaviorType": "MoveTo",
							"parameters": {
								"angle": "QUARTER_CIRCLE"
							}
						},
						{
							"id": "load-object-images-by-name",
							"objectClass": "System",
							"sid": 592263512784190,
							"parameters": {
								"object": "player.class"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 889793153000775
						},
						{
							"id": "create-object-by-name",
							"objectClass": "System",
							"sid": 516693142745191,
							"parameters": {
								"object-name": "player.class",
								"layer": "\"main\"",
								"x": "player.X",
								"y": "player.Y",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"id": "setProbabilityTable",
							"objectClass": "advancedRandom",
							"sid": 623678195648103,
							"parameters": {
								"name": "\"equipment\""
							}
						}
					],
					"sid": 591606931079912,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 116351819219430,
									"parameters": {
										"name": "\"\"",
										"start-index": "1",
										"end-index": "equipmentArray.Height - 1"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Generate equipment probability table"
								},
								{
									"id": "addProbabilityEntry",
									"objectClass": "advancedRandom",
									"sid": 639666205472895,
									"parameters": {
										"value": "equipmentArray.At(Functions.getColumnNumber(equipmentArray.ObjectTypeName, \"simpleName\"), loopindex)",
										"weight": "equipmentArray.At(Functions.getColumnNumber(equipmentArray.ObjectTypeName, \"rarity\"), loopindex)"
									}
								}
							],
							"sid": 881900960205070
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "setProbabilityTable",
									"objectClass": "advancedRandom",
									"sid": 313730633544515,
									"parameters": {
										"name": "\"enemies\""
									}
								}
							],
							"sid": 614517036972421
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 767277307109447,
									"parameters": {
										"name": "\"\"",
										"start-index": "1",
										"end-index": "enemiesArray.Height - 1"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Using a system loop is faster than the array loop here because we don't need to loop over XY, only Y, which isn't possible with array loop"
								},
								{
									"id": "addProbabilityEntry",
									"objectClass": "advancedRandom",
									"sid": 918958750738087,
									"parameters": {
										"value": "enemiesArray.At(Functions.getColumnNumber(enemiesArray.ObjectTypeName, \"simpleName\"), loopindex)",
										"weight": "enemiesArray.At(Functions.getColumnNumber(enemiesArray.ObjectTypeName, \"rarity\"), loopindex)"
									}
								}
							],
							"sid": 969695164937601
						},
						{
							"eventType": "variable",
							"name": "modTableName",
							"type": "string",
							"initialValue": "",
							"comment": "The name of the modTable to create and use",
							"isStatic": true,
							"isConstant": false,
							"sid": 220919801517194
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 937090007995574,
									"parameters": {
										"name": "\"\"",
										"start-index": "1",
										"end-index": "equipmentArray.Height - 1"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Populate the modTableNamesArray with the values from the modTable column in the equipmentArray"
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 818988151198021,
									"parameters": {
										"variable": "modTableName",
										"value": "equipmentArray.At(Functions.getColumnNumber(equipmentArray.ObjectTypeName, \"modTable\"), loopindex)"
									}
								}
							],
							"sid": 763456143255203,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "contains-value",
											"objectClass": "modTableNamesArray",
											"sid": 252605213638998,
											"parameters": {
												"value": "modTableName"
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "push",
											"objectClass": "modTableNamesArray",
											"sid": 896892717099298,
											"parameters": {
												"where": "back",
												"value": "modTableName",
												"axis": "x"
											}
										}
									],
									"sid": 835187524564695
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each-element",
									"objectClass": "modTableNamesArray",
									"sid": 427976792893791,
									"parameters": {
										"axes": "x"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 756752291793251,
									"parameters": {
										"variable": "modTableName",
										"value": "modTableNamesArray.CurValue"
									}
								},
								{
									"id": "createProbabilityTable",
									"objectClass": "advancedRandom",
									"sid": 378111053399511,
									"parameters": {
										"name": "modTableName"
									}
								},
								{
									"id": "setProbabilityTable",
									"objectClass": "advancedRandom",
									"sid": 857537133414865,
									"parameters": {
										"name": "modTableName"
									}
								}
							],
							"sid": 864894229881285,
							"children": [
								{
									"eventType": "variable",
									"name": "modName",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 699018067342483
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 322108031246328,
											"parameters": {
												"name": "\"\"",
												"start-index": "1",
												"end-index": "modRelationshipsArray.Height - 1"
											}
										},
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 974278022258087,
											"parameters": {
												"first-value": "modRelationshipsArray.At(Functions.getColumnNumber(modRelationshipsArray.ObjectTypeName, \"modTableName\"), loopindex)",
												"comparison": 0,
												"second-value": "modTableName"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 577716398394118,
											"parameters": {
												"variable": "modName",
												"value": "modRelationshipsArray.At(Functions.getColumnNumber(modRelationshipsArray.ObjectTypeName, \"mod\"), loopindex)"
											}
										},
										{
											"id": "addProbabilityEntry",
											"objectClass": "advancedRandom",
											"sid": 524413543389207,
											"parameters": {
												"value": "modName",
												"weight": "int(Functions.arrayLookup(modsArray.ObjectTypeName, \"simpleName\", modName, \"rarity\"))"
											}
										}
									],
									"sid": 419233956947461
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Create the player and abilities"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-last-created",
									"objectClass": "System",
									"sid": 833088231822802,
									"parameters": {
										"object": "body"
									}
								}
							],
							"actions": [
								{
									"id": "add-child",
									"objectClass": "player",
									"sid": 478290303396000,
									"parameters": {
										"child": "body",
										"transform-x": true,
										"transform-y": true,
										"transform-w": false,
										"transform-h": false,
										"transform-a": false,
										"transform-o": false,
										"transform-z-elevation": false,
										"transform-visibility": false,
										"destroy-with-parent": false
									}
								},
								{
									"id": "set-animation",
									"objectClass": "body",
									"sid": 381529176035671,
									"parameters": {
										"animation": "\"idleUnarmed_90\"",
										"from": "beginning"
									}
								}
							],
							"sid": 955985015402344,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each",
											"objectClass": "System",
											"sid": 910067669554608,
											"parameters": {
												"object": "abilitySlot"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "for each ability cover, create the appropriate ability on the same layer as that cover"
										},
										{
											"id": "load-object-images-by-name",
											"objectClass": "System",
											"sid": 740740986270441,
											"parameters": {
												"object": "body.ObjectTypeName & \"_ability\""
											}
										},
										{
											"id": "wait-for-previous-actions",
											"objectClass": "System",
											"sid": 345631182077315
										},
										{
											"id": "create-object-by-name",
											"objectClass": "System",
											"sid": 630695246886363,
											"parameters": {
												"object-name": "body.ObjectTypeName & \"_ability\"",
												"layer": "abilitySlot.LayerName",
												"x": "abilitySlot.X",
												"y": "abilitySlot.Y",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										}
									],
									"sid": 413159530480791,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-last-created",
													"objectClass": "System",
													"sid": 196031294098691,
													"parameters": {
														"object": "ability"
													}
												}
											],
											"actions": [
												{
													"id": "move-to-bottom",
													"objectClass": "ability",
													"sid": 201389029898242
												},
												{
													"id": "set-effect-enabled",
													"objectClass": "ability",
													"sid": 548903170872779,
													"parameters": {
														"mode": "disable",
														"effect": "\"Grayscale\""
													}
												},
												{
													"id": "set-effect-parameter",
													"objectClass": "ability",
													"sid": 851461370169948,
													"parameters": {
														"effect": "\"Grayscale\"",
														"parameter-index": "0",
														"value": "100"
													}
												},
												{
													"id": "add-child",
													"objectClass": "abilitySlot",
													"sid": 920361376648274,
													"parameters": {
														"child": "ability",
														"transform-x": true,
														"transform-y": true,
														"transform-w": true,
														"transform-h": true,
														"transform-a": true,
														"transform-o": false,
														"transform-z-elevation": true,
														"transform-visibility": false,
														"destroy-with-parent": false
													}
												}
											],
											"sid": 755236659759397
										}
									]
								},
								{
									"eventType": "comment",
									"text": "// Load the default gear of the player during this 'load' function, so the loading screen doesn't disappear until they're in."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "player",
											"sid": 589943822224574,
											"parameters": {
												"instance-variable": "class",
												"comparison": 1,
												"value": "\"man\""
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 750272037224889,
											"parameters": {
												"object": "slot",
												"expression": "slot.type",
												"comparison": 0,
												"value": "\"chest\""
											}
										}
									],
									"actions": [
										{
											"id": "load-object-images-by-name",
											"objectClass": "System",
											"sid": 294220523414173,
											"parameters": {
												"object": "body.ObjectTypeName & \"_\" & \"chest\" & \"Default_gear\""
											}
										},
										{
											"id": "wait-for-previous-actions",
											"objectClass": "System",
											"sid": 427789135441579
										},
										{
											"callFunction": "queueGearManagement",
											"sid": 642951113880653
										}
									],
									"sid": 781753122231719
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 104510266197393,
											"parameters": {
												"object": "slot",
												"expression": "slot.type",
												"comparison": 0,
												"value": "\"head\""
											}
										}
									],
									"actions": [
										{
											"id": "load-object-images-by-name",
											"objectClass": "System",
											"sid": 630339265664122,
											"parameters": {
												"object": "body.ObjectTypeName & \"_\" & \"head\" & \"Default_gear\""
											}
										},
										{
											"id": "wait-for-previous-actions",
											"objectClass": "System",
											"sid": 375584916565103
										},
										{
											"callFunction": "queueGearManagement",
											"sid": 546821670274877
										}
									],
									"sid": 260168805793814
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 752368836180608,
											"parameters": {
												"object": "slot",
												"expression": "slot.type",
												"comparison": 0,
												"value": "\"legs\""
											}
										}
									],
									"actions": [
										{
											"id": "load-object-images-by-name",
											"objectClass": "System",
											"sid": 621270635391535,
											"parameters": {
												"object": "body.ObjectTypeName & \"_\" & \"legs\" & \"Default_gear\""
											}
										},
										{
											"id": "wait-for-previous-actions",
											"objectClass": "System",
											"sid": 632171238967920
										},
										{
											"callFunction": "queueGearManagement",
											"sid": 105657799472601
										}
									],
									"sid": 437737076174307
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"callFunction": "createEnemiesAndNPCs",
									"sid": 785007419485345
								},
								{
									"id": "wait-for-previous-actions",
									"objectClass": "System",
									"sid": 880965842721203
								}
							],
							"sid": 124382633569685
						}
					]
				},
				{
					"functionName": "createEnemiesAndNPCs",
					"functionDescription": "Create enemies and NPCs.",
					"functionCategory": "world",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 655603239289141,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 516551735037452,
									"parameters": {
										"object": "npc"
									}
								}
							],
							"actions": [
								{
									"id": "load-object-images-by-name",
									"objectClass": "System",
									"sid": 242928692035216,
									"parameters": {
										"object": "npc.simpleName"
									}
								},
								{
									"id": "wait-for-previous-actions",
									"objectClass": "System",
									"sid": 653569005219897
								},
								{
									"id": "create-object-by-name",
									"objectClass": "System",
									"sid": 298518244945483,
									"parameters": {
										"object-name": "npc.simpleName",
										"layer": "\"main\"",
										"x": "npc.X",
										"y": "npc.Y",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								}
							],
							"sid": 968825910500027,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-last-created",
											"objectClass": "System",
											"sid": 905214668569085,
											"parameters": {
												"object": "npcBody"
											}
										}
									],
									"actions": [
										{
											"id": "add-child",
											"objectClass": "npc",
											"sid": 655095931274831,
											"parameters": {
												"child": "npcBody",
												"transform-x": true,
												"transform-y": true,
												"transform-w": false,
												"transform-h": false,
												"transform-a": false,
												"transform-o": false,
												"transform-z-elevation": false,
												"transform-visibility": false,
												"destroy-with-parent": false
											}
										}
									],
									"sid": 398438525605865
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Create enemies"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 237864259382694,
									"parameters": {
										"object": "enemy"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "enemy",
									"sid": 147721687882061,
									"disabled": true,
									"parameters": {
										"instance-variable": "simpleName",
										"value": "advancedRandom.WeightedByName(\"enemies\")"
									}
								},
								{
									"id": "set-width",
									"objectClass": "enemy",
									"sid": 747016912167516,
									"parameters": {
										"width": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"size\"))"
									}
								},
								{
									"id": "set-height",
									"objectClass": "enemy",
									"sid": 396327160397696,
									"parameters": {
										"height": "Self.Width / ISOMETRIC_DIVIDER"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "enemy",
									"sid": 211925452897443,
									"parameters": {
										"instance-variable": "arcaneDamage",
										"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"arcaneDamage\"))"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "enemy",
									"sid": 472107164735698,
									"parameters": {
										"instance-variable": "attackSpeed",
										"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"attackSpeed\"))"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "enemy",
									"sid": 500951262247292,
									"parameters": {
										"instance-variable": "attributes",
										"value": "Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"attributes\")"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "enemy",
									"sid": 187705958640607,
									"parameters": {
										"instance-variable": "coldDamage",
										"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"coldDamage\"))"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "enemy",
									"sid": 415450284762301,
									"parameters": {
										"instance-variable": "corruptDamage",
										"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"corruptDamage\"))"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "enemy",
									"sid": 736224320179454,
									"parameters": {
										"instance-variable": "fireDamage",
										"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"fireDamage\"))"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "enemy",
									"sid": 593369321676876,
									"parameters": {
										"instance-variable": "fullName",
										"value": "Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"fullName\")"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "enemy",
									"sid": 834486543415832,
									"parameters": {
										"instance-variable": "currentHealth",
										"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"health\"))"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "enemy",
									"sid": 912831046595706,
									"parameters": {
										"instance-variable": "maxHealth",
										"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"health\"))"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "enemy",
									"sid": 830786989454126,
									"parameters": {
										"instance-variable": "lightningDamage",
										"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"lightningDamage\"))"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "enemy",
									"sid": 991732481223834,
									"parameters": {
										"instance-variable": "slashDamage",
										"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"slashDamage\"))"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "enemy",
									"sid": 351248742948061,
									"parameters": {
										"instance-variable": "smashDamage",
										"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"smashDamage\"))"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "enemy",
									"sid": 137159179117077,
									"parameters": {
										"instance-variable": "stabDamage",
										"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"stabDamage\"))"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "enemy",
									"sid": 748880423383050,
									"parameters": {
										"instance-variable": "type",
										"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"type\"))"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "enemy",
									"sid": 496175609776514,
									"parameters": {
										"instance-variable": "attackRange",
										"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"attackRange\"))"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "enemy",
									"sid": 810592415693672,
									"parameters": {
										"instance-variable": "movementSpeed",
										"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"movementSpeed\"))"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "enemy",
									"sid": 595459648734929,
									"parameters": {
										"instance-variable": "experience",
										"value": "int(Functions.arrayLookup(enemiesArray.ObjectTypeName, \"simpleName\", Self.simpleName, \"experience\"))"
									}
								},
								{
									"type": "comment",
									"text": "set a random facing on spawn, and spawn the enemy's body"
								},
								{
									"id": "set-moving-angle",
									"objectClass": "enemy",
									"sid": 391062343479840,
									"behaviorType": "MoveTo",
									"parameters": {
										"angle": "random(-180, 180)"
									}
								},
								{
									"id": "load-object-images-by-name",
									"objectClass": "System",
									"sid": 887188726516811,
									"parameters": {
										"object": "enemy.simpleName"
									}
								},
								{
									"id": "wait-for-previous-actions",
									"objectClass": "System",
									"sid": 246706824070823
								},
								{
									"id": "create-object-by-name",
									"objectClass": "System",
									"sid": 329550713640467,
									"parameters": {
										"object-name": "enemy.simpleName",
										"layer": "\"main\"",
										"x": "enemy.X",
										"y": "enemy.Y",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								}
							],
							"sid": 889515491687626,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-last-created",
											"objectClass": "System",
											"sid": 101045617371322,
											"parameters": {
												"object": "enemyBody"
											}
										}
									],
									"actions": [
										{
											"id": "add-child",
											"objectClass": "enemy",
											"sid": 223048326433083,
											"parameters": {
												"child": "enemyBody",
												"transform-x": true,
												"transform-y": true,
												"transform-w": false,
												"transform-h": false,
												"transform-a": false,
												"transform-o": true,
												"transform-z-elevation": false,
												"transform-visibility": false,
												"destroy-with-parent": false
											}
										},
										{
											"id": "set-animation",
											"objectClass": "enemyBody",
											"sid": 684951357220071,
											"parameters": {
												"animation": "\"walk_90\"",
												"from": "beginning"
											}
										}
									],
									"sid": 562390821569660
								}
							]
						}
					]
				}
			],
			"sid": 507296452024802
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "mods",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"functionName": "manageMods",
					"functionDescription": "activate or deactivate the mods of an item to the player",
					"functionCategory": "mods",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "active",
							"type": "boolean",
							"initialValue": "false",
							"comment": "whether or not to activate or deactivate this mod",
							"sid": 608758543573668
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 502769143658461,
					"children": [
						{
							"eventType": "variable",
							"name": "mod",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"isStatic": true,
							"isConstant": false,
							"sid": 675202259414484
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 195257844547582,
									"parameters": {
										"name": "\"\"",
										"start-index": "0",
										"end-index": "tokencount(item.mods, \";\") - 2"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 144624815497568,
									"parameters": {
										"variable": "mod",
										"value": "tokenat(item.mods, loopindex, \";\")"
									}
								}
							],
							"sid": 867779511144806,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 468135131817932,
											"parameters": {
												"variable": "active"
											}
										}
									],
									"actions": [
										{
											"callFunction": "modCaller",
											"sid": 828874850314975,
											"parameters": [
												true,
												"tokenat(mod, 1, \":\")",
												"tokenat(mod, 0, \":\")"
											]
										}
									],
									"sid": 931958845924383
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 797626541149464
										}
									],
									"actions": [
										{
											"callFunction": "modCaller",
											"sid": 735049010108810,
											"parameters": [
												false,
												"tokenat(mod, 1, \":\")",
												"tokenat(mod, 0, \":\")"
											]
										}
									],
									"sid": 218511279335757
								}
							]
						}
					]
				},
				{
					"functionName": "modCaller",
					"functionDescription": "Intermediary function to call a mod function.",
					"functionCategory": "mods",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "active",
							"type": "boolean",
							"initialValue": "false",
							"comment": "",
							"sid": 185032068040398
						},
						{
							"name": "modDescription",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 668551496321785
						},
						{
							"name": "ModName",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 563496748576604
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "call-mapped-function",
							"objectClass": "Functions",
							"sid": 314460352638117,
							"parameters": {
								"name": "\"equipmentMods\"",
								"string": "modName",
								"forward-params": "0"
							}
						}
					],
					"sid": 899772844374345
				},
				{
					"functionName": "getValueFromMod",
					"functionDescription": "returns the Nth text value found inside the specified mod description",
					"functionCategory": "mods",
					"functionReturnType": "any",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "mod",
							"type": "string",
							"initialValue": "",
							"comment": "the mod description from which to extract the string",
							"sid": 615512659832660
						},
						{
							"name": "index",
							"type": "number",
							"initialValue": "0",
							"comment": "the index of the value to extract",
							"sid": 799799702803442
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-function-return-value",
							"objectClass": "Functions",
							"sid": 231109643138954,
							"parameters": {
								"value": "RegexReplace(RegexMatchAt(mod, \"\\{.*?\\}\", \"g\", index), \"\\{|}\", \"g\", \"\")"
							}
						}
					],
					"sid": 320744027056050
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "mod functions",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"functionName": "flatHealth",
							"functionDescription": "",
							"functionCategory": "mods",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "active",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"sid": 570253738943713
								},
								{
									"name": "modDescription",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 307511183096554
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 444193088646752,
							"children": [
								{
									"eventType": "variable",
									"name": "value",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 263274720117195
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 695155855001729,
											"parameters": {
												"variable": "value",
												"value": "Functions.getValueFromMod(modDescription, 0)"
											}
										}
									],
									"sid": 534777214177807
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 259894643029231,
											"parameters": {
												"variable": "active"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 197132544744124,
											"parameters": {
												"instance-variable": "maxHealth",
												"value": "value"
											}
										},
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 778544303269221,
											"parameters": {
												"instance-variable": "currentHealth",
												"value": "value"
											}
										}
									],
									"sid": 942509778023512
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 465894261465579
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "prevent removing this mod from killing the player"
										},
										{
											"id": "set-instvar-value",
											"objectClass": "player",
											"sid": 234393131366957,
											"parameters": {
												"instance-variable": "currentHealth",
												"value": "clamp(Self.currentHealth - value, 1, Self.maxHealth)"
											}
										},
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 429082425325855,
											"parameters": {
												"instance-variable": "maxHealth",
												"value": "value"
											}
										}
									],
									"sid": 122281662245358
								}
							]
						},
						{
							"functionName": "flatSlash",
							"functionDescription": "",
							"functionCategory": "mods",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "active",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"sid": 902260859033184
								},
								{
									"name": "modDescription",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 824779299585551
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 485337182466415,
							"children": [
								{
									"eventType": "variable",
									"name": "value",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 114515034340047
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 363740006116352,
											"parameters": {
												"variable": "value",
												"value": "Functions.getValueFromMod(modDescription, 0)"
											}
										}
									],
									"sid": 777594694730042
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 594579713986562,
											"parameters": {
												"variable": "active"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 284955818513996,
											"parameters": {
												"instance-variable": "slashDamage",
												"value": "value"
											}
										}
									],
									"sid": 100630951832736
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 578322709621714
										}
									],
									"actions": [
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 860832872719684,
											"parameters": {
												"instance-variable": "slashDamage",
												"value": "value"
											}
										}
									],
									"sid": 843155040696154
								}
							]
						},
						{
							"functionName": "flatStab",
							"functionDescription": "",
							"functionCategory": "mods",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "active",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"sid": 795247527844535
								},
								{
									"name": "modDescription",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 195992795428678
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 428722222280473,
							"children": [
								{
									"eventType": "variable",
									"name": "value",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 134117444559985
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 966143064087912,
											"parameters": {
												"variable": "value",
												"value": "Functions.getValueFromMod(modDescription, 0)"
											}
										}
									],
									"sid": 836654181109835
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 124294150702013,
											"parameters": {
												"variable": "active"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 299665220624183,
											"parameters": {
												"instance-variable": "stabDamage",
												"value": "value"
											}
										}
									],
									"sid": 310036445399785
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 588054324025359
										}
									],
									"actions": [
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 110376256430086,
											"parameters": {
												"instance-variable": "stabDamage",
												"value": "value"
											}
										}
									],
									"sid": 915180563061296
								}
							]
						},
						{
							"functionName": "flatSlashAndStab",
							"functionDescription": "",
							"functionCategory": "mods",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "active",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"sid": 486814130079463
								},
								{
									"name": "modDescription",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 113661033345682
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 856050339528452,
							"children": [
								{
									"eventType": "variable",
									"name": "value",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 810736970502754
								},
								{
									"eventType": "variable",
									"name": "value2",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 472590266064672
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 595553801627760,
											"parameters": {
												"variable": "value",
												"value": "Functions.getValueFromMod(modDescription, 0)"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 485531725133262,
											"parameters": {
												"variable": "value2",
												"value": "Functions.getValueFromMod(modDescription, 1)"
											}
										}
									],
									"sid": 257923106845929
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 509733711440273,
											"parameters": {
												"variable": "active"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 953003764567580,
											"parameters": {
												"instance-variable": "slashDamage",
												"value": "value"
											}
										},
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 182117520102904,
											"parameters": {
												"instance-variable": "stabDamage",
												"value": "value2"
											}
										}
									],
									"sid": 333950422080430
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 789420711930422
										}
									],
									"actions": [
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 380230977470890,
											"parameters": {
												"instance-variable": "slashDamage",
												"value": "value"
											}
										},
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 625265836678152,
											"parameters": {
												"instance-variable": "stabDamage",
												"value": "value2"
											}
										}
									],
									"sid": 163550454082777
								}
							]
						},
						{
							"functionName": "flatSmash",
							"functionDescription": "",
							"functionCategory": "mods",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "active",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"sid": 677819658597203
								},
								{
									"name": "modDescription",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 412305460215976
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 233218428812949,
							"children": [
								{
									"eventType": "variable",
									"name": "value",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 190596318771045
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 862743270532982,
											"parameters": {
												"variable": "value",
												"value": "Functions.getValueFromMod(modDescription, 0)"
											}
										}
									],
									"sid": 415952678182173
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 437744311338199,
											"parameters": {
												"variable": "active"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 125990175741193,
											"parameters": {
												"instance-variable": "smashDamage",
												"value": "value"
											}
										}
									],
									"sid": 192060783652640
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 518410678394064
										}
									],
									"actions": [
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 863032040703286,
											"parameters": {
												"instance-variable": "smashDamage",
												"value": "value"
											}
										}
									],
									"sid": 672711044894469
								}
							]
						},
						{
							"functionName": "flatBlockChance",
							"functionDescription": "",
							"functionCategory": "mods",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "active",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"sid": 442129090983909
								},
								{
									"name": "modDescription",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 892096715698480
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 346081716829858,
							"children": [
								{
									"eventType": "variable",
									"name": "value",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 342503026746160
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 665873668250678,
											"parameters": {
												"variable": "value",
												"value": "Functions.getValueFromMod(modDescription, 0)"
											}
										}
									],
									"sid": 504155363810469
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 593334773718544,
											"parameters": {
												"variable": "active"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 250993466607563,
											"parameters": {
												"instance-variable": "blockChance",
												"value": "value"
											}
										}
									],
									"sid": 366342256423378
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 537242814208340
										}
									],
									"actions": [
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 513624251503529,
											"parameters": {
												"instance-variable": "blockChance",
												"value": "value"
											}
										}
									],
									"sid": 717615008279974
								}
							]
						},
						{
							"functionName": "flatManaRegen",
							"functionDescription": "",
							"functionCategory": "mods",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "active",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"sid": 620809625623140
								},
								{
									"name": "modDescription",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 771057121423808
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 618432132660579,
							"children": [
								{
									"eventType": "variable",
									"name": "value",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 379334632151382
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 843414371578072,
											"parameters": {
												"variable": "value",
												"value": "Functions.getValueFromMod(modDescription, 0)"
											}
										}
									],
									"sid": 109070798439151
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 150944168713245,
											"parameters": {
												"variable": "active"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-instvar",
											"objectClass": "player",
											"sid": 311392191049775,
											"parameters": {
												"instance-variable": "manaRegen",
												"value": "value"
											}
										}
									],
									"sid": 968321874689214
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 437016688859259
										}
									],
									"actions": [
										{
											"id": "subtract-from-instvar",
											"objectClass": "player",
											"sid": 715372430908789,
											"parameters": {
												"instance-variable": "manaRegen",
												"value": "value"
											}
										}
									],
									"sid": 143811748396171
								}
							]
						},
						{
							"functionName": "flatPhysical",
							"functionDescription": "",
							"functionCategory": "mods",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "active",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"sid": 499944774915861
								},
								{
									"name": "modDescription",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 989673922363299
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 402192560156812,
							"children": [
								{
									"eventType": "variable",
									"name": "damageType",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 313882942019148
								},
								{
									"eventType": "variable",
									"name": "amount",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 506829206640632
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 957382791527811,
											"parameters": {
												"variable": "active"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 178928919487212,
											"parameters": {
												"variable": "amount",
												"value": "Functions.getValueFromMod(modDescription, 0)"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 716939391397843,
											"parameters": {
												"variable": "damageType",
												"value": "Functions.getValueFromMod(modDescription, 1)"
											}
										}
									],
									"sid": 460177480565386,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 647009878134427,
													"parameters": {
														"variable": "damageType",
														"comparison": 0,
														"value": "\"Slash\""
													}
												}
											],
											"actions": [
												{
													"id": "add-to-instvar",
													"objectClass": "player",
													"sid": 307075666247828,
													"parameters": {
														"instance-variable": "slashDamage",
														"value": "amount"
													}
												}
											],
											"sid": 899029722355018
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 516156131856547,
													"parameters": {
														"variable": "damageType",
														"comparison": 0,
														"value": "\"Smash\""
													}
												}
											],
											"actions": [
												{
													"id": "add-to-instvar",
													"objectClass": "player",
													"sid": 674040280899441,
													"parameters": {
														"instance-variable": "smashDamage",
														"value": "amount"
													}
												}
											],
											"sid": 605145294202577
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 148266729061949,
													"parameters": {
														"variable": "damageType",
														"comparison": 0,
														"value": "\"Stab\""
													}
												}
											],
											"actions": [
												{
													"id": "add-to-instvar",
													"objectClass": "player",
													"sid": 640283016435828,
													"parameters": {
														"instance-variable": "stabDamage",
														"value": "amount"
													}
												}
											],
											"sid": 469788707024177
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 121694386698797
										}
									],
									"actions": [],
									"sid": 869658595429510,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 649960748686757,
													"parameters": {
														"variable": "damageType",
														"comparison": 0,
														"value": "\"Slash\""
													}
												}
											],
											"actions": [
												{
													"id": "subtract-from-instvar",
													"objectClass": "player",
													"sid": 418488349775888,
													"parameters": {
														"instance-variable": "slashDamage",
														"value": "amount"
													}
												}
											],
											"sid": 158186614004615
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 637874891029247,
													"parameters": {
														"variable": "damageType",
														"comparison": 0,
														"value": "\"Smash\""
													}
												}
											],
											"actions": [
												{
													"id": "subtract-from-instvar",
													"objectClass": "player",
													"sid": 723880095772861,
													"parameters": {
														"instance-variable": "smashDamage",
														"value": "amount"
													}
												}
											],
											"sid": 735778638523005
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 347103955837597,
													"parameters": {
														"variable": "damageType",
														"comparison": 0,
														"value": "\"Stab\""
													}
												}
											],
											"actions": [
												{
													"id": "subtract-from-instvar",
													"objectClass": "player",
													"sid": 844156788201573,
													"parameters": {
														"instance-variable": "stabDamage",
														"value": "amount"
													}
												}
											],
											"sid": 171575061019100
										}
									]
								}
							]
						}
					],
					"sid": 640233763055874
				}
			],
			"sid": 368443066853777
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "environment",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-created",
							"objectClass": "lootChest",
							"sid": 403693177470265
						}
					],
					"actions": [
						{
							"id": "stop-animation",
							"objectClass": "lootChest",
							"sid": 379990486114989
						}
					],
					"sid": 460757171617526
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-created",
							"objectClass": "door",
							"sid": 956882454928944
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "save the bbox of the door on it's first frame, to be used to detect when the mouse is over it"
						},
						{
							"id": "set-instvar-value",
							"objectClass": "door",
							"sid": 909009362550791,
							"parameters": {
								"instance-variable": "bottombbox",
								"value": "Self.BBoxBottom"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "door",
							"sid": 493247108868290,
							"parameters": {
								"instance-variable": "rightbbox",
								"value": "Self.BBoxRight"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "door",
							"sid": 925254730512657,
							"parameters": {
								"instance-variable": "leftbbox",
								"value": "Self.BBoxLeft"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "door",
							"sid": 835394361289990,
							"parameters": {
								"instance-variable": "topbbox",
								"value": "Self.BBoxTop"
							}
						}
					],
					"sid": 579636236717138
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "door",
							"sid": 148369945134594,
							"parameters": {
								"instance-variable": "leftbbox",
								"comparison": 3,
								"value": "mouse.X"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "door",
							"sid": 367136965090945,
							"parameters": {
								"instance-variable": "rightbbox",
								"comparison": 5,
								"value": "mouse.X"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "door",
							"sid": 686628689504263,
							"parameters": {
								"instance-variable": "topbbox",
								"comparison": 3,
								"value": "mouse.Y"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "door",
							"sid": 709902257674375,
							"parameters": {
								"instance-variable": "bottombbox",
								"comparison": 5,
								"value": "mouse.Y"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Check that the mouse is within a box that's the shape of the door on the door's first frame. This prevents a graphical issue where the door would open enough so that the mouse would no longer be over the door, so the door would start to shut, thus being under the mouse again, repeat ad infinitum (and every tick)"
						},
						{
							"id": "set-animation-speed",
							"objectClass": "door",
							"sid": 933752701328386,
							"parameters": {
								"speed": "Self.OriginalAnimationSpeed"
							}
						},
						{
							"id": "set-animation",
							"objectClass": "door",
							"sid": 541313291022842,
							"parameters": {
								"animation": "Self.AnimationName",
								"from": "current-frame"
							}
						},
						{
							"id": "set-effect-parameter",
							"objectClass": "door",
							"sid": 158957851345472,
							"parameters": {
								"effect": "\"Brightness\"",
								"parameter-index": "0",
								"value": "105"
							}
						},
						{
							"id": "set-effect-enabled",
							"objectClass": "door",
							"sid": 101629265069819,
							"parameters": {
								"mode": "enable",
								"effect": "\"GlowHorizontal\""
							}
						},
						{
							"id": "set-effect-enabled",
							"objectClass": "door",
							"sid": 132631010688828,
							"parameters": {
								"mode": "enable",
								"effect": "\"GlowVertical\""
							}
						}
					],
					"sid": 642436103875474
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 588369458426358
						}
					],
					"actions": [
						{
							"id": "set-animation-speed",
							"objectClass": "door",
							"sid": 761190167429150,
							"parameters": {
								"speed": "-Self.OriginalAnimationSpeed"
							}
						},
						{
							"id": "set-animation",
							"objectClass": "door",
							"sid": 320003253420886,
							"parameters": {
								"animation": "Self.AnimationName",
								"from": "current-frame"
							}
						},
						{
							"id": "set-effect-parameter",
							"objectClass": "door",
							"sid": 197037995400365,
							"parameters": {
								"effect": "\"Brightness\"",
								"parameter-index": "0",
								"value": "100"
							}
						},
						{
							"id": "set-effect-enabled",
							"objectClass": "door",
							"sid": 861807936677556,
							"parameters": {
								"mode": "disable",
								"effect": "\"GlowHorizontal\""
							}
						},
						{
							"id": "set-effect-enabled",
							"objectClass": "door",
							"sid": 148024402444128,
							"parameters": {
								"mode": "disable",
								"effect": "\"GlowVertical\""
							}
						}
					],
					"sid": 374910180747516
				},
				{
					"functionName": "buildingTransition",
					"functionDescription": "Move the player in and out of a building.",
					"functionCategory": "world",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "These have to be saved to variables because the door object will be inaccessible after we change layouts."
						},
						{
							"id": "set-visible",
							"objectClass": "loadingScreen",
							"sid": 829008042264045,
							"parameters": {
								"visibility": "visible"
							}
						},
						{
							"id": "stop",
							"objectClass": "player",
							"sid": 607562531417494,
							"behaviorType": "MoveTo"
						},
						{
							"id": "set-instvar-value",
							"objectClass": "player",
							"sid": 754258952321980,
							"parameters": {
								"instance-variable": "relocateToX",
								"value": "door.relocateToX"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "player",
							"sid": 976662891535172,
							"parameters": {
								"instance-variable": "relocateToY",
								"value": "door.relocateToY"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 833203496811020,
							"parameters": {
								"variable": "previousLayout",
								"value": "LayoutName"
							}
						},
						{
							"id": "go-to-layout-by-name",
							"objectClass": "System",
							"sid": 414950710571795,
							"parameters": {
								"layout": "door.layout"
							}
						},
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 210074657667276,
							"parameters": {
								"variable": "isOnInteractCooldown",
								"value": "true"
							}
						}
					],
					"sid": 605751022796155
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-on-screen",
							"objectClass": "door",
							"sid": 346476188900140
						},
						{
							"id": "pick-parent",
							"objectClass": "door",
							"sid": 521705764688664,
							"parameters": {
								"parent": "sortable",
								"which": "own"
							}
						}
					],
					"actions": [
						{
							"id": "move-to-object",
							"objectClass": "door",
							"sid": 631990991231225,
							"parameters": {
								"where": "in-front",
								"object": "sortable"
							}
						}
					],
					"sid": 235939344330391
				}
			],
			"sid": 992252066588856
		}
	],
	"sid": 318845921999986
}